var WP3=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?b(e):t}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v(e);if(t){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return E(this,n)}}function A(e,t,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function C(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return a;r++}}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return r;r++}return-1},configurable:!0,writable:!0});var R={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="},I=function(){var e,t,n,i,r,a,o=[],s=o.concat,l=o.filter,u=o.slice,c=window.document,d={},h={},p={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,y=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,g=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,m=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],E=c.createElement("table"),k=c.createElement("tr"),A={tr:c.createElement("tbody"),tbody:E,thead:E,tfoot:E,td:k,th:k,"*":c.createElement("div")},_=/complete|loaded|interactive/,T=/^[\w-]*$/,w={},S=w.toString,C={},R=c.createElement("div"),I={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},D=Array.isArray||function(e){return e instanceof Array};function O(e){return null==e?String(e):w[S.call(e)]||"object"}function P(e){return"function"==O(e)}function x(e){return null!=e&&e==e.window}function L(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function M(e){return"object"==O(e)}function N(e){return M(e)&&!x(e)&&Object.getPrototypeOf(e)==Object.prototype}function U(e){var t=!!e&&"length"in e&&e.length,i=n.type(e);return"function"!=i&&!x(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function B(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function F(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function j(e,t){return"number"!=typeof t||p[B(e)]?t:t+"px"}function H(e){return"children"in e?u.call(e.children):n.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function V(e,t){var n,i=e?e.length:0;for(n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function K(n,i,r){for(t in i)r&&(N(i[t])||D(i[t]))?(N(i[t])&&!N(n[t])&&(n[t]={}),D(i[t])&&!D(n[t])&&(n[t]=[]),K(n[t],i[t],r)):i[t]!==e&&(n[t]=i[t])}function z(e,t){return null==t?n(e):n(e).filter(t)}function G(e,t,n,i){return P(t)?t.call(e,n,i):t}function W(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function Y(t,n){var i=t.className||"",r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function $(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function q(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)q(e.childNodes[n],t)}return C.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,a=!r;return a&&(r=R).appendChild(e),i=~C.qsa(r,t).indexOf(e),a&&R.removeChild(e),i},r=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},a=function(e){return l.call(e,(function(t,n){return e.indexOf(t)==n}))},C.fragment=function(t,i,r){var a,o,s;return y.test(t)&&(a=n(c.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(g,"<$1></$2>")),i===e&&(i=f.test(t)&&RegExp.$1),i in A||(i="*"),(s=A[i]).innerHTML=""+t,a=n.each(u.call(s.childNodes),(function(){s.removeChild(this)}))),N(r)&&(o=n(a),n.each(r,(function(e,t){b.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),a},C.Z=function(e,t){return new V(e,t)},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,i){var r,a;if(!t)return C.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&f.test(t))r=C.fragment(t,RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}else{if(P(t))return n(c).ready(t);if(C.isZ(t))return t;if(D(t))a=t,r=l.call(a,(function(e){return null!=e}));else if(M(t))r=[t],t=null;else if(f.test(t))r=C.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}}return C.Z(r,t)},(n=function(e,t){return C.init(e,t)}).extend=function(e){var t,n=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){K(e,n,t)})),e},C.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],a=i||r?t.slice(1):t,o=T.test(a);return e.getElementById&&o&&i?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(o&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},n.type=O,n.isFunction=P,n.isWindow=x,n.isArray=D,n.isPlainObject=N,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},n.inArray=function(e,t,n){return o.indexOf.call(t,e,n)},n.camelCase=r,n.trim=function(e){return null==e?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(e,t){var i,r,a,o,s=[];if(U(e))for(r=0;r<e.length;r++)null!=(i=t(e[r],r))&&s.push(i);else for(a in e)null!=(i=t(e[a],a))&&s.push(i);return(o=s).length>0?n.fn.concat.apply([],o):o},n.each=function(e,t){var n,i;if(U(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},n.grep=function(e,t){return l.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){w["[object "+t+"]"]=t.toLowerCase()})),n.fn={constructor:C.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=C.isZ(t)?t.toArray():t;return s.apply(C.isZ(this)?this.toArray():this,n)},map:function(e){return n(n.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return n(u.apply(this,arguments))},ready:function(e){return _.test(c.readyState)&&c.body?e(n):c.addEventListener("DOMContentLoaded",(function(){e(n)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):n(l.call(this,(function(t){return C.matches(t,e)})))},add:function(e,t){return n(a(this.concat(n(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var i=[];if(P(t)&&t.call!==e)this.each((function(e){t.call(this,e)||i.push(this)}));else{var r="string"==typeof t?this.filter(t):U(t)&&P(t.item)?u.call(t):n(t);this.forEach((function(e){r.indexOf(e)<0&&i.push(e)}))}return n(i)},has:function(e){return this.filter((function(){return M(e)?n.contains(this,e):n(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!M(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!M(e)?e:n(e)},find:function(e){var t=this;return e?"object"==typeof e?n(e).filter((function(){var e=this;return o.some.call(t,(function(t){return n.contains(t,e)}))})):1==this.length?n(C.qsa(this[0],e)):this.map((function(){return C.qsa(this,e)})):n()},closest:function(e,t){var i=[],r="object"==typeof e&&n(e);return this.each((function(n,a){for(;a&&!(r?r.indexOf(a)>=0:C.matches(a,e));)a=a!==t&&!L(a)&&a.parentNode;a&&i.indexOf(a)<0&&i.push(a)})),n(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=n.map(i,(function(e){if((e=e.parentNode)&&!L(e)&&t.indexOf(e)<0)return t.push(e),e}));return z(t,e)},parent:function(e){return z(a(this.pluck("parentNode")),e)},children:function(e){return z(this.map((function(){return H(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return z(this.map((function(e,t){return l.call(H(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return n.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,d[e]||(t=c.createElement(e),c.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=P(e);if(this[0]&&!t)var i=n(e).get(0),r=i.parentNode||this.length>1;return this.each((function(a){n(this).wrapAll(t?e.call(this,a):r?i.cloneNode(!0):i)}))},wrapAll:function(e){if(this[0]){var t;for(n(this[0]).before(e=n(e));(t=e.children()).length;)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=P(e);return this.each((function(i){var r=n(this),a=r.contents(),o=t?e.call(this,i):e;a.length?a.wrapAll(o):r.append(o)}))},unwrap:function(){return this.parent().each((function(){n(this).replaceWith(n(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var i=n(this);(t===e?"none"==i.css("display"):t)?i.show():i.hide()}))},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var i=this.innerHTML;n(this).empty().append(G(this,e,t,i))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=G(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(n,i){var r;return"string"!=typeof n||1 in arguments?this.each((function(e){if(1===this.nodeType)if(M(n))for(t in n)W(this,t,n[t]);else W(this,n,G(this,i,e,this.getAttribute(n)))})):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(n))?r:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){W(this,e)}),this)}))},prop:function(e,t){return e=I[e]||e,1 in arguments?this.each((function(n){this[e]=G(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=I[e]||e,this.each((function(){delete this[e]}))},data:function(t,n){var i="data-"+t.replace(m,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?$(r):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=G(this,e,t,this.value)}))):this[0]&&(this[0].multiple?n(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var i=n(this),r=G(this,e,t,i.offset()),a=i.offsetParent().offset(),o={top:r.top-a.top,left:r.left-a.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!n.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,i){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[r(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(D(e)){if(!a)return;var o={},s=getComputedStyle(a,"");return n.each(e,(function(e,t){o[t]=a.style[r(t)]||s.getPropertyValue(t)})),o}}var l="";if("string"==O(e))i||0===i?l=B(e)+":"+j(e,i):this.each((function(){this.style.removeProperty(B(e))}));else for(t in e)e[t]||0===e[t]?l+=B(t)+":"+j(t,e[t])+";":this.each((function(){this.style.removeProperty(B(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(Y(e))}),F(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){i=[];var r=Y(this);G(this,e,t,r).split(/\s+/g).forEach((function(e){n(this).hasClass(e)||i.push(e)}),this),i.length&&Y(this,r+(r?" ":"")+i.join(" "))}})):this},removeClass:function(t){return this.each((function(n){if("className"in this){if(t===e)return Y(this,"");i=Y(this),G(this,t,n,i).split(/\s+/g).forEach((function(e){i=i.replace(F(e)," ")})),Y(this,i.trim())}}))},toggleClass:function(t,i){return t?this.each((function(r){var a=n(this);G(this,t,r,Y(this)).split(/\s+/g).forEach((function(t){(i===e?!a.hasClass(t):i)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),r=v.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(n(e).css("margin-top"))||0,i.left-=parseFloat(n(e).css("margin-left"))||0,r.top+=parseFloat(n(t[0]).css("border-top-width"))||0,r.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||c.body;e&&!v.test(e.nodeName)&&"static"==n(e).css("position");)e=e.offsetParent;return e}))}},n.fn.detach=n.fn.remove,["width","height"].forEach((function(t){var i=t.replace(/./,(function(e){return e[0].toUpperCase()}));n.fn[t]=function(r){var a,o=this[0];return r===e?x(o)?o["inner"+i]:L(o)?o.documentElement["scroll"+i]:(a=this.offset())&&a[t]:this.each((function(e){(o=n(this)).css(t,G(this,r,e,o[t]()))}))}})),["after","prepend","before","append"].forEach((function(t,i){var r=i%2;n.fn[t]=function(){var t,a,o=n.map(arguments,(function(i){var r=[];return"array"==(t=O(i))?(i.forEach((function(t){return t.nodeType!==e?r.push(t):n.zepto.isZ(t)?r=r.concat(t.get()):void(r=r.concat(C.fragment(t)))})),r):"object"==t||null==i?i:C.fragment(i)})),s=this.length>1;return o.length<1?this:this.each((function(e,t){a=r?t:t.parentNode,t=0==i?t.nextSibling:1==i?t.firstChild:2==i?t:null;var l=n.contains(c.documentElement,a);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!a)return n(e).remove();a.insertBefore(e,t),l&&q(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},n.fn[r?t+"To":"insert"+(i?"Before":"After")]=function(e){return n(e)[t](this),this}})),C.Z.prototype=V.prototype=n.fn,C.uniq=a,C.deserializeValue=$,n.zepto=C,n}();window.Zepto=I,void 0===window.$&&(window.$=I),function(e){var t,n,i=+new Date,r=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=r.createElement("a");function h(t,n,i,a){if(t.global)return function(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}(n||r,i,a)}function p(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===h(t,n,"ajaxBeforeSend",[e,t]))return!1;h(t,n,"ajaxSend",[e,t])}function f(e,t,n,i){var r=n.context,a="success";n.success.call(r,e,a,t),i&&i.resolveWith(r,[e,a,t]),h(n,r,"ajaxSuccess",[t,n,e]),g(a,t,n)}function y(e,t,n,i,r){var a=i.context;i.error.call(a,n,t,e),r&&r.rejectWith(a,[n,t,e]),h(i,a,"ajaxError",[n,i,e||t]),g(t,n,i)}function g(t,n,i){var r=i.context;i.complete.call(r,n,t),h(i,r,"ajaxComplete",[n,i]),function(t){t.global&&!--e.active&&h(t,null,"ajaxStop")}(i)}function v(){}function m(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function b(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var a,o,s=t.jsonpCallback,l=(e.isFunction(s)?s():s)||"Zepto"+i++,u=r.createElement("script"),c=window[l],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return n&&n.promise(h),e(u).on("load error",(function(i,r){clearTimeout(o),e(u).off().remove(),"error"!=i.type&&a?f(a[0],h,t,n):y(null,r||"error",h,t,n),window[l]=c,a&&e.isFunction(c)&&c(a[0]),c=a=void 0})),!1===p(h,t)?(d("abort"),h):(window[l]=function(){a=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),r.head.appendChild(u),t.timeout>0&&(o=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:v,success:v,error:v,complete:v,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:v},e.ajax=function(i){var a,g,b=e.extend({},i||{}),E=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===b[t]&&(b[t]=e.ajaxSettings[t]);!function(t){t.global&&0==e.active++&&h(t,null,"ajaxStart")}(b),b.crossDomain||((a=r.createElement("a")).href=b.url,a.href=a.href,b.crossDomain=d.protocol+"//"+d.host!=a.protocol+"//"+a.host),b.url||(b.url=window.location.toString()),(g=b.url.indexOf("#"))>-1&&(b.url=b.url.slice(0,g)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=m(t.url,t.data),t.data=void 0)}(b);var k=b.dataType,A=/\?.+=\?/.test(b.url);if(A&&(k="jsonp"),!1!==b.cache&&(i&&!0===i.cache||"script"!=k&&"jsonp"!=k)||(b.url=m(b.url,"_="+Date.now())),"jsonp"==k)return A||(b.url=m(b.url,b.jsonp?b.jsonp+"=?":!1===b.jsonp?"":"callback=?")),e.ajaxJSONP(b,E);var _,T=b.accepts[k],w={},S=function(e,t){w[e.toLowerCase()]=[e,t]},C=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,R=b.xhr(),I=R.setRequestHeader;if(E&&E.promise(R),b.crossDomain||S("X-Requested-With","XMLHttpRequest"),S("Accept",T||"*/*"),(T=b.mimeType||T)&&(T.indexOf(",")>-1&&(T=T.split(",",2)[0]),R.overrideMimeType&&R.overrideMimeType(T)),(b.contentType||!1!==b.contentType&&b.data&&"GET"!=b.type.toUpperCase())&&S("Content-Type",b.contentType||"application/x-www-form-urlencoded"),b.headers)for(n in b.headers)S(n,b.headers[n]);if(R.setRequestHeader=S,R.onreadystatechange=function(){if(4==R.readyState){R.onreadystatechange=v,clearTimeout(_);var t,n=!1;if(R.status>=200&&R.status<300||304==R.status||0==R.status&&"file:"==C){if(k=k||function(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==l?"json":o.test(e)?"script":s.test(e)&&"xml")||"text"}(b.mimeType||R.getResponseHeader("content-type")),"arraybuffer"==R.responseType||"blob"==R.responseType)t=R.response;else{t=R.responseText;try{t=function(e,t,n){if(n.dataFilter==v)return e;var i=n.context;return n.dataFilter.call(i,e,t)}(t,k,b),"script"==k?(0,eval)(t):"xml"==k?t=R.responseXML:"json"==k&&(t=c.test(t)?null:e.parseJSON(t))}catch(e){n=e}if(n)return y(n,"parsererror",R,b,E)}f(t,R,b,E)}else y(R.statusText||null,R.status?"error":"abort",R,b,E)}},!1===p(R,b))return R.abort(),y(null,"abort",R,b,E),R;var D=!("async"in b)||b.async;if(R.open(b.type,b.url,D,b.username,b.password),b.xhrFields)for(n in b.xhrFields)R[n]=b.xhrFields[n];for(n in w)I.apply(R,w[n]);return b.timeout>0&&(_=setTimeout((function(){R.onreadystatechange=v,R.abort(),y(null,"timeout",R,b,E)}),b.timeout)),R.send(b.data?b.data:null),R},e.get=function(){return e.ajax(b.apply(null,arguments))},e.post=function(){var t=b.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=b.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,o=this,s=t.split(/\s/),l=b(t,n,i),u=l.success;return s.length>1&&(l.url=s[0],r=s[1]),l.success=function(t){o.html(r?e("<div>").html(t.replace(a,"")).find(r):t),u&&u.apply(o,arguments)},e.ajax(l),this};var E=encodeURIComponent;function k(t,n,i,r){var a,o=e.isArray(n),s=e.isPlainObject(n);e.each(n,(function(n,l){a=e.type(l),r&&(n=i?r:r+"["+(s||"object"==a||"array"==a?n:"")+"]"),!r&&o?t.add(l.name,l.value):"array"==a||!i&&"object"==a?k(t,l,i,n):t.add(n,l)}))}e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(E(t)+"="+E(n))},k(i,t,n),i.join("&").replace(/%20/g,"+")}}(I),function(e){e.Callbacks=function(t){t=e.extend({},t);var n,i,r,a,o,s,l=[],u=!t.once&&[],c=function(e){for(n=t.memory&&e,i=!0,s=a||0,a=0,o=l.length,r=!0;l&&s<o;++s)if(!1===l[s].apply(e[0],e[1])&&t.stopOnFalse){n=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):n?l.length=0:d.disable())},d={add:function(){if(l){var i=l.length,s=function(n){e.each(n,(function(e,n){"function"==typeof n?t.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!=typeof n&&s(n)}))};s(arguments),r?o=l.length:n&&(a=i,c(n))}return this},remove:function(){return l&&e.each(arguments,(function(t,n){for(var i;(i=e.inArray(n,l,i))>-1;)l.splice(i,1),r&&(i<=o&&--o,i<=s&&--s)})),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=[e,(t=t||[]).slice?t.slice():t],r?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!i}};return d}}(I),function(e){var t=Array.prototype.slice;function n(t){var i=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],r="pending",a={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n((function(n){e.each(i,(function(i,r){var s=e.isFunction(t[i])&&t[i];o[r[1]]((function(){var t=s&&s.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var i=this===a?n.promise():this,o=s?[t]:arguments;n[r[0]+"With"](i,o)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},o={};return e.each(i,(function(e,t){var n=t[2],s=t[3];a[t[1]]=n.add,s&&n.add((function(){r=s}),i[1^e][2].disable,i[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?a:this,arguments),this},o[t[0]+"With"]=n.fireWith})),a.promise(o),t&&t.call(o,o),o}e.when=function(i){var r,a,o,s=t.call(arguments),l=s.length,u=0,c=1!==l||i&&e.isFunction(i.promise)?l:0,d=1===c?i:n(),h=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?t.call(arguments):a,i===r?d.notifyWith(n,i):--c||d.resolveWith(n,i)}};if(l>1)for(r=new Array(l),a=new Array(l),o=new Array(l);u<l;++u)s[u]&&e.isFunction(s[u].promise)?s[u].promise().done(h(u,o,s)).fail(d.reject).progress(h(u,a,r)):--c;return c||d.resolveWith(o,s),d.promise()},e.Deferred=n}(I),function(e){var t,n=1,i=Array.prototype.slice,r=e.isFunction,a=function(e){return"string"==typeof e},o={},s={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=n++)}function h(e,t,n,i){if((t=p(t)).ns)var r=(a=t.ns,new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)"));var a;return(o[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!i||e.sel==i)}))}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function f(e,t){return e.del&&!l&&e.e in u||!!t}function y(e){return c[e]||l&&u[e]||e}function g(n,i,r,a,s,l,u){var h=d(n),g=o[h]||(o[h]=[]);i.split(/\s/).forEach((function(i){if("ready"==i)return e(document).ready(r);var o=p(i);o.fn=r,o.sel=s,o.e in c&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=l;var d=l||r;o.proxy=function(e){if(!(e=A(e)).isImmediatePropagationStopped()){e.data=a;var i=d.apply(n,e._args==t?[e]:[e].concat(e._args));return!1===i&&(e.preventDefault(),e.stopPropagation()),i}},o.i=g.length,g.push(o),"addEventListener"in n&&n.addEventListener(y(o.e),o.proxy,f(o,u))}))}function v(e,t,n,i,r){var a=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,n,i).forEach((function(t){delete o[a][t.i],"removeEventListener"in e&&e.removeEventListener(y(t.e),t.proxy,f(t,r))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:g,remove:v},e.proxy=function(t,n){var o=2 in arguments&&i.call(arguments,2);if(r(t)){var s=function(){return t.apply(n,o?o.concat(i.call(arguments)):arguments)};return s._zid=d(t),s}if(a(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var m=function(){return!0},b=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function A(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),e.each(k,(function(e,t){var r=i[e];n[e]=function(){return this[t]=m,r&&r.apply(i,arguments)},n[t]=b})),n.timeStamp||(n.timeStamp=Date.now()),(i.defaultPrevented!==t?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(n.isDefaultPrevented=m)),n}function _(e){var n,i={originalEvent:e};for(n in e)E.test(n)||e[n]===t||(i[n]=e[n]);return A(i,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(n,o,s,l,u){var c,d,h=this;return n&&!a(n)?(e.each(n,(function(e,t){h.on(e,o,s,t,u)})),h):(a(o)||r(l)||!1===l||(l=s,s=o,o=t),l!==t&&!1!==s||(l=s,s=t),!1===l&&(l=b),h.each((function(t,r){u&&(c=function(e){return v(r,e.type,l),l.apply(this,arguments)}),o&&(d=function(t){var n,a=e(t.target).closest(o,r).get(0);if(a&&a!==r)return n=e.extend(_(t),{currentTarget:a,liveFired:r}),(c||l).apply(a,[n].concat(i.call(arguments,1)))}),g(r,n,l,s,o,d||c)})))},e.fn.off=function(n,i,o){var s=this;return n&&!a(n)?(e.each(n,(function(e,t){s.off(e,i,t)})),s):(a(i)||r(o)||!1===o||(o=i,i=t),!1===o&&(o=b),s.each((function(){v(this,n,o,i)})))},e.fn.trigger=function(t,n){return(t=a(t)||e.isPlainObject(t)?e.Event(t):A(t))._args=n,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var i,r;return this.each((function(o,s){(i=_(a(t)?e.Event(t):t))._args=n,i.target=s,e.each(h(s,t.type||t),(function(e,t){if(r=t.proxy(i),i.isImmediatePropagationStopped())return!1}))})),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(e=(t=e).type);var n=document.createEvent(s[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),A(n)}}(I),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,n){try{return e(t,n)}catch(e){return null}}}}(),function(e){var t=e.zepto,n=t.qsa,i=t.matches;function r(t){return!(!(t=e(t)).width()&&!t.height())&&"none"!==t.css("display")}var a=e.expr[":"]={visible:function(){if(r(this))return this},hidden:function(){if(!r(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,n){if(e===n)return this},contains:function(t,n,i){if(e(this).text().indexOf(i)>-1)return this},has:function(e,n,i){if(t.qsa(this,i).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),s=/^\s*>/,l="Zepto"+ +new Date;function u(e,t){e=e.replace(/=#\]/g,'="#"]');var n,i,r=o.exec(e);if(r&&r[2]in a&&(n=a[r[2]],i=r[3],e=r[1],i)){var s=Number(i);i=isNaN(s)?i.replace(/^["']|["']$/g,""):s}return t(e,n,i)}t.qsa=function(i,r){return u(r,(function(a,o,u){try{var c;!a&&o?a="*":s.test(a)&&(c=e(i).addClass(l),a="."+l+" "+a);var d=n(i,a)}catch(e){throw console.error("error performing selector: %o",r),e}finally{c&&c.removeClass(l)}return o?t.uniq(e.map(d,(function(e,t){return o.call(e,t,d,u)}))):d}))},t.matches=function(e,t){return u(t,(function(t,n,r){return(!t||i(e,t))&&(!n||n.call(e,null,r)===e)}))}}(I);var D,O,P,x=I,L=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],M=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],N={},U=function(e,t){var n=e.split(".",2);t.fullVersion=e,n[0]&&(t.majorVersion=parseInt(n[0])),n[1]&&(t.minorVersion=parseInt(n[1]))},B=function(e,t,n){var i="["==t.substr(0,1)?new RegExp(t,"g"):t,r=e.split(i,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),n.fullVersion=e,r&&r[0]&&(n.majorVersion=parseInt(r[0])),r&&r[1]&&(n.minorVersion=parseInt(r[1]))},F=function(e){var t,n=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===n[1]){if(null!=(t=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(t[1])};if(null!=(t=e.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(n.splice(1,1,"Android WebView"),n.splice(2,1,t[1]));return{name:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(n[1])}}(navigator.userAgent);function j(e,t){if(t)for(var n in t){var i=Object.getOwnPropertyDescriptor(t,n);i?Object.defineProperty(e,n,i):e[n]=t[n]}return e}function H(e,t){var n=function(e){g(i,e);var n=k(i);function i(){var e;p(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),t.initialize&&t.initialize.apply(b(e),a),e}return i}(e);return j(n.prototype,t),n}N.isEdge=/edge/i.test(navigator.userAgent),N.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!N.isEdge,N.isSafari=/safari/i.test(navigator.userAgent)&&!N.isChrome&&!N.isEdge,N.isFirefox=/firefox/i.test(navigator.userAgent),N.isLegacyIE=!!window.ActiveXObject,N.isIE=N.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),N.isIE11=/trident.*rv:11/i.test(navigator.userAgent),N.isChromecast=N.isChrome&&/CrKey/i.test(navigator.userAgent),N.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),N.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),N.isAndroid=/Android/i.test(navigator.userAgent),N.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),N.isWin8App=/MSAppHost/i.test(navigator.userAgent),N.isWiiU=/WiiU/i.test(navigator.userAgent),N.isPS4=/PlayStation 4/i.test(navigator.userAgent),N.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),N.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),N.name=F.name,N.version=F.version,N.userAgent=navigator.userAgent,N.data=function(){var e,t={},n=N.userAgent.toLowerCase(),i=C(L);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a&&a[1]){if(t.name=r.name,t.group=r.group,r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&U(o[1],t)}else U(a[1],t);break}}}catch(e){i.e(e)}finally{i.f()}return t}(),N.os=function(){var e,t={},n=N.userAgent.toLowerCase(),i=C(M);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a){if(t.name=r.name,t.group=r.group,r.version)B(r.version,r.versionSeparator?r.versionSeparator:".",t);else if(a[1])B(a[1],r.versionSeparator?r.versionSeparator:".",t);else if(r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&B(o[1],r.versionSeparator?r.versionSeparator:".",t)}break}}}catch(e){i.e(e)}finally{i.f()}return t}(),N.viewport=((D={}).width=x(window).width(),D.height=x(window).height(),D),N.device=(O=N.userAgent,(P=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(O))&&(P[1]||P[2])||""),void 0!==window.orientation&&function(){switch(window.orientation){case-90:case 90:N.viewport.orientation="landscape";break;default:N.viewport.orientation="portrait"}}();var V={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},K=function(){function e(){p(this,e)}return y(e,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(e){return}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return N.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(N.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}}]),e}(),z=function(){function e(){p(this,e)}return y(e,null,[{key:"parse",value:function(e){for(var t,n=/\+/g,i=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(n," "))},a={};t=i.exec(e);)a[r(t[1]).toLowerCase()]=r(t[2]);return a}},{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}}]),e}();function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",t=0,n=z.params[e]||z.hashParams[e]||"",i=n.match(/[0-9]+[hms]+/g)||[];if(i.length>0){var r={h:3600,m:60,s:1};i.forEach((function(e){if(e){var n=e[e.length-1],i=parseInt(e.slice(0,e.length-1),10);t+=i*r[n]}}))}else n&&(t=parseInt(n,10));return t}var W={};function Y(e){return W[e]||(W[e]=0),e+ ++W[e]}function q(e){return e-parseFloat(e)+1>=0}function X(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}var Q=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),Z=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function J(){return window.navigator&&window.navigator.language}function ee(e,t){var n=(t=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:R.mp4,element:null},t)).element?t.element:document.createElement(t.type);n.muted=t.muted,!0===t.muted&&n.setAttribute("muted","muted"),!0===t.inline&&n.setAttribute("playsinline","playsinline"),n.src=t.source;var i=n.play(),r=setTimeout((function(){a(!1,new Error("Timeout ".concat(t.timeout," ms has been reached")))}),t.timeout),a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(r),e(t,n)};void 0!==i?i.then((function(){return a(!0)})).catch((function(e){return a(!1,e)})):a(!0)}var te=[],ne=function(){function e(){p(this,e)}return y(e,null,[{key:"configure",value:function(e){this.options=x.extend(this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&te.length>0?te.shift():document.createElement(e)}},{key:"garbage",value:function(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&(x(e).children().remove(),Object.values(e.attributes).forEach((function(t){return e.removeAttribute(t.name)})),te.push(e))}}]),e}();ne.options={recycleVideo:!1};var ie=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;p(this,e),this.delay=t,this.lastTime=0}return y(e,[{key:"handle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(new Date).getTime(),r=i-this.lastTime;r<this.delay&&r>0&&(t(),n&&e.preventDefault()),this.lastTime=i}}]),e}(),re={Config:K,Fullscreen:V,QueryString:z,DomRecycler:ne,assign:j,extend:H,formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;var n=(e=parseInt(e/1e3))%60,i=(e=parseInt(e/60))%60,r=(e=parseInt(e/60))%24,a=parseInt(e/24),o="";return a&&a>0&&(o+=a+":",r<1&&(o+="00:")),(r&&r>0||t)&&(o+=("0"+r).slice(-2)+":"),o+=("0"+i).slice(-2)+":",(o+=("0"+n).slice(-2)).trim()},seekStringToSeconds:G,uniqueId:Y,currentScriptUrl:X,isNumber:q,requestAnimationFrame:Q,cancelAnimationFrame:Z,getBrowserLanguage:J,now:function(){return window.performance&&window.performance.now?performance.now():Date.now()},removeArrayItem:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},listContainsIgnoreCase:function(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((function(t){return e.toLowerCase()===t.toLowerCase()}))},canAutoPlayMedia:ee,Media:R,DoubleEventHandler:ie},ae="font-weight: bold; font-size: 13px;",oe="color: #ff8000;"+ae,se="color: #ff0000;"+ae,le=["color: #0000ff;font-weight: bold; font-size: 13px;","color: #006600;font-weight: bold; font-size: 13px;",oe,se,se],ue=["debug","info","warn","error","disabled"],ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;p(this,e),this.BLACKLIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=t,this.offLevel=n}return y(e,[{key:"debug",value:function(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,2,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,3,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+ue[this.level],oe)}},{key:"level",value:function(e){this.level=e}},{key:"log",value:function(e,t,n){if(!(this.BLACKLIST.indexOf(n[0])>=0||t<this.level)){n||(n=e,e=null);var i=le[t],r="";e&&(r="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+ue[t]+"]"+r,i].concat(n))}}}]),e}();ce.LEVEL_DEBUG=0,ce.LEVEL_INFO=1,ce.LEVEL_WARN=2,ce.LEVEL_ERROR=3,ce.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},ce.setLevel=function(e){this.getInstance().level=e},ce.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},ce.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},ce.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},ce.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var de=Array.prototype.slice,he=/\s+/,pe=function(e,t,n,i){if(!n)return!0;if("object"===h(n)){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(he.test(n)){for(var a=n.split(he),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(i));return!1}return!0},fe=function(e,t,n,i){var r,a=-1,o=e.length,s=t[0],l=t[1],u=t[2];!function c(){try{switch(t.length){case 0:for(;++a<o;)(r=e[a]).callback.call(r.ctx);return;case 1:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s);return;case 2:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l);return;case 3:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l,u);return;default:for(;++a<o;)(r=e[a]).callback.apply(r.ctx,t);return}}catch(e){ce.error.apply(ce,[n,"error on event",i,"trigger","-",e]),c()}}()},ye=function(){function e(){p(this,e)}return y(e,[{key:"on",value:function(e,t,n){return pe(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this}},{key:"once",value:function(e,t,n){var i,r=this;if(!pe(this,"once",e,[t,n])||!t)return this;var a=function(){return r.off(e,i)};return i=function(){a(),t.apply(this,arguments)},this.on(e,i,n)}},{key:"off",value:function(e,t,n){var i,r,a,o,s,l,u,c;if(!this._events||!pe(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(s=0,l=(o=e?[e]:Object.keys(this._events)).length;s<l;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,c=a.length;u<c;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(ce.debug.apply(ce,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var n=de.call(arguments,1);if(!pe(this,"trigger",e,n))return this;var i=this._events[e],r=this._events.all;return i&&fe(i,n,t,e),r&&fe(r,arguments,t,e),this}},{key:"stopListening",value:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;for(var a in n||"object"!==h(t)||(n=this),e&&((i={})[e._listenId]=e),i)(e=i[a]).off(t,n,this),(r||0===Object.keys(e._events).length)&&delete this._listeningTo[a];return this}}],[{key:"register",value:function(t){e.Custom||(e.Custom={});var n="string"==typeof t&&t.toUpperCase().trim();n&&!e.Custom[n]?e.Custom[n]=n.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):ce.error("Events","Error when register event: "+t)}},{key:"listAvailableCustomEvents",value:function(){return e.Custom||(e.Custom={}),Object.keys(e.Custom).filter((function(t){return"string"==typeof e.Custom[t]}))}}]),e}(),ge={listenTo:"on",listenToOnce:"once"};Object.keys(ge).forEach((function(e){ye.prototype[e]=function(t,n,i){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=Y("l"))]=t,i||"object"!==h(n)||(i=this),t[ge[e]](n,i,this),this}})),ye.PLAYER_READY="ready",ye.PLAYER_RESIZE="resize",ye.PLAYER_FULLSCREEN="fullscreen",ye.PLAYER_PLAY="play",ye.PLAYER_PAUSE="pause",ye.PLAYER_STOP="stop",ye.PLAYER_ENDED="ended",ye.PLAYER_SEEK="seek",ye.PLAYER_ERROR="playererror",ye.ERROR="error",ye.PLAYER_TIMEUPDATE="timeupdate",ye.PLAYER_VOLUMEUPDATE="volumeupdate",ye.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",ye.PLAYBACK_PROGRESS="playback:progress",ye.PLAYBACK_TIMEUPDATE="playback:timeupdate",ye.PLAYBACK_READY="playback:ready",ye.PLAYBACK_BUFFERING="playback:buffering",ye.PLAYBACK_BUFFERFULL="playback:bufferfull",ye.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",ye.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",ye.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",ye.PLAYBACK_BITRATE="playback:bitrate",ye.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",ye.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",ye.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",ye.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",ye.PLAYBACK_DVR="playback:dvr",ye.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",ye.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",ye.PLAYBACK_ENDED="playback:ended",ye.PLAYBACK_PLAY_INTENT="playback:play:intent",ye.PLAYBACK_PLAY="playback:play",ye.PLAYBACK_PAUSE="playback:pause",ye.PLAYBACK_SEEK="playback:seek",ye.PLAYBACK_SEEKED="playback:seeked",ye.PLAYBACK_STOP="playback:stop",ye.PLAYBACK_ERROR="playback:error",ye.PLAYBACK_STATS_ADD="playback:stats:add",ye.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",ye.PLAYBACK_LEVEL_SWITCH="playback:level:switch",ye.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",ye.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",ye.CORE_CONTAINERS_CREATED="core:containers:created",ye.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",ye.CORE_OPTIONS_CHANGE="core:options:change",ye.CORE_READY="core:ready",ye.CORE_FULLSCREEN="core:fullscreen",ye.CORE_RESIZE="core:resize",ye.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",ye.CORE_MOUSE_MOVE="core:mousemove",ye.CORE_MOUSE_LEAVE="core:mouseleave",ye.CONTAINER_PLAYBACKSTATE="container:playbackstate",ye.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",ye.CONTAINER_BITRATE="container:bitrate",ye.CONTAINER_STATS_REPORT="container:stats:report",ye.CONTAINER_DESTROYED="container:destroyed",ye.CONTAINER_READY="container:ready",ye.CONTAINER_RESIZE="container:resize",ye.CONTAINER_ERROR="container:error",ye.CONTAINER_LOADEDMETADATA="container:loadedmetadata",ye.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",ye.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",ye.CONTAINER_TIMEUPDATE="container:timeupdate",ye.CONTAINER_PROGRESS="container:progress",ye.CONTAINER_PLAY="container:play",ye.CONTAINER_STOP="container:stop",ye.CONTAINER_PAUSE="container:pause",ye.CONTAINER_ENDED="container:ended",ye.CONTAINER_CLICK="container:click",ye.CONTAINER_DBLCLICK="container:dblclick",ye.CONTAINER_CONTEXTMENU="container:contextmenu",ye.CONTAINER_MOUSE_ENTER="container:mouseenter",ye.CONTAINER_MOUSE_LEAVE="container:mouseleave",ye.CONTAINER_SEEK="container:seek",ye.CONTAINER_SEEKED="container:seeked",ye.CONTAINER_VOLUME="container:volume",ye.CONTAINER_FULLSCREEN="container:fullscreen",ye.CONTAINER_STATE_BUFFERING="container:state:buffering",ye.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",ye.CONTAINER_SETTINGSUPDATE="container:settingsupdate",ye.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",ye.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",ye.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",ye.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",ye.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",ye.CONTAINER_STATS_ADD="container:stats:add",ye.CONTAINER_OPTIONS_CHANGE="container:options:change",ye.MEDIACONTROL_RENDERED="mediacontrol:rendered",ye.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",ye.MEDIACONTROL_SHOW="mediacontrol:show",ye.MEDIACONTROL_HIDE="mediacontrol:hide",ye.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",ye.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",ye.MEDIACONTROL_PLAYING="mediacontrol:playing",ye.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",ye.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",ye.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";var ve=function(e){g(n,e);var t=k(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(this,n),(e=t.call(this,i))._options=i,e.uniqueId=Y("o"),e}return y(n,[{key:"options",get:function(){return this._options}}]),n}(ye),me=/^(\S+)\s*(.*)$/,be=function(e){g(n,e);var t=k(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).cid=Y("c"),i._ensureElement(),i.delegateEvents(),i}return y(n,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]),y(n,[{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=x.zepto.isZ(e)?e:x(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){if(!e&&!(e=this.events))return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(n&&n.constructor!==Function&&(n=this[e[t]]),n){var i=t.match(me),r=i[1],a=i[2];r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n.bind(this)):this.$el.on(r,a,n.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=x.extend({},this.attributes);this.id&&(e.id=this.id),this.className&&(e.class=this.className);var t=x(ne.create(this.tagName)).attr(e);this.setElement(t,!1)}}}]),n}(ve),Ee=function(e){g(n,e);var t=k(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return p(this,n),(e=t.call(this,i)).core=r,e}return y(n,[{key:"name",get:function(){return"error"}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),y(n,[{key:"createError",value:function(e){this.core?this.core.trigger(ye.ERROR,e):ce.warn(this.name,"Core is not set. Error: ",e)}}]),n}(ve),ke={createError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},n=this.constructor&&this.constructor.type||"",i=this.name||n,r=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(i,":").concat(e&&e.code||"unknown"),o={description:"",level:Ee.Levels.FATAL,origin:i,scope:n,raw:{}},s=Object.assign({},o,e,{code:t.useCodePrefix?a:e.code});if(r&&s.level==Ee.Levels.FATAL&&!s.UI){var l={title:r.t("default_error_title"),message:r.t("default_error_message")};s.UI=l}return this.playerError?this.playerError.createError(s):ce.warn(i,"PlayerError is not defined. Error: ",s),s}},Ae=function(e){g(n,e);var t=k(n);function n(e){var i;return p(this,n),(i=t.call(this,e.options)).core=e,i.enabled=!0,i.bindEvents(),i.render(),i}return y(n,[{key:"playerError",get:function(){return this.core.playerError}}]),y(n,[{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}]),n}(be);function _e(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}Object.assign(Ae.prototype,ke),Ae.extend=function(e){return H(Ae,e)},Ae.type="core";_e(".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n");var Te=function(e){g(n,e);var t=k(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e))._i18n=i,a.currentTime=0,a.volume=100,a.playback=e.playback,a.playerError=r,a.settings=x.extend({},a.playback.settings),a.isReady=!1,a.mediaControlDisabled=!1,a.plugins=[a.playback],a.dblTapHandler=new ie(500),a.clickTimer=null,a.clickDelay=200,a.bindEvents(),a}return y(n,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}}]),y(n,[{key:"bindEvents",value:function(){this.listenTo(this.playback,ye.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,ye.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,ye.PLAYBACK_READY,this.ready),this.listenTo(this.playback,ye.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,ye.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,ye.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,ye.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,ye.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,ye.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,ye.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,ye.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,ye.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,ye.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,ye.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,ye.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,ye.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,ye.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,ye.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,ye.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,ye.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,ye.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)}},{key:"subtitleAvailable",value:function(){this.trigger(ye.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(ye.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(ye.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(ye.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(ye.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(ye.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(ye.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"animate",value:function(e,t){return this.$el.animate(e,t).promise()}},{key:"ready",value:function(){this.isReady=!0,this.trigger(ye.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(ye.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(ye.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(ye.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.trigger.apply(this,[ye.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(ye.CONTAINER_PLAY,this.name)}},{key:"paused",value:function(){this.trigger(ye.CONTAINER_PAUSE,this.name)}},{key:"play",value:function(){this.playback.play()}},{key:"stop",value:function(){this.playback.stop(),this.currentTime=0}},{key:"pause",value:function(){this.playback.pause()}},{key:"onEnded",value:function(){this.trigger(ye.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"stopped",value:function(){this.trigger(ye.CONTAINER_STOP)}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(ye.CONTAINER_CLICK,e,e.name)}),this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(ye.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(ye.CONTAINER_DBLCLICK,t,t.name)}))}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(ye.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.trigger(ye.CONTAINER_SEEK,e,this.name),this.playback.seek(e)}},{key:"onSeeked",value:function(){this.trigger(ye.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();if(e>=0&&e<=100){var n=t*(e/100);this.seek(n)}}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(ye.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(ye.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(ye.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(ye.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(ye.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(ye.CONTAINER_MOUSE_LEAVE)}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(ye.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(ye.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(ye.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(ye.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return e.checkResize()}),500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},n=t.width;(t.height!==e.height||n!==e.width)&&(this.currentSize=e,this.trigger(ye.CONTAINER_RESIZE,e))}},{key:"configure",value:function(e){this._options=x.extend(this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(ye.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){return this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]),n}(be);Object.assign(Te.prototype,ke);var we=function(e){g(n,e);var t=k(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e)).settings={},a._i18n=i,a.playerError=r,a._consented=!1,a}return y(n,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}}]),y(n,[{key:"consent",value:function(e){"function"==typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"getPlaybackType",value:function(){return n.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=x.extend(this._options,e)}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){t&&e.play()}))}},{key:"canAutoPlay",value:function(e){e(!0,null)}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}}]),n}(be);Object.assign(we.prototype,ke),we.extend=function(e){return H(we,e)},we.canPlay=function(e,t){return!1},we.VOD="vod",we.AOD="aod",we.LIVE="live",we.NO_OP="no_op",we.type="playback";var Se=function(e){g(n,e);var t=k(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e))._i18n=r,o.loader=i,o.playerError=a,o}return y(n,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}}]),y(n,[{key:"createContainers",value:function(){var e=this;return x.Deferred((function(t){t.resolve(e.options.sources.map((function(t){return e.createContainer(t)})))}))}},{key:"findPlaybackPlugin",value:function(e,t){return this.loader.playbackPlugins.filter((function(n){return n.canPlay(e,t)}))[0]}},{key:"createContainer",value:function(e){var t=null,n=this.options.mimeType;"object"===h(e)?(t=e.source.toString(),e.mimeType&&(n=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);var i=x.extend({},this.options,{src:t,mimeType:n}),r=this.findPlaybackPlugin(t,n),a=r?new r(i,this._i18n,this.playerError):new we;i=x.extend({},i,{playback:a});var o=new Te(i,this._i18n,this.playerError),s=x.Deferred();return s.promise(o),this.addContainerPlugins(o),this.listenToOnce(o,ye.CONTAINER_READY,(function(){return s.resolve(o)})),o}},{key:"addContainerPlugins",value:function(e){this.loader.containerPlugins.forEach((function(t){e.addPlugin(new t(e))}))}}]),n}(ve);_e('[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n  [data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n  [data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n  [data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n  [data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n  [data-player] b, [data-player] u, [data-player] i, [data-player] center,\n  [data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n  [data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n  [data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n  [data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n  [data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n  [data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n  [data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font: inherit;\n    font-size: 100%;\n    vertical-align: baseline; }\n  [data-player] table {\n    border-collapse: collapse;\n    border-spacing: 0; }\n  [data-player] caption, [data-player] th, [data-player] td {\n    text-align: left;\n    font-weight: normal;\n    vertical-align: middle; }\n  [data-player] q, [data-player] blockquote {\n    quotes: none; }\n    [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n      content: "";\n      content: none; }\n  [data-player] a img {\n    border: none; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n');var Ce=function(e){g(n,e);var t=k(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).playerError=new Ee(e,b(i)),i.configureDomRecycler(),i.firstResize=!0,i.plugins=[],i.containers=[],i._boundFullscreenHandler=function(){return i.handleFullscreenChange()},x(document).bind("fullscreenchange",i._boundFullscreenHandler),x(document).bind("MSFullscreenChange",i._boundFullscreenHandler),x(document).bind("mozfullscreenchange",i._boundFullscreenHandler),N.isMobile&&x(window).bind("resize",(function(e){i.handleWindowResize(e)})),i}return y(n,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new Ae(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(ye.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}}]),y(n,[{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;ne.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=x.Deferred(),this.defer.promise(this),this.containerFactory=new Se(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var e=this;this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){N.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:x(window).width(),height:x(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:x(window).width(),height:x(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function(e){q(e.height)||q(e.width)?(this.el.style.height="".concat(e.height,"px"),this.el.style.width="".concat(e.width,"px")):(this.el.style.height="".concat(e.height),this.el.style.width="".concat(e.width)),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver();this.resizeObserverInterval=setInterval((function(){e.triggerResize({width:e.el.clientWidth,height:e.el.clientHeight})}),500)}},{key:"triggerResize",value:function(e){(this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width)&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(ye.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;x.when.apply(x,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(ye.CORE_READY)}))}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=x.extend(this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),x(document).unbind("fullscreenchange",this._boundFullscreenHandler),x(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),x(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function(){this.trigger(ye.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(ye.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function(e){this.stopListening(e),this.containers=this.containers.filter((function(t){return t!==e}))}},{key:"setupContainer",value:function(e){this.listenTo(e,ye.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(ye.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var e=this;this.containers.forEach((function(t){return e.el.appendChild(t.render().el)}))}},{key:"createContainer",value:function(e,t){var n=this.containerFactory.createContainer(e,t);return this.setupContainer(n),this.el.appendChild(n.render().el),n}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e=V.fullscreenElement();if(!e)return!1;var t=this.activePlayback&&this.activePlayback.el;return e===this.el||e===t}},{key:"toggleFullscreen",value:function(){if(this.isFullscreen())V.cancelFullscreen(),!N.isiOS&&this.$el.removeClass("fullscreen nocursor");else{var e=N.isiOS?this.activePlayback&&this.activePlayback.el:this.el;if(!e)return;V.requestFullscreen(e),!N.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function(e){this.trigger(ye.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(ye.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this;this._options=x.extend(this._options,e),this.configureDomRecycler();var n=e.source||e.sources;n&&this.load(n,e.mimeType||this.options.mimeType),this.trigger(ye.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))}},{key:"appendToParent",value:function(){!(this.$el.parent()&&this.$el.parent().length)&&this.$el.appendTo(this.options.parentElement)}},{key:"render",value:function(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}]),n}(be);Object.assign(Ce.prototype,ke);var Re,Ie,De=function(e){g(n,e);var t=k(n);function n(e){var i;return p(this,n),(i=t.call(this)).player=e,i._options=e.options,i}return y(n,[{key:"loader",get:function(){return this.player.loader}}]),y(n,[{key:"create",value:function(){return this.options.loader=this.loader,this.core=new Ce(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var e=this;return this.loader.corePlugins.forEach((function(t){var n=new t(e.core);e.core.addPlugin(n),e.setupExternalInterface(n)})),this.core}},{key:"setupExternalInterface",value:function(e){var t=e.getExternalInterface();for(var n in t)this.player[n]=t[n].bind(e)}}]),n}(ve),Oe=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,Pe=function(){function e(t,n,i){p(this,e),this.major=parseInt(t||0,10),this.minor=parseInt(n||0,10),this.patch=parseInt(i||0,10)}return y(e,null,[{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.match(Oe)||[],i=_(n,4),r=i[1],a=i[2],o=i[3];return void 0===r?null:new e(r,a,o)}}]),y(e,[{key:"compare",value:function(e){var t=this.major-e.major;return t=(t=t||this.minor-e.minor)||this.patch-e.patch}},{key:"inc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"patch";return void 0!==this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}]),e}(),xe=function(e,t){return e&&t?Object.entries(e).filter((function(e){return _(e,2)[1].type===t})).reduce((function(e,t){var n=_(t,2),i=n[0],r=n[1];return e[i]=r,e}),{}):{}},Le=(Re={plugins:{},playbacks:[]},Ie="0.4.13",function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p(this,e),this.playerId=n,this.playbackPlugins=T(Re.playbacks);var i=e.registeredPlugins,r=i.core,a=i.container;this.containerPlugins=Object.values(a),this.corePlugins=Object.values(r),Array.isArray(t)||this.validateExternalPluginsType(t),this.addExternalPlugins(t)}return y(e,null,[{key:"checkVersionSupport",value:function(e){var t=e.prototype,n=t.supportedVersion,i=t.name;if(!n||!n.min)return ce.warn("Loader","missing version information for ".concat(i)),!1;var r=n.max?Pe.parse(n.max):Pe.parse(n.min).inc("minor"),a=Pe.parse(n.min);return!!Pe.parse(Ie).satisfies(a,r)||(ce.warn("Loader","unsupported plugin ".concat(i,": Clappr version ").concat(Ie," does not match required range [").concat(a,",").concat(r,")")),!1)}},{key:"registerPlugin",value:function(t){if(!t||!t.prototype.name)return ce.warn("Loader","missing information to register plugin: ".concat(t)),!1;e.checkVersionSupport(t);var n=Re.plugins;if(!n)return!1;var i=n[t.prototype.name];return i&&ce.warn("Loader","overriding plugin entry: ".concat(t.prototype.name," - ").concat(i)),n[t.prototype.name]=t,!0}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;e.checkVersionSupport(t);var n=Re.playbacks,i=n.findIndex((function(e){return e.name===t.prototype.name}));if(i>=0){var r=n[i];n.splice(i,1),ce.warn("Loader","overriding playback entry: ".concat(r.name," - ").concat(r))}return Re.playbacks=[t].concat(T(n)),!0}},{key:"unregisterPlugin",value:function(e){if(!e)return!1;var t=Re.plugins;return!!t[e]&&(delete t[e],!0)}},{key:"unregisterPlayback",value:function(e){if(!e)return!1;var t=Re.playbacks,n=t.findIndex((function(t){return t.prototype.name===e}));return!(n<0||(t.splice(n,1),Re.playbacks=t,0))}},{key:"clearPlugins",value:function(){Re.plugins={}}},{key:"clearPlaybacks",value:function(){Re.playbacks=[]}},{key:"registeredPlaybacks",get:function(){return T(Re.playbacks)}},{key:"registeredPlugins",get:function(){var e=Re.plugins;return{core:xe(e,"core"),container:xe(e,"container")}}}]),y(e,[{key:"groupPluginsByType",value:function(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}},{key:"removeDups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e,n){return e[n.prototype.name]&&t||(e[n.prototype.name]&&delete e[n.prototype.name],e[n.prototype.name]=n),e},i=e.reduceRight(n,Object.create(null)),r=[];for(var a in i)r.unshift(i[a]);return r}},{key:"addExternalPlugins",value:function(t){var n="boolean"!=typeof t.loadExternalPluginsFirst||t.loadExternalPluginsFirst,i="boolean"!=typeof t.loadExternalPlaybacksFirst||t.loadExternalPlaybacksFirst;if((t=this.groupPluginsByType(t)).playback){var r=t.playback.filter((function(t){return e.checkVersionSupport(t),!0}));this.playbackPlugins=i?this.removeDups(r.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(r),!0)}if(t.container){var a=t.container.filter((function(t){return e.checkVersionSupport(t),!0}));this.containerPlugins=n?this.removeDups(a.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(a),!0)}if(t.core){var o=t.core.filter((function(t){return e.checkVersionSupport(t),!0}));this.corePlugins=n?this.removeDups(o.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(o),!0)}}},{key:"validateExternalPluginsType",value:function(e){["playback","container","core"].forEach((function(t){(e[t]||[]).forEach((function(e){var n="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(n)}))}))}}]),e}()),Me=X().replace(/\/[^/]+$/,""),Ne=function(e){g(n,e);var t=k(n);function n(e){var i;p(this,n),i=t.call(this,e);var r={playerId:Y(""),persistConfig:!0,width:640,height:360,baseUrl:Me,allowUserInteraction:N.isMobile,playback:{recycleVideo:!0}};return i._options=x.extend(r,e),i.options.sources=i._normalizeSources(e),i.options.chromeless||(i.options.allowUserInteraction=!0),i.options.allowUserInteraction||(i.options.disableKeyboardShortcuts=!0),i._registerOptionEventListeners(i.options.events),i._coreFactory=new De(b(i)),i.options.parentId?i.setParentId(i.options.parentId):i.options.parent&&i.attachTo(i.options.parent),i}return y(n,[{key:"loader",set:function(e){this._loader=e},get:function(){return this._loader||(this._loader=new Le(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:ye.PLAYER_READY,onResize:ye.PLAYER_RESIZE,onPlay:ye.PLAYER_PLAY,onPause:ye.PLAYER_PAUSE,onStop:ye.PLAYER_STOP,onEnded:ye.PLAYER_ENDED,onSeek:ye.PLAYER_SEEK,onError:ye.PLAYER_ERROR,onTimeUpdate:ye.PLAYER_TIMEUPDATE,onVolumeUpdate:ye.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:ye.PLAYER_SUBTITLE_AVAILABLE}}}]),y(n,[{key:"setParentId",value:function(e){var t=document.querySelector(e);return t&&this.attachTo(t),this}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,ye.CORE_READY,this._onReady),this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,ye.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,ye.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,ye.CONTAINER_PLAY,this._onPlay),this.listenTo(e,ye.CONTAINER_PAUSE,this._onPause),this.listenTo(e,ye.CONTAINER_STOP,this._onStop),this.listenTo(e,ye.CONTAINER_ENDED,this._onEnded),this.listenTo(e,ye.CONTAINER_SEEK,this._onSeek),this.listenTo(e,ye.CONTAINER_ERROR,this._onError),this.listenTo(e,ye.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,ye.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,ye.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(t).length>0;return i&&Object.keys(n).forEach((function(t){var i=e.eventsMapping[t];i&&e.off(i,n[t])})),Object.keys(t).forEach((function(n){var i=e.eventsMapping[n];if(i){var r=t[n];(r="function"==typeof r&&r)&&e.on(i,r)}})),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(ye.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(ye.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(ye.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(ye.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(ye.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(){this.trigger(ye.PLAYER_PLAY)}},{key:"_onPause",value:function(){this.trigger(ye.PLAYER_PAUSE)}},{key:"_onStop",value:function(){this.trigger(ye.PLAYER_STOP,this.getCurrentTime())}},{key:"_onEnded",value:function(){this.trigger(ye.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(ye.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(ye.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(ye.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){var t=e.sources||(void 0!==e.source?[e.source]:[]);return 0===t.length?[{source:"",mimeType:""}]:t}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,n){return void 0!==n&&this.configure({autoPlay:!!n}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){return this.core.activeContainer.play(),this}},{key:"pause",value:function(){return this.core.activeContainer.pause(),this}},{key:"stop",value:function(){return this.core.activeContainer.stop(),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(e){return this.core.plugins.concat(this.core.activeContainer.plugins).filter((function(t){return t.name===e}))[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}]),n}(ve);Object.assign(Ne.prototype,ke);var Ue=function(e){g(n,e);var t=k(n);function n(e){var i;return p(this,n),(i=t.call(this,e.options)).container=e,i.enabled=!0,i.bindEvents(),i}return y(n,[{key:"playerError",get:function(){return this.container.playerError}}]),y(n,[{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),n}(ve);Object.assign(Ue.prototype,ke),Ue.extend=function(e){return H(Ue,e)},Ue.type="container";var Be=function(e){g(n,e);var t=k(n);function n(e){var i;return p(this,n),(i=t.call(this,e.options)).core=e,i.enabled=!0,i.bindEvents(),i}return y(n,[{key:"playerError",get:function(){return this.core.playerError}}]),y(n,[{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}]),n}(ve);Object.assign(Be.prototype,ke),Be.extend=function(e){return H(Be,e)},Be.type="core";var Fe=function(e){g(n,e);var t=k(n);function n(e){var i;return p(this,n),(i=t.call(this,e.options)).container=e,i.enabled=!0,i.bindEvents(),i}return y(n,[{key:"playerError",get:function(){return this.container.playerError}}]),y(n,[{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}]),n}(be);Object.assign(Fe.prototype,ke),Fe.extend=function(e){return H(Fe,e)},Fe.type="container";var je={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},He=/(.)^/,Ve={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Ke=/\\|'|\r|\n|\t|\u2028|\u2029/g,ze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Ge=new RegExp("[&<>\"']","g"),We=function(e){return null===e?"":(""+e).replace(Ge,(function(e){return ze[e]}))},Ye=0,$e=function(e,t){var n,i=new RegExp([(je.escape||He).source,(je.interpolate||He).source,(je.evaluate||He).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(i,(function(t,n,i,o,s){return a+=e.slice(r,s).replace(Ke,(function(e){return"\\"+Ve[e]})),n&&(a+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),r=s+t.length,t})),a+="';\n",je.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n//# sourceURL=/microtemplates/source["+Ye+++"]";try{n=new Function(je.variable||"obj","escapeExpr",a)}catch(e){throw e.source=a,e}if(t)return n(t,We);var o=function(e){return n.call(this,e,We)};return o.source="function("+(je.variable||"obj")+"){\n"+a+"}",o};$e.settings=je;_e("[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n");var qe={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};qe.ogv=qe.ogg,qe["3gp"]=qe["3gpp"];var Xe={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},Qe=Object.keys(Xe).reduce((function(e,t){return[].concat(T(e),T(Xe[t]))}),[]),Ze={code:"unknown",message:"unknown"},Je=function(e){g(n,e);var t=k(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];(e=t.call.apply(t,[this].concat(r)))._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._setupSrc(e.options.src),e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu;var o,s=e.options.playback,l=s.preload||(N.isSafari?"auto":e.options.preload);return e.options.poster&&("string"==typeof e.options.poster?o=e.options.poster:"string"==typeof e.options.poster.url&&(o=e.options.poster.url)),x.extend(e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:o,preload:l||"metadata",crossOrigin:s.crossOrigin,"x-webkit-playsinline":s.playInline}),(s.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),s.playInline&&e.$el.attr({playsinline:"playsinline"}),s.crossOrigin&&e.$el.attr({crossorigin:s.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],s.externalTracks&&e._setupExternalTracks(s.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return y(n,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,t=n._mimeTypesForUrl(e,Xe,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||Qe.indexOf(t[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}}]),y(n,[{key:"configure",value:function(e){A(v(n.prototype),"configure",this).call(this,e),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){n&&ce.warn(e.name,"autoplay error.",{result:t,error:n}),t&&setTimeout((function(){return!e._destroyed&&e.play()}),0)}))}},{key:"canAutoPlay",value:function(e){this.options.disableCanAutoPlay&&e(!0,null);var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};N.isMobile&&ne.options.recycleVideo&&(t.element=this.el),ee(e,t)}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(ye.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();var t=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==we.LIVE&&t&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===we.VOD||this.getPlaybackType()===we.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(ye.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?we.AOD:we.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?we.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(e){var t=this;if(this.isPlaying())A(v(n.prototype),"consent",this).call(this,e);else{var i=function i(){t.el.removeEventListener("loadedmetadata",i,!1),t.el.removeEventListener("error",i,!1),A(v(n.prototype),"consent",t).call(t,e)};this.el.addEventListener("loadedmetadata",i,!1),this.el.addEventListener("error",i,!1),this.el.load()}}},{key:"play",value:function(){this.trigger(ye.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var e=this.el.play();e&&e.catch&&e.catch((function(){}))}},{key:"pause",value:function(){this.el.pause()}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(ye.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(ye.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(ye.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){this._handleBufferingEvents(),this.trigger(ye.PLAYBACK_SEEK)}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(ye.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(ye.PLAYBACK_ENDED,this.name)}},{key:"_handleBufferingEvents",value:function(){var e=!this.el.ended&&!this.el.paused,t=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==t&&(this._isBuffering=t,t?this.trigger(ye.PLAYBACK_BUFFERING,this.name):this.trigger(ye.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var e=this.el.error||Ze,t=e.code,n=e.message,i=t===Ze.code,r=this.createError({code:t,description:n,raw:this.el.error,level:i?Ee.Levels.WARN:Ee.Levels.FATAL});i?ce.warn(this.name,"HTML5 unknown error: ",r):this.trigger(ye.PLAYBACK_ERROR,r)}},{key:"destroy",value:function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),A(v(n.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,ne.garbage(this.el)}},{key:"seek",value:function(e){this.el.currentTime=e}},{key:"seekPercentage",value:function(e){var t=this.el.duration*(e/100);this.seek(t)}},{key:"_checkInitialSeek",value:function(){var e=G();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){return this.el.duration}},{key:"_onTimeUpdate",value:function(){this.getPlaybackType()===we.LIVE?this.trigger(ye.PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name):this.trigger(ye.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,n=0;n<this.el.buffered.length;n++)e=[].concat(T(e),[{start:this.el.buffered.start(n),end:this.el.buffered.end(n)}]),this.el.currentTime>=e[n].start&&this.el.currentTime<=e[n].end&&(t=n);var i={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(ye.PLAYBACK_PROGRESS,i,e)}}},{key:"_typeFor",value:function(e){var t=n._mimeTypesForUrl(e,qe,this.options.mimeType);return 0===t.length&&(t=n._mimeTypesForUrl(e,Xe,this.options.mimeType)),(t[0]||"").split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(ye.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(ye.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(ye.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}},{key:"render",value:function(){return this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready(),this}},{key:"isReady",get:function(){return this._isReadyState}},{key:"isHTML5Video",get:function(){return this.name===n.prototype.name}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(t){return{id:e++,name:t.label,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(e){if(q(e)){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return;if("showing"===t.track.mode)return}n.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),t&&(t.track.mode="showing"),this._ccTrackId=e,this.trigger(ye.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"template",get:function(){return $e('<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n')}}]),n}(we);Je._mimeTypesForUrl=function(e,t,n){var i=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],r=n||i&&t[i.toLowerCase()]||[];return r.constructor===Array?r:[r]},Je._canPlay=function(e,t,n,i){var r=Je._mimeTypesForUrl(n,t,i),a=document.createElement(e);return!!r.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},Je.canPlay=function(e,t){return Je._canPlay("audio",Xe,e,t)||Je._canPlay("video",qe,e,t)};var et=function(e){g(n,e);var t=k(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(ye.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return we.AOD}},{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}}]),n}(Je);et.canPlay=function(e,t){return Je._canPlay("audio",{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},e,t)};_e("[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n");var tt=function(e){g(n,e);var t=k(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).el.src=e.src,i}return y(n,[{key:"getPlaybackType",value:function(){return we.NO_OP}},{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),y(n,[{key:"render",value:function(){return this.trigger(ye.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(ye.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){var t="error"===e.type?"load error":"loading aborted";this.trigger(ye.PLAYBACK_ERROR,{message:t},this.name)}}]),n}(we);tt.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};_e("[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n");var nt=function(e){g(n,e);var t=k(n);function n(){var e;p(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._noiseFrameNum=-1,e}return y(n,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"template",get:function(){return $e("<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>")}},{key:"attributes",get:function(){return{"data-no-op":""}}}]),y(n,[{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported");this.$el.html(this.template({message:e})),this.trigger(ye.PLAYBACK_READY,this.name);var t=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&t||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e,t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{e=new Uint32Array(t.data.buffer)}catch(r){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var n=t.data,i=0;i<n.length;i++)e[i]=n[i]}for(var r=e.length,a=6*Math.random()+4,o=0,s=0,l=0;l<r;){if(o<0)o=a*Math.random(),s=255*Math.pow(Math.random(),.4)<<24;o-=1,e[l++]=s}this.context.putImageData(t,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=Q((function(){return e._loop()})))}},{key:"destroy",value:function(){this._animationHandle&&(Z(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]),n}(we);nt.canPlay=function(e){return!0};var it={getStyleFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return x('<style class="clappr-style"></style>').html($e(e.toString())(t))}},rt=function(e){g(n,e);var t=k(n);function n(e){var i;return p(this,n),(i=t.call(this,e))._initializeMessages(),i}return y(n,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}}]),y(n,[{key:"t",value:function(e){var t=this._language(),n=this._messages.en;return(t&&this._messages[t]||n)[e]||n[e]||e}},{key:"_language",value:function(){return this.core.options.language||J()}},{key:"_initializeMessages",value:function(){this._messages=x.extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"Não foi possível reproduzir o vídeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vídeo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproducción de un video. Por favor, trate de usar un navegador diferente."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Désactivé",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"مباشر",back_to_live:"الرجوع إلى المباشر",disabled:"معطّل",playback_not_supported:"المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",default_error_title:"غير قادر الى التشغيل.",default_error_message:"حدثت مشكلة أثناء تحميل الفيديو."}},this.core.options.strings||{}),this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["es-419"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar}}]),n}(Be),at=function(e){g(n,e);var t=k(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var e=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];e&&this.core.containers.forEach((function(t){t!==e&&t.destroy()}))}},{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}}]),n}(Be),ot="0.4.13";Le.registerPlugin(rt),Le.registerPlugin(at),Le.registerPlayback(nt),Le.registerPlayback(tt),Le.registerPlayback(et),Le.registerPlayback(Je);var st={Player:Ne,Events:ye,Browser:N,ContainerPlugin:Ue,UIContainerPlugin:Fe,CorePlugin:Be,UICorePlugin:Ae,Playback:we,Container:Te,Core:Ce,PlayerError:Ee,Loader:Le,BaseObject:ve,UIObject:be,Utils:re,HTML5Audio:et,HTML5Video:Je,HTMLImg:tt,Log:ce,Styler:it,version:ot,template:$e,$:x},lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ut(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ct(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var dt=ut(ct((function(e,t){var n;"undefined"!=typeof window&&(n=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
    !*** ./node_modules/eventemitter3/index.js ***!
    \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var i=Object.prototype.hasOwnProperty,r="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(r=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},u.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||l(this,a);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==t||i&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&l(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
    !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
    \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var i,r,a,o,s;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=r.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
    !*** ./node_modules/webworkify-webpack/index.js ***!
    \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){function i(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var i=n(n.s=ENTRY_MODULE);return i.default||i}var r="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,i){var s={};s[i]=[];var l=t.toString(),u=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var c,d=u[1],h=new RegExp("(\\\\n|\\W)"+o(d)+a,"g");c=h.exec(l);)"dll-reference"!==c[3]&&s[i].push(c[3]);for(h=new RegExp("\\("+o(d)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+a,"g");c=h.exec(l);)e[c[2]]||(s[i].push(c[1]),e[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var p,f=Object.keys(s),y=0;y<f.length;y++)for(var g=0;g<s[f[y]].length;g++)p=s[f[y]][g],isNaN(1*p)||(s[f[y]][g]=1*s[f[y]][g]);return s}function l(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var r={main:n.m},a=t.all?{main:Object.keys(r.main)}:function(e,t){for(var n={main:[t]},i={main:[]},r={main:{}};l(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var u=a[o],c=n[u].pop();if(r[u]=r[u]||{},!r[u][c]&&e[u][c]){r[u][c]=!0,i[u]=i[u]||[],i[u].push(c);for(var d=s(e,e[u][c],u),h=Object.keys(d),p=0;p<h.length;p++)n[h[p]]=n[h[p]]||[],n[h[p]]=n[h[p]].concat(d[h[p]])}}return i}(r,e),o="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;a[e][t];)t++;a[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map((function(t){return JSON.stringify(t)+": "+r[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map((function(e){return JSON.stringify(e)+": "+r.main[e].toString()})).join(",")+"}))(self);";var u=new window.Blob([o],{type:"text/javascript"});if(t.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},"./src/crypt/decrypter.js":
/*!********************************************!*\
    !*** ./src/crypt/decrypter.js + 3 modules ***!
    \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,n){n.r(t);var i=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),r=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),p=0,f=0,y=0;for(y=0;y<256;y++)h[y]=y<128?y<<1:y<<1^283;for(y=0;y<256;y++){var g=f^f<<1^f<<2^f<<3^f<<4;g=g>>>8^255&g^99,e[p]=g,t[g]=p;var v=h[p],m=h[v],b=h[m],E=257*h[g]^16843008*g;i[p]=E<<24|E>>>8,r[p]=E<<16|E>>>16,a[p]=E<<8|E>>>24,o[p]=E,E=16843009*b^65537*m^257*v^16843008*p,l[g]=E<<24|E>>>8,u[g]=E<<16|E>>>16,c[g]=E<<8|E>>>24,d[g]=E,p?(p=v^h[h[h[b^v]]],f^=h[h[f]]):p=f=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a,o,s,l,u=this.ksRows=4*(r+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,p=this.rcon,f=this.invSubMix,y=f[0],g=f[1],v=f[2],m=f[3];for(a=0;a<u;a++)a<r?s=c[a]=t[a]:(l=s,a%r==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=p[a/r|0]<<24):r>6&&a%r==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=s=(c[a-r]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?l:y[h[l>>>24]]^g[h[l>>>16&255]]^v[h[l>>>8&255]]^m[h[255&l]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n,i){for(var r,a,o,s,l,u,c,d,h,p,f,y,g,v,m,b,E,k=this.keySize+6,A=this.invKeySchedule,_=this.invSBox,T=this.invSubMix,w=T[0],S=T[1],C=T[2],R=T[3],I=this.uint8ArrayToUint32Array_(n),D=I[0],O=I[1],P=I[2],x=I[3],L=new Int32Array(e),M=new Int32Array(L.length),N=this.networkToHostOrderSwap;t<L.length;){for(h=N(L[t]),p=N(L[t+1]),f=N(L[t+2]),y=N(L[t+3]),l=h^A[0],u=y^A[1],c=f^A[2],d=p^A[3],g=4,v=1;v<k;v++)r=w[l>>>24]^S[u>>16&255]^C[c>>8&255]^R[255&d]^A[g],a=w[u>>>24]^S[c>>16&255]^C[d>>8&255]^R[255&l]^A[g+1],o=w[c>>>24]^S[d>>16&255]^C[l>>8&255]^R[255&u]^A[g+2],s=w[d>>>24]^S[l>>16&255]^C[u>>8&255]^R[255&c]^A[g+3],l=r,u=a,c=o,d=s,g+=4;r=_[l>>>24]<<24^_[u>>16&255]<<16^_[c>>8&255]<<8^_[255&d]^A[g],a=_[u>>>24]<<24^_[c>>16&255]<<16^_[d>>8&255]<<8^_[255&l]^A[g+1],o=_[c>>>24]<<24^_[d>>16&255]<<16^_[l>>8&255]<<8^_[255&u]^A[g+2],s=_[d>>>24]<<24^_[l>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^A[g+3],g+=3,M[t]=N(r^D),M[t+1]=N(s^O),M[t+2]=N(o^P),M[t+3]=N(a^x),D=h,O=p,P=f,x=y,t+=4}return i?(m=M.buffer,b=m.byteLength,(E=b&&new DataView(m).getUint8(b-1))?m.slice(0,b-E):m):M.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),o=n("./src/errors.ts"),s=n("./src/utils/logger.js"),l=n("./src/events.js"),u=n("./src/utils/get-self-scope.js"),c=Object(u.getSelfScope)(),d=function(){function e(e,t,n){var i=(void 0===n?{}:n).removePKCS7Padding,r=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=r,r)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,n,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a),u.expandKey(t),o(u.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new r(c,t)),this.fastAesKey.expandKey().then((function(r){new i(c,n).decrypt(e,r).catch((function(i){l.onWebCryptoError(i,e,t,n,o)})).then((function(e){o(e)}))})).catch((function(i){l.onWebCryptoError(i,e,t,n,o)}))}},t.onWebCryptoError=function(e,t,n,i,r){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,i,r)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=d},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
    !*** ./src/demux/demuxer-inline.js + 12 modules ***!
    \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number-isFinite.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,n){n.r(t);var i=n("./src/events.js"),r=n("./src/errors.ts"),a=n("./src/crypt/decrypter.js"),o=n("./src/polyfills/number-isFinite.js"),s=n("./src/utils/logger.js"),l=n("./src/utils/get-self-scope.js");function u(e,t){return 255===e[t]&&240==(246&e[t+1])}function c(e,t){return 1&e[t+1]?7:9}function d(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function h(e,t){return!!(t+1<e.length&&u(e,t))}function p(e,t){if(h(e,t)){var n=c(e,t);t+5<e.length&&(n=d(e,t));var i=t+n;if(i===e.length||i+1<e.length&&u(e,i))return!0}return!1}function f(e,t,n,a,o){if(!e.samplerate){var l=function(e,t,n,a){var o,l,u,c,d,h=navigator.userAgent.toLowerCase(),p=a,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[n+2])>>>6),!((l=(60&t[n+2])>>>2)>f.length-1))return c=(1&t[n+2])<<2,c|=(192&t[n+3])>>>6,s.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+f[l]+"Hz],channelConfig:"+c),/firefox/i.test(h)?l>=6?(o=5,d=new Array(4),u=l-3):(o=2,d=new Array(2),u=l):-1!==h.indexOf("android")?(o=2,d=new Array(2),u=l):(o=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(h))||!a&&1===c)&&(o=2,d=new Array(2)),u=l)),d[0]=o<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===o&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:f[l],channelCount:c,codec:"mp4a.40."+o,manifestCodec:p};e.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(t,n,a,o);e.config=l.config,e.samplerate=l.samplerate,e.channelCount=l.channelCount,e.codec=l.codec,e.manifestCodec=l.manifestCodec,s.logger.log("parsed codec:"+e.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function y(e){return 9216e4/e}function g(e,t,n,i,r){var a=function(e,t,n,i,r){var a,o,s=e.length;if(a=c(e,t),o=d(e,t),(o-=a)>0&&t+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+i*r}}(t,n,i,r,y(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,l=a.frameLength,u={unit:t.subarray(n+s,n+s+l),pts:o,dts:o};return e.samples.push(u),{sample:u,length:l+s}}}var v=n("./src/demux/id3.js"),m=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(v.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(p(e,t))return s.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,n,i){for(var r=this._audioTrack,a=v.default.getID3Data(e,0)||[],l=v.default.getTimeStamp(a),u=Object(o.isFiniteNumber)(l)?90*l:9e4*t,c=0,d=u,p=e.length,y=a.length,m=[{pts:d,dts:d,data:a}];y<p-1;)if(h(e,y)&&y+5<p){f(r,this.observer,e,y,r.manifestCodec);var b=g(r,e,y,u,c);if(!b){s.logger.log("Unable to parse AAC frame");break}y+=b.length,d=b.sample.pts,c++}else v.default.isHeader(e,y)?(a=v.default.getID3Data(e,y),m.push({pts:d,dts:d,data:a}),y+=a.length):y++;this.remuxer.remux(r,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},t,n,i)},t.destroy=function(){},e}(),b=n("./src/demux/mp4demuxer.js"),E={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,i,r){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var o=i+r*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==n&&0!==r&&15!==r&&3!==a){var s=3===n?3-i:3===i?3:4,l=1e3*E.BitratesMap[14*s+r-1],u=3===n?0:2===n?1:2,c=E.SamplingRateMap[3*u+a],d=e[t+3]>>6==3?1:2,h=E.SamplesCoefficients[n][i],p=E.BytesInSlot[i],f=8*h*p;return{sampleRate:c,channelCount:d,frameLength:parseInt(h*l/c+o,10)*p,samplesPerFrame:f}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),i=4;n&&n.frameLength&&(i=n.frameLength);var r=t+i;if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}},k=E,A=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,n=8,i=8;for(t=0;t<e;t++)0!==i&&(i=(n+this.readEG()+256)%256),n=0===i?n:i},t.readSPS=function(){var e,t,n,i,r,a,o,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),p=this.readUEG.bind(this),f=this.readBoolean.bind(this),y=this.skipBits.bind(this),g=this.skipEG.bind(this),v=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(d(),e=d(),h(5),y(3),d(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=p();if(3===b&&y(1),v(),v(),y(1),f())for(a=3!==b?8:12,o=0;o<a;o++)f()&&m(o<6?16:64)}v();var E=p();if(0===E)p();else if(1===E)for(y(1),g(),g(),t=p(),o=0;o<t;o++)g();v(),y(1),n=p(),i=p(),0===(r=h(1))&&y(1),y(1),f()&&(s=p(),l=p(),u=p(),c=p());var k=[1,1];if(f()&&f())switch(d()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-r)*(i+1)*16-(r?2:4)*(u+c),pixelRatio:k}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),_=function(){function e(e,t,n,i){this.decryptdata=n,this.discardEPB=i,this.decrypter=new a.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,n,i){var r=e[t].unit,a=r.subarray(16,r.length-r.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),r.set(a,16),i||s.decryptAacSamples(e,t+1,n)}))},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,i),!i)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<=e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,i=32;i<=e.length-16;i+=160,n+=16)e.set(t.subarray(n,n+16),i);return e},t.decryptAvcSample=function(e,t,n,i,r,a){var o=this.discardEPB(r.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){r.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,n+1,i)}))},t.decryptAvcSamples=function(e,t,n,i){for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,i,a,o),!o)return}}}},e}(),T={video:1,audio:2,id3:3,text:4},w=function(){function e(e,t,n,i){this.observer=e,this.config=n,this.typeSupported=i,this.remuxer=t,this.sampleAes=null}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new _(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0||(n&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:T[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",r),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3",r),this._txtTrack=e.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=i,this._duration=r},t.resetTimeStamp=function(){},t.append=function(t,n,a,o){var l,u,c,d,h,p=t.length,f=!1;this.contiguous=a;var y=this.pmtParsed,g=this._avcTrack,v=this._audioTrack,m=this._id3Track,b=g.pid,E=v.pid,k=m.pid,A=this._pmtId,_=g.pesData,T=v.pesData,w=m.pesData,S=this._parsePAT,C=this._parsePMT,R=this._parsePES,I=this._parseAVCPES.bind(this),D=this._parseAACPES.bind(this),O=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),x=e._syncOffset(t);for(p-=(p+x)%188,l=x;l<p;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((d=l+5+t[l+4])===l+188)continue}else d=l+4;switch(c){case b:u&&(_&&(h=R(_))&&I(h,!1),_={data:[],size:0}),_&&(_.data.push(t.subarray(d,l+188)),_.size+=l+188-d);break;case E:u&&(T&&(h=R(T))&&(v.isAAC?D(h):O(h)),T={data:[],size:0}),T&&(T.data.push(t.subarray(d,l+188)),T.size+=l+188-d);break;case k:u&&(w&&(h=R(w))&&P(h),w={data:[],size:0}),w&&(w.data.push(t.subarray(d,l+188)),w.size+=l+188-d);break;case 0:u&&(d+=t[d]+1),A=this._pmtId=S(t,d);break;case A:u&&(d+=t[d]+1);var L=C(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=L.avc)>0&&(g.pid=b),(E=L.audio)>0&&(v.pid=E,v.isAAC=L.isAAC),(k=L.id3)>0&&(m.pid=k),f&&!y&&(s.logger.log("reparse from beginning"),f=!1,l=x-188),y=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});_&&(h=R(_))?(I(h,!0),g.pesData=null):g.pesData=_,T&&(h=R(T))?(v.isAAC?D(h):O(h),v.pesData=null):(T&&T.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=T),w&&(h=R(w))?(P(h),m.pesData=null):m.pesData=w,null==this.sampleAes?this.remuxer.remux(v,g,m,this._txtTrack,n,a,o):this.decryptAndRemux(v,g,m,this._txtTrack,n,a,o)},t.decryptAndRemux=function(e,t,n,i,r,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,n,i,r,a,o)}))}else this.decryptAndRemuxAvc(e,t,n,i,r,a,o)},t.decryptAndRemuxAvc=function(e,t,n,i,r,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,n,i,r,a,o)}))}else this.remuxer.remux(e,t,n,i,r,a,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._parsePMT=function(e,t,n,i){var r,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<r;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){s.logger.log("unknown stream type:"+e[t]);break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!i){s.logger.log("unknown stream type:"+e[t]);break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:n?-1===o.audio&&(o.audio=a,o.isAAC=!1):s.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:s.logger.warn("HEVC stream type found, not supported for now");break;default:s.logger.log("unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},t._parsePES=function(e){var t,n,i,r,a,o,l,u,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;if(192&(n=t[7])&&((o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(o-=8589934592),64&n?((l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(l-=8589934592),o-l>54e5&&(s.logger.warn(Math.round((o-l)/9e4)+"s delta between PTS and DTS, align them"),o=l)):l=o),u=(r=t[8])+9,e.size<=u)return null;e.size-=u,a=new Uint8Array(e.size);for(var p=0,f=d.length;p<f;p++){var y=(t=d[p]).byteLength;if(u){if(u>y){u-=y;continue}t=t.subarray(u),y-=u,u=0}a.set(t,c),c+=y}return i&&(i-=r+3),{data:a,pts:o,dts:l,len:i}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,i=n.length;if(isNaN(e.pts)){if(!i)return void t.dropped++;var r=n[i-1];e.pts=r.pts,e.dts=r.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(i||this.contiguous)?(e.id=i,n.push(e)):t.dropped++}e.debug.length&&s.logger.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var n,i,r,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,n,i){return{key:e,pts:t,dts:n,units:[],debug:i}};e.data=null,l&&s.length&&!o.audFound&&(c(l,o),l=this.avcSample=d(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:i=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var s=t.data;if(u&&s.length>4){var h=new A(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:i=!0,l||(l=a.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:i=!0,(n=new A(a.discardEPB(t.data))).readUByte();for(var p=0,f=0,y=!1,g=0;!y&&n.bytesAvailable>1;){p=0;do{p+=g=n.readUByte()}while(255===g);f=0;do{f+=g=n.readUByte()}while(255===g);if(4===p&&0!==n.bytesAvailable){if(y=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var m=n.readUByte(),b=31&m,E=[m,n.readUByte()];for(r=0;r<b;r++)E.push(n.readUByte()),E.push(n.readUByte()),E.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:E})}}else if(5===p&&0!==n.bytesAvailable){if(y=!0,f>16){var k=[];for(r=0;r<16;r++)k.push(n.readUByte().toString(16)),3!==r&&5!==r&&7!==r&&9!==r||k.push("-");var _=f-16,T=new Uint8Array(_);for(r=0;r<_;r++)T[r]=n.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:e.pts,payloadType:p,uuid:k.join(""),userDataBytes:T,userData:Object(v.utf8ArrayToStr)(T.buffer)})}}else if(f<n.bytesAvailable)for(r=0;r<f;r++)n.readUByte()}break;case 7:if(i=!0,u=!0,!o.sps){var w=(n=new A(t.data)).readSPS();o.width=w.width,o.height=w.height,o.pixelRatio=w.pixelRatio,o.sps=[t.data],o.duration=a._duration;var S=t.data.subarray(1,4),C="avc1.";for(r=0;r<3;r++){var R=S[r].toString(16);R.length<2&&(R="0"+R),C+=R}o.codec=C}break;case 8:i=!0,o.pps||(o.pps=[t.data]);break;case 9:i=!1,o.audFound=!0,l&&c(l,o),l=a.avcSample=d(!1,e.pts,e.dts,"");break;case 12:i=!1;break;default:i=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&i&&l.units.push(t)})),t&&l&&(c(l,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var i=n-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t._parseAVCNALu=function(e){var t,n,i,r,a=0,o=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,r=31&e[0],l=0,a=1);a<o;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){if(d>=0)i={data:e.subarray(d,a-l-1),type:r},c.push(i);else{var h=this._getLastNalUnit();if(h&&(u&&a<=4-u&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-u)),(n=a-l-1)>0)){var p=new Uint8Array(h.data.byteLength+n);p.set(h.data,0),p.set(e.subarray(0,n),h.data.byteLength),h.data=p}}a<o?(d=a,r=31&e[a],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(i={data:e.subarray(d,o),type:r,state:l},c.push(i)),0===c.length){var f=this._getLastNalUnit();if(f){var y=new Uint8Array(f.data.byteLength+e.byteLength);y.set(f.data,0),y.set(e,f.data.byteLength),f.data=y}}return s.naluState=l,c},t.discardEPB=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},t._parseAACPES=function(e){var t,n,a,o,l,u,c,d=this._audioTrack,p=e.data,v=e.pts,m=this.aacOverFlow,b=this.aacLastPTS;if(m){var E=new Uint8Array(m.byteLength+p.byteLength);E.set(m,0),E.set(p,m.byteLength),p=E}for(a=0,l=p.length;a<l-1&&!h(p,a);a++);if(!a||(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,c=!1):(u="no ADTS header found in AAC PES",c=!0),s.logger.warn("parsing error:"+u),this.observer.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:u}),!c)){if(f(d,this.observer,p,a,this.audioCodec),n=0,t=y(d.samplerate),m&&b){var k=b+t;Math.abs(k-v)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((k-v)/90)),v=k)}for(;a<l;)if(h(p,a)&&a+5<l){var A=g(d,p,a,v,n);if(!A)break;a+=A.length,o=A.sample.pts,n++}else a++;m=a<l?p.subarray(a,l):null,this.aacOverFlow=m,this.aacLastPTS=o}},t._parseMPEGPES=function(e){for(var t=e.data,n=t.length,i=0,r=0,a=e.pts;r<n;)if(k.isHeader(t,r)){var o=k.appendFrame(this._audioTrack,t,r,a,i);if(!o)break;r+=o.length,i++}else r++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),S=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,n,i=v.default.getID3Data(e,0);if(i&&void 0!==v.default.getTimeStamp(i))for(t=i.length,n=Math.min(e.length-1,t+100);t<n;t++)if(k.probe(e,t))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,n,i){for(var r=v.default.getID3Data(e,0),a=v.default.getTimeStamp(r),o=a?90*a:9e4*t,s=r.length,l=e.length,u=0,c=0,d=this._audioTrack,h=[{pts:o,dts:o,data:r}];s<l;)if(k.isHeader(e,s)){var p=k.appendFrame(d,e,s,o,u);if(!p)break;s+=p.length,c=p.sample.pts,u++}else v.default.isHeader(e,s)?(r=v.default.getID3Data(e,s),h.push({pts:c,dts:c,data:r}),s+=r.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,i)},t.destroy=function(){},e}(),C=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),R=Math.pow(2,32)-1,I=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,a=r;r--;)i+=n[r].byteLength;for((t=new Uint8Array(i))[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),r=0,i=8;r<a;r++)t.set(n[r],i),i+=n[r].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(R+1)),r=Math.floor(n%(R+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(R+1)),r=Math.floor(n%(R+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,i,r=t.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,i,r,a=[],o=[];for(n=0;n<t.sps.length;n++)r=(i=t.sps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)r=(i=t.pps[n]).byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,r=t.width,a=t.height,o=Math.floor(i/(R+1)),s=Math.floor(i%(R+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),r=t.id,a=Math.floor(n/(R+1)),o=Math.floor(n%(R+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i,r,a,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)a=(r=u[i]).duration,o=r.size,s=r.flags,l=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n,i=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+i.byteLength)).set(e.FTYP),n.set(i,e.FTYP.byteLength),n},e}();function D(e,t,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var r=e*t*n;return i?Math.round(r):r}function O(e,t){return void 0===t&&(t=!1),D(e,1e3,1/9e4,t)}function P(e,t){return void 0===t&&(t=1),D(e,9e4,1/t)}var x,L=P(10),M=P(.2),N=function(){function e(e,t,n,i){this.observer=e,this.config=t,this.typeSupported=n;var r=navigator.userAgent;this.isSafari=i&&i.indexOf("Apple")>-1&&r&&!r.match("CriOS"),this.ISGenerated=!1}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.remux=function(e,t,n,r,a,o,l){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=a,h=a;if(u&&c){var p=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;d+=Math.max(0,p),h+=Math.max(0,-p)}if(u){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var f,y=this.remuxAudio(e,d,o,l);c&&(y&&(f=y.endPTS-y.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,h,o,f,l))}else if(c){var g=this.remuxVideo(t,h,o,0,l);g&&e.codec&&this.remuxEmptyAudio(e,d,o,g)}}n.samples.length&&this.remuxID3(n,a),r.samples.length&&this.remuxText(r,a),this.observer.trigger(i.default.FRAG_PARSED)},t.generateIS=function(e,t,n){var a,o,l=this.observer,u=e.samples,c=t.samples,d=this.typeSupported,h="audio/mp4",p={},f={tracks:p},y=void 0===this._initPTS;if(y&&(a=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(h="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),p.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:I.initSegment([e]),metadata:{channelCount:e.channelCount}},y&&(a=o=u[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&c.length){var g=t.inputTimeScale;t.timescale=g,p.video={container:"video/mp4",codec:t.codec,initSegment:I.initSegment([t]),metadata:{width:t.width,height:t.height}},y&&(a=Math.min(a,c[0].pts-g*n),o=Math.min(o,c[0].dts-g*n),this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:a}))}Object.keys(p).length?(l.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,f),this.ISGenerated=!0,y&&(this._initPTS=a,this._initDTS=o)):l.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,n,a,o){var l,u,c,d,h,p,f,y=8,g=e.timescale,v=e.samples,m=[],b=v.length,E=this._PTSNormalize,k=this._initPTS,A=this.nextAvcDts,_=this.isSafari;if(0!==b){_&&(n|=v.length&&A&&(o&&Math.abs(t-A/g)<.1||Math.abs(v[0].pts-A-k)<g/5)),n||(A=t*g),v.forEach((function(e){e.pts=E(e.pts-k,A),e.dts=E(e.dts-k,A)})),v.sort((function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n||i||e.id-t.id}));var T=v.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*M)}),0);if(T<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+O(T,!0)+" ms to overcome this issue");for(var w=0;w<v.length;w++)v[w].dts+=T}var S=v[0];h=Math.max(S.dts,0),d=Math.max(S.pts,0);var C=h-A;n&&C&&(C>1?s.logger.log("AVC: "+O(C,!0)+" ms hole between fragments detected,filling it"):C<-1&&s.logger.log("AVC: "+O(-C,!0)+" ms overlapping between fragments detected"),h=A,v[0].dts=h,d=Math.max(d-C,A),v[0].pts=d,s.logger.log("Video: PTS/DTS adjusted: "+O(d,!0)+"/"+O(h,!0)+", delta: "+O(C,!0)+" ms")),S=v[v.length-1],f=Math.max(S.dts,0),p=Math.max(S.pts,0,f),_&&(l=Math.round((f-h)/(v.length-1)));for(var R=0,D=0,P=0;P<b;P++){for(var x=v[P],L=x.units,N=L.length,U=0,B=0;B<N;B++)U+=L[B].data.length;D+=U,R+=N,x.length=U,x.dts=_?h+P*l:Math.max(x.dts,h),x.pts=Math.max(x.pts,x.dts)}var F=D+4*R+8;try{u=new Uint8Array(F)}catch(e){return void this.observer.trigger(i.default.ERROR,{type:r.ErrorTypes.MUX_ERROR,details:r.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var j=new DataView(u.buffer);j.setUint32(0,F),u.set(I.types.mdat,4);for(var H=0;H<b;H++){for(var V=v[H],K=V.units,z=0,G=void 0,W=0,Y=K.length;W<Y;W++){var $=K[W],q=$.data,X=$.data.byteLength;j.setUint32(y,X),y+=4,u.set(q,y),y+=X,z+=4+X}if(_)G=Math.max(0,l*Math.round((V.pts-V.dts)/l));else{if(H<b-1)l=v[H+1].dts-V.dts;else{var Q=this.config,Z=V.dts-v[H>0?H-1:H].dts;if(Q.stretchShortVideoTrack){var J=Q.maxBufferHole,ee=Math.floor(J*g),te=(a?d+a*g:this.nextAudioPts)-V.pts;te>ee?((l=te-Z)<0&&(l=Z),s.logger.log("It is approximately "+O(te,!1)+" ms to the next segment; using duration "+O(l,!1)+" ms for the last video frame.")):l=Z}else l=Z}G=Math.round(V.pts-V.dts)}m.push({size:z,duration:l,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:V.key?2:1,isNonSync:V.key?0:1}})}this.nextAvcDts=f+l;var ne=e.dropped;if(e.nbNalu=0,e.dropped=0,m.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ie=m[0].flags;ie.dependsOn=2,ie.isNonSync=0}e.samples=m,c=I.moof(e.sequenceNumber++,h,e),e.samples=[];var re={data1:c,data2:u,startPTS:d/g,endPTS:(p+l)/g,startDTS:h/g,endDTS:this.nextAvcDts/g,type:"video",hasAudio:!1,hasVideo:!0,nb:m.length,dropped:ne};return this.observer.trigger(i.default.FRAG_PARSING_DATA,re),re}},t.remuxAudio=function(e,t,n,a){var o,l,u,c,d,h,p=e.inputTimeScale,f=e.timescale,y=p/f,g=(e.isAAC?1024:1152)*y,v=this._PTSNormalize,m=this._initPTS,b=!e.isAAC&&this.typeSupported.mpeg,E=b?0:8,k=e.samples,A=[],_=this.nextAudioPts;if(n|=k.length&&_&&(a&&Math.abs(t-_/p)<.1||Math.abs(k[0].pts-_-m)<20*g),k.forEach((function(e){e.pts=e.dts=v(e.pts-m,t*p)})),0!==(k=k.filter((function(e){return e.pts>=0}))).length){if(n||(_=a?t*p:k[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,w=0,S=_;w<k.length;){var R,D=k[w];if((R=D.pts-S)<=-T*g)s.logger.warn("Dropping 1 audio frame @ "+O(S,!0)+" ms due to "+O(R,!0)+" ms overlap."),k.splice(w,1);else if(R>=T*g&&R<L&&S){var P=Math.round(R/g);s.logger.warn("Injecting "+P+" audio frames @ "+O(S,!0)+" ms due to "+O(S,!0)+" ms gap.");for(var x=0;x<P;x++){var M=Math.max(S,0);(l=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=D.unit.subarray()),k.splice(w,0,{unit:l,pts:M,dts:M}),S+=g,w++}D.pts=D.dts=S,S+=g,w++}else D.pts=D.dts=S,S+=g,w++}for(var N=k.length,U=0;N--;)U+=k[N].unit.byteLength;for(var B=0,F=k.length;B<F;B++){var j=k[B],H=j.unit,V=j.pts;if(void 0!==h)o.duration=Math.round((V-h)/y);else{var K=V-_,z=0;if(n&&e.isAAC&&K){if(K>0&&K<L)z=Math.round((V-_)/g),s.logger.log(O(K,!0)+" ms hole between AAC samples detected,filling it"),z>0&&((l=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(l=H.subarray()),U+=z*l.length);else if(K<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+O(_,!0)+" ms / "+O(V,!0)+" ms / "+O(-K,!0)+" ms"),U-=H.byteLength;continue}V=_}if(d=V,!(U>0))return;U+=E;try{u=new Uint8Array(U)}catch(e){return void this.observer.trigger(i.default.ERROR,{type:r.ErrorTypes.MUX_ERROR,details:r.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}b||(new DataView(u.buffer).setUint32(0,U),u.set(I.types.mdat,4));for(var G=0;G<z;G++)(l=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=H.subarray()),u.set(l,E),E+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(o)}u.set(H,E);var W=H.byteLength;E+=W,o={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(o),h=V}var Y=0;if((N=A.length)>=2&&(Y=A[N-2].duration,o.duration=Y),N){this.nextAudioPts=_=h+y*Y,e.samples=A,c=b?new Uint8Array:I.moof(e.sequenceNumber++,d/y,e),e.samples=[];var $=d/p,q=_/p,X={data1:c,data2:u,startPTS:$,endPTS:q,startDTS:$,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.observer.trigger(i.default.FRAG_PARSING_DATA,X),X}return null}},t.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,a=r/(e.samplerate?e.samplerate:r),o=this.nextAudioPts,l=(void 0!==o?o:i.startDTS*r)+this._initDTS,u=i.endDTS*r+this._initDTS,c=1024*a,d=Math.ceil((u-l)/c),h=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),h){for(var p=[],f=0;f<d;f++){var y=l+f*c;p.push({unit:h,pts:y,dts:y})}e.samples=p,this.remuxAudio(e,t,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e){var t,n=e.samples.length,r=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)(t=e.samples[s]).pts=(t.pts-a)/r,t.dts=(t.dts-o)/r;this.observer.trigger(i.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},t.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,n=e.samples.length,r=e.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)(t=e.samples[o]).pts=(t.pts-a)/r;this.observer.trigger(i.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},t._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}(),U=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,n,r,a,o,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(i.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(i.default.FRAG_PARSED)},e}(),B=Object(l.getSelfScope)();try{x=B.performance.now.bind(B.performance)}catch(e){s.logger.debug("Unable to use Performance API on this environment"),x=B.Date.now}var F=function(){function e(e,t,n,i){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,n,r,o,s,l,u,c,d,h,p){var f=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var y=this.decrypter;null==y&&(y=this.decrypter=new a.default(this.observer,this.config));var g=x();y.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=x();f.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:a}}),f.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,o,s,l,u,c,d,h,p)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),r,o,s,l,u,c,d,h,p)},t.pushDecrypted=function(e,t,n,a,o,s,l,u,c,d,h,p){var f=this.demuxer;if(!f||(l||u)&&!this.probe(e)){for(var y=this.observer,g=this.typeSupported,v=this.config,E=[{demux:w,remux:N},{demux:b.default,remux:U},{demux:m,remux:N},{demux:S,remux:N}],k=0,A=E.length;k<A;k++){var _=E[k],T=_.demux.probe;if(T(e)){var C=this.remuxer=new _.remux(y,v,g,this.vendor);f=new _.demux(y,C,v,g),this.probe=T;break}}if(!f)return void y.trigger(i.default.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=f}var R=this.remuxer;(l||u)&&(f.resetInitSegment(n,a,o,d),R.resetInitSegment()),l&&(f.resetTimeStamp(p),R.resetTimeStamp(p)),"function"==typeof f.setDecryptData&&f.setDecryptData(t),f.append(e,s,c,h)},e}();t.default=F},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
    !*** ./src/demux/demuxer-worker.js ***!
    \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,n){n.r(t);var i=n(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),r=n(/*! ../events */"./src/events.js"),a=n(/*! ../utils/logger */"./src/utils/logger.js"),o=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js");t.default=function(e){var t=new o.EventEmitter;t.trigger=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(i))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",(function(r){var o=r.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new i.default(t,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),n("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),t.on(r.default.FRAG_DECRYPTED,n),t.on(r.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(r.default.FRAG_PARSED,n),t.on(r.default.ERROR,n),t.on(r.default.FRAG_PARSING_METADATA,n),t.on(r.default.FRAG_PARSING_USERDATA,n),t.on(r.default.INIT_PTS_FOUND,n),t.on(r.default.FRAG_PARSING_DATA,(function(t,n){var i=[],r={event:t,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),e.postMessage(r,i)}))}},"./src/demux/id3.js":
/*!**************************!*\
    !*** ./src/demux/id3.js ***!
    \**************************/
/*! exports provided: default, utf8ArrayToStr */function(e,t,n){n.r(t),n.d(t,"utf8ArrayToStr",(function(){return s}));var i,r=n(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),a=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var i=n,r=0;e.isHeader(t,n);)r+=10,r+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(r+=10),n+=r;if(r>0)return t.subarray(i,i+r)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),i=0;i<n.length;i++){var r=n[i];if(e.isTimeStampFrame(r))return e._readTimeStamp(r)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4);return{type:n,size:i,data:t.subarray(10,10+i)}},e.getID3Frames=function(t){for(var n=0,i=[];e.isHeader(t,n);){for(var r=e._readSize(t,n+6),a=(n+=10)+r;n+8<a;){var o=e._getFrameData(t.subarray(n)),s=e._decodeFrame(o);s&&i.push(s),n+=o.size+10}e.isFooter(t,n)&&(n+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),i=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,i=e._utf8ArrayToStr(t.data.subarray(n),!0);n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,i=e._utf8ArrayToStr(t.data.subarray(n));n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var n=o();if(n){var i=n.decode(e);if(t){var r=i.indexOf("\0");return-1!==r?i.substring(0,r):i}return i.replace(/\0/g,"")}for(var a,s,l,u=e.length,c="",d=0;d<u;){if(0===(a=e[d++])&&t)return c;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(a);break;case 12:case 13:s=e[d++],c+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[d++],l=e[d++],c+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&l)<<0)}}return c},e}();function o(){var e=Object(r.getSelfScope)();return i||void 0===e.TextDecoder||(i=new e.TextDecoder("utf-8")),i}var s=a._utf8ArrayToStr;t.default=a},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
    !*** ./src/demux/mp4demuxer.js ***!
    \*********************************/
/*! exports provided: default */function(e,t,n){n.r(t);var i=n(/*! ../utils/logger */"./src/utils/logger.js"),r=n(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,n,i,a){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:a?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:a?t:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:a?t:null})),this.observer.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var i,r,a,o,s,l,u=[];if(t.data?(s=t.start,a=t.end,t=t.data):(s=0,a=t.byteLength),!n.length)return null;for(i=s;i<a;)l=(r=e.readUint32(t,i))>1?i+r:a,e.bin2str(t.subarray(i+4,i+8))===n[0]&&(1===n.length?u.push({data:t,start:i+8,end:l}):(o=e.findBox({data:t,start:i+8,end:l},n.slice(1))).length&&(u=u.concat(o))),i=l;return u},e.parseSegmentIndex=function(t){var n,i=e.findBox(t,["moov"])[0],r=i?i.end:null,a=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;n=[];var s=(o=o[0]).data[0];a=0===s?8:16;var l=e.readUint32(o,a);a+=4,a+=0===s?8:16,a+=2;var u=o.end+0,c=e.readUint16(o,a);a+=2;for(var d=0;d<c;d++){var h=a,p=e.readUint32(o,h);h+=4;var f=2147483647&p;if(1==(2147483648&p)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var y=e.readUint32(o,h);h+=4,n.push({referenceSize:f,subsegmentDuration:y,info:{duration:y/l,start:u,end:u+f-1}}),u+=f,a=h+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:n,moovEndOffset:r}},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var r=e.findBox(t,["tkhd"])[0];if(r){var a=r.data[r.start],o=0===a?12:20,s=e.readUint32(r,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){o=0===(a=l.data[l.start])?12:20;var u=e.readUint32(l,o),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var p=e.bin2str(h.data.subarray(h.start+12,h.start+16));i.logger.log("MP4Demuxer:"+d+":"+p+" found")}n[s]={timescale:u,type:d},n[d]={timescale:u,id:s}}}}}})),n},e.getStartDTS=function(t,n){var i,r,a;return i=e.findBox(n,["moof","traf"]),r=[].concat.apply([],i.map((function(n){return e.findBox(n,["tfhd"]).map((function(i){var r,a;return r=e.readUint32(i,4),a=t[r].timescale||9e4,e.findBox(n,["tfdt"]).map((function(t){var n,i;return n=t.data[t.start],i=e.readUint32(t,4),1===n&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i}))[0]/a}))}))),a=Math.min.apply(null,r),isFinite(a)?a:0},e.offsetStartDTS=function(t,n,i){e.findBox(n,["moof","traf"]).map((function(n){return e.findBox(n,["tfhd"]).map((function(r){var o=e.readUint32(r,4),s=t[o].timescale||9e4;e.findBox(n,["tfdt"]).map((function(t){var n=t.data[t.start],r=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,r-i*s);else{r*=Math.pow(2,32),r+=e.readUint32(t,8),r-=i*s,r=Math.max(r,0);var o=Math.floor(r/(a+1)),l=Math.floor(r%(a+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}}))}))}))},t.append=function(t,n,i,a){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-n,this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,i,a,t)},t.destroy=function(){},e}();t.default=o},"./src/errors.ts":
/*!***********************!*\
    !*** ./src/errors.ts ***!
    \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,n){var i,r;n.r(t),n.d(t,"ErrorTypes",(function(){return i})),n.d(t,"ErrorDetails",(function(){return r})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(i||(i={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(r||(r={}))},"./src/events.js":
/*!***********************!*\
    !*** ./src/events.js ***!
    \***********************/
/*! exports provided: default */function(e,t,n){n.r(t),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":
/*!*********************************!*\
    !*** ./src/hls.ts + 50 modules ***!
    \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number-isFinite.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,n){n.r(t);var i={};n.r(i),n.d(i,"newCue",(function(){return gt}));var r,a,o=n("./node_modules/url-toolkit/src/url-toolkit.js"),s=n("./src/errors.ts"),l=n("./src/polyfills/number-isFinite.js"),u=n("./src/events.js"),c=n("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(d[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){c.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(r||(r={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(a||(a={}));var p=n("./src/demux/mp4demuxer.js");function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y,g=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,n,i;return t=e,(n=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&f(t.prototype,n),i&&f(t,i),e}();function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(y||(y={}));var m=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[y.AUDIO]=!1,e[y.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,n,i,r=e.prototype;return r.setByteRange=function(e,t){var n=e.split("@",2),i=[];1===n.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i},r.addElementaryStream=function(e){this._elementaryStreams[e]=!0},r.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},r.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},r.setDecryptDataFromLevelKey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new g(e.baseuri,e.reluri)).method=e.method,n.iv=this.createInitializationVector(t)),n},t=e,(n=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.isFiniteNumber)(this.programDateTime))return null;var e=Object(l.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&v(t.prototype,n),i&&v(t,i),e}();function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,n,i;return t=e,(n=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&b(t.prototype,n),i&&b(t,i),e}(),k=/^(\d+)x(\d+)$/,A=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,_=function(){function e(t){for(var n in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=k.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(A.lastIndex=0;null!==(t=A.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},e}(),T={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function w(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var S=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,C=/#EXT-X-MEDIA:(.*)/g,R=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),I=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,D=/\.(mp4|m4s|m4v|m4a)$/i,O=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}},e.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var i,r=[];function a(e,t){["video","audio"].forEach((function(n){var i=e.filter((function(e){return function(e,t){var n=T[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)}));if(i.length){var r=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=r.length>0?r[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}for(S.lastIndex=0;null!=(i=S.exec(t));){var o={},s=o.attrs=new _(i[1]);o.url=e.resolve(i[2],n);var l=s.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,a([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=e.convertAVC1ToAVCOTI(o.videoCodec)),r.push(o)}return r},e.parseMasterPlaylistMedia=function(t,n,i,r){var a;void 0===r&&(r=[]);var o=[],s=0;for(C.lastIndex=0;null!==(a=C.exec(t));){var l=new _(a[1]);if(l.TYPE===i){var u={id:s++,groupId:l["GROUP-ID"],name:l.NAME||l.LANGUAGE,type:i,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,n)),r.length){var c=e.findGroup(r,u.groupId);u.audioCodec=c?c.codec:r[0].codec}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,n,i,r){var a,o,s,u=0,d=0,h=new E(t),p=0,f=null,y=new m,v=null;for(R.lastIndex=0;null!==(a=R.exec(e));){var b=a[1];if(b){y.duration=parseFloat(b);var k=(" "+a[2]).slice(1);y.title=k||null,y.tagList.push(k?["INF",b,k]:["INF",b])}else if(a[3]){if(Object(l.isFiniteNumber)(y.duration)){var A=u++;y.type=i,y.start=d,s&&(y.levelkey=s),y.sn=A,y.level=n,y.cc=p,y.urlId=r,y.baseurl=t,y.relurl=(" "+a[3]).slice(1),P(y,f),h.fragments.push(y),f=y,d+=y.duration,y=new m}}else if(a[4]){var T=(" "+a[4]).slice(1);f?y.setByteRange(T,f):y.setByteRange(T)}else if(a[5])y.rawProgramDateTime=(" "+a[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),null===v&&(v=h.fragments.length);else{if(!(a=a[0].match(I))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var w=(" "+a[o+1]).slice(1),S=(" "+a[o+2]).slice(1);switch(a[o]){case"#":y.tagList.push(S?[w,S]:[w]);break;case"PLAYLIST-TYPE":h.type=w.toUpperCase();break;case"MEDIA-SEQUENCE":u=h.startSN=parseInt(w);break;case"TARGETDURATION":h.targetduration=parseFloat(w);break;case"VERSION":h.version=parseInt(w);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":p++,y.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":p=parseInt(w);break;case"KEY":var C=new _(w),O=C.enumeratedString("METHOD"),x=C.URI,L=C.hexadecimalInteger("IV");O&&(s=new g(t,x),x&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(O)>=0&&(s.method=O,s.key=null,s.iv=L));break;case"START":var M=new _(w).decimalFloatingPoint("TIME-OFFSET");Object(l.isFiniteNumber)(M)&&(h.startTimeOffset=M);break;case"MAP":var N=new _(w);y.relurl=N.URI,N.BYTERANGE&&y.setByteRange(N.BYTERANGE),y.baseurl=t,y.level=n,y.type=i,y.sn="initSegment",h.initSegment=y,(y=new m).rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+a)}}}return(y=f)&&!y.relurl&&(h.fragments.pop(),d-=y.duration),h.totalduration=d,h.averagetargetduration=d/h.fragments.length,h.endSN=u-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=p,!h.initSegment&&h.fragments.length&&h.fragments.every((function(e){return D.test(e.relurl)}))&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(y=new m).relurl=h.fragments[0].relurl,y.baseurl=t,y.level=n,y.type=i,y.sn="initSegment",h.initSegment=y,h.needSidxRanges=!0),v&&function(e,t){for(var n=e[t],i=t-1;i>=0;i--){var r=e[i];r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}(h.fragments,v),h},e}();function P(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(l.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var x=window.performance,L=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.canHaveQualityLevels=function(e){return e!==r.AUDIO_TRACK&&e!==r.SUBTITLE_TRACK},i.mapContextToLevelType=function(e){switch(e.type){case r.AUDIO_TRACK:return a.AUDIO;case r.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},i.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n};var o=i.prototype;return o.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader,r=new(n||i)(t);return e.loader=r,this.loaders[e.type]=r,r},o.getInternalLoader=function(e){return this.loaders[e.type]},o.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},o.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},o.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},o.onManifestLoading=function(e){this.load({url:e.url,type:r.MANIFEST,level:0,id:null,responseType:"text"})},o.onLevelLoading=function(e){this.load({url:e.url,type:r.LEVEL,level:e.level,id:e.id,responseType:"text"})},o.onAudioTrackLoading=function(e){this.load({url:e.url,type:r.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},o.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:r.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},o.load=function(e){var t=this.hls.config;c.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n,i,a,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url)return c.logger.trace("playlist request ongoing"),!1;c.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case r.MANIFEST:n=t.manifestLoadingMaxRetry,i=t.manifestLoadingTimeOut,a=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case r.LEVEL:n=0,o=0,a=0,i=t.levelLoadingTimeOut;break;default:n=t.levelLoadingMaxRetry,i=t.levelLoadingTimeOut,a=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e);var u={timeout:i,maxRetry:n,retryDelay:a,maxRetryDelay:o},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.logger.debug("Calling internal loader delegate for URL: "+e.url),s.load(e,u,d),!0},o.loadsuccess=function(e,t,n,i){if(void 0===i&&(i=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,i);if(this.resetInternalLoader(n.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var r=e.data;t.tload=x.now(),0===r.indexOf("#EXTM3U")?r.indexOf("#EXTINF:")>0||r.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,i):this._handleMasterPlaylist(e,t,n,i):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",i)},o.loaderror=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!1,e)},o.loadtimeout=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!0)},o._handleMasterPlaylist=function(e,t,n,r){var a=this.hls,o=e.data,s=i.getResponseUrl(e,n),l=O.parseMasterPlaylist(o,s);if(l.length){var d=l.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),h=O.parseMasterPlaylistMedia(o,s,"AUDIO",d),p=O.parseMasterPlaylistMedia(o,s,"SUBTITLES");if(h.length){var f=!1;h.forEach((function(e){e.url||(f=!0)})),!1===f&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(c.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}a.trigger(u.default.MANIFEST_LOADED,{levels:l,audioTracks:h,subtitles:p,url:s,stats:t,networkDetails:r})}else this._handleManifestParsingError(e,n,"no level found in manifest",r)},o._handleTrackOrLevelPlaylist=function(e,t,n,a){var o=this.hls,s=n.id,c=n.level,d=n.type,h=i.getResponseUrl(e,n),p=Object(l.isFiniteNumber)(s)?s:0,f=Object(l.isFiniteNumber)(c)?c:p,y=i.mapContextToLevelType(n),g=O.parseLevelPlaylist(e.data,h,f,y,p);if(g.tload=t.tload,d===r.MANIFEST){var v={url:h,details:g};o.trigger(u.default.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:h,stats:t,networkDetails:a})}if(t.tparsed=x.now(),g.needSidxRanges){var m=g.initSegment.url;this.load({url:m,isSidxRequest:!0,type:d,level:c,levelDetails:g,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=g,this._handlePlaylistLoaded(e,t,n,a)},o._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var n=p.default.parseSegmentIndex(new Uint8Array(e.data));if(n){var i=n.references,r=t.levelDetails;i.forEach((function(e,t){var n=e.info;if(r){var i=r.fragments[t];0===i.byteRange.length&&i.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),r&&r.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},o._handleManifestParsingError=function(e,t,n,i){this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:i})},o._handleNetworkError=function(e,t,n,i){var a,o;void 0===n&&(n=!1),void 0===i&&(i=null),c.logger.info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case r.MANIFEST:a=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case r.LEVEL:a=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case r.AUDIO_TRACK:a=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var d={type:s.ErrorTypes.NETWORK_ERROR,details:a,fatal:o,url:e.url,loader:l,context:e,networkDetails:t};i&&(d.response=i),this.hls.trigger(u.default.ERROR,d)},o._handlePlaylistLoaded=function(e,t,n,a){var o=n.type,s=n.level,l=n.id,c=n.levelDetails;if(c&&c.targetduration)if(i.canHaveQualityLevels(n.type))this.hls.trigger(u.default.LEVEL_LOADED,{details:c,level:s||0,id:l||0,stats:t,networkDetails:a});else switch(o){case r.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:a});break;case r.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:a})}else this._handleManifestParsingError(e,n,"invalid target duration",a)},i}(h),M=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.FRAG_LOADING)||this).loaders={},n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){var t=this.loaders;for(var n in t){var i=t[n];i&&i.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onFragLoading=function(e){var t=e.frag,n=t.type,i=this.loaders,r=this.hls.config,a=r.fLoader,o=r.loader;t.loaded=0;var s,u,d,h=i[n];h&&(c.logger.warn("abort previous fragment loader for type: "+n),h.abort()),h=i[n]=t.loader=r.fLoader?new a(r):new o(r),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var p=t.byteRangeStartOffset,f=t.byteRangeEndOffset;Object(l.isFiniteNumber)(p)&&Object(l.isFiniteNumber)(f)&&(s.rangeStart=p,s.rangeEnd=f),u={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(s,u,d)},r.loadsuccess=function(e,t,n,i){void 0===i&&(i=null);var r=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:r,frag:a,stats:t,networkDetails:i})},r.loaderror=function(e,t,n){void 0===n&&(n=null);var i=t.frag,r=i.loader;r&&r.abort(),this.loaders[i.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},r.loadtimeout=function(e,t,n){void 0===n&&(n=null);var i=t.frag,r=i.loader;r&&r.abort(),this.loaders[i.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},r.loadprogress=function(e,t,n,i){void 0===i&&(i=null);var r=t.frag;r.loaded=e.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:r,stats:e,networkDetails:i})},i}(h),N=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){for(var t in this.loaders){var n=this.loaders[t];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.onKeyLoading=function(e){var t=e.frag,n=t.type,i=this.loaders[n];if(t.decryptdata){var r=t.decryptdata.uri;if(r!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(i&&(c.logger.warn("abort previous key loader for type:"+n),i.abort()),!r)return void c.logger.warn("key uri is falsy");t.loader=this.loaders[n]=new a.loader(a),this.decrypturl=r,this.decryptkey=null;var o={url:r,frag:t,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:t}))}else c.logger.warn("Missing decryption data on fragment in onKeyLoading")},r.loadsuccess=function(e,t,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,delete this.loaders[i.type],this.hls.trigger(u.default.KEY_LOADED,{frag:i})):c.logger.error("after key load, decryptdata unset")},r.loaderror=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},r.loadtimeout=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},i}(h),U="NOT_LOADED",B="APPENDING",F="PARTIAL",j="OK",H=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=t.config,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,h.prototype.destroy.call(this),e.prototype.destroy.call(this)},r.getBufferedFrag=function(e,t){var n=this.fragments,i=Object.keys(n).filter((function(i){var r=n[i];if(r.body.type!==t)return!1;if(!r.buffered)return!1;var a=r.body;return a.startPTS<=e&&e<=a.endPTS}));if(0===i.length)return null;var r=i.pop();return n[r].body},r.detectEvictedFragments=function(e,t){var n,i,r=this;Object.keys(this.fragments).forEach((function(a){var o=r.fragments[a];if(!0===o.buffered){var s=o.range[e];if(s){n=s.time;for(var l=0;l<n.length;l++)if(i=n[l],!1===r.isTimeBuffered(i.startPTS,i.endPTS,t)){r.removeFragment(o.body);break}}}}))},r.detectPartialFragments=function(e){var t=this,n=this.getFragmentKey(e),i=this.fragments[n];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(e.hasElementaryStream(n)){var r=t.timeRanges[n];i.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,r)}})))},r.getBufferedTimes=function(e,t,n){for(var i,r,a=[],o=!1,s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,r=n.end(s)+this.bufferPadding,e>=i&&t<=r){a.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<r&&t>i)a.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),o=!0;else if(t<=i)break}return{time:a,partial:o}},r.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.getPartialFragment=function(e){var t,n,i,r=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=r.fragments[s];r.isPartial(l)&&(n=l.body.startPTS-r.bufferPadding,i=l.body.endPTS+r.bufferPadding,e>=n&&e<=i&&(t=Math.min(e-n,i-e),o<=t&&(a=l.body,o=t)))})),a},r.getState=function(e){var t=this.getFragmentKey(e),n=this.fragments[t],i=U;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?F:j:B),i},r.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.isTimeBuffered=function(e,t,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1},r.onFragLoaded=function(e){var t=e.frag;Object(l.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},r.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)}))},r.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.removeAllFragments=function(){this.fragments=Object.create(null)},i}(h),V={search:function(e,t){for(var n=0,i=e.length-1,r=null,a=null;n<=i;){var o=t(a=e[r=(n+i)/2|0]);if(o>0)n=r+1;else{if(!(o<0))return a;i=r-1}}return null}},K=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,n){try{if(e){var i,r=e.buffered,a=[];for(i=0;i<r.length;i++)a.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(a,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,n){e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var i=[];if(n)for(var r=0;r<e.length;r++){var a=i.length;if(a){var o=i[a-1].end;e[r].start-o<n?e[r].end>o&&(i[a-1].end=e[r].end):i.push(e[r])}else i.push(e[r])}else i=e;for(var s,l=0,u=t,c=t,d=0;d<i.length;d++){var h=i[d].start,p=i[d].end;if(t+n>=h&&t<p)u=h,l=(c=p)-t;else if(t+n<h){s=h;break}}return{len:l,start:u,end:c,nextStart:s}},e}(),z=n("./node_modules/eventemitter3/index.js"),G=n("./node_modules/webworkify-webpack/index.js"),W=n("./src/demux/demuxer-inline.js");function Y(){return window.MediaSource||window.WebKitMediaSource}var $=n("./src/utils/get-self-scope.js"),q=function(e){var t,n;function i(){return e.apply(this,arguments)||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.prototype.trigger=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.emit.apply(this,[e,e].concat(n))},i}(z.EventEmitter),X=Object($.getSelfScope)(),Q=Y()||{isTypeSupported:function(){return!1}},Z=function(){function e(e,t){var n=this;this.hls=e,this.id=t;var i=this.observer=new q,r=e.config,a=function(t,i){(i=i||{}).frag=n.frag,i.id=n.id,e.trigger(t,i)};i.on(u.default.FRAG_DECRYPTED,a),i.on(u.default.FRAG_PARSING_INIT_SEGMENT,a),i.on(u.default.FRAG_PARSING_DATA,a),i.on(u.default.FRAG_PARSED,a),i.on(u.default.ERROR,a),i.on(u.default.FRAG_PARSING_METADATA,a),i.on(u.default.FRAG_PARSING_USERDATA,a),i.on(u.default.INIT_PTS_FOUND,a);var o={mp4:Q.isTypeSupported("video/mp4"),mpeg:Q.isTypeSupported("audio/mpeg"),mp3:Q.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){var d;c.logger.log("demuxing in webworker");try{d=this.w=G(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(t){e.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(r)})}catch(e){c.logger.warn("Error in worker:",e),c.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&X.URL.revokeObjectURL(d.objectURL),this.demuxer=new W.default(i,o,r,l),this.w=void 0}}else this.demuxer=new W.default(i,o,r,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.push=function(e,t,n,i,r,a,o,s){var u=this.w,d=Object(l.isFiniteNumber)(r.startPTS)?r.startPTS:r.start,h=r.decryptdata,p=this.frag,f=!(p&&r.cc===p.cc),y=!(p&&r.level===p.level),g=p&&r.sn===p.sn+1,v=!y&&g;if(f&&c.logger.log(this.id+":discontinuity detected"),y&&c.logger.log(this.id+":switch detected"),this.frag=r,u)u.postMessage({cmd:"demux",data:e,decryptdata:h,initSegment:t,audioCodec:n,videoCodec:i,timeOffset:d,discontinuity:f,trackSwitch:y,contiguous:v,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var m=this.demuxer;m&&m.push(e,h,t,n,i,d,f,y,v,a,o,s)}},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":X.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}();function J(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function ee(e,t,n){var i=e[t],r=e[n],a=r.startPTS;Object(l.isFiniteNumber)(a)?n>t?(i.duration=a-i.start,i.duration<0&&c.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-a,r.duration<0&&c.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):r.start=n>t?i.start+i.duration:Math.max(i.start-r.duration,0)}function te(e,t,n,i,r,a){var o=n;if(Object(l.isFiniteNumber)(t.startPTS)){var s=Math.abs(t.startPTS-n);Object(l.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(s,t.deltaPTS):t.deltaPTS=s,o=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),i=Math.max(i,t.endPTS),r=Math.min(r,t.startDTS),a=Math.max(a,t.endDTS)}var u=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=o,t.endPTS=i,t.startDTS=r,t.endDTS=a,t.duration=i-n;var c,d,h,p=t.sn;if(!e||p<e.startSN||p>e.endSN)return 0;for(c=p-e.startSN,(d=e.fragments)[c]=t,h=c;h>0;h--)ee(d,h,h-1);for(h=c;h<d.length-1;h++)ee(d,h,h+1);return e.PTSKnown=!0,u}function ne(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var n,i=0;if(ie(e,t,(function(e,r){i=e.cc-r.cc,Object(l.isFiniteNumber)(e.startPTS)&&(r.start=r.startPTS=e.startPTS,r.endPTS=e.endPTS,r.duration=e.duration,r.backtracked=e.backtracked,r.dropped=e.dropped,n=r),t.PTSKnown=!0})),t.PTSKnown){if(i){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var r=t.fragments,a=0;a<r.length;a++)r[a].cc+=i}n?te(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(e,t){var n=t.startSN-e.startSN,i=e.fragments,r=t.fragments;if(!(n<0||n>i.length))for(var a=0;a<r.length;a++)r[a].start+=i[n].start}(e,t),t.PTSKnown=e.PTSKnown}}function ie(e,t,n){if(e&&t)for(var i=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=i;o<=r;o++){var s=e.fragments[a+o],l=t.fragments[o];if(!s||!l)break;n(s,l,o)}}function re(e,t,n){var i=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),r=i/2;return e&&t.endSN===e.endSN&&(i=r),n&&(i=Math.max(r,i-(window.performance.now()-n))),Math.round(i)}var ae={toString:function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}};function oe(e,t){t.fragments.forEach((function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}})),t.PTSKnown=!0}function se(e,t,n){!function(e,t,n){if(function(e,t,n){var i=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(i=!0),i}(e,n,t)){var i=function(e,t){var n=e.fragments,i=t.fragments;if(i.length&&n.length){var r=function(e,t){for(var n=null,i=0;i<e.length;i+=1){var r=e[i];if(r&&r.cc===t){n=r;break}}return n}(n,i[0].cc);if(r&&(!r||r.startPTS))return r;c.logger.log("No frag in previous level to align on")}else c.logger.log("No fragments to align")}(n.details,t);i&&(c.logger.log("Adjusting PTS using last level due to CC increase within current level"),oe(i.start,t))}}(e,n,t),!n.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var n=t.fragments[0].programDateTime,i=(e.fragments[0].programDateTime-n)/1e3+t.fragments[0].start;Object(l.isFiniteNumber)(i)&&(c.logger.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),oe(i,e))}}(n,t.details)}function le(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Object(l.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<e.length;++i){var r=e[i];if(de(t,n,r))return r}return null}function ue(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=e?t[e.sn-t[0].sn+1]:null;return r&&!ce(n,i,r)?r:V.search(t,ce.bind(null,n,i))}function ce(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var i=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=e?1:n.start-i>e&&n.start?-1:0}function de(e,t,n){var i=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-i>e}var he=function(){function e(e,t,n,i){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,n=this.media,i=this.stalled,r=n.currentTime,a=n.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,r===e){if((s||o)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var l=K.bufferInfo(n,r,0),u=l.len>0,d=l.nextStart||0;if(u||d){if(a){if(l.len>2||!d||d-r>2)return;this.moved=!1}if(!this.moved&&this.stalled){var h=Math.max(d,l.start||0)-r;if(h>0&&h<=2)return void this._trySkipBufferHole(null)}var p=self.performance.now();if(null!==i){var f=p-i;!a&&f>=250&&this._reportStall(l.len);var y=K.bufferInfo(n,r,t.maxBufferHole);this._tryFixBufferStall(y,f)}else this.stalled=p}}}else if(this.moved=!0,null!==i){if(this.stallReported){var g=self.performance.now()-i;c.logger.warn("playback not stuck anymore @"+r+", after "+Math.round(g)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var n=this.config,i=this.fragmentTracker,r=this.media.currentTime,a=i.getPartialFragment(r);a&&this._trySkipBufferHole(a)||e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(c.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,n=this.hls,i=this.media,r=i.currentTime,a=0,o=0;o<i.buffered.length;o++){var l=i.buffered.start(o);if(r+t.maxBufferHole>=a&&r<l){var d=Math.max(l+.05,i.currentTime+.1);return c.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+d),this.moved=!0,this.stalled=null,i.currentTime=d,e&&n.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+d,frag:e}),d}a=i.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,i=n.currentTime,r=(this.nudgeRetry||0)+1;if(this.nudgeRetry=r,r<e.nudgeMaxRetry){var a=i+r*e.nudgeOffset;c.logger.warn("Nudging 'currentTime' from "+i+" to "+a),n.currentTime=a,t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("Playhead still not moving while enough data buffered @"+i+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var fe=function(e){var t,n;function i(t){for(var n,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return(n=e.call.apply(e,[this,t].concat(r))||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(pe(n)),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},r.hasInterval=function(){return!!this._tickInterval},r.hasNextTick=function(){return!!this._tickTimer},r.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},r.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},r.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},r.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},r.doTick=function(){},i}(h),ye="STOPPED",ge="STARTING",ve="IDLE",me="PAUSED",be="KEY_LOADING",Ee="FRAG_LOADING",ke="FRAG_LOADING_WAITING_RETRY",Ae="WAITING_TRACK",_e="PARSING",Te="PARSED",we="BUFFER_FLUSHING",Se="ENDED",Ce="ERROR",Re="WAITING_INIT_PTS",Ie="WAITING_LEVEL",De=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.doTick=function(){},r.startLoad=function(){},r.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ye},r._streamEnded=function(e,t){var n=this.fragCurrent,i=this.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var r=i.getState(n);return r===F||r===j}return!1},r.onMediaSeeking=function(){var e=this.config,t=this.media,n=this.mediaBuffer,i=this.state,r=t?t.currentTime:null,a=K.bufferInfo(n||t,r,this.config.maxBufferHole);if(Object(l.isFiniteNumber)(r)&&c.logger.log("media seeking to "+r.toFixed(3)),i===Ee){var o=this.fragCurrent;if(0===a.len&&o){var s=e.maxFragLookUpTolerance,u=o.start-s,d=o.start+o.duration+s;r<u||r>d?(o.loader&&(c.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ve):c.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else i===Se&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ve);t&&(this.lastCurrentTime=r),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=r),this.tick()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=ye,this.fragmentTracker=null},r.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},i}(fe);function Oe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Pe,xe=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this).fragmentTracker=n,i.config=t.config,i.audioCodecSwap=!1,i._state=ye,i.stallReported=!1,i.gapController=null,i.altAudio=!1,i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,o,d,h=i.prototype;return h.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(c.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=ve,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=ye},h.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},h.doTick=function(){switch(this.state){case we:this.fragLoadError=0;break;case ve:this._doTickIdle();break;case Ie:var e=this.levels[this.level];e&&e.details&&(this.state=ve);break;case ke:var t=window.performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(c.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ve)}this._checkBuffer(),this._checkFragmentChanged()},h._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var i;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=e.nextLoadLevel,a=this.levels[r];if(a){var o,s=a.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=K.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,t.maxBufferHole),d=l.len;if(!(d>=o)){c.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var h=a.details;if(!h||h.live&&this.levelLastLoaded!==r)this.state=Ie;else{if(this._streamEnded(l,h)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u.default.BUFFER_EOS,p),void(this.state=Se)}this._fetchPayloadOrEos(i,l,h)}}}}},h._fetchPayloadOrEos=function(e,t,n){var i=this.fragPrevious,r=this.level,a=n.fragments,o=a.length;if(0!==o){var s,l=a[0].start,u=a[o-1].start+a[o-1].duration,d=t.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var h=this.config.initialLiveManifestSize;if(o<h)return void c.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+h);if(null===(s=this._ensureFragmentAtLivePoint(n,d,l,u,i,a,o)))return}else d<l&&(s=a[0]);s||(s=this._findFragment(l,i,o,a,d,u,n)),s&&(s.encrypted?(c.logger.log("Loading key for "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+r),this._loadKey(s)):(c.logger.log("Loading "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+r+", currentTime:"+e.toFixed(3)+",bufferEnd:"+d.toFixed(3)),this._loadFragment(s)))}},h._ensureFragmentAtLivePoint=function(e,t,n,i,r,a,o){var s,l=this.hls.config,u=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-l.maxFragLookUpTolerance,i-d)){var h=this.liveSyncPosition=this.computeLivePosition(n,e);c.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),t=h,u&&!u.paused&&u.readyState&&u.duration>h&&(u.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>i&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(r)if(e.hasProgramDateTime)c.logger.log("live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),s=le(a,r.endProgramDateTime,l.maxFragLookUpTolerance);else{var p=r.sn+1;if(p>=e.startSN&&p<=e.endSN){var f=a[p-e.startSN];r.cc===f.cc&&(s=f,c.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=V.search(a,(function(e){return r.cc-e.cc})))&&c.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}s||(s=a[Math.min(o-1,Math.round(o/2))],c.logger.log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))}return s},h._findFragment=function(e,t,n,i,r,a,o){var s,l=this.hls.config;if(s=r<a?ue(t,i,r,r>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):i[n-1]){var u=s.sn-o.startSN,d=t&&s.level===t.level,h=i[u-1],p=i[u+1];if(t&&s.sn===t.sn)if(d&&!s.backtracked)if(s.sn<o.endSN){var f=t.deltaPTS;f&&f>l.maxBufferHole&&t.dropped&&u?(s=h,c.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=p,c.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(p&&p.backtracked?(c.logger.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(c.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,h?(s=h).backtracked=!0:u&&(s=null)))}return s},h._loadKey=function(e){this.state=be,this.hls.trigger(u.default.KEY_LOADING,{frag:e})},h._loadFragment=function(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===U||t===F?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(u.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new Z(this.hls,"main")),this.state=Ee):t===B&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},h.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},h.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},h._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),K.isBuffered(n,t)?e=this.getBufferedFrag(t):K.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},h.immediateLevelSwitch=function(){if(c.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},h.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,K.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},h.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n,i;if((n=this.getBufferedFrag(e.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var r=this.hls.nextLoadLevel,a=this.levels[r],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((i=this.getBufferedFrag(e.currentTime+t))&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},h.flushMainBuffer=function(e,t){this.state=we;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,n)},h.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new he(n,t,this.fragmentTracker,this.hls)},h.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},h.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l.isFiniteNumber)(t)&&c.logger.log("media seeked to "+t.toFixed(3)),this.tick()},h.onManifestLoading=function(){c.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},h.onManifestParsed=function(e){var t,n=!1,i=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&c.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},h.onLevelLoaded=function(e){var t=e.details,n=e.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],a=t.totalduration,o=0;if(c.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var s=r.details;s&&t.fragments.length>0?(ne(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(l.isFiniteNumber)(o)?c.logger.log("live playlist sliding:"+o.toFixed(3)):(c.logger.log("live playlist - outdated PTS, unknown sliding"),se(this.fragPrevious,i,t))):(c.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,se(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(r.details=t,this.levelLastLoaded=n,this.hls.trigger(u.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=t.startTimeOffset;Object(l.isFiniteNumber)(d)?(d<0&&(c.logger.log("negative start time offset "+d+", count from end of last fragment"),d=o+a+d),c.logger.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):t.live?(this.startPosition=this.computeLivePosition(o,t),c.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Ie&&(this.state=ve),this.tick()},h.onKeyLoaded=function(){this.state===be&&(this.state=ve,this.tick())},h.onFragLoaded=function(e){var t=this.fragCurrent,n=this.hls,i=this.levels,r=this.media,a=e.frag;if(this.state===Ee&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var o=e.stats,s=i[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,c.logger.log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),a.bitrateTest&&n.nextLoadLevel)this.state=ve,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=ve,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,n.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{c.logger.log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=_e,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(r&&r.seeking)&&(l.PTSKnown||!l.live),h=l.initSegment?l.initSegment.data:[],p=this._getAudioCodec(s);(this.demuxer=this.demuxer||new Z(this.hls,"main")).push(e.payload,h,p,s.videoCodec,t,l.totalduration,d)}}this.fragLoadError=0},h.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===_e){var i,r,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,r=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==r.container&&(o="mp4a.40.2",c.logger.log("Android: force audio codec to "+o)),r.levelCodec=o,r.id=e.id}for(i in(r=a.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),this.hls.trigger(u.default.BUFFER_CODECS,a),a){r=a[i],c.logger.log("main track:"+i+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var l=r.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},h.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"main"===e.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===_e){var r=this.levels[this.level],a=n;if(Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),!0===e.hasAudio&&a.addElementaryStream(y.AUDIO),!0===e.hasVideo&&a.addElementaryStream(y.VIDEO),c.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)c.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=r.details;if(!o||a.sn!==o.startSN)return c.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=ve,this.fragPrevious=a,void this.tick();c.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=te(r.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),d=this.hls;d.trigger(u.default.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(n){n&&n.length&&t.state===_e&&(t.appended=!0,t.pendingBuffering=!0,d.trigger(u.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))})),this.tick()}},h.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===_e&&(this.stats.tparsed=window.performance.now(),this.state=Te,this._checkAppendedParsed())},h.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){c.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(c.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ve}var r=this.hls;r.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},h.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(c.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},h.onBufferCreated=function(e){var t,n,i=e.tracks,r=!1;for(var a in i){var o=i[a];"main"===o.id?(n=a,t=o,"video"===a&&(this.videoBuffer=i[a].buffer)):r=!0}r&&t?(c.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},h.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==_e&&t!==Te||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},h._checkAppendedParsed=function(){if(!(this.state!==Te||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("main buffered : "+ae.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=ve}this.tick()}},h.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&K.isBuffered(this.media,this.media.currentTime)&&K.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ke}else c.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ce;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Ce&&(e.fatal?(this.state=Ce,c.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==Ie||(this.state=ve));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==_e&&this.state!==Te||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ve):(c.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},h._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},h._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},h.onFragLoadEmergencyAborted=function(){this.state=ve,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},h.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(y.VIDEO,e.buffered),this.state=ve,this.fragPrevious=null},h.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},h._seekToStartPos=function(){var e=this.media,t=e.currentTime,n=e.seeking?t:this.startPosition;t!==n&&n>=0&&(c.logger.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+t+" "),e.currentTime=n)},h._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},r=i,(o=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&Oe(r.prototype,o),d&&Oe(r,d),i}(De);function Le(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Me=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,Pe=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,l=i.prototype;return l.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},l.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},l.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},l.stopLoad=function(){this.canload=!1},l.onManifestLoaded=function(e){var t,n=[],i=[],r={},a=null,o=!1,l=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec,Pe&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(a=r[e.bitrate])?a.url.push(e.url):(e.url=[e.url],e.urlId=0,r[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&(l=!0,J(a||e,"audio",t.AUDIO)),t.SUBTITLES&&J(a||e,"text",t.SUBTITLES))})),o&&l&&(n=n.filter((function(e){return!!e.videoCodec}))),n=n.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||w(t,"audio"))&&(!n||w(n,"video"))})),e.audioTracks&&(i=e.audioTracks.filter((function(e){return!e.audioCodec||w(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),n.length>0){t=n[0].bitrate,n.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=n;for(var d=0;d<n.length;d++)if(n[d].bitrate===t){this._firstLevel=d,c.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(u.default.MANIFEST_PARSED,{levels:n,audioTracks:i,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:i.some((function(e){return!!e.url}))})}else this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},l.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c.logger.log("switching to level "+e),this.currentLevelIndex=e;var i=t[e];i.level=e,n.trigger(u.default.LEVEL_SWITCHING,i)}var r=t[e],a=r.details;if(!a||a.live){var o=r.urlId;n.trigger(u.default.LEVEL_LOADING,{url:r.url[o],level:e,id:o})}}else n.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},l.onError=function(e){if(e.fatal)e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,i=!1;switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,i=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,i)}},l.recoverLevel=function(e,t,n,i){var r,a,o,s=this,l=this.hls.config,u=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=i,n){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),e.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(n||i)&&((r=d.url.length)>1&&d.loadError<r?(d.urlId=(d.urlId+1)%r,d.details=void 0,c.logger.warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,c.logger.warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):i&&(c.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},l.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},l.onLevelLoaded=function(e){var t=this,n=e.level,i=e.details;if(n===this.currentLevelIndex){var r=this._levels[n];if(r.fragmentError||(r.loadError=0,this.levelRetryCount=0),i.live){var a=re(r.details,i,e.stats.trequest);c.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},l.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var i=-1,r=0;r<n.audioGroupIds.length;r++)if(n.audioGroupIds[r]===t){i=r;break}i!==n.urlId&&(n.urlId=i,this.startLoad())}},l.loadLevel=function(){if(c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,n=e.urlId,i=e.url[n];c.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(u.default.LEVEL_LOADING,{url:i,level:t,id:n})}}},r=i,(a=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&Le(r.prototype,a),o&&Le(r,o),i}(h),Ne=n("./src/demux/id3.js");function Ue(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function Be(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Fe=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,n.media=void 0,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){h.prototype.destroy.call(this)},r.onMediaAttached=function(e){this.media=e.media,this.media},r.onMediaDetaching=function(){Be(this.id3Track),this.id3Track=void 0,this.media=void 0},r.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Ue(n,this.media),n}return this.media.addTextTrack("metadata","id3")},r.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var a=Ne.default.getID3Frames(n[r].data);if(a){var o=n[r].pts,s=r<n.length-1?n[r+1].pts:t.endPTS;o===s?s+=1e-4:o>s&&(c.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),s=o+.25);for(var l=0;l<a.length;l++){var u=a[l];if(!Ne.default.isTimeStampFrame(u)){var d=new i(o,s,"");d.value=u,this.id3Track.addCue(d)}}}}},r.onLiveBackBufferReached=function(e){var t=e.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var i=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var n=0,i=e.length-1;n<=i;){var r=Math.floor((i+n)/2);if(t<e[r].endTime)i=r-1;else{if(!(t>e[r].endTime))return e[r];n=r+1}}return e[n].endTime-t<t-e[i].endTime?e[n]:e[i]}(n.cues,t);if(i)for(;n.cues[0]!==i;)n.removeCue(n.cues[0])}},i}(h),je=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),He=function(){function e(e,t,n,i){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new je(t),this.fast_=new je(n)}var t=e.prototype;return t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function Ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ke=window.performance,ze=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=t,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,d=i.prototype;return d.destroy=function(){this.clearTimer(),h.prototype.destroy.call(this)},d.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,i,r=this.hls,a=r.config,o=t.level;r.levels[o].details.live?(n=a.abrEwmaFastLive,i=a.abrEwmaSlowLive):(n=a.abrEwmaFastVoD,i=a.abrEwmaSlowVoD),this._bwEstimator=new He(r,i,n,a.abrEwmaDefaultEstimate)}},d._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var i=n.loader,r=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=i.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var o=Ke.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*n.duration/s){var l=e.levels,d=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),h=l[n.level],p=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,f=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*p/8)),y=t.currentTime,g=(f-a.loaded)/d,v=(K.bufferInfo(t,y,e.config.maxBufferHole).end-y)/s;if(v<2*n.duration/s&&g>v){var m,b;for(b=n.level-1;b>r;b--){var E=l[b].realBitrate?Math.max(l[b].realBitrate,l[b].bitrate):l[b].bitrate;if(n.duration*E/(6.4*d)<v)break}m<g&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+b+":fragLoadedDelay["+b+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+g.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=b,this._bwEstimator.sample(o,a.loaded),i.abort(),this.clearTimer(),e.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},d.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],i=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,r=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},d.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!0!==t.aborted&&"main"===n.type&&Object(l.isFiniteNumber)(n.sn)&&(!n.bitrateTest||t.tload===t.tbuffered)){var i=t.tparsed-t.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},d.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},d.clearTimer=function(){clearInterval(this.timer),this.timer=null},d._findBestLevel=function(e,t,n,i,r,a,o,s,l){for(var u=r;u>=i;u--){var d=l[u];if(d){var h=d.details,p=h?h.totalduration/h.fragments.length:t,f=!!h&&h.live,y=void 0;y=u<=e?o*n:s*n;var g=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=g*p/y;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(y)+"/"+g+"/"+p+"/"+a+"/"+v),y>g&&(!v||f&&!this.bitrateTestDelay||v<a))return u}}return-1},r=i,(a=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,i=e.config,r=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(K.bufferInfo(a,l,i.maxBufferHole).end-l)/u,p=this._findBestLevel(o,s,d,r,t,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(p>=0)return p;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,y=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===h){var v=this.bitrateTestDelay;v&&(f=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-v,c.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),y=g=1)}return p=this._findBestLevel(o,s,d,r,t,h+f,y,g,n),Math.max(p,0)}}])&&Ve(r.prototype,a),o&&Ve(r,o),i}(h),Ge=Y(),We=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){c.logger.log("media source opened"),n.hls.trigger(u.default.MEDIA_ATTACHED,{media:n.media});var e=n.mediaSource;e&&e.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){c.logger.log("media source closed")},n._onMediaSourceEnded=function(){c.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var e=n.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+n.audioTimestampOffset),e.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var t=n.parent,i=n.segments.reduce((function(e,n){return n.parent===t?e+1:e}),0),r={},a=n.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");r[o]=s.buffered}n.hls.trigger(u.default.BUFFER_APPENDED,{parent:t,pending:i,timeRanges:r}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===i&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(e){c.logger.error("sourceBuffer error:",e),n.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=t.config,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){h.prototype.destroy.call(this)},r.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(!i)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(i.timestampOffset-e.start)>.1){var r=i.updating;try{i.abort()}catch(e){c.logger.warn("can not abort audio buffer: "+e)}r?this.audioTimestampOffset=e.start:(c.logger.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}},r.onManifestParsed=function(e){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e.altAudio?2:1,c.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&Ge){var n=this.mediaSource=new Ge;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(n),this._objectUrl=t.src}},r.onMediaDetaching=function(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},r.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(n){t.pendingTracks[n]=e[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},r.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var i in e)if(!t[i]){var r=e[i];if(!r)throw Error("source buffer exists for track "+i+", however track does not");var a=r.levelCodec||r.codec,o=r.container+";codecs="+a;c.logger.log("creating sourceBuffer("+o+")");try{var l=t[i]=n.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[i]={buffer:l,codec:a,id:r.id,container:r.container,levelCodec:r.levelCodec}}catch(e){c.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var n=this.sourceBuffer[t];n&&!n.ended&&(n.ended=!0,c.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},r.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var i=e[n];if(i){if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}}c.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,n=this.sourceBuffer,i=Object.keys(n),r=t-Math.max(e,this._levelTargetDuration),a=i.length-1;a>=0;a--){var o=i[a],s=n[o];if(s){var l=s.buffered;l.length>0&&r>l.start(0)&&this.removeBufferRange(o,s,0,r)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r})}}else c.logger.error("flushLiveBackBuffer called without attaching media")}},r.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var i=this.sourceBuffer[n];if(i&&!0===i.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l.isFiniteNumber)(e))&&(c.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var i in n){var r=n[i];r&&(t+=r.buffered.length)}}catch(e){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}},r.doAppending=function(){var e=this.config,t=this.hls,n=this.segments,i=this.sourceBuffer;if(Object.keys(i).length){if(!this.media||this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var r=n.shift();if(r)try{var a=i[r.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void n.unshift(r);a.ended=!1,this.parent=r.parent,a.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0}catch(i){c.logger.error("error while trying to append buffer:"+i.message),n.unshift(r);var o={type:s.ErrorTypes.MEDIA_ERROR,parent:r.parent,details:"",fatal:!1};22===i.code?(this.segments=[],o.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(c.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),t.trigger(u.default.ERROR,o)}}}},r.flushBuffer=function(e,t,n){var i=this.sourceBuffer;if(!Object.keys(i).length)return!0;var r="null";if(this.media&&(r=this.media.currentTime.toFixed(3)),c.logger.log("flushBuffer,pos/start/end: "+r+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c.logger.warn("abort flushing too many retries"),!0;var a=i[n];if(a){if(a.ended=!1,a.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,a,e,t))return this.flushBufferCounter++,!1}return c.logger.log("buffer flushed"),!0},r.removeBufferRange=function(e,t,n,i){try{for(var r=0;r<t.buffered.length;r++){var a=t.buffered.start(r),o=t.buffered.end(r),s=Math.max(a,n),l=Math.min(o,i);if(Math.min(l,o)-s>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c.logger.log("sb remove "+e+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+u),t.remove(s,l),!0}}}catch(e){c.logger.warn("removeBufferRange failed",e)}return!1},i}(h);function Ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $e=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,s=i.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},s.onFpsDropLevelCapping=function(e){i.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},s.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},s.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onLevelsUpdated=function(e){this.levels=e.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,r){return i.isLevelAllowed(r,t.restrictedLevels)&&r<=e}));return i.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},i.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},i.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var i,r,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=n)&&(i=s,!(r=e[o+1])||i.width!==r.width||i.height!==r.height)){a=o;break}}return a},r=i,o=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(a=[{key:"mediaWidth",get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=i.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=i.contentScaleFactor),e}}])&&Ye(r.prototype,a),o&&Ye(r,o),i}(h),qe=window.performance,Xe=function(e){var t,n;function i(t){return e.call(this,t,u.default.MEDIA_ATTACHING)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},r.checkFPS=function(e,t,n){var i=qe.now();if(t){if(this.lastTime){var r=i-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/r,l=this.hls;if(l.trigger(u.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},r.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},i}(h),Qe=window,Ze=Qe.performance,Je=Qe.XMLHttpRequest,et=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:Ze.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new Je;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(n){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,i=this.stats,r=this.context,a=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(Ze.now(),i.trequest)),4===n){var o=t.status;if(o>=200&&o<300){var s,l;i.tload=Math.max(i.tfirst,Ze.now()),l="arraybuffer"===r.responseType?(s=t.response).byteLength:(s=t.responseText).length,i.loaded=i.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,i,r,t)}else i.retry>=a.maxRetry||o>=400&&o<499?(c.logger.error(o+" while loading "+r.url),this.callbacks.onError({code:o,text:t.statusText},r,t)):(c.logger.warn(o+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.loadtimeout=function(){c.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,t)},e}();function tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nt=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,l=i.prototype;return l.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},l.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectInitialAudioTrack()},l.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)c.logger.warn("Invalid audio track id:",e.id);else{if(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},l.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},l.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var n=t.audioGroupIds[t.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},l.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(c.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},l._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)c.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var n=t.url,i=t.type,r=t.id;this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:r,type:i,url:n}),this._loadTrackDetailsIfNeeded(t)}},l.doTick=function(){this._updateTrack(this._trackId)},l._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var n=this.tracks[this._trackId],i=null;if(n&&(i=n.name),this._selectDefaultTrack){var r=t.filter((function(e){return e.default}));r.length?t=r:c.logger.warn("No default audio tracks defined")}var a=!1,o=function(){t.forEach((function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||i&&i!==t.name||(e._setAudioTrack(t.id),a=!0)}))};o(),a||(i=null,o()),a||(c.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},l._needsTrackLoading=function(e){var t=e.details,n=e.url;return!(t&&!t.live||!n)},l._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,n=e.id;c.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:t,id:n})}},l._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},l._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],n=t.name,i=t.language,r=t.groupId;c.logger.warn("Loading failed on audio track id: "+e+", group-id: "+r+', name/language: "'+n+'" / "'+i+'"');for(var a=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===n){a=o;break}a!==e?(c.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):c.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+i+'"')},r=i,(a=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&tt(r.prototype,a),o&&tt(r,o),i}(fe);function it(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var rt=window.performance,at=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this).fragmentTracker=n,i.config=t.config,i.audioCodecSwap=!1,i._state=ye,i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,d=i.prototype;return d.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[n]=i,this.videoTrackCC=n,c.logger.log("InitPTS for cc: "+n+" found from video track: "+i),this.state===Re&&this.tick())},d.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(c.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=ve):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=ge),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ye},d.doTick=function(){var e,t,n,i=this.hls,r=i.config;switch(this.state){case Ce:case me:case we:break;case ge:this.state=Ae,this.loadedmetadata=!1;break;case ve:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,d=K.bufferInfo(o,e,r.maxBufferHole),h=K.bufferInfo(s,e,r.maxBufferHole),p=d.len,f=d.end,y=this.fragPrevious,g=Math.min(r.maxBufferLength,r.maxMaxBufferLength),v=Math.max(g,h.len),m=this.audioSwitch,b=this.trackId;if((p<v||m)&&b<a.length){if(void 0===(n=a[b].details)){this.state=Ae;break}if(!m&&this._streamEnded(d,n))return this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),void(this.state=Se);var E,k=n.fragments,A=k.length,_=k[0].start,T=k[A-1].start+k[A-1].duration;if(m)if(n.live&&!n.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),f=0;else if(f=e,n.PTSKnown&&e<_){if(!(d.end>_||d.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=_+.05}if(n.initSegment&&!n.initSegment.data)E=n.initSegment;else if(f<=_){if(E=k[0],null!==this.videoTrackCC&&E.cc!==this.videoTrackCC&&(E=function(e,t){return V.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(k,this.videoTrackCC)),n.live&&E.loadIdx&&E.loadIdx===this.fragLoadIdx){var w=d.nextStart?d.nextStart:_;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(w+.05)),void(this.media.currentTime=w+.05)}}else{var S,C=r.maxFragLookUpTolerance,R=y?k[y.sn-k[0].sn+1]:void 0,I=function(e){var t=Math.min(C,e.duration);return e.start+e.duration-t<=f?1:e.start-t>f&&e.start?-1:0};f<T?(f>T-C&&(C=0),S=R&&!I(R)?R:V.search(k,I)):S=k[A-1],S&&(E=S,_=S.start,y&&E.level===y.level&&E.sn===y.sn&&(E.sn<n.endSN?(E=k[E.sn+1-n.startSN],c.logger.log("SN just loaded, load next one: "+E.sn)):E=null))}E&&(E.encrypted?(c.logger.log("Loading key for "+E.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+b),this.state=be,i.trigger(u.default.KEY_LOADING,{frag:E})):(c.logger.log("Loading "+E.sn+", cc: "+E.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+b+", currentTime:"+e+",bufferEnd:"+f.toFixed(3)),this.fragCurrent=E,(m||this.fragmentTracker.getState(E)===U)&&("initSegment"!==E.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(E.sn)&&(this.nextLoadPosition=E.start+E.duration),i.trigger(u.default.FRAG_LOADING,{frag:E}),this.state=Ee)))}break;case Ae:(t=this.tracks[this.trackId])&&t.details&&(this.state=ve);break;case ke:var D=rt.now(),O=this.retryDate,P=(o=this.media)&&o.seeking;(!O||D>=O||P)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ve);break;case Re:var x=this.videoTrackCC;if(void 0===this.initPTS[x])break;var L=this.waitingFragment;if(L){var M=L.frag.cc;x!==M?(t=this.tracks[this.trackId]).details&&t.details.live&&(c.logger.warn("Waiting fragment CC ("+M+") does not match video track CC ("+x+")"),this.waitingFragment=null,this.state=ve):(this.state=Ee,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=ve}},d.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},d.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},d.onAudioTracksUpdated=function(e){c.logger.log("audio tracks updated"),this.tracks=e.audioTracks},d.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=me,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=ve),this.tick()},d.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,i=this.tracks[n],r=t.totalduration,a=0;if(c.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),t.live){var o=i.details;o&&t.fragments.length>0?(ne(o,t),a=t.fragments[0].start,t.PTSKnown?c.logger.log("live audio playlist sliding:"+a.toFixed(3)):c.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(l.isFiniteNumber)(s)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(a,t),c.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Ae&&(this.state=ve),this.tick()},d.onKeyLoaded=function(){this.state===be&&(this.state=ve,this.tick())},d.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===Ee&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var i=this.tracks[this.trackId],r=i.details,a=r.totalduration,o=t.level,s=t.sn,l=t.cc,d=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===s)this.state=ve,h.tparsed=h.tbuffered=rt.now(),r.initSegment.data=e.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=_e,this.appended=!1,this.demuxer||(this.demuxer=new Z(this.hls,"audio"));var p=this.initPTS[l],f=r.initSegment?r.initSegment.data:[];r.initSegment||void 0!==p?(this.pendingBuffering=!0,c.logger.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.demuxer.push(e.payload,f,d,null,t,a,!1,p)):(c.logger.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.waitingFragment=e,this.state=Re)}}this.fragLoadError=0},d.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===_e){var i,r=e.tracks;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(u.default.BUFFER_CODECS,r),c.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,o))}this.tick()}}},d.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&i.sn===n.sn&&i.level===n.level&&this.state===_e){var r=this.trackId,a=this.tracks[r],o=this.hls;Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),n.addElementaryStream(y.AUDIO),c.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),te(a.details,n,e.startPTS,e.endPTS);var d=this.audioSwitch,h=this.media,p=!1;if(d)if(h&&h.readyState){var f=h.currentTime;c.logger.log("switching audio track : currentTime:"+f),f>=e.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state=we,o.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),p=!0,this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:r});var g=this.pendingData;if(!g)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&g.push({type:e.type,data:t,parent:"audio",content:"data"})})),!p&&g.length&&(g.forEach((function(e){t.state===_e&&(t.pendingBuffering=!0,t.hls.trigger(u.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},d.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===_e&&(this.stats.tparsed=rt.now(),this.state=Te,this._checkAppendedParsed())},d.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},d.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},d.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==_e&&t!==Te||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},d._checkAppendedParsed=function(){if(!(this.state!==Te||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=rt.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;i&&c.logger.log("audio buffered : "+ae.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ve}this.tick()}},d.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=e.frag;if(n&&"audio"!==n.type)break;if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var r=this.config;if(i<=r.fragLoadingMaxRetry){this.fragLoadError=i;var a=Math.min(Math.pow(2,i-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=rt.now()+a,this.state=ke}else c.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ce}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Ce&&(this.state=e.fatal?Ce:ve,c.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===_e||this.state===Te)){var o=this.mediaBuffer,l=this.media.currentTime;if(o&&K.isBuffered(o,l)&&K.isBuffered(o,l+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state=ve}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=we,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},d.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(u.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=Te):(this.state=ve,this.fragPrevious=null,this.tick())},r=i,(a=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}])&&it(r.prototype,a),o&&it(r,o),i}(De),ot=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function r(t,r,a){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l="",u=!1,c=t,d=r,h=a,p=null,f="",y=!0,g="auto",v="start",m=50,b="middle",E=50,k="middle";Object.defineProperty(o,"id",i({},s,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},s,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",i({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},s,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},s,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},s,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},s,{get:function(){return f},set:function(t){var n=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");f=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},s,{get:function(){return y},set:function(e){y=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},s,{get:function(){return g},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},s,{get:function(){return v},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},s,{get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},s,{get:function(){return b},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},s,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},s,{get:function(){return k},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");k=t,this.hasBeenReset=!0}})),o.displayState=void 0}return r.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},r}(),st=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function lt(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new st,this.regionList=[]}function ut(){this.values=Object.create(null)}function ct(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);2===o.length&&t(o[0],o[1])}}ut.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var dt=new ot(0,0,0),ht="middle"===dt.align?"middle":"center";function pt(e,t,n){var i=e;function r(){var t=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var i=new ut;ct(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",ht,"end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",ht,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",ht,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===dt.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",ht);var a=i.get("position","auto");"auto"===a&&50===dt.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function ft(e){return e.replace(/<br(?: \/)?>/gi,"\n")}lt.prototype={parse:function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=ft(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r=(i=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=n(),t.state){case"HEADER":/:/.test(i)?ct(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new ot(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{pt(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}};var yt=lt;function gt(e,t,n,i){for(var r,a,o,s,l,u=window.VTTCue||TextTrackCue,c=0;c<i.rows.length;c++)if(o=!0,s=0,l="",!(r=i.rows[c]).isEmpty()){for(var d=0;d<r.chars.length;d++)r.chars[d].uchar.match(/\s/)&&o?s++:(l+=r.chars[d].uchar,o=!1);r.cueStartTime=t,t===n&&(n+=1e-4),a=new u(t,n,ft(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),e.addCue(a)}}var vt,mt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},bt=function(e){var t=e;return mt.hasOwnProperty(e)&&(t=mt[e]),String.fromCharCode(t)},Et=15,kt=100,At={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},_t={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Tt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},wt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},St=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(vt||(vt={}));var Ct={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e],this.verboseLevel}},Rt=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},It=function(){function e(e,t,n,i,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Dt=function(){function e(e,t,n,i,r,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new It(t,n,i,r,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),Ot=function(){function e(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var e=0;e<kt;e++)this.chars.push(new Dt);this.pos=0,this.currPenState=new It}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<kt;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<kt;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<kt;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(Ct.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>kt&&(Ct.log("ERROR","Too large cursor position "+this.pos),this.pos=kt)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=bt(e);this.pos>=kt?Ct.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<kt;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<kt;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Pt=function(){function e(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var e=0;e<Et;e++)this.rows.push(new Ot);this.currRow=14,this.nrRollUpRows=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<Et;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,n=0;n<Et;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<Et;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<Et;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){Ct.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){Ct.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<Et;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime;if(a&&Ct.time&&a<Ct.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(r.rows[i+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},t.setBkgData=function(e){Ct.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){Ct.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Ct.log("INFO","Rolling up")}else Ct.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<Et;r++){var a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),xt=function(){function e(e,t){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Pt,this.nonDisplayedMemory=new Pt,this.lastOutputScreen=new Pt,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,Ct.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Ct.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Ct.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){Ct.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){Ct.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){Ct.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){Ct.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){Ct.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){Ct.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){Ct.log("INFO","TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){Ct.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){Ct.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){Ct.log("INFO","CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){Ct.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(Ct.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Ct.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){Ct.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}Ct.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=Ct.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),Lt=function(){function e(e,t,n){this.field=void 0,this.outputs=void 0,this.channels=void 0,this.currChNr=void 0,this.lastCmdA=void 0,this.lastCmdB=void 0,this.lastTime=void 0,this.dataCounters=void 0,this.field=e||1,this.outputs=[t,n],this.channels=[new xt(1,t),new xt(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,i,r,a=!1;this.lastTime=e,Ct.setTime(e);for(var o=0;o<t.length;o+=2)i=127&t[o],r=127&t[o+1],0!==i||0!==r?(Ct.log("DATA","["+Rt([t[o],t[o+1]])+"] -> ("+Rt([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),n||(a=this.parseChars(i,r))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(a):Ct.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,Ct.log("WARNING","Couldn't parse cleaned data "+Rt([i,r])+" orig: "+Rt([t[o],t[o+1]])))):this.dataCounters.padding+=2},t.parseCmd=function(e,t){var n=null;if(!((20===e||28===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Ct.log("DEBUG","Repeated command ("+Rt([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var i=this.channels[n-1];return 20===e||28===e?32===t?i.ccRCL():33===t?i.ccBS():34===t?i.ccAOF():35===t?i.ccAON():36===t?i.ccDER():37===t?i.ccRU(2):38===t?i.ccRU(3):39===t?i.ccRU(4):40===t?i.ccFON():41===t?i.ccRDC():42===t?i.ccTR():43===t?i.ccRTD():44===t?i.ccEDM():45===t?i.ccCR():46===t?i.ccENM():47===t&&i.ccEOC():i.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},t.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&t>=32&&t<=47&&((n=17===e?1:2)!==this.currChNr?(Ct.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),Ct.log("DEBUG","MIDROW ("+Rt([e,t])+")"),!0))},t.parsePAC=function(e,t){var n,i=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,i=t>=64&&t<=95?1===n?At[e]:Tt[e]:1===n?_t[e]:wt[e];var r=this.interpretPAC(i,t);return this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},t.interpretPAC=function(e,t){var n=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},t.parseChars=function(e,t){var n=null,i=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),r>=17&&r<=19){var a=t;a=17===r?t+80:18===r?t+112:t+144,Ct.log("INFO","Special char '"+bt(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var o=Rt(i);Ct.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},t.parseBackgroundAttributes=function(e,t){var n,i,r;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=St[i],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},t.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),Mt=function(){function e(e,t){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e}(),Nt=function(e,t,n){return e.substr(n||0,t.length)===t},Ut=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},Bt={parse:function(e,t,n,i,r,a){var o,s=Object(Ne.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",c=0,d=0,h=0,p=[],f=!0,y=!1,g=new yt;g.oncue=function(e){var t=n[i],r=n.ccOffset;t&&t.new&&(void 0!==d?r=n.ccOffset=t.start:function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)e.ccOffset+=i.start-r.start,i.new=!1,r=e[(i=r).prevCC];e.presentationOffset=n}(n,i,h)),h&&(r=h-n.presentationOffset),y&&(e.startTime+=r-d,e.endTime+=r-d),e.id=Ut(e.startTime.toString())+Ut(e.endTime.toString())+Ut(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&p.push(e)},g.onparsingerror=function(e){o=e},g.onflush=function(){o&&a?a(o):r(p)},s.forEach((function(e){if(f){if(Nt(e,"X-TIMESTAMP-MAP=")){f=!1,y=!0,e.substr(16).split(",").forEach((function(e){Nt(e,"LOCAL:")?u=e.substr(6):Nt(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{t+(9e4*n[i].start||0)<0&&(t+=8589934592),c-=t,d=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),r=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(l.isFiniteNumber)(t)&&Object(l.isFiniteNumber)(n)&&Object(l.isFiniteNumber)(i)&&Object(l.isFiniteNumber)(r)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,(t+=6e4*i)+36e5*r}(u)/1e3,h=c/9e4}catch(e){y=!1,o=e}return}""===e&&(f=!1)}g.parse(e+"\n")})),g.flush()}};function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var Ht=function(e){var t,n;function i(t){var n;if((n=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this).media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.cueRanges=[],n.captionsTracks={},n.captionsProperties=void 0,n.cea608Parser=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs=null,n.hls=t,n.config=t.config,n.Cues=t.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var i=new Mt(Ft(n),"textTrack1"),r=new Mt(Ft(n),"textTrack2");n.cea608Parser=new Lt(0,i,r)}return n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.addCues=function(e,t,n,i){for(var r,a,o,s,l=this.cueRanges,u=!1,c=l.length;c--;){var d=l[c],h=(r=d[0],a=d[1],o=t,s=n,Math.min(a,s)-Math.max(r,o));if(h>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],n),u=!0,h/(n-t)>.5))return}u||l.push([t,n]),this.Cues.newCue(this.captionsTracks[e],t,n,i)},r.onInitPtsFound=function(e){var t=this,n=e.frag,i=e.id,r=e.initPTS,a=this.unparsedVttFrags;"main"===i&&(this.initPTS[n.cc]=r),a.length&&(this.unparsedVttFrags=[],a.forEach((function(e){t.onFragLoaded(e)})))},r.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(i[e])return i}return null},r.createCaptionsTrack=function(e){var t=this.captionsProperties,n=this.captionsTracks,i=this.media,r=t[e],a=r.label,o=r.languageCode;if(!n[e]){var s=this.getExistingTrack(e);if(s)n[e]=s,Be(n[e]),Ue(n[e],i);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,n[e]=l)}}},r.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},r.destroy=function(){e.prototype.destroy.call(this)},r.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Be(e[t]),delete e[t]}))},r.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Be(t[n])}},r.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,i){var r;if(i<n.length){for(var a=null,o=0;o<n.length;o++)if(jt(n[o],e)){a=n[o];break}a&&(r=a)}r||(r=t.createTextTrack("subtitles",e.name,e.lang)),e.default?r.mode=t.hls.subtitleDisplay?"showing":"hidden":r.mode="disabled",t.textTracks.push(r)}))}},r.onFragLoaded=function(e){var t=e.frag,n=e.payload,i=this.cea608Parser,r=this.initPTS,a=this.lastSn,o=this.unparsedVttFrags;if("main"===t.type){var s=t.sn;t.sn!==a+1&&i&&i.reset(),this.lastSn=s}else if("subtitle"===t.type)if(n.byteLength){if(!Object(l.isFiniteNumber)(r[t.cc]))return o.push(e),void(r.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var c=t.decryptdata;null!=c&&null!=c.key&&"AES-128"===c.method||this._parseVTTs(t,n)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},r._parseVTTs=function(e,t){var n=this.hls,i=this.prevCC,r=this.textTracks,a=this.vttCCs;a[e.cc]||(a[e.cc]={start:e.start,prevCC:i,new:!0},this.prevCC=e.cc),Bt.parse(t,this.initPTS[e.cc],a,e.cc,(function(t){var i=r[e.level];"disabled"!==i.mode?(t.forEach((function(e){if(!i.cues.getCueById(e.id))try{if(i.addCue(e),!i.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(n){c.logger.debug("Failed occurred on adding cues: "+n);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,i.addCue(t)}})),n.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):n.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}),(function(t){c.logger.log("Failed to parse VTT cue: "+t),n.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},r.onFragDecrypted=function(e){var t=e.frag,n=e.payload;if("subtitle"===t.type){if(!Object(l.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,n)}},r.onFragParsingUserdata=function(e){if(this.enabled&&this.cea608Parser)for(var t=0;t<e.samples.length;t++){var n=e.samples[t].bytes;if(n){var i=this.extractCea608Data(n);this.cea608Parser.addData(e.samples[t].pts,i)}}},r.extractCea608Data=function(e){for(var t,n,i,r=31&e[0],a=2,o=[],s=0;s<r;s++)t=e[a++],n=127&e[a++],i=127&e[a++],0===n&&0===i||0!=(4&t)&&0==(3&t)&&(o.push(n),o.push(i));return o},i}(h);function Vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kt(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"subtitles"===i.kind&&i.label&&t.push(e[n])}return t}var zt,Gt=function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,s=i.prototype;return s.destroy=function(){h.prototype.destroy.call(this)},s.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},s.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),Kt(this.media.textTracks).forEach((function(e){Be(e)})),this.subtitleTrack=-1,this.media=null)},s.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},s.onSubtitleTrackLoaded=function(e){var t=this,n=e.id,i=e.details,r=this.trackId,a=this.tracks,o=a[r];if(n>=a.length||n!==r||!o||this.stopped)this._clearReloadTimer();else if(c.logger.log("subtitle track "+n+" loaded"),i.live){var s=re(o.details,i,e.stats.trequest);c.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},s.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},s.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},s._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},s._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,n=this.hls,i=t[e];e<0||!i||i.details&&!i.details.live||(c.logger.log("Loading subtitle track "+e),n.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:e}))},s._toggleTrackModes=function(e){var t=this.media,n=this.subtitleDisplay,i=this.trackId;if(t){var r=Kt(t.textTracks);if(-1===e)[].slice.call(r).forEach((function(e){e.mode="disabled"}));else{var a=r[i];a&&(a.mode="disabled")}var o=r[e];o&&(o.mode=n?"showing":"hidden")}},s._setSubtitleTrackInternal=function(e){var t=this.hls,n=this.tracks;!Object(l.isFiniteNumber)(e)||e<-1||e>=n.length||(this.trackId=e,c.logger.log("Switching to subtitle track "+e),t.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},s._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=Kt(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},r=i,(a=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&Vt(r.prototype,a),o&&Vt(r,o),i}(h),Wt=n("./src/crypt/decrypter.js"),Yt=window.performance,$t=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this).fragmentTracker=n,i.config=t.config,i.state=ye,i.tracks=[],i.tracksBuffered=[],i.currentTrackId=-1,i.decrypter=new Wt.default(t,t.config),i.lastAVStart=0,i._onMediaSeeking=i.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i)),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.onSubtitleFragProcessed=function(e){var t=e.frag,n=e.success;if(this.fragPrevious=t,this.state=ve,n){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var r,a=t.start,o=0;o<i.length;o++)if(a>=i[o].start&&a<=i[o].end){r=i[o];break}var s=t.start+t.duration;r?r.end=s:(r={start:a,end:s},i.push(r))}}},r.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=ve},r.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=ye)},r.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=ve)},r.onSubtitleTracksUpdated=function(e){var t=this;c.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},r.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(e){var t=e.id,n=e.details,i=this.currentTrackId,r=this.tracks,a=r[i];t>=r.length||t!==i||!a||(n.live&&function(e,t,n){void 0===n&&(n=0);var i=-1;ie(e,t,(function(e,t,n){t.start=e.start,i=n}));var r=t.fragments;if(i<0)r.forEach((function(e){e.start+=n}));else for(var a=i+1;a<r.length;a++)r[a].start=r[a-1].start+r[a-1].duration}(a.details,n,this.lastAVStart),a.details=n,this.setInterval(500))},r.onKeyLoaded=function(){this.state===be&&(this.state=ve)},r.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,i=e.frag,r=this.hls;if(this.state===Ee&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=Yt.now();this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,(function(e){var t=Yt.now();r.trigger(u.default.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:a,tdecrypt:t}})}))}},r.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},r.doTick=function(){if(this.media)switch(this.state){case ve:var e=this.config,t=this.currentTrackId,n=this.fragmentTracker,i=this.media,r=this.tracks;if(!r||!r[t]||!r[t].details)break;var a,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),d=K.bufferedInfo(this._getBuffered(),i.currentTime,o),h=d.end,p=d.len,f=r[t].details,y=f.fragments,g=y.length,v=y[g-1].start+y[g-1].duration;if(p>l)return;var m=this.fragPrevious;h<v?(m&&f.hasProgramDateTime&&(a=le(y,m.endProgramDateTime,s)),a||(a=ue(m,y,h,s))):a=y[g-1],a&&a.encrypted?(c.logger.log("Loading key for "+a.sn),this.state=be,this.hls.trigger(u.default.KEY_LOADING,{frag:a})):a&&n.getState(a)===U&&(this.fragCurrent=a,this.state=Ee,this.hls.trigger(u.default.FRAG_LOADING,{frag:a}))}else this.state=ve},r.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},r._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},r.onMediaSeeking=function(){this.fragPrevious=null},i}(De);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(zt||(zt={}));var qt="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function Xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Qt(e,t,n[t])}))}return e}({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:et,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:ze,bufferController:We,capLevelController:$e,fpsController:Xe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:qt},{cueHandler:i,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es"},{subtitleStreamController:$t,subtitleTrackController:Gt,timelineController:Ht,audioStreamController:at,audioTrackController:nt,emeController:function(e){var t,n;function i(t){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n._onMediaEncrypted=function(e){c.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),n._attemptSetMediaKeys(),n._generateRequestWithPreferredKeySession(e.initDataType,e.initData)},n._config=t.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a,o,l=i.prototype;return l.getLicenseServerUrl=function(e){switch(e){case zt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},l._attemptKeySystemAccess=function(e,t,n){var i=this,r=function(e,t,n){switch(e){case zt.WIDEVINE:return function(e,t){var n={videoCapabilities:[]};return t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})})),[n]}(0,n);default:throw new Error("Unknown key-system: "+e)}}(e,0,n);c.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,r).then((function(t){i._onMediaKeySystemAccessObtained(e,t)})).catch((function(t){c.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},l._onMediaKeySystemAccessObtained=function(e,t){var n=this;c.logger.log('Access for key-system "'+e+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(i),t.createMediaKeys().then((function(t){i.mediaKeys=t,c.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated()})).catch((function(e){c.logger.error("Failed to create media-keys:",e)}))},l._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},l._onNewMediaKeySession=function(e){var t=this;c.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(n){t._onKeySessionMessage(e,n.message)}),!1)},l._onKeySessionMessage=function(e,t){c.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){c.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},l._attemptSetMediaKeys=function(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});c.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},l._generateRequestWithPreferredKeySession=function(e,t){var n=this,i=this._mediaKeysList[0];if(!i)return c.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(i.mediaKeysSessionInitialized)c.logger.warn("Key-Session already initialized but requested again");else{var r=i.mediaKeysSession;if(!r)return c.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return c.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c.logger.log('Generating key-session request for "'+e+'" init data type'),i.mediaKeysSessionInitialized=!0,r.generateRequest(e,t).then((function(){c.logger.debug("Key-session generation succeeded")})).catch((function(e){c.logger.error("Error generating key-session request:",e),n.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},l._createLicenseXhr=function(e,t,n){var i=new XMLHttpRequest,r=this._licenseXhrSetup;try{if(r)try{r(i,e)}catch(t){i.open("POST",e,!0),r(i,e)}i.readyState||i.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,e,t,n),i},l._onLicenseRequestReadyStageChange=function(e,t,n,i){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,c.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&c.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),i(e.response);else{if(c.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var r=3-this._requestLicenseFailureCount+1;c.logger.warn("Retrying license request, "+r+" attempts left"),this._requestLicense(n,i)}}},l._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case zt.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},l._requestLicense=function(e,t){c.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return c.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),r=this._createLicenseXhr(i,e,t);c.logger.log("Sending license request to URL: "+i);var a=this._generateLicenseRequestChallenge(n,e);r.send(a)}catch(e){c.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},l.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},l.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},l.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),n=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(zt.WIDEVINE,t,n)}},r=i,(a=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Xt(r.prototype,a),o&&Xt(r,o),i}(h)});function Jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function nn(e,t,n){return t&&tn(e.prototype,t),n&&tn(e,n),e}n.d(t,"default",(function(){return rn}));var rn=function(e){var t,n;function i(t){var n;void 0===t&&(t={}),(n=e.call(this)||this).config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var r=i.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Jt(e,t,n[t])}))}return e}({},r,t);var a=en(n).config;if(void 0!==a.liveMaxLatencyDurationCount&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==a.liveMaxLatencyDuration&&(void 0===a.liveSyncDuration||a.liveMaxLatencyDuration<=a.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.enableLogs)(a.debug),n._autoLevelCapping=-1;var o=n.abrController=new a.abrController(en(n)),s=new a.bufferController(en(n)),l=n.capLevelController=new a.capLevelController(en(n)),u=new a.fpsController(en(n)),d=new L(en(n)),h=new M(en(n)),p=new N(en(n)),f=new Fe(en(n)),y=n.levelController=new Me(en(n)),g=new H(en(n)),v=[y,n.streamController=new xe(en(n),g)],m=a.audioStreamController;m&&v.push(new m(en(n),g)),n.networkControllers=v;var b=[d,h,p,o,s,l,u,f,g];if(m=a.audioTrackController){var E=new m(en(n));n.audioTrackController=E,b.push(E)}if(m=a.subtitleTrackController){var k=new m(en(n));n.subtitleTrackController=k,v.push(k)}if(m=a.emeController){var A=new m(en(n));n.emeController=A,b.push(A)}return(m=a.subtitleStreamController)&&v.push(new m(en(n),g)),(m=a.timelineController)&&b.push(new m(en(n))),n.coreComponents=b,n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.isSupported=function(){return function(){var e=Y();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i}()},nn(i,null,[{key:"version",get:function(){return"0.13.1-fix-initial-audio-setup"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return i.defaultConfig?i.defaultConfig:Zt},set:function(e){i.defaultConfig=e}}]);var r=i.prototype;return r.destroy=function(){c.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},r.attachMedia=function(e){c.logger.log("attachMedia"),this.media=e,this.trigger(u.default.MEDIA_ATTACHING,{media:e})},r.detachMedia=function(){c.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},r.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),c.logger.log("loadSource:"+e),this.url=e,this.trigger(u.default.MANIFEST_LOADING,{url:e})},r.startLoad=function(e){void 0===e&&(e=-1),c.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},r.stopLoad=function(){c.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},r.swapAudioCodec=function(){c.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},r.recoverMediaError=function(){c.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},nn(i,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){c.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){c.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){c.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){c.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){c.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){c.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,i=0;i<n;i++)if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),i}(q);rn.defaultConfig=void 0},"./src/polyfills/number-isFinite.js":
/*!******************************************!*\
    !*** ./src/polyfills/number-isFinite.js ***!
    \******************************************/
/*! exports provided: isFiniteNumber */function(e,t,n){n.r(t),n.d(t,"isFiniteNumber",(function(){return i}));var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/utils/get-self-scope.js":
/*!*************************************!*\
    !*** ./src/utils/get-self-scope.js ***!
    \*************************************/
/*! exports provided: getSelfScope */function(e,t,n){function i(){return"undefined"==typeof window?self:window}n.r(t),n.d(t,"getSelfScope",(function(){return i}))},"./src/utils/logger.js":
/*!*****************************!*\
    !*** ./src/utils/logger.js ***!
    \*****************************/
/*! exports provided: enableLogs, logger */function(e,t,n){n.r(t),n.d(t,"enableLogs",(function(){return c})),n.d(t,"logger",(function(){return d}));var i=n(/*! ./get-self-scope */"./src/utils/get-self-scope.js");function r(){}var a={trace:r,debug:r,log:r,warn:r,info:r,error:r},o=a;function s(e,t){return t="["+e+"] > "+t}var l=Object(i.getSelfScope)();function u(e){var t=l.console[e];return t?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];i[0]&&(i[0]=s(e,i[0])),t.apply(l.console,i)}:r}var c=function(e){if(l.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((function(t){o[t]=e[t]?e[t].bind(e):u(t)}))}(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=a}}else o=a},d=o}}).default},e.exports=n())}))),ht=ct((function(e,t){!function(){var n="undefined"!=typeof window?window:lt,i={};for(var r in function(t,n){var i,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},a=void 0!==t&&t===this?this:void 0!==n&&null!=n?n:this;function o(){o=function(){},a.Symbol||(a.Symbol=l)}var s,l=(s=0,function(e){return"jscomp_symbol_"+(e||"")+s++});function u(){o();var e=a.Symbol.iterator;e||(e=a.Symbol.iterator=a.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return c(this)}}),u=function(){}}function c(e){var t=0;return d((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function d(e){return u(),(e={next:e})[a.Symbol.iterator]=function(){return this},e}function h(e){u();var t=e[Symbol.iterator];return t?t.call(e):c(e)}function p(e,t){if(t){for(var n=a,i=e.split("."),o=0;o<i.length-1;o++){var s=i[o];s in n||(n[s]={}),n=n[s]}(s=t(o=n[i=i[i.length-1]]))!=o&&null!=s&&r(n,i,{configurable:!0,writable:!0,value:s})}}function f(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(e())}p("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},n.prototype.f=function(){var e=this;this.c((function(){e.h()}))};var r=a.setTimeout;n.prototype.c=function(e){r(e,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.g(e)}}}this.a=null},n.prototype.g=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.s),reject:e(this.f)}},t.prototype.s=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.u(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.m(e):this.h(e)}},t.prototype.m=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.B(t,e):this.h(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new n;return t.prototype.u=function(e){var t=this.c();e.dc(t.resolve,t.reject)},t.prototype.B=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.dc(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.dc=function(e,t){function n(){switch(i.b){case 1:e(i.g);break;case 2:t(i.g);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?o.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=h(e),a=r.next();!a.done;a=r.next())i(a.value).dc(t,n)}))},t.all=function(e){var n=h(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).dc(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),p("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));var y,g="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)y=Object.setPrototypeOf;else{var v;e:{var m={};try{m.__proto__={Fe:!0},v=m.Fe;break e}catch(s){}v=!1}y=v?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var b=y;function E(e,t){if(e.prototype=g(t.prototype),e.prototype.constructor=e,b)b(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.vg=t.prototype}function k(){this.g=!1,this.c=null,this.o=void 0,this.j=1,this.b=this.f=0,this.i=this.a=null}function A(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function _(e,t){e.a={Qd:t,be:!0},e.j=e.f||e.b}function T(e,t,n){return e.j=n,{value:t}}function w(e){e.j=0}function S(e,t,n){e.f=t,null!=n&&(e.b=n)}function C(e,t){e.f=0,e.b=t||0}function R(e,t){e.j=t,e.f=0}function I(e){e.f=0;var t=e.a.Qd;return e.a=null,t}function D(e){e.i=[e.a],e.f=0,e.b=0}function O(e,t){var n=e.i.splice(0)[0];(n=e.a=e.a||n)?n.be?e.j=e.f||e.b:null!=n.A&&e.b<n.A?(e.j=n.A,e.a=null):e.j=e.b:e.j=t}function P(e){this.a=new k,this.b=e}function x(e,t,n,i){try{var r=t.call(e.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.a.g=!1,r;var a=r.value}catch(t){return e.a.c=null,_(e.a,t),L(e)}return e.a.c=null,i.call(e.a,a),L(e)}function L(e){for(;e.a.j;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(t){e.a.o=void 0,_(e.a,t)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.be)throw t.Qd;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function M(e){this.next=function(t){return A(e.a),e.a.c?t=x(e,e.a.c.next,t,e.a.h):(e.a.h(t),t=L(e)),t},this.throw=function(t){return A(e.a),e.a.c?t=x(e,e.a.c.throw,t,e.a.h):(_(e.a,t),t=L(e)),t},this.return=function(t){return function(e,t){A(e.a);var n=e.a.c;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),L(e))}(e,t)},u(),this[Symbol.iterator]=function(){return this}}function N(e,t){return M.prototype=e.prototype,new M(new P(t))}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Zd:r,Ae:a}}return{Zd:-1,Ae:void 0}}function F(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}k.prototype.h=function(e){this.o=e},k.prototype.return=function(e){this.a={return:e},this.j=this.b},k.prototype.A=function(e){this.j=e},p("WeakMap",(function(e){function t(e){if(this.a=(s+=Math.random()+1).toString(),e){o(),u(),e=h(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){U(e,a)||r(e,a,{value:{}})}function i(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var a="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var s=0;return t.prototype.set=function(e,t){if(n(e),!U(e,a))throw Error("WeakMap key fail: "+e);return e[a][this.a]=t,this},t.prototype.get=function(e){return U(e,a)?e[a][this.a]:void 0},t.prototype.has=function(e){return U(e,a)&&U(e[a],this.a)},t.prototype.delete=function(e){return!(!U(e,a)||!U(e[a],this.a))&&delete e[a][this.a]},t})),p("Map",(function(e){function t(){var e={};return e.Fa=e.next=e.head=e}function n(e,t){var n=e.a;return d((function(){if(n){for(;n.head!=e.a;)n=n.Fa;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++s,a.set(t,n)):n="p_"+t;var i=e.b[n];if(i&&U(e.b,n))for(var r=0;r<i.length;r++){var o=i[r];if(t!=t&&o.key!=o.key||t===o.key)return{id:n,list:i,index:r,X:o}}return{id:n,list:i,index:-1,X:void 0}}function r(e){if(this.b={},this.a=t(),this.size=0,e){e=h(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(h([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;o(),u();var a=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Fa:this.a.Fa,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Fa.next=n.X,this.a.Fa=n.X,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).X||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Fa.next=e.X.next,e.X.next.Fa=e.X.Fa,e.X.head=null,this.size--,!0)},r.prototype.clear=function(){this.b={},this.a=this.a.Fa=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).X},r.prototype.get=function(e){return(e=i(this,e).X)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r})),p("Set",(function(e){function t(e){if(this.a=new Map,e){e=h(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(h([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&(!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done)}catch(e){return!1}}()?e:(o(),u(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(i){return e.call(t,i,i,n)}))},t)})),p("Array.prototype.findIndex",(function(e){return e||function(e,t){return B(this,e,t).Zd}})),p("Array.prototype.keys",(function(e){return e||function(){return function(e,t){u(),e instanceof String&&(e+="");var n=0,i={next:function(){if(n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e){return e}))}})),p("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),p("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}})),p("String.prototype.includes",(function(e){return e||function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}})),p("Array.from",(function(e){return e||function(e,t,n){u(),t=null!=t?t:function(e){return e};var i=[],r=e[Symbol.iterator];if("function"==typeof r)for(e=r.call(e);!(r=e.next()).done;)i.push(t.call(n,r.value));else{r=e.length;for(var a=0;a<r;a++)i.push(t.call(n,e[a]))}return i}})),p("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=F(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return o>=r}})),p("Array.prototype.find",(function(e){return e||function(e,t){return B(this,e,t).Ae}}));var j="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)U(i,r)&&(e[r]=i[r])}return e};p("Object.assign",(function(e){return e||j}));var H=this;function V(e,t){var n,i=e.split("."),r=H;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]?r[n]:r[n]={}:r[n]=t}function K(e,t){function n(){}n.prototype=t.prototype,e.vg=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Gg=function(e,n,i){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function z(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function G(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function W(e){return e.a/(1-Math.pow(e.c,e.b))}function Y(){this.b=new z(2),this.c=new z(5),this.a=0}function $(){}function q(){}function X(){}H.a=!0,Y.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(W(this.b),W(this.c))},t.console&&t.console.log.bind&&(q=console.warn.bind(console),$=console.error.bind(console));var Q=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Z(e){var t;e instanceof Z?(J(this,e.ta),this.cb=e.cb,this.sa=e.sa,ee(this,e.Cb),this.ja=e.ja,te(this,e.a.clone()),this.Ta=e.Ta):e&&(t=String(e).match(Q))?(J(this,t[1]||"",!0),this.cb=ne(t[2]||""),this.sa=ne(t[3]||"",!0),ee(this,t[4]),this.ja=ne(t[5]||"",!0),te(this,t[6]||"",!0),this.Ta=ne(t[7]||"")):this.a=new ce(null)}function J(e,t,n){e.ta=n?ne(t,!0):t,e.ta&&(e.ta=e.ta.replace(/:$/,""))}function ee(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Cb=t}else e.Cb=null}function te(e,t,n){t instanceof ce?e.a=t:(n||(t=ie(t,le)),e.a=new ce(t))}function ne(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ie(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,re),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function re(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=Z.prototype).ta="",i.cb="",i.sa="",i.Cb=null,i.ja="",i.Ta="",i.toString=function(){var e=[],t=this.ta;if(t&&e.push(ie(t,ae,!0),":"),t=this.sa){e.push("//");var n=this.cb;n&&e.push(ie(n,ae,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Cb)&&e.push(":",String(t))}return(t=this.ja)&&(this.sa&&"/"!=t.charAt(0)&&e.push("/"),e.push(ie(t,"/"==t.charAt(0)?se:oe,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Ta)&&e.push("#",ie(t,ue)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.ta&&(t=new Z);var n=!!e.ta;n?J(t,e.ta):n=!!e.cb,n?t.cb=e.cb:n=!!e.sa,n?t.sa=e.sa:n=null!=e.Cb;var i=e.ja;if(n)ee(t,e.Cb);else if(n=!!e.ja){if("/"!=i.charAt(0))if(this.sa&&!this.ja)i="/"+i;else{var r=t.ja.lastIndexOf("/");-1!=r&&(i=t.ja.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.ja=i:n=""!==e.a.toString(),n?te(t,e.a.clone()):n=!!e.Ta,n&&(t.Ta=e.Ta),t},i.clone=function(){return new Z(this)};var ae=/[#\/\?@]/g,oe=/[#\?:]/g,se=/[#\?]/g,le=/[#\?@]/g,ue=/#/g;function ce(e){this.a=e||null}function de(e){this.b=e,this.a=null}function he(e){this.b=e,this.a=null}function pe(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.i=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function fe(e){return f((function t(){var n,i;return N(t,(function(t){switch(t.j){case 1:if(e.a>=e.i){if(!e.c)return t.return(Promise.reject());e.a=1,e.b=e.f}return n=e.a,e.a++,0==n?t.return():(i=e.b*(1+(2*Math.random()-1)*e.h),T(t,new Promise((function(e){new he(e).R(i/1e3)})),2));case 2:e.b*=e.g,w(t)}}))}))}function ye(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}function ge(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function ve(e,t){this.promise=e,this.ee=t,this.a=!1}function me(e){return new ve(Promise.reject(e),(function(){return Promise.resolve()}))}function be(){var e=Promise.reject(new ye(2,7,7001));return e.catch((function(){})),new ve(e,(function(){return Promise.resolve()}))}function Ee(e){return new ve(Promise.resolve(e),(function(){return Promise.resolve()}))}function ke(e){return new ve(e,(function(){return e.catch((function(){}))}))}function Ae(e){return new ve(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function _e(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){})).catch((function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}function Te(e,n){for(var i in n=void 0===n?{}:n)this[i]=n[i];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=t.performance&&t.performance.now?t.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function we(){this.a={}}function Se(){this.Kc=new we,this.ac=this}function Ce(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function Re(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ie(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function De(e,t,n){if(n||(n=Re),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=h(e)).next();!r.done;i={item:i.item},r=e.next()){if(i.item=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.item,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function Oe(){this.a=[]}function Pe(e,t){e.a.push(t.finally((function(){Ie(e.a,t)})))}function xe(e){Se.call(this),this.f=!1,this.g=new Oe,this.a=new Set,this.b=new Set,this.c=e||null}(i=ce.prototype).ha=null,i.gc=null,i.add=function(e,t){if(!this.ha&&(this.ha={},this.gc=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),a=null;if(0<=r){var o=n[i].substring(0,r);a=n[i].substring(r+1)}else o=n[i];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(n=this.ha.hasOwnProperty(e)&&this.ha[e])||(this.ha[e]=n=[]),n.push(t),this.gc++,this},i.toString=function(){if(this.a)return this.a;if(!this.ha)return"";var e,t=[];for(e in this.ha)for(var n=encodeURIComponent(e),i=this.ha[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.a=t.join("&")},i.clone=function(){var e=new ce;if(e.a=this.a,this.ha){var t,n={};for(t in this.ha)n[t]=this.ha[t].concat();e.ha=n,e.gc=this.gc}return e},de.prototype.R=function(e){var n=this;this.stop();var i=!0,r=null;return this.a=function(){t.clearTimeout(r),i=!1},r=t.setTimeout((function(){i&&n.b()}),1e3*e),this},de.prototype.stop=function(){this.a&&(this.a(),this.a=null)},V("shaka.util.Timer",he),he.prototype.zc=function(){return this.stop(),this.b(),this},he.prototype.tickNow=he.prototype.zc,he.prototype.R=function(e){var t=this;return this.stop(),this.a=new de((function(){t.b()})).R(e),this},he.prototype.tickAfter=he.prototype.R,he.prototype.Na=function(e){var t=this;return this.stop(),this.a=new de((function(){t.a.R(e),t.b()})).R(e),this},he.prototype.tickEvery=he.prototype.Na,he.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},he.prototype.stop=he.prototype.stop,V("shaka.util.Error",ye),ye.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ye.Severity={RECOVERABLE:1,CRITICAL:2},ye.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},ye.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},ge.prototype.resolve=function(){},ge.prototype.reject=function(){},V("shaka.util.AbortableOperation",ve),ve.failed=me,ve.aborted=be,ve.completed=Ee,ve.notAbortable=ke,ve.prototype.abort=function(){return this.a=!0,this.ee()},ve.prototype.abort=ve.prototype.abort,ve.all=Ae,ve.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ve.prototype.finally=ve.prototype.finally,ve.prototype.U=function(e,t){function n(){return r.reject(new ye(2,7,7001)),i.abort()}var i=this,r=new ge;return this.promise.then((function(t){i.a?r.reject(new ye(2,7,7001)):e?n=_e(e,t,r):r.resolve(t)}),(function(e){t?n=_e(t,e,r):r.reject(e)})),new ve(r,(function(){return n()}))},ve.prototype.chain=ve.prototype.U,Te.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Te.prototype.stopImmediatePropagation=function(){this.a=!0},Te.prototype.stopPropagation=function(){},(i=we.prototype).push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},i.get=function(e){return(e=this.a[e])?e.slice():null},i.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},i.remove=function(e,t){var n=this.a[e];if(n)for(var i=0;i<n.length;++i)n[i]==t&&(n.splice(i,1),--i)},i.forEach=function(e){for(var t in this.a)e(t,this.a[t])},Se.prototype.addEventListener=function(e,t){this.Kc.push(e,t)},Se.prototype.removeEventListener=function(e,t){this.Kc.remove(e,t)},Se.prototype.dispatchEvent=function(e){for(var t=this.Kc.get(e.type)||[],n=0;n<t.length;++n){e.target=this.ac,e.currentTarget=this.ac;var i=t[n];try{i.handleEvent?i.handleEvent(e):i.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},Oe.prototype.destroy=function(){var e=[];return this.a.forEach((function(t){t.promise.catch((function(){})),e.push(t.abort())})),this.a=[],Promise.all(e)},K(xe,Se),V("shaka.net.NetworkingEngine",xe),xe.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},xe.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Le={};function Me(e,t,n){n=n||3;var i=Le[e];(!i||n>=i.priority)&&(Le[e]={priority:n,Vf:t})}function Ne(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function Ue(e,t,n,i,r,a,o){var s=new Z(n.uris[r]),l=s.ta,u=!1;l||(J(s,l=(l=location.protocol).slice(0,-1)),n.uris[r]=s.toString()),l=l.toLowerCase();var c,d=(l=Le[l])?l.Vf:null;return d?ke(fe(i)).U((function(){return e.f?be():(c=Date.now(),d(n.uris[r],n,t,(function(n,i,r){e.c&&1==t&&(e.c(n,i),u=!0,o.a=r)})))})).U((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-c),{response:e,vf:u}}),(function(s){if(s&&7001==s.code)throw s;if(e.f)return be();if(s&&1==s.severity)return e.dispatchEvent(new Te("retry",{error:s instanceof ye?s:null})),r=(r+1)%n.uris.length,Ue(e,t,n,i,r,s,o);throw s||a})):me(new ye(2,1,1e3,s))}function Be(){this.a=0}function Fe(e,t,n){ve.call(this,e,t),this.b=n}function je(){}function He(){this.a=new we}function Ve(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Ke;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Ke=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.a)}xe.registerScheme=Me,xe.unregisterScheme=function(e){delete Le[e]},xe.prototype.Xf=function(e){this.a.add(e)},xe.prototype.registerRequestFilter=xe.prototype.Xf,xe.prototype.xg=function(e){this.a.delete(e)},xe.prototype.unregisterRequestFilter=xe.prototype.xg,xe.prototype.Ne=function(){this.a.clear()},xe.prototype.clearAllRequestFilters=xe.prototype.Ne,xe.prototype.Yf=function(e){this.b.add(e)},xe.prototype.registerResponseFilter=xe.prototype.Yf,xe.prototype.yg=function(e){this.b.delete(e)},xe.prototype.unregisterResponseFilter=xe.prototype.yg,xe.prototype.Oe=function(){this.b.clear()},xe.prototype.clearAllResponseFilters=xe.prototype.Oe,xe.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},xe.makeRequest=Ne,xe.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},xe.prototype.destroy=xe.prototype.destroy,xe.prototype.request=function(e,t){var n=this,i=new Be;if(this.f){var r=Promise.reject(new ye(2,7,7001));return r.catch((function(){})),new Fe(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ce(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=Ce(t.uris);var a=(r=function(e,t,n){for(var i=Ee(void 0),r={},a=(e=h(e.a)).next();!a.done;r={sd:r.sd},a=e.next())r.sd=a.value,i=i.U(function(e){return function(){return e.sd(t,n)}}(r));return i.U(void 0,(function(e){if(e&&7001==e.code)throw e;throw new ye(2,1,1006,e)}))}(this,e,t)).U((function(){return Ue(n,e,t,new pe(t.retryParameters,!1),0,null,i)})),o=a.U((function(t){return function(e,t,n){for(var i=Ee(void 0),r=(e=h(e.b)).next();!r.done;r=e.next())i=i.U(r.value.bind(null,t,n.response));return i.U((function(){return n}),(function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof ye&&(t=e.severity),new ye(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),l=0;r.promise.then((function(){l=Date.now()-s}),(function(){}));var u=0;return a.promise.then((function(){u=Date.now()}),(function(){})),r=new Fe((r=o.U((function(t){var i=Date.now()-u,r=t.response;return r.timeMs+=l,r.timeMs+=i,t.vf||!n.c||r.fromCache||1!=e||n.c(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}))).promise,r.ee,i),Pe(this.g,r),r},xe.prototype.request=xe.prototype.request,xe.NumBytesRemainingClass=Be,E(Fe,ve),xe.PendingRequest=Fe,Fe.all=Ae,Fe.notAbortable=ke,Fe.completed=Ee,Fe.aborted=be,Fe.failed=me,V("shaka.util.IReleasable",je),je.prototype.release=function(){},V("shaka.util.EventManager",He),He.prototype.release=function(){this.ab(),this.a=null},He.prototype.release=He.prototype.release,He.prototype.w=function(e,t,n,i){this.a&&(e=new Ve(e,t,n,i),this.a.push(t,e))},He.prototype.listen=He.prototype.w,He.prototype.da=function(e,t,n,i){var r=this;this.w(e,t,(function i(a){r.ea(e,t,i),n(a)}),i)},He.prototype.listenOnce=He.prototype.da,He.prototype.ea=function(e,t,n){if(this.a)for(var i=this.a.get(t)||[],r=(i=h(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.ea(),this.a.remove(t,r))},He.prototype.unlisten=He.prototype.ea,He.prototype.ab=function(){if(this.a){for(var e=this.a.getAll(),t=(e=h(e)).next();!t.done;t=e.next())t.value.ea();this.a.a={}}},He.prototype.removeAll=He.prototype.ab,Ve.prototype.ea=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},Ve.prototype.unlisten=Ve.prototype.ea;var Ke=void 0;function ze(e){return new Z(e=ut(e)).sa}function Ge(e,t,n){function i(e){new DataView(r.buffer).setUint32(a,e.byteLength,!0),a+=4,r.set(e,a),a+=e.byteLength}if(!n||!n.byteLength)throw new ye(2,6,6015);t="string"==typeof t?new Uint8Array(dt(t,!0)):new Uint8Array(t),e=dt(e=ut(e),!0);var r=new Uint8Array(12+e.byteLength+t.byteLength+n.byteLength),a=0;return i(new Uint8Array(e)),i(t),i(new Uint8Array(n)),r}function We(e,t){for(var n=[],i=h(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}function Ye(e,t){for(var n=h(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}function $e(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t}function qe(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Xe(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Qe(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}V("shaka.util.FairPlayUtils.defaultGetContentId",ze),V("shaka.util.FairPlayUtils.initDataTransform",Ge);var Ze=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Je(){return!(!t.MediaSource||!MediaSource.isTypeSupported)}function et(e){return""!=rt().canPlayType(e)}function tt(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!it("Tizen")}function nt(){if(!tt())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function it(e){return(navigator.userAgent||"").includes(e)}function rt(){return ot||(at||(at=new he((function(){ot=null}))),(ot=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(ot=document.createElement("video")),at.R(1),ot)}var at=null,ot=null;function st(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=ht(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new ye(2,2,2004)}}function lt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new ye(2,2,2004);if(e instanceof ArrayBuffer)var i=e;else(n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),i=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),i=new DataView(i);for(var r=0;r<e;r++)n[r]=i.getUint16(2*r,t);return ht(n)}function ut(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return st(t);if(254==t[0]&&255==t[1])return lt(t.subarray(2),!1);if(255==t[0]&&254==t[1])return lt(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(0==t[0]&&0==t[2])return lt(e,!1);if(0==t[1]&&0==t[3])return lt(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return st(e);throw new ye(2,2,2003)}function ct(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function dt(e,t){for(var n=new Uint8Array(2*e.length),i=new DataView(n.buffer),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n.buffer}function ht(e){if(!pt)for(var t=function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}},n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(t(n.size)){pt=function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.size)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.size));return n}}(n);break}return pt(e)}V("shaka.util.StringUtils.fromUTF8",st),V("shaka.util.StringUtils.fromUTF16",lt),V("shaka.util.StringUtils.fromBytesAutoDetect",ut),V("shaka.util.StringUtils.toUTF8",ct),V("shaka.util.StringUtils.toUTF16",dt);var pt=null;V("shaka.util.StringUtils.resetFromCharCode",(function(){pt=null}));var ft={Ac:function(e,n){var i=ht(e);return n=null==n||n,i=t.btoa(i).replace(/\+/g,"-").replace(/\//g,"_"),n?i:i.replace(/=*$/,"")}};function yt(e){var t=this;this.B=e,this.u=new Set,this.h=this.l=null,this.S=!1,this.H=0,this.a=null,this.i=new He,this.b=new Map,this.s=[],this.m=new ge,this.f=null,this.g=function(n){t.m.reject(n),e.onError(n)},this.pa=new Map,this.W=new Map,this.O=new he((function(){return function(e){var t=e.pa,n=e.W;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new ye(2,6,6014)),e.B.rc(qe(n))}(t)})),this.c=!1,this.na=new ge,this.D=!1,this.F=[],this.oa=!1,this.$=new he((function(){!function(e){e.b.forEach((function(t,n){var i=t.jd,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.B.onExpirationUpdated(n.sessionId,r),t.jd=r)}))}(t)})).Na(1),this.m.catch((function(){}))}function gt(e,t,n){return e.s=n,e.D=0<n.length,vt(e,t)}function vt(e,n){var i=function(e){if(0==(e=$e(e.f.clearKeys)).size)return null;var n=[],i=[];e.forEach((function(e,t){var r=ft.Rc(t),a=ft.Rc(e);r={kty:"oct",kid:ft.Ac(r,!1),k:ft.Ac(a,!1)},n.push(r),i.push(r.kid)})),e=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:new Uint8Array(ct(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+t.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}(e);if(i)for(var r=h(n),a=r.next();!a.done;a=r.next())a.value.drmInfos=[i];for((i=n.some((function(e){return 0<e.drmInfos.length})))||function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var i=h(e),r=i.next();!r.done;r=i.next())r.value.drmInfos=n}(n,a=$e(e.f.servers)),a=(r=h(n)).next();!a.done;a=r.next())for(var o=(a=h(a.value.drmInfos)).next();!o.done;o=a.next())Lt(o.value,$e(e.f.servers),$e(e.f.advanced||{}));return(a=function(e,t){for(var n=new Set,i=h(t),r=i.next();!r.done;r=i.next()){var a=h(r.value.drmInfos);for(r=a.next();!r.done;r=a.next())n.add(r.value)}for(i=h(n),r=i.next();!r.done;r=i.next())Lt(r.value,$e(e.f.servers),$e(e.f.advanced||{}));a=e.D?"required":"optional";var o=e.D?["persistent-license"]:["temporary"];for(i=new Map,n=h(n),r=n.next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:r.keySystem,drmInfos:[]});for(n=h(t),r=n.next();!r.done;r=n.next()){a=(r=r.value).audio,o=r.video;var s=a?Xe(a.mimeType,a.codecs):"",l=o?Xe(o.mimeType,o.codecs):"",u=h(r.drmInfos);for(r=u.next();!r.done;r=u.next()){r=r.value;var c=i.get(r.keySystem);c.drmInfos.push(r),r.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),r.persistentStateRequired&&(c.persistentState="required"),a&&c.audioCapabilities.push({robustness:r.audioRobustness||"",contentType:s}),o&&c.videoCapabilities.push({robustness:r.videoRobustness||"",contentType:l})}}return i}(e,n)).size?(a=Tt(e,a),i?a:a.catch((function(){}))):(e.S=!0,Promise.resolve())}function mt(e){return f((function t(){var n;return N(t,(function(t){switch(t.j){case 1:if(!(e.l&&e.a&&e.a.serverCertificate&&e.a.serverCertificate.length)){t.A(0);break}return S(t,3),T(t,e.l.setServerCertificate(e.a.serverCertificate),5);case 5:R(t,0);break;case 3:return n=I(t),t.return(Promise.reject(new ye(2,6,6004,n.message)))}}))}))}function bt(e){var t=e.a?e.a.initData:[];return t.forEach((function(t){return St(e,t.initDataType,t.initData)})),e.s.forEach((function(t){return wt(e,t)})),t.length||e.s.length||e.m.resolve(),e.m}function Et(e,t,n){for(var i=e.b.values(),r=(i=h(i)).next();!r.done;r=i.next())if(ft.za(n,r.value.initData)&&!it("Tizen 2"))return;St(e,t,n)}function kt(e){return e?e.keySystem:""}function At(e,t){return!!it("Edge/")||e.u.has(t)}function _t(e){return e=We(e=e.b.keys(),(function(e){return e.sessionId})),Array.from(e)}function Tt(e,t){if(1==t.size&&t.has(""))return Promise.reject(new ye(2,6,6e3));for(var n=h(t.values()),i=n.next();!i.done;i=n.next())0==(i=i.value).audioCapabilities.length&&delete i.audioCapabilities,0==i.videoCapabilities.length&&delete i.videoCapabilities;var r=n=new ge;return[!0,!1].forEach(function(e){var n=this;t.forEach((function(t,i){t.drmInfos.some((function(e){return!!e.licenseServerUri}))==e&&(r=r.catch(function(){if(!this.c)return navigator.requestMediaKeySystemAccess(i,[t])}.bind(n)))}))}.bind(e)),r=(r=r.catch((function(){return Promise.reject(new ye(2,6,6001))}))).then(function(e){if(this.c)return Promise.reject();this.u.clear();var n=e.getConfiguration(),i=n.videoCapabilities||[],r=h(n.audioCapabilities||[]);for(n=r.next();!n.done;n=r.next())this.u.add(n.value.contentType);for(n=(i=h(i)).next();!n.done;n=i.next())this.u.add(n.value.contentType);i=e.keySystem,r=[];var a=[],o=[],s=[];return function(e,t,n,i,r){e.forEach((function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some((function(t){return ft.za(t,e.serverCertificate)}))||n.push(e.serverCertificate)),e.initData&&e.initData.forEach((function(e){i.some((function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&ft.za(t.initData,e.initData)}))||i.push(e)})),e.keyIds)for(var a=0;a<e.keyIds.length;++a)r.includes(e.keyIds[a])||r.push(e.keyIds[a])}))}((n=t.get(e.keySystem)).drmInfos,r,a,o,s),this.a={keySystem:i,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:(n.audioCapabilities?n.audioCapabilities[0].robustness:"")||"",videoRobustness:(n.videoCapabilities?n.videoCapabilities[0].robustness:"")||"",serverCertificate:a[0],initData:o,keyIds:s},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new ye(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.c)return Promise.reject();this.l=e,this.S=!0}.bind(e)).catch(function(e){if(!this.c)return this.a=null,this.u.clear(),e instanceof ye?Promise.reject(e):Promise.reject(new ye(2,6,6002,e.message))}.bind(e)),n.reject(),r}function wt(e,t){try{var n=e.l.createSession("persistent-license")}catch(t){var i=new ye(2,6,6005,t.message);return e.g(i),Promise.reject(i)}e.i.w(n,"message",e.ke.bind(e)),e.i.w(n,"keystatuseschange",e.ie.bind(e));var r={initData:null,loaded:!1,jd:1/0,ya:null};return e.b.set(n,r),n.load(t).then(function(e){return this.c?Promise.reject():e?(r.loaded=!0,xt(this)&&this.m.resolve(),n):(this.b.delete(n),void this.g(new ye(2,6,6013)))}.bind(e),function(e){this.c||(this.b.delete(n),this.g(new ye(2,6,6005,e.message)))}.bind(e))}function St(e,t,n){try{var i=e.D?e.l.createSession("persistent-license"):e.l.createSession()}catch(t){return void e.g(new ye(2,6,6005,t.message))}e.i.w(i,"message",e.ke.bind(e)),e.i.w(i,"keystatuseschange",e.ie.bind(e)),e.b.set(i,{initData:n,loaded:!1,jd:1/0,ya:null});try{n=e.f.initDataTransform(n,e.a)}catch(n){return t=n,n instanceof ye||(t=new ye(2,6,6016,n)),void e.g(t)}i.generateRequest(t,n.buffer).catch((function(t){if(!e.c){if(e.b.delete(i),t.errorCode&&t.errorCode.systemCode){var n=t.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}e.g(new ye(2,6,6006,t.message,t,n))}}))}function Ct(e,t){if(kt(t).startsWith("com.apple.fps")){var n=t.serverCertificate;e=Ge(e,ze(e),n)}return e}function Rt(e,t){var n=t.target,i=e.b.get(n),r=e.a.licenseServerUri,a=e.f.advanced[e.a.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(r=Ne([r],e.f.retryParameters)).body=t.message,r.method="POST",r.licenseRequestType=t.messageType,r.sessionId=n.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||function(e){var t=lt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),i=0;i<n.length;++i)e.headers[n[i].getElementsByTagName("name")[0].textContent]=n[i].getElementsByTagName("value")[0].textContent;e.body=ft.Ba(t.getElementsByTagName("Challenge")[0].textContent).buffer}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(r),e.a.keySystem.startsWith("com.apple.fps")&&e.f.fairPlayTransform&&function(e){var t=new Uint8Array(e.body);t="spc="+ft.Ac(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=ct(t)}(r);var o=Date.now();e.B.wb.request(2,r).promise.then(function(e){return this.c?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.f.fairPlayTransform&&function(e){try{var t=st(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=ft.Ba(t).buffer}(e),this.H+=(Date.now()-o)/1e3,n.update(e.data).then(function(){var e=this;this.B.onEvent(new Te("drmsessionupdate")),i&&(i.ya&&i.ya.resolve(),new he((function(){i.loaded=!0,xt(e)&&e.m.resolve()})).R(Mt))}.bind(this)))}.bind(e),function(e){this.c||(e=new ye(2,6,6007,e),this.g(e),i&&i.ya&&i.ya.reject(e))}.bind(e)).catch(function(e){this.c||(e=new ye(2,6,6008,e.message),this.g(e),i&&i.ya&&i.ya.reject(e))}.bind(e))}function It(){var e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n=new Map;return e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(e){return function(e){return f((function i(){var r,a,o;return N(i,(function(i){switch(i.j){case 1:return S(i,2),T(i,navigator.requestMediaKeySystemAccess(e,t),4);case 4:return r=i.o,o=!!(a=r.getConfiguration().sessionTypes)&&a.includes("persistent-license"),it("Tizen 3")&&(o=!1),n.set(e,{persistentState:o}),T(i,r.createMediaKeys(),5);case 5:R(i,0);break;case 2:I(i),n.set(e,null),w(i)}}))}))}(e)})),Promise.all(e).then((function(){return qe(n)}))}function Dt(e,t){var n=t.audio,i=t.video;if(n&&n.encrypted&&!At(e,Xe(n.mimeType,n.codecs))||i&&i.encrypted&&!At(e,Xe(i.mimeType,i.codecs)))return!1;var r=kt(e.a);return 0==t.drmInfos.length||t.drmInfos.some((function(e){return e.keySystem==r}))}function Ot(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)if(e[i].keySystem==t[r].keySystem){var a=e[i];r=t[r];var o=[];o=(o=o.concat(a.initData||[])).concat(r.initData||[]);var s=[];s=(s=s.concat(a.keyIds)).concat(r.keyIds),n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||r.persistentStateRequired,videoRobustness:a.videoRobustness||r.videoRobustness,audioRobustness:a.audioRobustness||r.audioRobustness,serverCertificate:a.serverCertificate||r.serverCertificate,initData:o,keyIds:s});break}return n}function Pt(e){return f((function t(){var n;return N(t,(function(t){switch(t.j){case 1:return n=Array.from(e.b.keys()),e.b.clear(),T(t,Promise.all(n.map((function(e){return f((function t(){return N(t,(function(t){switch(t.j){case 1:return S(t,2),T(t,Promise.all([e.close(),e.closed]),4);case 4:R(t,0);break;case 2:I(t),w(t)}}))}))}))),0)}}))}))}function xt(e){return Ye(e=e.b.values(),(function(e){return e.loaded}))}function Lt(e,n,i){!e.keySystem||"org.w3.clearkey"==e.keySystem&&e.licenseServerUri||(n.size&&(n=n.get(e.keySystem)||"",e.licenseServerUri=n),e.keyIds||(e.keyIds=[]),(i=i.get(e.keySystem))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=i.persistentStateRequired),e.videoRobustness||(e.videoRobustness=i.videoRobustness),e.audioRobustness||(e.audioRobustness=i.audioRobustness),e.serverCertificate||(e.serverCertificate=i.serverCertificate)),t.cast&&t.cast.__platform__&&"com.microsoft.playready"==e.keySystem&&(e.keySystem="com.chromecast.playready"))}V("shaka.util.Uint8ArrayUtils.toBase64",ft.Ac),ft.Ba=function(e){e=t.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(e.length),i=0;i<e.length;++i)n[i]=e.charCodeAt(i);return n},V("shaka.util.Uint8ArrayUtils.fromBase64",ft.Ba),ft.Rc=function(e){for(var n=new Uint8Array(e.length/2),i=0;i<e.length;i+=2)n[i/2]=t.parseInt(e.substr(i,2),16);return n},V("shaka.util.Uint8ArrayUtils.fromHex",ft.Rc),ft.Bc=function(e){for(var t="",n=0;n<e.length;++n){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t},V("shaka.util.Uint8ArrayUtils.toHex",ft.Bc),ft.za=function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0},V("shaka.util.Uint8ArrayUtils.equal",ft.za),ft.concat=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var i=n=0;i<t.length;++i)n+=t[i].length;n=new Uint8Array(n);for(var r=i=0;r<t.length;++r)n.set(t[r],i),i+=t[r].length;return n},V("shaka.util.Uint8ArrayUtils.concat",ft.concat),(i=yt.prototype).destroy=function(){var e=this;return f((function t(){return N(t,(function(t){switch(t.j){case 1:return e.c?T(t,e.na,0):(e.c=!0,T(t,function(e){return f((function t(){return N(t,(function(t){switch(t.j){case 1:return e.i.release(),e.i=null,e.m.reject(),e.$.stop(),e.$=null,e.O.stop(),e.O=null,T(t,Pt(e),2);case 2:if(!e.h){t.A(3);break}return S(t,4),T(t,e.h.setMediaKeys(null),6);case 6:R(t,5);break;case 4:I(t);case 5:e.h=null;case 3:e.a=null,e.u.clear(),e.l=null,e.s=[],e.f=null,e.g=null,e.B=null,w(t)}}))}))}(e),4));case 4:e.na.resolve(),t.A(0)}}))}))},i.configure=function(e){this.f=e},i.Jb=function(e){var t=this;if(!this.l)return this.i.da(e,"encrypted",(function(){t.g(new ye(2,6,6010))})),Promise.resolve();this.h=e,this.i.da(this.h,"play",(function(){for(var e=0;e<t.F.length;e++)Rt(t,t.F[e]);t.oa=!0,t.F=[]})),"webkitCurrentPlaybackTargetIsWireless"in this.h&&this.i.w(this.h,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Pt(t)})),e=(e=this.h.setMediaKeys(this.l)).catch((function(e){return Promise.reject(new ye(2,6,6003,e.message))}));var n=mt(this);return Promise.all([e,n]).then((function(){if(t.c)return Promise.reject();bt(t),t.a.initData.length||t.s.length||t.i.w(t.h,"encrypted",(function(e){return Et(t,e.initDataType,new Uint8Array(e.initData))}))})).catch((function(e){if(!t.c)return Promise.reject(e)}))},i.Mb=function(){for(var e=1/0,t=this.b.keys(),n=(t=h(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.ke=function(e){this.h&&this.f.delayLicenseRequestUntilPlayed&&this.h.paused&&!this.oa?this.F.push(e):Rt(this,e)},i.ie=function(e){e=e.target;var t=this.b.get(e),n=!1;e.keyStatuses.forEach(function(e,i){if("string"==typeof i){var r=i;i=e,e=r}if("com.microsoft.playready"==this.a.keySystem&&16==i.byteLength&&!it("Tizen")&&!it("VITIS")&&!it("Web0S")){var a=(r=new DataView(i)).getUint32(0,!0),o=r.getUint16(4,!0),s=r.getUint16(6,!0);r.setUint32(0,a,!1),r.setUint16(4,o,!1),r.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(n=!0),r=ft.Bc(new Uint8Array(i)),this.pa.set(r,e)}.bind(this));var i=e.expiration-Date.now();(0>i||n&&1e3>i)&&t&&!t.ya&&(this.b.delete(e),e.close().catch((function(){}))),xt(this)&&(this.m.resolve(),this.O.R(Nt))};var Mt=5,Nt=.5;function Ut(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Bt(){}function Ft(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function jt(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Ht(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=e.length-1;0<=i&&e.end(i)>t;--i)n+=e.end(i)-Math.max(e.start(i),t);return n}function Vt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}Ut.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},Ut.prototype.b=function(e,t){var n=new Uint8Array(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},Ut.prototype.c=function(){this.a.resetCaptionStream()},Bt.prototype.init=function(){},Bt.prototype.b=function(){},Bt.prototype.c=function(){};var Kt={Pe:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},Hc:function(e,t){return e.concat(t)},pc:function(){},Ia:function(e){return null!=e}};function zt(e,t){if(0==t.length)return e;var n=t.map((function(e){return new Z(e)}));return e.map((function(e){return new Z(e)})).map((function(e){return n.map(e.resolve.bind(e))})).reduce(Kt.Hc,[]).map((function(e){return e.toString()}))}function Gt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var Wt={Qa:"video",Gb:"audio",ra:"text",Eg:"image",Cg:"application"};function Yt(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function $t(e,n){return!(!t.muxjs||"mp2t"!=e.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported(qt(n,e)):MediaSource.isTypeSupported(qt("audio",e))||MediaSource.isTypeSupported(qt("video",e)))}function qt(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",a=i[1],o=Number(i[2]);r=("66"==a?r+"4200":"77"==a?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),n=n.replace(i[0],r)}return n}function Xt(e,t,n){this.startTime=e,this.direction=nn,this.endTime=t,this.payload=n,this.region=new dn,this.position=null,this.positionAlign=Qt,this.size=100,this.textAlign=Zt,this.writingMode=rn,this.lineInterpretation=an,this.line=null,this.lineHeight="",this.lineAlign=on,this.displayAlign=en,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=ln,this.fontStyle=un,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1}Yt.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Yt.prototype.i=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},Yt.prototype.h=function(){var e={data:ft.concat.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},V("shaka.text.Cue",Xt);var Qt="auto";Xt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Qt};var Zt="center",Jt={LEFT:"left",RIGHT:"right",CENTER:Zt,START:"start",END:"end"};Xt.textAlign=Jt;var en="after",tn={BEFORE:"before",CENTER:"center",AFTER:en};Xt.displayAlign=tn;var nn="ltr";Xt.direction={HORIZONTAL_LEFT_TO_RIGHT:nn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rn="horizontal-tb";Xt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var an=0;Xt.lineInterpretation={LINE_NUMBER:an,PERCENTAGE:1};var on="start",sn={CENTER:"center",START:on,END:"end"};Xt.lineAlign=sn;var ln=400;Xt.fontWeight={NORMAL:ln,BOLD:700};var un="normal",cn={NORMAL:un,ITALIC:"italic",OBLIQUE:"oblique"};function dn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=hn,this.scroll=pn}Xt.fontStyle=cn,Xt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},V("shaka.text.CueRegion",dn);var hn=1;dn.units={PX:0,PERCENTAGE:hn,LINES:2};var pn="";function fn(e){this.g=null,this.c=e,this.f=this.m=0,this.h=1/0,this.b=this.a=null,this.l="",this.i=new Map}dn.scrollMode={NONE:pn,UP:"up"};var yn={};function gn(e){return!!(yn[e]||t.muxjs&&"application/cea-608"==e)}function vn(e,t){"application/cea-608"!=t&&(e.g=new yn[t])}function mn(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=h(t)).next();!s.done;s=t.next()){var l=s.value;s=l.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),l.startTime+=r,l.endTime+=r,l.startTime>=e.f&&l.startTime<e.h&&(l=new Xt(l.startTime,l.endTime,l.text),o.get(s).get(a).push(l),s==e.l&&e.c.append([l]))}for(a=(r=h(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.i.has(a)||e.i.set(a,new Map),s=(t=h(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,l=o.get(a).get(s),e.i.get(a).set(s,l);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(i,e.h))}function bn(e,t,n){this.f=e,this.g=n,this.b={},this.a=null,this.c={},this.i=new He,this.u=!1,this.l={},this.m=t,e=this.s=new ge,t=new MediaSource,this.i.da(t,"sourceopen",e.resolve),this.f.src=En(t),this.h=t}V("shaka.text.TextEngine.registerParser",(function(e,t){yn[e]=t})),V("shaka.text.TextEngine.unregisterParser",(function(e){delete yn[e]})),fn.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},fn.prototype.lc=function(e){try{return this.g.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new ye(2,2,2009,e)}},fn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))};var En=t.URL.createObjectURL;function kn(e){var t=Xe(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return Ze.forEach((function(n,i){var r=e[i];r&&t.push(n+'="'+r+'"')})),t.join(";")}(e);return gn(t)||MediaSource.isTypeSupported(n)||$t(t,e.type)}function An(e,t){e.a||(e.a=new fn(e.g)),vn(e.a,t)}function _n(e){return!e.h||"ended"==e.h.readyState}function Tn(e,t){if("text"==t)var n=e.a.a;else n=!(n=Sn(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function wn(e,t){return"text"==t?e.a.b:Ft(Sn(e,t))}function Sn(e,t){try{return e.b[t].buffered}catch(e){return null}}function Cn(e,n,i,r,a,o){return"text"==n?function(e,t,n,i){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==i)this.g.parseInit(new Uint8Array(t));else{var e={periodStart:this.m,segmentStart:n,segmentEnd:i};e=this.g.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.h}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(i,this.h)}}.bind(e))}(e.a,i,r,a):e.l[n]?function(e,t){e.f=!0,e.b=new ge,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new ye(2,3,3018)),e.b}(e.l[n],i).then(function(e){return this.a||An(this,"text/vtt"),e.captions&&e.captions.length&&mn(this.a,e.captions,r,a,this.b.video.timestampOffset),Dn(this,n,this.we.bind(this,n,e.data.buffer))}.bind(e)):(o&&t.muxjs&&(e.a||An(e,"text/vtt"),null==r&&null==a?e.m.init(i):e.m.b(i,(function(t){t.length&&mn(e.a,t,r,a,e.b.video.timestampOffset)}))),Dn(e,n,e.we.bind(e,n,i)))}function Rn(e,t){var n=wn(e,"video")||0;!function(e,t,n){if(e.l=t,t=e.i.get(t))for(var i=h(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.c.append(r)}(e.a,t,n)}function In(e,t){return"text"==t?e.a?(e.m.c(),e.a.remove(0,1/0)):Promise.resolve():Dn(e,t,e.xe.bind(e,t,0,e.h.duration))}function Dn(e,t,n){if(e.u)return Promise.reject();if(n={start:n,p:new ge},e.c[t].push(n),1==e.c[t].length)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new ye(2,3,3017,t)):n.p.reject(new ye(2,3,3015,i)),Pn(e,t)}return n.p}function On(e,t){if(e.u)return Promise.reject();var n,i=[];for(n in e.b){var r=new ge,a={start:function(e){e.resolve()}.bind(null,r),p:r};e.c[n].push(a),i.push(r),1==e.c[n].length&&a.start()}return Promise.all(i).then(function(){try{t()}catch(t){var e=Promise.reject(new ye(2,3,3015,t))}for(var n in this.b)Pn(this,n);return e}.bind(e),function(e){throw e}.bind(e))}function Pn(e,t){e.c[t].shift();var n=e.c[t][0];if(n)try{n.start()}catch(i){n.p.reject(new ye(2,3,3015,i)),Pn(e,t)}}function xn(e,t){return e=Mn(e),t=Mn(t),e.split("-")[0]==t.split("-")[0]}function Ln(e,t){e=Mn(e),t=Mn(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function Mn(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=Bn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Nn(e){return e.language?Mn(e.language):e.audio&&e.audio.language?Mn(e.audio.language):e.video&&e.video.language?Mn(e.video.language):"und"}function Un(e,t){for(var n=Mn(e),i=new Set,r=h(t),a=r.next();!a.done;a=r.next())i.add(Mn(a.value));for(a=(r=h(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=h(i)).next();!a.done;a=r.next())if(Ln(a=a.value,n))return a;for(a=(r=h(i)).next();!a.done;a=r.next()){var o=a=a.value,s=n;if(o=Mn(o),s=Mn(s),o=o.split("-"),s=s.split("-"),2==o.length&&2==s.length&&o[0]==s[0])return a}for(a=(i=h(i)).next();!a.done;a=i.next())if(Ln(n,r=a.value))return r;return null}(i=bn.prototype).destroy=function(){var e=this;this.u=!0;var t,n=[];for(t in this.c){var i=this.c[t],r=i[0];for(this.c[t]=i.slice(0,1),r&&n.push(r.p.catch(Kt.pc)),r=1;r<i.length;++r)i[r].p.reject()}for(var a in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.l)n.push(this.l[a].destroy());return Promise.all(n).then((function(){e.i&&(e.i.release(),e.i=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.h=null,e.a=null,e.g=null,e.b={},e.l={},e.m=null,e.c={}}))},i.init=function(e,t){var n=this;return f((function i(){var r;return N(i,(function(i){switch(i.j){case 1:return r=Wt,T(i,n.s,2);case 2:e.forEach((function(e,i){var a=Xe(e.mimeType,e.codecs);i==r.ra?An(n,a):(!t&&MediaSource.isTypeSupported(a)||!$t(a,i)||(n.l[i]=new Yt,a=qt(i,a)),a=n.h.addSourceBuffer(a),n.i.w(a,"error",n.ng.bind(n,i)),n.i.w(a,"updateend",n.zb.bind(n,i)),n.b[i]=a,n.c[i]=[])})),w(i)}}))}))},i.Tc=function(e){if(e.total=Vt(this.f.buffered),e.audio=Vt(Sn(this,"audio")),e.video=Vt(Sn(this,"video")),e.text=[],this.a){var t=this.a.a,n=this.a.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}},i.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):Dn(this,e,this.xe.bind(this,e,t,n))},i.flush=function(e){return"text"==e?Promise.resolve():Dn(this,e,this.Ue.bind(this,e))},i.endOfStream=function(e){return On(this,function(){_n(this)||(e?this.h.endOfStream(e):this.h.endOfStream())}.bind(this))},i.xa=function(e){return On(this,function(){this.h.duration=e}.bind(this))},i.Y=function(){return this.h.duration},i.we=function(e,t){this.b[e].appendBuffer(t)},i.xe=function(e,t,n){n<=t?this.zb(e):this.b[e].remove(t,n)},i.Ge=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.zb(e)},i.Ue=function(e){this.f.currentTime-=.001,this.zb(e)},i.mg=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.zb(e)},i.jg=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.zb(e)},i.ng=function(e){this.c[e][0].p.reject(new ye(2,3,3014,this.f.error?this.f.error.code:0))},i.zb=function(e){var t=this.c[e][0];t&&(t.p.resolve(),Pn(this,e))};var Bn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]),Fn={Nd:function(e,t){function n(e){var t="";e.video&&(t=Qe(e.video.codecs)[0]);var n="";return e.audio&&(n=Qe(e.audio.codecs)[0]),t+"-"+n}var i=e.periods.reduce((function(e,t){return e.concat(t.variants)}),[]);i=Fn.Sd(i,t);for(var r=new we,a=(i=h(i)).next();!a.done;a=i.next()){var o=n(a=a.value);r.push(o,a)}var s=null,l=1/0;for(r.forEach((function(e,t){for(var n=0,i=0,r=h(t),a=r.next();!a.done;a=r.next())n+=a.value.bandwidth||0,++i;(n/=i)<l&&(s=e,l=n)})),i=(r=h(e.periods)).next();!i.done;i=r.next())(i=i.value).variants=i.variants.filter((function(e){return n(e)==s}))},cd:function(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))},Kd:function(e,t,n){var i=!1;return e.forEach((function(e){var r=e.allowedByApplication;e.allowedByApplication=Fn.cd(e,t,n),r!=e.allowedByApplication&&(i=!0)})),i},filterNewPeriod:function(e,t,n,i){i.variants=i.variants.filter((function(i){if(e&&e.S&&!Dt(e,i))return!1;var r=i.audio;return i=i.video,!(r&&!kn(r)||i&&!kn(i)||r&&t&&!Fn.Ld(r,t)||i&&n&&!Fn.Ld(i,n))})),i.textStreams=i.textStreams.filter((function(e){return gn(Xe(e.mimeType,e.codecs))}))},Ld:function(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]},Id:function(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var l=new Set;return t&&t.roles.forEach((function(e){return l.add(e)})),n&&n.roles.forEach((function(e){return l.add(e)})),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(l),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e},yc:function(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}},Xc:function(e){return e.__shaka_id||(e.__shaka_id=Fn.Cf++),e.__shaka_id},Cf:0,wf:function(e){var t=Fn.Yd(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t},Xd:function(e){var t=Fn.Yd(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t},Yd:function(e){return{id:Fn.Xc(e),active:!1,type:"",bandwidth:0,language:Mn(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}},tb:function(e){return e.allowedByApplication&&e.allowedByKeySystem},jf:function(e){return e.filter((function(e){return Fn.tb(e)}))},Sd:function(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=h(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(null,r)):i.get(Math.min.apply(null,n))},Lb:function(e,t,n){var i=e,r=e.filter((function(e){return e.primary}));r.length&&(i=r);var a=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==a})),t){var o=Un(Mn(t),e.map((function(e){return e.language})));o&&(i=e.filter((function(e){return Mn(e.language)==o})))}if(n){if((e=Fn.Rd(i,n)).length)return e}else if((e=i.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=i.map((function(e){return e.roles})).reduce(Kt.Hc,[])).length?Fn.Rd(i,e[0]):i},Rd:function(e,t){return e.filter((function(e){return e.roles.includes(t)}))},Vd:function(e,t,n){for(var i=0;i<n.length;i++)if(n[i].audio==e&&n[i].video==t)return n[i];return null},xf:function(e){return"audio"==e.type},Af:function(e){return"video"==e.type},tf:function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t},Ig:function(e){return Fn.xf(e)?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:Fn.Af(e)?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}};function jn(){this.h=null,this.f=!1,this.b=new Y,this.c=[],this.i=!1,this.a=this.g=null}function Hn(e,t){return e&&(t=t.filter((function(t){return Fn.cd(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Vn(e,t){this.a=e,this.b=t}function Kn(e,t){var n=new Vn(2,6),i=Wn,r=i.a,a=n.b-r.b;(0<(n.a-r.a||a)?i.c:i.b)(i.a,n,e,t)}function zn(e,t,n,i){q([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Gn(e,t,n,i){$([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}V("shaka.abr.SimpleAbrManager",jn),jn.prototype.stop=function(){this.h=null,this.f=!1,this.c=[],this.g=null},jn.prototype.stop=jn.prototype.stop,jn.prototype.init=function(e){this.h=e},jn.prototype.init=jn.prototype.init,jn.prototype.chooseVariant=function(){var e=Hn(this.a.restrictions,this.c),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!e.length&&(e=[(e=Hn(null,this.c))[0]]);for(var n=e[0]||null,i=0;i<e.length;++i){var r=e[i],a=(e[i+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;t>=r.bandwidth/this.a.bandwidthDowngradeTarget&&t<=a&&(n=r)}return this.g=Date.now(),n},jn.prototype.chooseVariant=jn.prototype.chooseVariant,jn.prototype.enable=function(){this.f=!0},jn.prototype.enable=jn.prototype.enable,jn.prototype.disable=function(){this.f=!1},jn.prototype.disable=jn.prototype.disable,jn.prototype.segmentDownloaded=function(e,t){var n=this.b;if(!(16e3>t)){var i=8e3*t/e,r=e/1e3;n.a+=t,G(n.b,r,i),G(n.c,r,i)}if(null!=this.g&&this.f)e:{if(this.i){if(Date.now()-this.g<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}n=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(n)}},jn.prototype.segmentDownloaded=jn.prototype.segmentDownloaded,jn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},jn.prototype.getBandwidthEstimate=jn.prototype.getBandwidthEstimate,jn.prototype.setVariants=function(e){this.c=e},jn.prototype.setVariants=jn.prototype.setVariants,jn.prototype.configure=function(e){this.a=e},jn.prototype.configure=jn.prototype.configure,Vn.prototype.toString=function(){return"v"+this.a+"."+this.b};var Wn=null,Yn="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),$n="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),qn=["loop","playbackRate"],Xn=["pause","play"],Qn="abrstatuschanged adaptation buffering drmsessionupdate emsg error expirationupdated largegap loading manifestparsed onstatechange onstateidle streaming textchanged texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged".split(" "),Zn={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},Jn={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},ei=[["getConfiguration","configure"]],ti=[["isTextTrackVisible","setTextTrackVisibility"]],ni="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),ii=["attach","detach","load","unload"];function ri(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Te){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=h(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=h(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)r.start.push(t.start(n)),r.end.push(t.end(n));else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}}))}function ai(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;return n}))}function oi(e,t,n,i,r,a){this.O=e,this.f=new he(t),this.S=n,this.l=!1,this.u=i,this.H=r,this.D=a,this.b=this.h=!1,this.F="",this.i=null,this.m=this.kd.bind(this),this.s=this.Jf.bind(this),this.a={video:{},player:{}},this.B=0,this.c={},this.g=null,yi.add(this)}var si=!1,li=null;function ui(e){for(var t=h(yi),n=t.next();!n.done;n=t.next())ci(n.value,e)}function ci(e,t){var n=e.D();e.g=new ge,e.l=!0,e.md(n,t)}function di(e){for(var t=h(yi),n=t.next();!n.done;n=t.next())n=n.value,si="available"==e,n.f.zc()}function hi(e){var t=li;t.removeUpdateListener(e.m),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.s)}function pi(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new ye(1,7,7e3))}}function fi(e,t){var n=ri(t),i=li;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),X)}catch(t){throw n=new ye(2,8,8005,t),e.u("player",new Te("error",{detail:n})),e.ob(),n}}(i=oi.prototype).destroy=function(){return yi.delete(this),pi(this),li&&hi(this),this.f&&(this.f.stop(),this.f=null),this.H=this.u=null,this.b=this.h=!1,this.s=this.m=this.g=this.c=this.a=this.i=null,Promise.resolve()},i.ga=function(){return this.b},i.pd=function(){return this.F},i.init=function(){if(t.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.O.length){this.h=!0,this.f.zc();var e=new chrome.cast.SessionRequest(this.O);e=new chrome.cast.ApiConfig(e,ui.bind(this),di.bind(this),"origin_scoped"),chrome.cast.initialize(e,(function(){}),(function(){})),si&&this.f.R(.02),(e=li)&&e.status!=chrome.cast.SessionStatus.STOPPED?ci(this,e):li=null}},i.yd=function(e){this.i=e,this.b&&fi(this,{type:"appData",appData:this.i})},i.cast=function(e){return this.h?si?this.b?Promise.reject(new ye(1,8,8002)):(this.g=new ge,chrome.cast.requestSession(this.md.bind(this,e),this.he.bind(this)),this.g):Promise.reject(new ye(1,8,8001)):Promise.reject(new ye(1,8,8e3))},i.ob=function(){if(this.b){if(pi(this),li){hi(this);try{li.stop((function(){}),(function(){}))}catch(e){}li=null}this.kd()}},i.get=function(e,t){if("video"==e){if(Xn.includes(t))return this.qe.bind(this,e,t)}else if("player"==e){if(Jn[t]&&!this.get("player","isLive")())return function(){};if(ni.includes(t))return this.qe.bind(this,e,t);if(ii.includes(t))return this.$f.bind(this,e,t);if(Zn[t])return this.ne.bind(this,e,t)}return this.ne(e,t)},i.set=function(e,t,n){this.a[e][t]=n,fi(this,{type:"set",targetName:e,property:t,value:n})},i.md=function(e,t){li=t,t.addUpdateListener(this.m),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.s),this.kd(),fi(this,{type:"init",initState:e,appData:this.i}),this.g.resolve()},i.he=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new ye(2,8,t,e))},i.ne=function(e,t){return this.a[e][t]},i.qe=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];fi(this,{type:"call",targetName:e,methodName:t,args:i})},i.$f=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new ge;var a=this.B.toString();this.B++,this.c[a]=r;try{fi(this,{type:"asyncCall",targetName:e,methodName:t,args:i,id:a})}catch(e){r.reject(e)}return r},i.kd=function(){var e=!!li&&"connected"==li.status;if(this.b&&!e){for(var t in this.H(),this.a)this.a[t]={};pi(this)}this.F=(this.b=e)?li.receiver.friendlyName:"",this.f.zc()},i.Jf=function(e,t){var n=ai(t);switch(n.type){case"event":var i=n.event;this.u(n.targetName,new Te(i.type,i));break;case"update":for(var r in i=n.update)for(var a in n=this.a[r]||{},i[r])n[a]=i[r][a];this.l&&(this.S(),this.l=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=this.c[r],delete this.c[r],a)if(n){for(i in r=new ye(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}};var yi=new Set;function gi(e,t,n){var i=this;Se.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.l=this.h=null,this.s=n,this.m=new Map,this.a=new oi(n,(function(){return bi(i)}),(function(){return Ei(i)}),(function(e,t){return _i(i,e,t)}),(function(){return ki(i)}),(function(){return mi(i)})),function(e){for(var t in e.a.init(),e.i=new He,Yn.forEach(function(e){this.i.w(this.c,e,this.D.bind(this))}.bind(e)),Qn.forEach(function(e){this.i.w(this.b,e,this.u.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.B.bind(e,t),set:e.F.bind(e,t)});e.l={},vi(e,(function(t){Object.defineProperty(e.l,t,{configurable:!1,enumerable:!0,get:function(){return Ai(e,t)}})})),function(e){var t=new Map;vi(e,(function(n,i){if(t.has(i)){var r=t.get(i);n.length<r.length?e.m.set(n,r):e.m.set(r,n)}else t.set(i,n)}))}(e),e.f=new Se,e.f.ac=e.h,e.g=new Se,e.g.ac=e.l}(this)}function vi(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.b,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=h(Object.getOwnPropertyNames(a)),l=s.next();!l.done;l=s.next())n(l=l.value)&&(r.add(l),t(l,i[l]));a=Object.getPrototypeOf(a)}}function mi(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.b.ic(),startTime:null};return e.c.pause(),qn.forEach(function(e){t.video[e]=this.c[e]}.bind(e)),e.c.ended||(t.startTime=e.c.currentTime),ei.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.player[n]=e}.bind(e)),ti.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.playerAfterLoad[n]=e}.bind(e)),t}function bi(e){e.dispatchEvent(new Te("caststatuschanged"))}function Ei(e){e.f.dispatchEvent(new Te(e.h.paused?"pause":"play"))}function ki(e){ei.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e));var t=e.a.get("player","getAssetUri")(),n=e.a.get("video","ended"),i=Promise.resolve(),r=e.c.autoplay,a=null;n||(a=e.a.get("video","currentTime")),t&&(e.c.autoplay=!1,i=e.b.load(t,a));var o={};qn.forEach(function(e){o[e]=this.a.get("video",e)}.bind(e)),i.then((function(){e.c&&(qn.forEach(function(e){this.c[e]=o[e]}.bind(e)),ti.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=r,t&&e.c.play())}),(function(t){e.b.dispatchEvent(new Te("error",{detail:t}))}))}function Ai(e,t){if(e.m.has(t)&&(t=e.m.get(t)),"addEventListener"==t)return e.g.addEventListener.bind(e.g);if("removeEventListener"==t)return e.g.removeEventListener.bind(e.g);if("getMediaElement"==t)return function(){return this.h}.bind(e);if("getSharedConfiguration"==t)return e.a.get("player","getConfiguration");if("getNetworkingEngine"==t)return e.b.Nb.bind(e.b);if(e.a.ga()){if("getManifest"==t||"drmInfo"==t)return function(){return q(t+"() does not work while casting!"),null};if("getManifestUri"==t)return Kn("getManifestUri",'Please use "getAssetUri" instead.'),Ai(e,"getAssetUri");if("attach"==t||"detach"==t)return function(){return q(t+"() does not work while casting!"),Promise.resolve()}}return e.a.ga()&&0==Object.keys(e.a.a.video).length&&Zn[t]||!e.a.ga()?e.b[t].bind(e.b):e.a.get("player",t)}function _i(e,t,n){e.a.ga()&&("video"==t?e.f.dispatchEvent(n):"player"==t&&e.g.dispatchEvent(n))}function Ti(e,t,n,i){var r=this;Se.call(this),this.a=e,this.b=t,this.c=new He,this.D={video:e,player:t},this.s=n||function(){},this.F=i||function(e){return e},this.u=!1,this.h=!0,this.g=0,this.m=!1,this.l=!0,this.i=this.f=null,this.B=new he((function(){Si(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.je.bind(e),t.onSenderDisconnected=e.je.bind(e),t.onSystemVolumeChanged=e.Te.bind(e),e.i=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.i.onMessage=e.Ef.bind(e),e.f=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.f.onMessage=e.Of.bind(e),t.start(),Yn.forEach(function(e){this.c.w(this.a,e,this.oe.bind(this,"video"))}.bind(e)),Qn.forEach(function(e){this.c.w(this.b,e,this.oe.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.zd(3840,2160):e.b.zd(1920,1080),e.c.w(e.a,"loadeddata",function(){this.m=!0}.bind(e)),e.c.w(e.b,"loading",function(){this.h=!1,wi(this)}.bind(e)),e.c.w(e.a,"playing",function(){this.h=!1,wi(this)}.bind(e)),e.c.w(e.a,"pause",function(){wi(this)}.bind(e)),e.c.w(e.b,"unloading",function(){this.h=!0,wi(this)}.bind(e)),e.c.w(e.a,"ended",function(){var e=this;new he((function(){e.a&&e.a.ended&&(e.h=!0,wi(e))})).R(5)}.bind(e))}(this)}function wi(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new Te("caststatuschanged")),Ci(this)||Di(this,0))}.bind(e))}function Si(e){e.B.R(.5);var t={video:{},player:{}};if($n.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.V())for(var n in Jn)0==e.g%Jn[n]&&(t.player[n]=e.b[n]());for(var i in Zn)0==e.g%Zn[i]&&(t.player[i]=e.b[i]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.m&&(e.g+=1),Ii(e,{type:"update",update:t},e.f),Ci(e)}function Ci(e){return!(!e.l||!e.a.duration&&!e.b.V())&&(Ri(e),e.l=!1,!0)}function Ri(e){var t={contentId:e.b.ic(),streamType:e.b.V()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""};Di(e,0,t)}function Ii(e,t,n,i){e.u&&(e=ri(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Di(e,t,n){var i=e.a.playbackRate,r=Oi;i={mediaSessionId:0,playbackRate:i,playerState:r=e.h?r.IDLE:e.b.Yc()?r.Be:e.a.paused?r.De:r.Ee,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},n&&(i.media=n),Ii(e,{requestId:t,type:"MEDIA_STATUS",status:[i]},e.i)}t.__onGCastApiAvailable=function(e){if(e)for(var t=(e=h(yi)).next();!t.done;t=e.next())t.value.init()},K(gi,Se),V("shaka.cast.CastProxy",gi),gi.prototype.destroy=function(e){return e&&this.a.ob(),this.i&&(this.i.release(),this.i=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.l=this.h=this.c=null,Promise.all(e)},gi.prototype.destroy=gi.prototype.destroy,gi.prototype.uf=function(){return this.h},gi.prototype.getVideo=gi.prototype.uf,gi.prototype.lf=function(){return this.l},gi.prototype.getPlayer=gi.prototype.lf,gi.prototype.Je=function(){return this.a.h&&si},gi.prototype.canCast=gi.prototype.Je,gi.prototype.ga=function(){return this.a.ga()},gi.prototype.isCasting=gi.prototype.ga,gi.prototype.pd=function(){return this.a.pd()},gi.prototype.receiverName=gi.prototype.pd,gi.prototype.cast=function(){var e=mi(this);return this.a.cast(e).then(function(){if(this.b)return this.b.Gd()}.bind(this))},gi.prototype.cast=gi.prototype.cast,gi.prototype.yd=function(e){this.a.yd(e)},gi.prototype.setAppData=gi.prototype.yd,gi.prototype.ug=function(){var e=this.a;if(e.b){var t=e.D();chrome.cast.requestSession(e.md.bind(e,t),e.he.bind(e))}},gi.prototype.suggestDisconnect=gi.prototype.ug,gi.prototype.Me=function(e){var t=this;return f((function n(){return N(n,(function(n){switch(n.j){case 1:return e==t.s?n.return():(t.s=e,t.a.ob(),T(n,t.a.destroy(),2));case 2:t.a=null,t.a=new oi(e,(function(){return bi(t)}),(function(){return Ei(t)}),(function(e,n){return _i(t,e,n)}),(function(){return ki(t)}),(function(){return mi(t)})),t.a.init(),w(n)}}))}))},gi.prototype.changeReceiverId=gi.prototype.Me,gi.prototype.ob=function(){this.a.ob()},gi.prototype.forceDisconnect=gi.prototype.ob,gi.prototype.B=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a.ga()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.ga()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},gi.prototype.F=function(e,t){this.a.ga()?this.a.set("video",e,t):this.c[e]=t},gi.prototype.D=function(e){this.a.ga()||this.f.dispatchEvent(new Te(e.type,e))},gi.prototype.u=function(e){this.a.ga()||this.g.dispatchEvent(e)},K(Ti,Se),V("shaka.cast.CastReceiver",Ti),Ti.prototype.isConnected=function(){return this.u},Ti.prototype.isConnected=Ti.prototype.isConnected,Ti.prototype.zf=function(){return this.h},Ti.prototype.isIdle=Ti.prototype.zf,Ti.prototype.destroy=function(){var e=this;return f((function t(){var n;return N(t,(function(t){switch(t.j){case 1:return e.c&&(e.c.release(),e.c=null),n=[],e.b&&(n.push(e.b.destroy()),e.b=null),e.B&&(e.B.stop(),e.B=null),e.a=null,e.D=null,e.s=null,e.u=!1,e.h=!0,e.f=null,e.i=null,T(t,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),w(t)}}))}))},Ti.prototype.destroy=Ti.prototype.destroy,(i=Ti.prototype).je=function(){this.g=0,this.l=!0,this.u=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,wi(this)},i.oe=function(e,t){this.b&&(Si(this),Ii(this,{type:"event",targetName:e,event:t},this.f))},i.Te=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Ii(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Ii(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},i.Of=function(e){var t=ai(e.data);switch(t.type){case"init":this.g=0,this.m=!1,this.l=!0,function(e,t,n){for(var i in t.player)e.b[i](t.player[i]);e.s(n),n=Promise.resolve();var r=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime)),n.then((function(){if(e.b){for(var n in t.video)e.a[n]=t.video[n];for(var i in t.playerAfterLoad)e.b[i](t.playerAfterLoad[i]);e.a.autoplay=r,t.manifest&&(e.a.play(),Di(e,0))}}),(function(t){e.b.dispatchEvent(new Te("error",{detail:t}))}))}(this,t.initState,t.appData),Si(this);break;case"appData":this.s(t.appData);break;case"set":var n=t.targetName,i=t.property;if(t=t.value,"video"==n){var r=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){r.setSystemVolumeLevel(t);break}if("muted"==i){r.setSystemVolumeMuted(t);break}}this.D[n][i]=t;break;case"call":(n=this.D[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,i=t.methodName,"player"==n&&"load"==i&&(this.g=0,this.m=!1),r=t.id,e=e.senderId;var a=this.D[n];t=a[i].apply(a,t.args),"player"==n&&"load"==i&&(t=t.then(function(){this.l=!0}.bind(this))),t.then(this.te.bind(this,e,r,null),this.te.bind(this,e,r))}},i.Ef=function(e){var t=ai(e.data);switch(t.type){case"PLAY":this.a.play(),Di(this,0);break;case"PAUSE":this.a.pause(),Di(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Di(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Di(this,0));break;case"STOP":this.b.Gd().then(function(){this.b&&Di(this,0)}.bind(this));break;case"GET_STATUS":Di(this,Number(t.requestId));break;case"VOLUME":e=(n=t.volume).level,n=n.muted;var i=this.a.volume,r=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),i==this.a.volume&&r==this.a.muted||Di(this,0);break;case"LOAD":this.g=0,this.l=this.m=!1,e=t.media,n=t.currentTime,i=this.F(e.contentId),r=t.autoplay||!0,this.s(e.customData),r&&(this.a.autoplay=!0),this.b.load(i,n).then(function(){this.b&&Ri(this)}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),Ii(this,{requestId:Number(t.requestId),type:n},this.i)}.bind(this));break;default:Ii(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},i.te=function(e,t,n){this.b&&Ii(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var Oi={IDLE:"IDLE",Ee:"PLAYING",Be:"BUFFERING",De:"PAUSED"};function Pi(e,t){this.K=e,this.b=t==xi,this.a=0}V("shaka.util.DataViewReader",Pi);var xi=1;function Li(){throw new ye(2,3,3e3)}function Mi(){this.c=[],this.b=[],this.a=!1}function Ni(e){for(var t=null!=e.flags?12:8;e.reader.ua()&&!e.parser.a;)e.parser.tc(e.start+t,e.reader,e.partialOkay)}function Ui(e){for(var t=null!=e.flags?12:8,n=e.reader.G();0<n&&!e.parser.a;--n)e.parser.tc(e.start+t,e.reader,e.partialOkay)}function Bi(e){return function(t){e(t.reader.$a(t.reader.K.byteLength-t.reader.ca()))}}function Fi(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function ji(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Hi(e){var t=this;this.a=[],this.b=[],this.data=[],(new Mi).I("moov",Ni).fa("pssh",(function(e){if(!(1<e.version)){var n=e.reader.K;if(n=new Uint8Array(n.buffer,n.byteOffset-12,e.size),t.data.push(n),t.a.push(ft.Bc(e.reader.$a(16))),0<e.version){n=e.reader.G();for(var i=0;i<n;++i){var r=ft.Bc(e.reader.$a(16));t.b.push(r)}}}})).parse(e)}Pi.Endianness={Dg:0,Fg:xi},Pi.prototype.ua=function(){return this.a<this.K.byteLength},Pi.prototype.hasMoreData=Pi.prototype.ua,Pi.prototype.ca=function(){return this.a},Pi.prototype.getPosition=Pi.prototype.ca,Pi.prototype.$e=function(){return this.K.byteLength},Pi.prototype.getLength=Pi.prototype.$e,Pi.prototype.la=function(){try{var e=this.K.getUint8(this.a);return this.a+=1,e}catch(e){Li()}},Pi.prototype.readUint8=Pi.prototype.la,Pi.prototype.Ub=function(){try{var e=this.K.getUint16(this.a,this.b);return this.a+=2,e}catch(e){Li()}},Pi.prototype.readUint16=Pi.prototype.Ub,Pi.prototype.G=function(){try{var e=this.K.getUint32(this.a,this.b);return this.a+=4,e}catch(e){Li()}},Pi.prototype.readUint32=Pi.prototype.G,Pi.prototype.pe=function(){try{var e=this.K.getInt32(this.a,this.b);return this.a+=4,e}catch(e){Li()}},Pi.prototype.readInt32=Pi.prototype.pe,Pi.prototype.Db=function(){try{if(this.b)var e=this.K.getUint32(this.a,!0),t=this.K.getUint32(this.a+4,!0);else t=this.K.getUint32(this.a,!1),e=this.K.getUint32(this.a+4,!1)}catch(e){Li()}if(2097151<t)throw new ye(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Pi.prototype.readUint64=Pi.prototype.Db,Pi.prototype.$a=function(e){this.a+e>this.K.byteLength&&Li();var t=new Uint8Array(this.K.buffer,this.K.byteOffset+this.a,e);return this.a+=e,t},Pi.prototype.readBytes=Pi.prototype.$a,Pi.prototype.M=function(e){this.a+e>this.K.byteLength&&Li(),this.a+=e},Pi.prototype.skip=Pi.prototype.M,Pi.prototype.re=function(e){this.a<e&&Li(),this.a-=e},Pi.prototype.rewind=Pi.prototype.re,Pi.prototype.seek=function(e){(0>e||e>this.K.byteLength)&&Li(),this.a=e},Pi.prototype.seek=Pi.prototype.seek,Pi.prototype.od=function(){for(var e=this.a;this.ua()&&0!=this.K.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.K.buffer,this.K.byteOffset+e,this.a-e),this.a+=1,st(e)},Pi.prototype.readTerminatedString=Pi.prototype.od,V("shaka.util.Mp4Parser",Mi),Mi.prototype.I=function(e,t){var n=Fi(e);return this.c[n]=0,this.b[n]=t,this},Mi.prototype.box=Mi.prototype.I,Mi.prototype.fa=function(e,t){var n=Fi(e);return this.c[n]=1,this.b[n]=t,this},Mi.prototype.fullBox=Mi.prototype.fa,Mi.prototype.stop=function(){this.a=!0},Mi.prototype.stop=Mi.prototype.stop,Mi.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new Pi(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.ua()&&!this.a;)this.tc(0,n,t)},Mi.prototype.parse=Mi.prototype.parse,Mi.prototype.tc=function(e,t,n){var i=t.ca(),r=t.G(),a=t.G();switch(r){case 0:r=t.K.byteLength-i;break;case 1:r=t.Db()}var o=this.b[a];if(o){var s=null,l=null;1==this.c[a]&&(s=(l=t.G())>>>24,l&=16777215),a=i+r,n&&a>t.K.byteLength&&(a=t.K.byteLength),a-=t.ca(),t=0<a?t.$a(a):new Uint8Array(0),o({parser:this,partialOkay:n||!1,version:s,flags:l,reader:t=new Pi(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:r,start:i+e})}else t.M(Math.min(i+r-t.ca(),t.K.byteLength-t.ca()))},Mi.prototype.parseNext=Mi.prototype.tc,Mi.children=Ni,Mi.sampleDescription=Ui,Mi.allData=Bi,Mi.typeToString=ji;var Vi={hc:function(e,t){var n=Vi.P(e,t);return 1!=n.length?null:n[0]},Pc:function(e,t,n){return 1!=(e=Vi.Td(e,t,n)).length?null:e[0]},P:function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.tagName==t}))},Td:function(e,t,n){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},jc:function(e){return Array.prototype.every.call(e.childNodes,(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null},J:function(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r},Sf:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},Ea:function(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null},vc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},uc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},Ab:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Re:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},me:function(e,t){var n=new DOMParser;try{var i=n.parseFromString(e,"text/xml")}catch(e){}if(i&&i.documentElement.tagName==t)var r=i.documentElement;return r&&0<r.getElementsByTagName("parsererror").length?null:r},le:function(e,t){try{var n=st(e);return Vi.me(n,t)}catch(e){}}},Ki=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function zi(e,t,n){var i=function(e){for(var t=[],n=(e=h(e)).next();!n.done;n=e.next())(n=Yi(n.value))&&t.push(n);return t}(e),r=null;e=[];var a=[],o=new Set(i.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new ye(2,4,4010);if(n||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.se||(r=e.init||r,!1)}))).length&&(0==(e=function(e,t,n){for(var i=[],r=(n=h(n)).next();!r.done;r=n.next()){r=r.value;var a=Ki.get(r.se);if(a){var o;if(o=Vi.Pc(r.node,"urn:microsoft:playready","pro")){o=ft.Ba(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=o.length,u=s.length+16+l,c=new ArrayBuffer(u),d=new Uint8Array(c),p=0;(c=new DataView(c)).setUint32(p,u),p+=4,c.setUint32(p,1886614376),p+=4,c.setUint32(p,0),p+=4,d.set(s,p),p+=s.length,c.setUint32(p,l),p+=4,d.set(o,p),o=[{initData:d,initDataType:"cenc",keyId:r.keyId}]}else o=null;o=Gt(a,r.init||e||o),(a=Wi.get(a))&&(o.licenseServerUri=a(r)),i.push(o)}else for(a=(r=h(r=t(r.node)||[])).next();!a.done;a=r.next())i.push(a.value)}return i}(r,t,a)).length&&(e=[Gt("",r)])),i.length&&(n||!a.length))for(e=[],n=(t=h(Ki.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Gt(n,r));if(o=Array.from(o)[0]||null)for(n=(t=h(e)).next();!n.done;n=t.next())for(i=(n=h(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=o;return{Pd:o,Hg:r,drmInfos:e,Ud:!0}}var Gi,Wi=(new Map).set("com.widevine.alpha",(function(e){return(e=Vi.Pc(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=Vi.Pc(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(n!==e.byteLength)return[];t+=6,n=[];for(var i=new DataView(e);t<e.byteLength-1;){var r=i.getUint16(t,!0);t+=2;var a=i.getUint16(t,!0);t+=2;var o=new Uint8Array(e,t,a);n.push({type:r,value:o}),t+=a}return n}((e=ft.Ba(e.textContent)).buffer).filter((function(e){return 1===e.type}))[0])?(e=lt(e.value,!0),(e=Vi.me(e,"WRMHEADER"))?function(e){for(var t=(e=h(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=h(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""}));function Yi(e){var t=e.getAttribute("schemeIdUri"),n=Vi.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),i=Vi.Td(e,"urn:mpeg:cenc:2013","pssh").map(Vi.jc);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new ye(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:ft.Ba(e),keyId:null}}))}catch(e){throw new ye(2,4,4007)}return{node:e,se:t,keyId:n,init:0<r.length?r:null}}function $i(e,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(e,n,i,r){if("$$"==e)return"$";var a=o[n];if(null==a)return e;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":e=a.toString();break;case"o":e=a.toString(8);break;case"x":e=a.toString(16);break;case"X":e=a.toString(16).toUpperCase();break;default:e=a.toString()}return i=t.parseInt(i,10)||1,Array(Math.max(0,i-e.length)+1).join("0")+e}))}function qi(e,t){var n=Xi(e,t,"timescale"),i=1;n&&(i=Vi.uc(n)||1),n=Xi(e,t,"duration"),(n=Vi.uc(n||""))&&(n/=i);var r=Xi(e,t,"startNumber"),a=Number(Xi(e,t,"presentationTimeOffset"))||0,o=Vi.Ab(r||"");null!=r&&null!=o||(o=1);var s=Qi(e,t,"SegmentTimeline");if(r=null,s){r=i;var l=e.T.duration||1/0;s=Vi.P(s,"S");for(var u=[],c=0,d=0;d<s.length;++d){var h=s[d],p=Vi.J(h,"t",Vi.Ab),f=Vi.J(h,"d",Vi.Ab);if(h=Vi.J(h,"r",Vi.parseInt),null!=p&&(p-=a),!f)break;if(p=null!=p?p:c,0>(h=h||0))if(d+1<s.length){if(null==(h=Vi.J(s[d+1],"t",Vi.Ab)))break;if(p>=h)break;h=Math.ceil((h-p)/f)-1}else{if(1/0==l)break;if(p/r>=l)break;h=Math.ceil((l*r-p)/f)-1}0<u.length&&p!=c&&(u[u.length-1].end=p/r);for(var y=0;y<=h;++y)c=p+f,u.push({start:p/r,end:c/r,zg:p}),p=c}r=u}return{timescale:i,Z:n,bb:o,ma:a/i||0,Hd:a,N:r}}function Xi(e,t,n){return[t(e.C),t(e.aa),t(e.ka)].filter(Kt.Ia).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Qi(e,t,n){return[t(e.C),t(e.aa),t(e.ka)].filter(Kt.Ia).map((function(e){return Vi.hc(e,n)})).reduce((function(e,t){return e||t}))}function Zi(e,t,n,i,r,a){if(a=void 0===a?0:a,Vi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=Vi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),s=Vi.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=0;l<e.attributes.length;l++){var u=e.attributes[l];"http://www.w3.org/1999/xlink"==u.namespaceURI&&(e.removeAttributeNS(u.namespaceURI,u.localName),--l)}if(5<=a)return me(new ye(2,4,4028));if("onLoad"!=s)return me(new ye(2,4,4027));var c=zt([i],[o]);return r.request(0,Ne(c,t)).U((function(i){if(!(i=Vi.le(i.data,e.tagName)))return me(new ye(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(s=0;s<i.attributes.length;s++){var l=i.attributes[s].nodeName,u=i.getAttribute(l);e.setAttribute(l,u)}return Zi(e,t,n,c[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(o=o.U(void 0,(function(){return Zi(e,t,n,i,r,a)}))),o}o=[];for(var s=0;s<e.childNodes.length;s++){var l=e.childNodes[s];l instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Vi.getAttributeNS(l,"http://www.w3.org/1999/xlink","href")?(e.removeChild(l),--s):"SegmentTimeline"!=l.tagName&&o.push(Zi(l,t,n,i,r,a)))}return Ae(o).U((function(){return e}))}function Ji(e,t,n){this.c=e,this.b=t,this.a=n}function er(e,t,n,i,r,a){this.position=e,this.startTime=t,this.endTime=n,this.c=i,this.b=r,this.a=a}function tr(e,t,n,i){var r,a=(new Mi).fa("sidx",(function(e){r=function(e,t,n,i){var r=[];i.reader.M(4);var a=i.reader.G();if(0==a)throw new ye(2,3,3005);if(0==i.version)var o=i.reader.G(),s=i.reader.G();else o=i.reader.Db(),s=i.reader.Db();i.reader.M(2);var l=i.reader.Ub();for(e=e+i.size+s,s=0;s<l;s++){var u=i.reader.G(),c=(2147483648&u)>>>31;u&=2147483647;var d=i.reader.G();if(i.reader.M(4),1==c)throw new ye(2,3,3006);r.push(new er(r.length,o/a-t,(o+d)/a-t,(function(){return n}),e,e+u-1)),o+=d,e+=u}return i.parser.stop(),r}(t,i,n,e)}));if(e&&a.parse(e),r)return r;throw new ye(2,3,3004)}function nr(e){this.a=e}function ir(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&0>=e.a[0].endTime;)e.a.shift();if(0!=e.a.length){var n=e.a[e.a.length-1];e.a[e.a.length-1]=new er(n.position,n.startTime,t,n.c,n.b,n.a)}}function rr(e){this.b=e,this.a=new Pi(e,0),Gi||(Gi=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function ar(e){var t=or(e);if(7<t.length)throw new ye(2,3,3002);for(var n=0,i=0;i<t.length;i++)n=256*n+t[i];t=n,n=or(e);e:{i=ft.za;for(var r=0;r<Gi.length;r++)if(i(n,Gi[r])){i=!0;break e}i=!1}if(i)n=e.b.byteLength-e.a.ca();else{if(8==n.length&&224&n[1])throw new ye(2,3,3001);for(i=n[0]&(1<<8-n.length)-1,r=1;r<n.length;r++)i=256*i+n[r];n=i}return n=e.a.ca()+n<=e.b.byteLength?n:e.b.byteLength-e.a.ca(),i=new DataView(e.b.buffer,e.b.byteOffset+e.a.ca(),n),e.a.M(n),new sr(t,i)}function or(e){var t,n=e.a.la();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new ye(2,3,3002);var i=new Uint8Array(t);for(i[0]=n,n=1;n<t;n++)i[n]=e.a.la();return i}function sr(e,t){this.id=e,this.a=t}function lr(e){if(8<e.a.byteLength)throw new ye(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new ye(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++){t=256*t+e.a.getUint8(n)}return t}function ur(){}function cr(e){var t=new rr(e.a);if(179!=(e=ar(t)).id)throw new ye(2,3,3013);if(e=lr(e),183!=(t=ar(t)).id)throw new ye(2,3,3012);t=new rr(t.a);for(var n=0;t.ua();){var i=ar(t);if(241==i.id){n=lr(i);break}}return{Ag:e,Zf:n}}function dr(e,t){var n=Qi(e,t,"Initialization");if(!n)return null;var i=e.C.qa,r=n.getAttribute("sourceURL");r&&(i=zt(e.C.qa,[r])),r=0;var a=null;return(n=Vi.J(n,"range",Vi.vc))&&(r=n.start,a=n.end),new Ji((function(){return i}),r,a)}function hr(e,t,n,i,r,a,o,s){var l=e.presentationTimeline,u=!e.mb||!e.T.$c,c=e.T.start,d=e.T.duration,h=t,p=null;return{createSegmentIndex:function(){var e=[h(i,r,a),"webm"==o?h(n.c(),n.b,n.a):null];return h=null,Promise.all(e).then((function(e){var t=e[0];e=e[1]||null,t="mp4"==o?tr(t,r,i,s):(new ur).parse(t,e,i,s),l.xb(t,c),p=new nr(t),u&&ir(p,d)}))},findSegmentPosition:function(e){return p.find(e)},getSegmentReference:function(e){return p.get(e)}}}function pr(e){return e.Vb}function fr(e,t){var n=dr(e,yr),i=function(e){return[e.C.La,e.aa.La,e.ka.La].filter(Kt.Ia).map((function(e){return Vi.P(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.ae&&(e.ae=!0),{Bf:t.getAttribute("media"),start:(t=Vi.J(t,"mediaRange",Vi.vc,{start:0,end:null})).start,end:t.end}}))}(e),r=qi(e,yr),a=r.bb;0==a&&(a=1);var o=0;if(r.Z?o=r.Z*(a-1):r.N&&0<r.N.length&&(o=r.N[0].start),!(i={Z:r.Z,startTime:o,bb:a,ma:r.ma,N:r.N,vb:i}).Z&&!i.N&&1<i.vb.length)throw new ye(2,4,4002);if(!i.Z&&!e.T.duration&&!i.N&&1==i.vb.length)throw new ye(2,4,4002);if(i.N&&0==i.N.length)throw new ye(2,4,4002);return a=r=null,e.ka.id&&e.C.id&&(r=t[a=e.ka.id+","+e.C.id]),o=function(e,t,n,i){var r=i.vb.length;i.N&&i.N.length!=i.vb.length&&(r=Math.min(i.N.length,i.vb.length));for(var a=[],o=i.startTime,s=0;s<r;s++){var l=i.vb[s],u=zt(n,[l.Bf]),c=void 0;c=null!=i.Z?o+i.Z:i.N?i.N[s].end:o+e,a.push(new er(s+t,o,c,function(e){return e}.bind(null,u),l.start,l.end)),o=c}return a}(e.T.duration,i.bb,e.C.qa,i),r?(r.dd(o),a=e.presentationTimeline.Pb(),r.Mc(a-e.T.start)):(e.presentationTimeline.xb(o,e.T.start),r=new nr(o),a&&e.mb&&(t[a]=r)),e.mb&&e.T.$c||ir(r,e.T.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n,ma:i.ma}}function yr(e){return e.La}function gr(e,t,n,i){var r=function(e){var t=Xi(e,vr,"initialization");if(!t)return null;var n=e.C.id,i=e.bandwidth||null,r=e.C.qa;return new Ji((function(){var e=$i(t,n,null,i,null);return zt(r,[e])}),0,null)}(e),a=qi(e,vr),o=Xi(e,vr,"media"),s=Xi(e,vr,"index");if(o=(a={Z:a.Z,timescale:a.timescale,bb:a.bb,ma:a.ma,Hd:a.Hd,N:a.N,bd:o,Rb:s}).Rb?1:0,o+=a.N?1:0,0==(o+=a.Z?1:0))throw new ye(2,4,4002);if(1!=o&&(a.Rb&&(a.N=null),a.Z=null),!a.Rb&&!a.bd)throw new ye(2,4,4002);if(a.Rb){if("mp4"!=(n=e.C.mimeType.split("/")[1])&&"webm"!=n)throw new ye(2,4,4006);if("webm"==n&&!r)throw new ye(2,4,4005);i=$i(a.Rb,e.C.id,null,e.bandwidth||null,null),e=hr(e,t,r,i=zt(e.C.qa,[i]),0,null,n,a.ma)}else a.Z?(i||(e.presentationTimeline.fd(a.Z),e.presentationTimeline.gd(e.T.start)),e=function(e,t){var n=e.T.duration,i=t.Z,r=t.bb,a=t.timescale,o=t.bd,s=e.bandwidth||null,l=e.C.id,u=e.C.qa;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/i)},getSegmentReference:function(e){var t=e*i,c=t+i;return n&&(c=Math.min(c,n)),0>c||n&&t>=n?null:new er(e,t,c,(function(){var n=$i(o,l,e+r,s,t*a);return zt(u,[n])}),0,null)}}}(e,a)):(o=t=null,e.ka.id&&e.C.id&&(t=n[o=e.ka.id+","+e.C.id]),s=function(e,t){for(var n=[],i=0;i<t.N.length;i++){var r=i+t.bb;n.push(new er(r,t.N[i].start,t.N[i].end,function(e,t,n,i,r,a){return zt(i,[e=$i(e,t,r,n,a)]).map((function(e){return e.toString()}))}.bind(null,t.bd,e.C.id,e.bandwidth||null,e.C.qa,r,t.N[i].zg+t.Hd),0,null))}return n}(e,a),i=!e.mb||!e.T.$c,t?(i&&ir(new nr(s),e.T.duration),t.dd(s),n=e.presentationTimeline.Pb(),t.Mc(n-e.T.start)):(e.presentationTimeline.xb(s,e.T.start),t=new nr(s),o&&e.mb&&(n[o]=t)),i&&ir(t,e.T.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:r,ma:a.ma}}function vr(e){return e.Xb}V("shaka.media.InitSegmentReference",Ji),Ji.prototype.Jc=function(){return this.c()},Ji.prototype.createUris=Ji.prototype.Jc,Ji.prototype.Vc=function(){return this.b},Ji.prototype.getStartByte=Ji.prototype.Vc,Ji.prototype.Uc=function(){return this.a},Ji.prototype.getEndByte=Ji.prototype.Uc,V("shaka.media.SegmentReference",er),er.prototype.ca=function(){return this.position},er.prototype.getPosition=er.prototype.ca,er.prototype.lc=function(){return this.startTime},er.prototype.getStartTime=er.prototype.lc,er.prototype.Ye=function(){return this.endTime},er.prototype.getEndTime=er.prototype.Ye,er.prototype.Jc=function(){return this.c()},er.prototype.createUris=er.prototype.Jc,er.prototype.Vc=function(){return this.b},er.prototype.getStartByte=er.prototype.Vc,er.prototype.Uc=function(){return this.a},er.prototype.getEndByte=er.prototype.Uc,V("shaka.media.SegmentIndex",nr),nr.prototype.destroy=function(){return this.a=null,Promise.resolve()},nr.prototype.destroy=nr.prototype.destroy,nr.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},nr.prototype.find=nr.prototype.find,nr.prototype.get=function(e){return 0==this.a.length||0>(e-=this.a[0].position)||e>=this.a.length?null:this.a[e]},nr.prototype.get=nr.prototype.get,nr.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},nr.prototype.offset=nr.prototype.offset,nr.prototype.dd=function(e){for(var t=[],n=0,i=0;n<this.a.length&&i<e.length;){var r=this.a[n],a=e[i];r.startTime<a.startTime?(t.push(r),n++):(r.startTime>a.startTime?0==n&&t.push(a):(.1<Math.abs(r.endTime-a.endTime)?t.push(new er(r.position,a.startTime,a.endTime,a.c,a.b,a.a)):t.push(r),n++),i++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;i<e.length;)r=new er(n++,(r=e[i++]).startTime,r.endTime,r.c,r.b,r.a),t.push(r);else t=e;this.a=t},nr.prototype.merge=nr.prototype.dd,nr.prototype.Mc=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},nr.prototype.evict=nr.prototype.Mc,rr.prototype.ua=function(){return this.a.ua()},ur.prototype.parse=function(e,t,n,i){var r;if(440786851!=ar(t=new rr(new DataView(t))).id)throw new ye(2,3,3008);var a=ar(t);if(408125543!=a.id)throw new ye(2,3,3009);for(t=a.a.byteOffset,a=new rr(a.a),r=null;a.ua();){var o=ar(a);if(357149030==o.id){r=o;break}}if(!r)throw new ye(2,3,3010);for(a=new rr(r.a),r=1e6,o=null;a.ua();){var s=ar(a);if(2807729==s.id)r=lr(s);else if(17545==s.id)if(4==(o=s).a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new ye(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new ye(2,3,3011);if(r=o*(a=r/1e9),475249515!=(e=ar(new rr(new DataView(e)))).id)throw new ye(2,3,3007);return function(e,t,n,i,r,a){function o(){return r}var s=[];e=new rr(e.a);for(var l=null,u=null;e.ua();){var c=ar(e);if(187==c.id){var d=cr(c);d&&(c=n*d.Ag,d=t+d.Zf,null!=l&&s.push(new er(s.length,l-a,c-a,o,u,d-1)),l=c,u=d)}}return null!=l&&s.push(new er(s.length,l-a,i-a,o,u,null)),s}(e,t,a,r,n,i)};var mr={Bb:{},Tb:{},rd:function(e,t){mr.Tb[e]=t}};function br(e,t,n){this.f=e,this.wc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.l=0,this.m=!0,this.i=0,this.s=void 0===n||n}function Er(e,t,n,i){return e=Ne(e,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function kr(){var e=this;this.b=this.a=null,this.f=[],this.c=null,this.l=[],this.h=1,this.m={},this.s=0,this.u=new z(5),this.i=new he((function(){!function(e){f((function t(){var n,i;return N(t,(function(t){switch(t.j){case 1:return n=0,S(t,2),T(t,Ar(e),4);case 4:n=t.o,R(t,3);break;case 2:i=I(t),e.b&&(i.severity=1,e.b.onError(i));case 3:if(!e.b)return t.return();Sr(e,n),w(t)}}))}))}(e)})),this.g=new Oe}function Ar(e){var t=Date.now(),n=e.b.networkingEngine.request(0,Ne(e.f,e.a.retryParameters));return Pe(e.g,n),n.promise.then((function(t){if(e.b)return t.uri&&!e.f.includes(t.uri)&&e.f.unshift(t.uri),function(e,t,n){if(!(t=Vi.le(t,"MPD")))throw new ye(2,4,4001,n);return t=Zi(t,e.a.retryParameters,e.a.dash.xlinkFailGracefully,n,e.b.networkingEngine),Pe(e.g,t),t.promise.then((function(t){return function(e,t,n){return f((function i(){var r,a,o,s,l,u,c,d,h,p,f,y,g,v,m,b,E,k,A,_,S,C,R,I;return N(i,(function(i){switch(i.j){case 1:s=Kt,u=[n],0<(c=(l=Vi).P(t,"Location").map(l.jc).filter(s.Ia)).length&&(d=zt(u,c),u=e.f=d),h=l.P(t,"BaseURL").map(l.jc),p=zt(u,h),f=e.a.dash.ignoreMinBufferTime,y=0,f||(y=l.J(t,"minBufferTime",l.Ea)),e.s=l.J(t,"minimumUpdatePeriod",l.Ea,-1),g=l.J(t,"availabilityStartTime",l.Sf),v=l.J(t,"timeShiftBufferDepth",l.Ea),m=l.J(t,"maxSegmentDuration",l.Ea),b=t.getAttribute("type")||"static",E=e.a.dash.ignoreSuggestedPresentationDelay,k=null,E||(k=l.J(t,"suggestedPresentationDelay",l.Ea)),e.c?A=e.c.presentationTimeline:(_=Math.max(e.a.dash.defaultPresentationDelay,1.5*y),A=new br(g,null!=k?k:_,e.a.dash.autoCorrectDrift));for(var D={mb:"static"!=b,presentationTimeline:A,ka:null,T:null,aa:null,C:null,bandwidth:0,ae:!1},O=p,P=Vi.J(t,"mediaPresentationDuration",Vi.Ea),x=[],L=0,M=Vi.P(t,"Period"),N=0;N<M.length;N++){var U=M[N];L=Vi.J(U,"start",Vi.Ea,L);var B=Vi.J(U,"duration",Vi.Ea),F=null;if(N!=M.length-1){var j=Vi.J(M[N+1],"start",Vi.Ea);null!=j&&(F=j-L)}else null!=P&&(F=P-L);if(null==F&&(F=B),U=_r(e,D,O,{start:L,duration:F,node:U,$c:null==F||N==M.length-1}),x.push(U),B=D.ka.id,e.l.includes(B)||(e.l.push(B),e.c&&(e.b.filterNewPeriod(U),e.c.periods.push(U))),null==F){L=null;break}L+=F}if(null==e.c&&e.b.filterAllPeriods(x),null!=P?(r=x,a=P,o=!1):(r=x,a=L,o=!0),S=a,C=r,A.Yb("static"==b),"static"!=b&&o||A.xa(S||1/0),A.V()&&!isNaN(e.a.availabilityWindowOverride)&&(v=e.a.availabilityWindowOverride),null==v&&(v=1/0),A.Bd(v),A.fd(m||1),e.c){i.A(0);break}if(e.c={presentationTimeline:A,periods:C,offlineSessionIds:[],minBufferTime:y||0},!A.ze()){i.A(0);break}return R=l.P(t,"UTCTiming"),T(i,function(e,t,n){n=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}));var i=e.a.dash.clockSyncUri;return!n.length&&i&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),Kt.Pe(n,function(e){var n=e.scheme;switch(e=e.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Rr(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Rr(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(e),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return q("NTP UTCTiming scheme is not supported"),Promise.reject();default:return q("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(e)).catch((function(){return q("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}(e,p,R),4);case 4:if(I=i.o,!e.b)return i.return();A.ue(I),w(i)}}))}))}(e,t,n)}))}(e,t.data,t.uri)})).then((function(){var n=(Date.now()-t)/1e3;return G(e.u,1,n),n}))}function _r(e,t,n,i){if(t.ka=Cr(i.node,null,n),t.T=i,t.ka.id||(t.ka.id="__shaka_period_"+i.start),Vi.P(i.node,"EventStream").forEach(e.Tf.bind(e,i.start,i.duration)),n=Vi.P(i.node,"AdaptationSet").map(e.Rf.bind(e,t)).filter(Kt.Ia),t.mb){t=[];for(var r=h(n),a=r.next();!a.done;a=r.next())for(var o=(a=h(a.value.bg)).next();!o.done;o=a.next())t.push(o.value);if(t.length!=new Set(t).size)throw new ye(2,4,4018)}var s=n.filter((function(e){return!e.Fd}));if(n.filter((function(e){return e.Fd})).forEach((function(e){var t=e.streams[0],n=e.Fd;s.forEach((function(e){e.id==n&&e.streams.forEach((function(e){e.trickModeVideo=t}))}))})),t=Tr(s,"video"),r=Tr(s,"audio"),!t.length&&!r.length)throw new ye(2,4,4004);for(n=e.a.disableAudio,r.length&&!n||(r=[null]),n=e.a.disableVideo,t.length&&!n||(t=[null]),n=[],a=0;a<r.length;a++)for(o=0;o<t.length;o++)wr(e,r[a],t[o],n);if(t=[],!e.a.disableText)for(e=Tr(s,"text"),r=0;r<e.length;r++)t.push.apply(t,e[r].streams);return{startTime:i.start,textStreams:t,variants:n}}function Tr(e,t){return e.filter((function(e){return e.contentType==t}))}function wr(e,t,n,i){if(t||n)if(t&&n){var r=t.drmInfos,a=n.drmInfos;if(!r.length||!a.length||0<Ot(r,a).length){a=Ot(t.drmInfos,n.drmInfos);for(var o=0;o<t.streams.length;o++)for(var s=0;s<n.streams.length;s++)r=(n.streams[s].bandwidth||0)+(t.streams[o].bandwidth||0),r={id:e.h++,language:t.language,primary:t.ad||n.ad,audio:t.streams[o],video:n.streams[s],bandwidth:r,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}}else for(a=t||n,o=0;o<a.streams.length;o++)r=a.streams[o].bandwidth||0,r={id:e.h++,language:a.language||"und",primary:a.ad,audio:t?a.streams[o]:null,video:n?a.streams[o]:null,bandwidth:r,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}function Sr(e,t){0>e.s||e.i.R(Math.max(3,e.s-t,W(e.u)))}function Cr(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,hd:null,audioSamplingRate:null},n=n||t.qa;var i=Vi.Ab,r=Vi.Re,a=Vi.P(e,"BaseURL").map(Vi.jc),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,l=e.getAttribute("codecs")||t.codecs;r=Vi.J(e,"frameRate",r)||t.frameRate;for(var u=e.getAttribute("par")||t.pixelAspectRatio,c=Vi.P(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice(),p=(c=h(c)).next();!p.done;p=c.next())p=p.value.getAttribute("schemeIdUri"),d.includes(p)||d.push(p);return c=function(e){for(var t=0;t<e.length;++t){var n=e[t],i=n.getAttribute("schemeIdUri");if(i&&(n=n.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(i=parseInt(n,10)))continue;return i;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(i=parseInt(n,16)){for(e=0;i;)1&i&&++e,i>>=1;return e}}}return null}(c=Vi.P(e,"AudioChannelConfiguration"))||t.hd,p=Vi.J(e,"audioSamplingRate",i)||t.audioSamplingRate,o||(o=Ir(s,l)),{qa:zt(n,a),Vb:Vi.hc(e,"SegmentBase")||t.Vb,La:Vi.hc(e,"SegmentList")||t.La,Xb:Vi.hc(e,"SegmentTemplate")||t.Xb,width:Vi.J(e,"width",i)||t.width,height:Vi.J(e,"height",i)||t.height,contentType:o,mimeType:s,codecs:l,frameRate:r,pixelAspectRatio:u,emsgSchemeIdUris:d,id:e.getAttribute("id"),hd:c,audioSamplingRate:p}}function Rr(e,t,n,i){return(t=Ne(t=zt(t,[n]),e.a.retryParameters)).method=i,t=e.b.networkingEngine.request(4,t),Pe(e.g,t),t.promise.then((function(e){if("HEAD"==i){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=st(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()}))}function Ir(e,t){return gn(Xe(e,t))?"text":e.split("/")[0]}function Dr(e,t,n,i){this.b=e,this.type=t,this.a=n,this.segments=i||null}function Or(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=void 0===i?null:i}function Pr(e,t){this.name=e,this.value=t}function xr(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Lr(e,t){this.b=t,this.a=e}V("shaka.media.ManifestParser.registerParserByExtension",mr.rd),mr.Eb=function(e,t){mr.Bb[e]=t},V("shaka.media.ManifestParser.registerParserByMime",mr.Eb),mr.Wf=function(){var e={};if(Je()){for(var t in mr.Bb)e[t]=!0;for(var n in mr.Tb)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var i=(n=h(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!i.done;i=n.next())e[i=i.value]=Je()?!!mr.Bb[i]:et(i);for(var r in t)e[r]=Je()?!!mr.Tb[r]:et(t[r]);return e},mr.create=function(e,t,n,i){return f((function r(){var a,o;return N(r,(function(r){switch(r.j){case 1:return S(r,2),T(r,mr.Ze(e,t,n,i),4);case 4:return a=r.o,r.return(new a);case 2:throw(o=I(r)).severity=2,o}}))}))},mr.Ze=function(e,t,n,i){return f((function r(){var a,o,s,l,u;return N(r,(function(r){switch(r.j){case 1:if(a=mr,i&&(o=a.Bb[i.toLowerCase()]))return r.return(o);if((s=a.getExtension(e))&&(l=a.Tb[s]))return r.return(l);if(i){r.A(2);break}return T(r,a.gf(e,t,n),3);case 3:if((i=r.o)&&(u=mr.Bb[i]))return r.return(u);case 2:throw new ye(2,4,4e3,e)}}))}))},mr.gf=function(e,t,n){return f((function i(){var r,a,o;return N(i,(function(i){switch(i.j){case 1:return(r=Ne([e],n)).method="HEAD",T(i,t.request(0,r).promise,2);case 2:return a=i.o,o=a.headers["content-type"],i.return(o?o.toLowerCase().split(";").shift():"")}}))}))},mr.getExtension=function(e){return 1==(e=new Z(e).ja.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},mr.isSupported=function(e,t){return!!Je()&&(t in mr.Bb||mr.getExtension(e)in mr.Tb)},V("shaka.media.PresentationTimeline",br),br.prototype.Y=function(){return this.g},br.prototype.getDuration=br.prototype.Y,br.prototype.ef=function(){return this.a},br.prototype.getMaxSegmentDuration=br.prototype.ef,br.prototype.xa=function(e){this.g=e},br.prototype.setDuration=br.prototype.xa,br.prototype.nf=function(){return this.f},br.prototype.getPresentationStartTime=br.prototype.nf,br.prototype.ue=function(e){this.l=e},br.prototype.setClockOffset=br.prototype.ue,br.prototype.Yb=function(e){this.m=e},br.prototype.setStatic=br.prototype.Yb,br.prototype.Bd=function(e){this.h=e},br.prototype.setSegmentAvailabilityDuration=br.prototype.Bd,br.prototype.kg=function(e){this.wc=e},br.prototype.setDelay=br.prototype.kg,br.prototype.Xe=function(){return this.wc},br.prototype.getDelay=br.prototype.Xe,br.prototype.xb=function(e,t){if(0!=e.length){var n=e[e.length-1].endTime+t;this.gd(e[0].startTime+t),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,n),null!=this.f&&this.s&&(this.f=(Date.now()+this.l)/1e3-this.b-this.a)}},br.prototype.notifySegments=br.prototype.xb,br.prototype.gd=function(e){this.c=null==this.c?e:Math.min(this.c,e)},br.prototype.notifyMinSegmentStartTime=br.prototype.gd,br.prototype.fd=function(e){this.a=Math.max(this.a,e)},br.prototype.notifyMaxSegmentDuration=br.prototype.fd,br.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},br.prototype.offset=br.prototype.offset,br.prototype.V=function(){return 1/0==this.g&&!this.m},br.prototype.isLive=br.prototype.V,br.prototype.Ya=function(){return 1/0!=this.g&&!this.m},br.prototype.isInProgress=br.prototype.Ya,br.prototype.Pb=function(){if(1/0==this.h)return this.i;var e=this.qb()-this.h;return Math.max(this.i,e)},br.prototype.getSegmentAvailabilityStart=br.prototype.Pb,br.prototype.ve=function(e){this.i=e},br.prototype.setUserSeekStart=br.prototype.ve,br.prototype.qb=function(){return this.V()||this.Ya()?Math.min(Math.max(0,(Date.now()+this.l)/1e3-this.a-this.f),this.g):this.g},br.prototype.getSegmentAvailabilityEnd=br.prototype.qb,br.prototype.Ob=function(e){var t=Math.max(this.c,this.i);if(1/0==this.h)return t;var n=this.qb()-this.h;return e=Math.min(n+e,this.Ca()),Math.max(t,e)},br.prototype.getSafeSeekRangeStart=br.prototype.Ob,br.prototype.pb=function(){return this.Ob(0)},br.prototype.getSeekRangeStart=br.prototype.pb,br.prototype.Ca=function(){var e=this.V()||this.Ya()?this.wc:0;return Math.max(0,this.qb()-e)},br.prototype.getSeekRangeEnd=br.prototype.Ca,br.prototype.ze=function(){return!(null==this.f||null!=this.b&&this.s)},br.prototype.usingPresentationStartTime=br.prototype.ze,V("shaka.dash.DashParser",kr),(i=kr.prototype).configure=function(e){this.a=e},i.start=function(e,t){var n=this;return f((function i(){var r;return N(i,(function(i){switch(i.j){case 1:return n.f=[e],n.b=t,T(i,Ar(n),2);case 2:if(r=i.o,n.b&&Sr(n,r),!n.b)throw new ye(2,7,7001);return i.return(n.c)}}))}))},i.stop=function(){return this.a=this.b=null,this.f=[],this.c=null,this.l=[],this.m={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},i.update=function(){Ar(this).catch(function(e){this.b&&this.b.onError(e)}.bind(this))},i.onExpirationUpdated=function(){},i.Rf=function(e,t){if(e.aa=Cr(t,e.ka,null),"image"==e.aa.contentType)return null;var n=!1,i=Vi.P(t,"Role"),r=i.map((function(e){return e.getAttribute("value")})).filter(Kt.Ia),a=void 0,o="text"==e.aa.contentType;o&&(a="subtitle");for(var s=0;s<i.length;s++){var l=i[s].getAttribute("schemeIdUri");if(null==l||"urn:mpeg:dash:role:2011"==l)switch(l=i[s].getAttribute("value"),l){case"main":n=!0;break;case"caption":case"subtitle":a=l}}var u=null,c=!1;Vi.P(t,"EssentialProperty").forEach((function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?u=e.getAttribute("value"):c=!0})),s=Vi.P(t,"Accessibility");var d=new Map;for(i={},l=(s=h(s)).next();!l.done;i={Kb:i.Kb},l=s.next()){var p=l.value;l=p.getAttribute("schemeIdUri"),p=p.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==l||"urn:scte:dash:cc:cea-708:2015"==l?(i.Kb=1,null!=p?p.split(";").forEach(function(e){return function(t){if(t.includes("=")){var n=(t=t.split("="))[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else n="CC"+e.Kb,e.Kb+=2;d.set(n,Mn(t))}}(i)):d.set("CC1","und")):"urn:mpeg:dash:role:2011"==l&&null!=p&&(r.push(p),"captions"==p&&(a="caption"))}if(c)return null;var f=zi(i=Vi.P(t,"ContentProtection"),this.a.dash.customScheme,this.a.dash.ignoreDrmInfo);if(i=Mn(t.getAttribute("lang")||"und"),s=t.getAttribute("label"),(l=Vi.P(t,"Label"))&&l.length&&((l=l[0]).textContent&&(s=l.textContent)),0==(r=(l=Vi.P(t,"Representation")).map(this.Uf.bind(this,e,f,a,i,s,n,r,d)).filter((function(e){return!!e}))).length){if(this.a.dash.ignoreEmptyAdaptationSet||o)return null;throw new ye(2,4,4003)}return e.aa.contentType&&"application"!=e.aa.contentType||(e.aa.contentType=Ir(r[0].mimeType,r[0].codecs),r.forEach((function(t){t.type=e.aa.contentType}))),r.forEach((function(e){f.drmInfos.forEach((function(t){e.keyId&&t.keyIds.push(e.keyId)}))})),o=l.map((function(e){return e.getAttribute("id")})).filter(Kt.Ia),{id:e.aa.id||"__fake__"+this.h++,contentType:e.aa.contentType,language:i,ad:n,streams:r,drmInfos:f.drmInfos,Fd:u,bg:o}},i.Uf=function(e,t,n,i,r,a,o,s,l){if(e.C=Cr(l,e.aa,null),!function(e){var t=e.Vb?1:0;return t+=e.La?1:0,0==(t+=e.Xb?1:0)?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Vb&&(e.La=null),e.Xb=null),!0)}(e.C))return null;e.bandwidth=Vi.J(l,"bandwidth",Vi.uc)||0;var u=e.C.contentType;u="text"==u||"application"==u;try{var c=this.cg.bind(this);if(e.C.Vb)var d=function(e,t){var n=Number(Xi(e,pr,"presentationTimeOffset"))||0,i=Xi(e,pr,"timescale"),r=1;i&&(r=Vi.uc(i)||1),n=n/r||0,i=dr(e,pr);var a=e.C.contentType;if(r=e.C.mimeType.split("/")[1],"text"!=a&&"mp4"!=r&&"webm"!=r)throw new ye(2,4,4006);if("webm"==r&&!i)throw new ye(2,4,4005);a=Qi(e,pr,"RepresentationIndex");var o=Xi(e,pr,"indexRange"),s=e.C.qa;if(o=Vi.vc(o||""),a){var l=a.getAttribute("sourceURL");l&&(s=zt(e.C.qa,[l])),o=Vi.J(a,"range",Vi.vc,o)}if(!o)throw new ye(2,4,4002);return{createSegmentIndex:(r=hr(e,t,i,s,o.start,o.end,r,n)).createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:i,ma:n}}(e,c);else if(e.C.La)d=fr(e,this.m);else if(e.C.Xb)d=gr(e,c,this.m,!!this.c);else{var h=e.C.qa,p=e.T.duration||0;d={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<p?1:null},getSegmentReference:function(e){return 1!=e?null:new er(1,0,p,(function(){return h}),0,null)},initSegmentReference:null,ma:0}}}catch(e){if(u&&4002==e.code)return null;throw e}return l=function(e,t,n,i){var r=zi(e,t,i);if(n.Ud)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==r.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=r.drmInfos),n.Ud=!1;else if(0<r.drmInfos.length&&(n.drmInfos=n.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==n.drmInfos.length))throw new ye(2,4,4008);return r.Pd||n.Pd}(l=Vi.P(l,"ContentProtection"),this.a.dash.customScheme,t,this.a.dash.ignoreDrmInfo),{id:this.h++,originalId:e.C.id,createSegmentIndex:d.createSegmentIndex,findSegmentPosition:d.findSegmentPosition,getSegmentReference:d.getSegmentReference,initSegmentReference:d.initSegmentReference,presentationTimeOffset:d.ma,mimeType:e.C.mimeType,codecs:e.C.codecs,frameRate:e.C.frameRate,pixelAspectRatio:e.C.pixelAspectRatio,bandwidth:e.bandwidth,width:e.C.width,height:e.C.height,kind:n,encrypted:0<t.drmInfos.length,keyId:l,language:i,label:r,type:e.aa.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.C.emsgSchemeIdUris,roles:o,channelsCount:e.C.hd,audioSamplingRate:e.C.audioSamplingRate,closedCaptions:s}},i.Tf=function(e,t,n){var i=Vi.Ab,r=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",o=Vi.J(n,"timescale",i)||1;Vi.P(n,"Event").forEach(function(n){var s=Vi.J(n,"presentationTime",i)||0,l=Vi.J(n,"duration",i)||0;l=(s=s/o+e)+l/o,null!=t&&(s=Math.min(s,e+t),l=Math.min(l,e+t)),n={schemeIdUri:r,value:a,startTime:s,endTime:l,id:n.getAttribute("id")||"",eventElement:n},this.b.onTimelineRegionAdded(n)}.bind(this))},i.cg=function(e,t,n){return e=Er(e,t,n,this.a.retryParameters),e=this.b.networkingEngine.request(1,e),Pe(this.g,e),e.promise.then((function(e){return e.data}))},mr.rd("mpd",kr),mr.Eb("application/dash+xml",kr),mr.Eb("video/vnd.mpeg.dash.mpd",kr),Or.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Or.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Mr={nb:function(e,t){return e.filter((function(e){return e.name==t}))},Ua:function(e,t){var n=Mr.nb(e,t);return n.length?n[0]:null},Qc:function(e,t,n){return e.filter((function(e){var i=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),i.value==t&&e.value==n}))},Ic:function(e,t){return zt([e],[t])[0]},Zc:function(e){return/^#(?!EXT)/m.test(e)}};function Nr(e){this.b=e,this.a=0}function Ur(e){Br(e,/[ \t]+/gm)}function Br(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,eg:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.eg)}function Fr(e){return e.a==e.b.length?null:(e=Br(e,/[^ \t\n]*/gm))?e[0]:null}function jr(){this.a=0}function Hr(e,t,n){var i=(t=(t=st(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new ye(2,4,4015);t=0;for(var r=1;r<i.length;r++)if(!Mr.Zc(i[r])){var a=Kr(e,i[r]);if(--e.a,zr.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(r+=1)}for(r=[],a=1;a<i.length;)if(Mr.Zc(i[a]))a+=1;else{var o=Kr(e,i[a]);if(Gr.includes(o.name)){if(1!=t)throw new ye(2,4,4017);return new Dr(n,t,r,e=Vr(e,n,i=i.splice(a,i.length-a),r))}r.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new Pr("URI",i[a])),a+=1)}return new Dr(n,t,r)}function Vr(e,t,n,i){var r=[],a=[];return n.forEach((function(n){if(/^(#EXT)/.test(n))n=Kr(e,n),zr.includes(n.name)?i.push(n):a.push(n);else{if(Mr.Zc(n))return[];n=Mr.Ic(t,n.trim()),r.push(new Lr(n,a)),a=[]}})),r}function Kr(e,t){var n=e.a++,i=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!i)throw new ye(2,4,4016,t);var r,a=i[1],o=i[2];if(i=[],o){var s;(s=Br(o=new Nr(o),/^([^,=]+)(?:,|$)/g))&&(r=s[1]);for(var l=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=Br(o,l);)i.push(new Pr(s[1],s[2]||s[3]))}return new Or(n,a,i,r)}var zr="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Gr="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Wr(e){try{var t=Wr.parse(e);return Ee({uri:e,nd:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return me(e)}}function Yr(){var e=this;this.a=this.f=null,this.$=1,this.D=new Map,this.S=new Set,this.b=new Map,this.c=null,this.u="",this.s=new jr,this.O=0,this.h=new he((function(){!function(e){f((function t(){var n,i;return N(t,(function(t){switch(t.j){case 1:return e.f?(S(t,2),T(t,e.update(),4)):t.return();case 4:n=e.O,e.h.R(n),R(t,0);break;case 2:if(i=I(t),!e.f)return t.return();i.severity=1,e.f.onError(i),e.h.R(.1),w(t)}}))}))}(e)})),this.g=pa,this.m=null,this.B=0,this.F=1/0,this.i=new Oe,this.H=[],this.l=new Map,this.W=!1}function $r(e,t){return f((function n(){var i,r,a,o,s,l,u,c,d,h;return N(n,(function(n){switch(n.j){case 1:return i=Mr,r=fa,a=t.He,T(n,da(e,Ne([a],e.a.retryParameters),0),2);case 2:if(o=n.o,1!=(s=Hr(e.s,o.data,o.uri)).type)throw new ye(2,4,4017);return u=(l=i.Ua(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(l.value):0,c=t.stream,T(n,na(e,t.Cc,s,u,c.mimeType,c.codecs),3);case 3:d=n.o,t.Wb.a=d,h=d[d.length-1],i.Ua(s.a,"EXT-X-ENDLIST")&&(ca(e,r.Ra),e.c.xa(h.endTime)),w(n)}}))}))}function qr(e){e.forEach((function(e){if(e){var t=e.stream.codecs.split(",");t=t.filter((function(e){return"mp4a.40.34"!=e})),e.stream.codecs=t.join(",")}}))}function Xr(e,t,n,i,r){return{id:e.$++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:i,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}function Qr(e,t,n){return f((function i(){var r,a,o,s,l,u,c,d,h,p,f,y;return N(i,(function(i){switch(i.j){case 1:if(r=aa(t,"URI"),e.b.has(r))return i.return(e.b.get(r));if(a=aa(t,"TYPE").toLowerCase(),o=Wt,"subtitles"==a&&(a=o.ra),s=Mn(xr(t,"LANGUAGE","und")),l=xr(t,"NAME"),u=t.getAttribute("DEFAULT"),c=t.getAttribute("AUTOSELECT"),d=xr(t,"CHANNELS"),"audio"==a)if(d){var g=d.split("/")[0];g=parseInt(g,10)}else g=null;else g=null;return h=g,p=!!u||!!c,f=xr(t,"CHARACTERISTICS"),T(i,Zr(e,r,n,a,s,p,l,h,null,f),2);case 2:return y=i.o,e.b.has(r)?i.return(e.b.get(r)):null==y?i.return(null):(e.D.set(t.id,y),e.b.set(r,y),i.return(y))}}))}))}function Zr(e,t,n,i,r,a,o,s,l,u){return f((function c(){var d,p,y,g,v,m,b,E,k,A,_,w,C,D,O,P,x,L,M,U,B,F,j,H,V,K,z;return N(c,(function(c){switch(c.j){case 1:return p=(d=Mr).Ic(e.u,t),T(c,da(e,Ne([p],e.a.retryParameters),0),2);case 2:if(y=c.o,p=y.uri,1!=(g=Hr(e.s,y.data,p)).type)throw new ye(2,4,4017);v=[],g.segments.forEach((function(e){e=d.nb(e.b,"EXT-X-KEY"),v.push.apply(v,e)})),m=!1,b=[],E=null;for(var G=h(v),W=G.next();!W.done;W=G.next())if(k=W.value,"NONE"!=(A=aa(k,"METHOD"))){if(m=!0,"AES-128"==A)return e.W=!0,c.return(null);_=aa(k,"KEYFORMAT"),(C=(w=ha[_])?w(k):null)&&(C.keyIds.length&&(E=C.keyIds[0]),b.push(C))}if(m&&!b.length)throw new ye(2,4,4026);return function(e,t){var n=fa,i=Mr.Ua(t.a,"EXT-X-PLAYLIST-TYPE"),r=Mr.Ua(t.a,"EXT-X-ENDLIST");r=i&&"VOD"==i.value||r,i=i&&"EVENT"==i.value&&!r,i=!r&&!i,r?ca(e,n.Ra):(ca(e,i?n.Jd:n.Ce),n=oa(t.a,"EXT-X-TARGETDURATION"),n=Number(n.value),e.B=Math.max(n,e.B),e.F=Math.min(n,e.F))}(e,g),D=function(e,t){if(1==t.length)return t[0];var n=ra(e,t);if(null!=n)return n;throw new ye(2,4,4025,t)}(i,n),T(c,function(e,t,n,i){return f((function r(){var a,o,s,l,u,c,d,h,p;return N(r,(function(r){switch(r.j){case 1:return a=Wt,o=i.segments[0].a,s=new Z(o),l=s.ja.split(".").pop(),u=ua[t],(c=u[l])?r.return(c):t==a.ra?n&&"vtt"!=n?r.return("application/mp4"):r.return("text/vtt"):((d=Ne([o],e.a.retryParameters)).method="HEAD",T(r,da(e,d,1),2));case 2:if(h=r.o,!(p=h.headers["content-type"]))throw new ye(2,4,4021,l);return r.return(p.split(";")[0])}}))}))}(e,i,D,g),3);case 3:return O=c.o,la.includes(O)&&(D=""),x=(P=d.Ua(g.a,"EXT-X-MEDIA-SEQUENCE"))?Number(P.value):0,S(c,4),T(c,na(e,t,g,x,O,D),6);case 6:L=c.o,R(c,5);break;case 4:if(4035==(M=I(c)).code)return q("Skipping unsupported HLS stream",O,t),c.return(null);throw M;case 5:return U=L[0].startTime,B=L[L.length-1].endTime,F=B-U,j=new nr(L),H=Jr(g),V=void 0,"text"==i&&(V="subtitle"),K=[],u&&K.push(u),z={id:e.$++,originalId:o,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:j.find.bind(j),getSegmentReference:j.get.bind(j),initSegmentReference:H,presentationTimeOffset:0,mimeType:O,codecs:D,kind:V,encrypted:m,keyId:E,language:r,label:o,type:i,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:K,channelsCount:s,audioSamplingRate:null,closedCaptions:l},c.return({stream:z,Wb:j,drmInfos:b,Cc:t,He:p,ed:U,Jg:B,duration:F})}}))}))}function Jr(e){var t=Mr.nb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new ye(2,4,4020);var n=aa(t=t[0],"URI"),i=Mr.Ic(e.b,n);return e=0,n=null,(t=xr(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new Ji((function(){return[i]}),e,n)}function ea(e,t,n,i){var r=t.b,a=t.a;t=oa(r,"EXTINF").value.split(","),t=i+Number(t[0]);var o=0,s=null;return(r=Mr.Ua(r,"EXT-X-BYTERANGE"))&&(o=r.value.split("@"),r=Number(o[0]),s=(o=o[1]?Number(o[1]):e.a+1)+r-1),new er(n,i,t,(function(){return[a]}),o,s)}function ta(e){e.c&&(e.H.forEach((function(t){e.c.xb(t,0)})),e.H=[])}function na(e,t,n,i,r,a){return f((function o(){var s,l,u,c,d,h,p,y,g,v;return N(o,(function(o){switch(o.j){case 1:return s=n.segments,l=[],u=s[0].a,c=ea(null,s[0],i,0),d=Jr(n),T(o,function(e,t,n,i,r,a){return f((function o(){var s,l,u,c,d,h,p,f,y;return N(o,(function(o){switch(o.j){case 1:if(e.m&&(s=e.b.get(t),l=s.Wb,u=l.get(i.position)))return o.return(u.startTime);if(r=r.toLowerCase(),la.includes(r))throw q("Raw formats are not yet supported.  Skipping "+r),new ye(1,4,4035);if("video/webm"==r)throw q("WebM in HLS is not yet supported.  Skipping."),new ye(1,4,4035);if("video/mp4"!=r&&"audio/mp4"!=r){o.A(2);break}return c=[ia(e,i)],n&&c.push(ia(e,n)),T(o,Promise.all(c),3);case 3:return d=o.o,h=d[0],p=d[1]||d[0],o.return(function(e,t,n,i){var r=0;if((new Mi).I("moov",Ni).I("trak",Ni).I("mdia",Ni).fa("mdhd",(function(e){e.reader.M(0==e.version?8:16),r=e.reader.G(),e.parser.stop()})).parse(i,!0),!r)throw new ye(2,4,4030,e,t);var a=0,o=!1;if((new Mi).I("moof",Ni).I("traf",Ni).fa("tfdt",(function(e){a=(0==e.version?e.reader.G():e.reader.Db())/r,o=!0,e.parser.stop()})).parse(n,!0),!o)throw new ye(2,4,4030,e,t);return a}(t,h.uri,h.data,p.data));case 2:if("video/mp2t"!=r){o.A(4);break}return T(o,ia(e,i),5);case 5:return f=o.o,o.return(function(e,t,n){function i(){throw new ye(2,4,4030,e,t)}n=new Pi(new DataView(n),0);for(var r=0,a=0;;){if(r=n.ca(),71!=(a=n.la())&&i(),16384&n.Ub()||i(),0!=(a=(48&n.la())>>4)&&2!=a||i(),3==a&&(a=n.la(),n.M(a)),1==n.G()>>8)return n.M(3),0!=(r=n.la()>>6)&&1!=r||i(),0==n.la()&&i(),(1073741824*((14&(r=n.la()))>>1)+((65534&(a=n.Ub()))<<14|(65534&(n=n.Ub()))>>1))/9e4;n.seek(r+188),71!=(a=n.la())&&(n.seek(r+192),a=n.la()),71!=a&&(n.seek(r+204),a=n.la()),71!=a&&i(),n.re(1)}}(t,f.uri,f.data));case 4:if("application/mp4"!=r&&!r.startsWith("text/")){o.A(6);break}return T(o,ia(e,i),7);case 7:return y=o.o,o.return(function(e,t,n){return gn(e=Xe(e,t))?(vn(t=new fn(null),e),t.lc(n)):0}(r,a,y.data));case 6:throw new ye(2,4,4030,t)}}))}))}(e,t,d,c,r,a),2);case 2:h=o.o,u.split("/").pop();for(var m=0;m<s.length;++m)p=s[m],y=l[l.length-1],g=0==m?h:y.endTime,v=ea(y,p,i+m,g),l.push(v);return e.H.push(l),ta(e),o.return(l)}}))}))}function ia(e,t){return f((function n(){var i,r,a,o,s,l;return N(n,(function(n){switch(n.j){case 1:return i=1,r=Er(t.c(),t.b,t.b+2048-1,e.a.retryParameters),a=Er(t.c(),t.b,t.a,e.a.retryParameters),S(n,2),T(n,da(e,r,i),4);case 4:return o=n.o,n.return(o);case 2:if(7001==(s=I(n)).code)throw s;return q("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),T(n,da(e,a,i),5);case 5:return l=n.o,n.return(l)}}))}))}function ra(e,t){for(var n=sa[e],i=0;i<n.length;i++)for(var r=0;r<t.length;r++)if(n[i].test(t[r].trim()))return t[r].trim();return"text"==e?"":null}function aa(e,t){var n=e.getAttribute(t);if(!n)throw new ye(2,4,4023,t);return n.value}function oa(e,t){var n=Mr.Ua(e,t);if(!n)throw new ye(2,4,4024,t);return n}V("shaka.net.DataUriPlugin",Wr),Wr.parse=function(e){var n=e.split(":");if(2>n.length||"data"!=n[0])throw new ye(2,1,1004,e);if(2>(n=n.slice(1).join(":").split(",")).length)throw new ye(2,1,1004,e);var i=n[0];n=t.decodeURIComponent(n.slice(1).join(","));var r=null;if(1<(i=i.split(";")).length&&(r=i[1]),"base64"==r)e=ft.Ba(n).buffer;else{if(r)throw new ye(2,1,1005,e);e=ct(n)}return{data:e,contentType:i[0]}},Me("data",Wr),V("shaka.hls.HlsParser",Yr),(i=Yr.prototype).configure=function(e){this.a=e},i.start=function(e,t){var n=this;return f((function i(){var r,a;return N(i,(function(i){switch(i.j){case 1:return n.f=t,T(i,da(n,Ne([e],n.a.retryParameters),0),2);case 2:return r=i.o,n.u=r.uri,T(i,function(e,t){return f((function n(){var i,r,a,o,s,l,u,c,d,p,y;return N(n,(function(n){switch(n.j){case 1:if(0!=(i=Hr(e.s,t,e.u)).type)throw new ye(2,4,4022);return T(n,function(e,t){return f((function n(){var i,r,a,o,s,l,u,c,d,p,y,g;return N(n,(function(n){switch(n.j){case 1:return i=Mr,r=Kt,a=t.a,o=i.nb(t.a,"EXT-X-MEDIA"),s=o.filter(function(e){return"SUBTITLES"==aa(e,"TYPE")}.bind(e)),l=s.map(function(e){var t=this;return f((function n(){var i;return N(n,(function(n){switch(n.j){case 1:return t.a.disableText?n.return(null):(S(n,2),T(n,function(e,t){return f((function n(){var i;return N(n,(function(n){switch(n.j){case 1:return aa(t,"TYPE"),T(n,Qr(e,t,[]),2);case 2:return i=n.o,n.return(i.stream)}}))}))}(t,e),4));case 4:return n.return(n.o);case 2:if(i=I(n),t.a.hls.ignoreTextStreamFailures)return n.return(null);throw i}}))}))}.bind(e)),u=o.filter((function(e){return"CLOSED-CAPTIONS"==aa(e,"TYPE")})),function(e,t){for(var n=h(t),i=n.next();!i.done;i=n.next()){aa(i=i.value,"TYPE");var r=xr(i,"LANGUAGE")||"und";r=Mn(r);var a=aa(i,"GROUP-ID");i=aa(i,"INSTREAM-ID"),e.l.get(a)||e.l.set(a,new Map),e.l.get(a).set(i,r)}}(e,u),T(n,Promise.all(l),2);case 2:return c=n.o,d=i.nb(a,"EXT-X-STREAM-INF"),p=d.map(function(e){return function(e,t,n){return f((function i(){var r,a,o,s,l,u,c,d,p,y,g,v,m,b,E,k,A,_,w,S,C,R,I,D,O,P,x;return N(i,(function(i){switch(i.j){case 1:return r=Wt,a=Mr,o=xr(t,"CODECS","avc1.42E01E,mp4a.40.2"),s=function(e){for(var t=new Set,n=[],i=(e=h(e)).next();!i.done;i=e.next()){var r=Qe(i=i.value)[0];t.has(r)||(n.push(i),t.add(r))}return n}(o.split(/\s*,\s*/)),l=t.getAttribute("RESOLUTION"),c=u=null,d=xr(t,"FRAME-RATE"),p=Number(aa(t,"BANDWIDTH")),l&&(y=l.value.split("x"),u=y[0],c=y[1]),g=(g=(g=a.nb(n.a,"EXT-X-MEDIA")).filter((function(e){return"CLOSED-CAPTIONS"!=aa(e,"TYPE")}))).filter((function(e){var t=xr(e,"URI")||"";return"SUBTITLES"==(xr(e,"TYPE")||"")||""!=t})),v=xr(t,"AUDIO"),m=xr(t,"VIDEO"),v?g=a.Qc(g,"AUDIO",v):m&&(g=a.Qc(g,"VIDEO",m)),(b=ra(r.ra,s))&&((E=xr(t,"SUBTITLES"))&&((k=a.Qc(g,"SUBTITLES",E)).length&&(A=e.D.get(k[0].id))&&(A.stream.codecs=b)),Ie(s,b)),_=g.map(function(e){return Qr(this,e,s)}.bind(e)),w=[],S=[],T(i,Promise.all(_),2);case 2:if(R=(R=i.o).filter((function(e){return null!=e})),v?w=R:m&&(S=R),D=!1,w.length||S.length?w.length?(P=aa(t,"URI"),x=w[0].Cc,P==x?(I=r.Gb,D=!0):I=r.Qa):I=r.Gb:1==s.length?(O=ra(r.Qa,s),I=l||d||O?r.Qa:r.Gb):(I=r.Qa,s=[s.join(",")]),D){i.A(3);break}return T(i,function(e,t,n,i){return f((function r(){var a,o,s,l,u;return N(r,(function(r){switch(r.j){case 1:return a=Wt,o=aa(t,"URI"),e.b.has(o)?r.return(e.b.get(o)):(s=xr(t,"CLOSED-CAPTIONS"),l=null,i==a.Qa&&s&&"NONE"!=s&&(l=e.l.get(s)),T(r,Zr(e,o,n,i,"und",!1,null,null,l,null),2));case 2:return null==(u=r.o)?r.return(null):e.b.has(o)?r.return(e.b.get(o)):(e.b.set(o,u),r.return(u))}}))}))}(e,t,s,I),4);case 4:C=i.o;case 3:if(C)C.stream.type==r.Gb?w=[C]:S=[C];else if(null===C)return i.return([]);return S&&qr(S),w&&qr(w),i.return(function(e,t,n,i,r,a,o){n.forEach(function(e){(e=e.stream)&&(e.width=Number(r)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e));var s=!!e.a&&e.a.disableAudio;t.length&&!s||(t=[null]);s=!!e.a&&e.a.disableVideo,(!n.length||s)&&(n=[null]);s=[];for(var l=(t=h(t)).next();!l.done;l=t.next()){l=l.value;for(var u=h(n),c=u.next();!c.done;c=u.next()){var d=c.value;c=l?l.stream:null;var p=d?d.stream:null,f=l?l.drmInfos:null,y=d?d.drmInfos:null;d=(d?d.Cc:"")+" - "+(l?l.Cc:"");var g=void 0;if(c&&p){if(f.length&&y.length&&!(0<Ot(f,y).length))continue;g=Ot(f,y)}else c?g=f:p&&(g=y);e.S.has(d)||(c=Xr(e,c,p,i,g),s.push(c),e.S.add(d))}}return s}(e,w,S,p,u,c,d))}}))}))}(this,e,t)}.bind(e)),T(n,Promise.all(p),3);case 3:return y=n.o,g=(g=y.reduce(r.Hc,[])).filter((function(e){return null!=e})),n.return({startTime:0,variants:g,textStreams:c.filter((function(e){return null!=e}))})}}))}))}(e,i),2);case 2:if(r=n.o,!e.f)throw new ye(2,7,7001);if(e.W&&0==r.variants.length)throw new ye(2,4,4034);e.f.filterAllPeriods([r]),a=1/0,o=0,s=1/0;for(var g=h(e.b.values()),v=g.next();!v.done;v=g.next())l=v.value,a=Math.min(a,l.ed),o=Math.max(o,l.ed),"text"!=l.stream.type&&(s=Math.min(s,l.duration));if(e.g!=fa.Ra?(e.c=new br(0,3*e.B),e.c.Yb(!1)):(e.c=new br(null,0),e.c.Yb(!0)),ta(e),e.g!=fa.Ra){for(e.O=e.F,u=fa,e.g==u.Jd&&(c=e.c.wc,isNaN(e.a.availabilityWindowOverride)||(c=e.a.availabilityWindowOverride),e.c.Bd(c)),d=0;95443.7176888889<=o;)d+=95443.7176888889,o-=95443.7176888889;if(d)for(v=(g=h(e.b.values())).next();!v.done;v=g.next())95443.7176888889>(p=v.value).ed&&(p.stream.presentationTimeOffset=-d,p.Wb.offset(d))}else for(e.c.xa(s),e.c.offset(-a),v=(g=h(e.b.values())).next();!v.done;v=g.next())(y=v.value).stream.presentationTimeOffset=a,y.Wb.offset(-a),ir(y.Wb,s);e.m={presentationTimeline:e.c,periods:[r],offlineSessionIds:[],minBufferTime:0},w(n)}}))}))}(n,r.data),3);case 3:return 0<(a=n.O)&&n.h.R(a),i.return(n.m)}}))}))},i.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.i&&(e.push(this.i.destroy()),this.i=null),this.a=this.f=null,this.D.clear(),this.S.clear(),this.b.clear(),this.m=null,Promise.all(e)},i.update=function(){if(this.g!=fa.Ra){for(var e=[],t=h(this.b.values()),n=t.next();!n.done;n=t.next())e.push($r(this,n.value));return Promise.all(e)}},i.onExpirationUpdated=function(){};var sa={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},la=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],ua={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function ca(e,t){e.g=t,e.c&&e.c.Yb(e.g==fa.Ra),e.g!=fa.Ra||e.h.stop()}function da(e,t,n){if(!e.i)throw new ye(2,7,7001);return t=e.f.networkingEngine.request(n,t),Pe(e.i,t),t.promise}var ha={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=aa(e,"METHOD");return Kn("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227"),["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].includes(t)?(t=aa(e,"URI"),t=Wr.parse(t),t=Gt("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=xr(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):null}},pa="VOD",fa={Ra:pa,Ce:"EVENT",Jd:"LIVE"};function ya(){this.a=new Map}function ga(e,t,n){va(e,t).text=n}function va(e,t){return e.a.has(t)||e.a.set(t,new ma),e.a.get(t)}function ma(){this.text=this.variant=null}function ba(e,t){this.a=e,this.b=new Set([e]);for(var n=h(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function Ea(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!(n.channelsCount==i.channelsCount&&ka(n,i)&&Aa(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(ka(n=e.video,i=t.video)&&Aa(n.roles,i.roles))),!n}function ka(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return Qe(e)[0]})),i=t.codecs.split(",").map((function(e){return Qe(e)[0]}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}function Aa(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;for(var r=(n=h(n)).next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function _a(e){this.a=e,this.b=new Ta(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Ta(e,t,n,i,r){this.f=e,this.c=t,this.a=n,this.b=void 0===i?"":i,this.g=void 0===r?"":r}function wa(){this.a=Ra,this.b=(new Map).set(Ra,2).set(Ca,1)}function Sa(e,t,n){e.b.set(Ra,n).set(Ca,t)}mr.rd("m3u8",Yr),mr.Eb("application/x-mpegurl",Yr),mr.Eb("application/vnd.apple.mpegurl",Yr),ba.prototype.add=function(e){return!!Ea(this.a,e)&&(this.b.add(e),!0)},ba.prototype.values=function(){return this.b.values()},_a.prototype.create=function(e){var t=this,n=e.filter((function(e){return Ea(t.a,e)}));return n.length?new ba(n[0],n):this.b.create(e)},Ta.prototype.create=function(e){var t=[];t=function(e,t){var n=Un(Mn(t),e.map((function(e){return Nn(e)})));return n?e.filter((function(e){return n==Nn(e)})):[]}(e,this.f);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,this.c&&((e=function(e,t,n){return e.filter((function(e){if(n){var i=e[n];return i&&i.roles.includes(t)}return i=e.audio,e=e.video,i&&0<=i.roles.indexOf(t)||e&&0<=e.roles.indexOf(t)}))}(t,this.c,this.g)).length&&(t=e)),this.a&&((e=Fn.Sd(t,this.a)).length&&(t=e)),this.b&&((e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.b)).length&&(t=e)),e=new ba(t[0]),n=(t=h(t)).next();!n.done;n=t.next())n=n.value,Ea(e.a,n)&&e.add(n);return e};var Ca=0,Ra=1;function Ia(e,t){this.g=e,this.h=Oa(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.i=t,this.c=function(){}}function Da(e){this.a=e}function Oa(e){if(e.a.paused||0==e.a.playbackRate||0==e.a.buffered.length)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(!(e<i||e>r-.5)){t=!0;break e}}t=!1}return t}function Pa(e,t,n,i,r){var a=this;this.a=e,this.u=t,this.s=n,this.l=r,this.f=new He,this.i=!1,this.m=e.readyState,this.c=!1,this.b=i,this.h=!1,this.f.w(e,"waiting",(function(){return xa(a)})),this.g=new he((function(){xa(a)})).Na(.25)}function xa(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.i)return}else e.i=!1;if(!e.a.paused){e.a.readyState!=e.m&&(e.c=!1,e.m=e.a.readyState);var t=e.s.smallGapLimit,n=e.a.currentTime,i=e.a.buffered;e:{if(i&&i.length&&!(1==i.length&&1e-6>i.end(0)-i.start(0)))for(var r=it("Edge/")||it("Trident/")||it("Tizen")||it("CrKey")?.5:.1,a=0;a<i.length;a++)if(i.start(a)>n&&(0==a||i.end(a-1)-n<=r)){r=a;break e}r=null}if(null==r)e.b&&(n=Oa(i=(e=e.b).g),r=i.a.currentTime,a=Date.now()/1e3,e.a==r&&e.h==n||(e.f=a,e.a=r,e.h=n,e.b=!1),(r=a-e.f)>=e.i&&n&&!e.b&&(e.c(e.a,r),e.b=!0,e.a=i.a.currentTime));else if(0!=r||e.h){a=i.start(r);var o=e.u.Ca();if(!(a>=o)){t=(o=a-n)<=t;var s=!1;.001>o||(t||e.c||(e.c=!0,(n=new Te("largegap",{currentTime:n,gapSize:o})).cancelable=!0,e.l(n),e.s.jumpLargeGaps&&!n.defaultPrevented&&(s=!0)),!t&&!s)||(0!=r&&i.end(r-1),e.a.currentTime=a)}}}}}function La(e){var t=this;this.c=e,this.a=new Set,this.b=new he((function(){Ma(t,!1)})).Na(.25)}function Ma(e,t){for(var n=h(e.a),i=n.next();!i.done;i=n.next())i.value.g(e.c.currentTime,t)}function Na(e){for(var t=[],n=(e=h(e)).next();!n.done;n=e.next())for(var i=(n=h(n.value.variants)).next();!i.done;i=n.next())t.push(i.value);return t}function Ua(e,t){for(var n=null,i=h(e),r=i.next();!r.done;r=i.next())t>=(r=r.value).startTime&&(n=r);return n}function Ba(e){this.c=e,this.a=null,this.b=function(){}}function Fa(e){var t=this;this.a=e,this.f=!1,this.c=this.a.kc(),this.b=new he((function(){t.a.de(.25*t.c)}))}function ja(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.kc()!=t&&e.a.Ad(t))}catch(e){}e.b.Na(.25),0!=e.a.kc()&&e.a.Ad(0)}function Ha(e,t,n){this.a=e,this.f=t,this.g=n,this.h=!1,this.b=new He,this.c=new Wa(e),0<e.readyState?za(this,n):Ka(this,n)}function Va(e){return e.h?e.a.currentTime:e.g}function Ka(e,t){e.g=t,e.b.ea(e.a,"loadedmetadata"),e.b.da(e.a,"loadedmetadata",(function(){za(e,t)}))}function za(e,t){.001>Math.abs(e.a.currentTime-t)?Ga(e):(e.b.da(e.a,"seeking",(function(){Ga(e)})),Ya(e.c,0==e.a.currentTime?t:e.a.currentTime))}function Ga(e){e.h=!0,e.b.w(e.a,"seeking",(function(){return e.f()}))}function Wa(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new he((function(){0>=t.c||t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)}))}function Ya(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.Na(.1)}function $a(e){function t(){null==n.c?n.f=!0:(n.b.da(n.a,"seeking",(function(){n.f=!0})),n.a.currentTime=Math.max(0,n.a.currentTime+n.c))}var n=this;this.a=e,this.f=!1,this.c=null,this.b=new He,0==this.a.readyState?this.b.da(this.a,"loadeddata",t):t()}function qa(e,t,n,i,r,a){var o=this;this.b=e,this.a=t.presentationTimeline,this.B=t.minBufferTime||0,this.h=n,this.u=r,this.l=null,this.f=new Pa(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,i=new Ia(new Da(e),t.stallThreshold);return function(e,t){e.c=t}(i,(function(){e.currentTime+=n})),i}(e,n),a),this.c=new Ha(e,(function(){var e=o.f;e.i=!0,e.h=!1,e.c=!1;var t=Va(o.c);return e=Qa(o,t),.001<Math.abs(e-t)&&(t=(new Date).getTime()/1e3,!o.l||o.l<t-1)?(o.l=t,0<(t=o.c).a.readyState?Ya(t.c,e):Ka(t,e),e=void 0):(o.u(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.a.Y()?e.a.pb():e.a.Ca():0>t&&(t=e.a.Ca()+t),Xa(e,Za(e,t))}(this,i)),this.i=new he((function(){if(0!=o.b.readyState&&!o.b.paused){var e=o.b.currentTime,t=o.a.pb(),n=o.a.Ca();3>n-t&&(t=n-3),e<t&&(e=Qa(o,e),o.b.currentTime=e)}})).Na(.25)}function Xa(e,t){var n=e.a.Y();return t>=n?n-e.h.durationBackoff:t}function Qa(e,t){var n=jt.bind(null,e.b.buffered),i=Math.max(e.B,e.h.rebufferingGoal),r=e.h.safeSeekOffset,a=e.a.pb(),o=e.a.Ca(),s=e.a.Y();3>o-a&&(a=o-3);var l=e.a.Ob(i),u=e.a.Ob(r);return i=e.a.Ob(i+r),t>=s?Xa(e,t):t>o?o:t<a?n(u)?u:i:t>=l||n(t)?t:i}function Za(e,t){var n=e.a.pb();return t<n||t>(n=e.a.Ca())?n:t}function Ja(){this.b=function(){},this.a=new Set}function eo(e){var t=this;this.h=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.i=[{fb:null,eb:no,Xa:function(e,n){return t.a(e,n)}},{fb:to,eb:no,Xa:function(e,n){return t.a(e,n)}},{fb:io,eb:no,Xa:function(e,n){return t.a(e,n)}},{fb:no,eb:to,Xa:function(e,n){return t.b(e,n)}},{fb:no,eb:io,Xa:function(e,n){return t.b(e,n)}},{fb:to,eb:io,Xa:function(e,n){return t.c(e,n)}},{fb:io,eb:to,Xa:function(e,n){return t.c(e,n)}}]}Ia.prototype.release=function(){this.g=null,this.c=function(){}},Pa.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.u=this.l=null},Pa.prototype.ld=function(){this.h=!0,xa(this)},La.prototype.release=function(){this.b.stop();for(var e=h(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},Ba.prototype.release=function(){this.a=this.c=null,this.b=function(){}},Ba.prototype.g=function(e){var t=this.a,n=this.c.periods;t!=(e=Ua(n,e)||n[0])&&this.b(e),this.a=e},Fa.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},Fa.prototype.set=function(e){this.c=e,ja(this)},Ha.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.f=function(){},this.a=null},Wa.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},$a.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},$a.prototype.m=function(e){this.c=this.f?this.c:e},$a.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},$a.prototype.s=function(){},qa.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.i&&(this.i.stop(),this.i=null),this.b=this.c=this.a=this.h=null,this.u=function(){}},qa.prototype.m=function(e){var t=this.c;0<t.a.readyState?Ya(t.c,e):Ka(t,e)},qa.prototype.g=function(){var e=Va(this.c);return 0<this.b.readyState&&!this.b.paused?Za(this,e):e},qa.prototype.s=function(){this.f.ld()},Ja.prototype.release=function(){this.b=function(){},this.a.clear()},eo.prototype.release=function(){this.h=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},eo.prototype.g=function(e,t){for(var n=h(this.h.a),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.f.get(i),a=e<i.startTime?to:e>i.endTime?io:no;this.f.set(i,a);for(var o=h(this.i),s=o.next();!s.done;s=o.next())(s=s.value).fb==r&&s.eb==a&&s.Xa(i,t)}};var to=1,no=2,io=3;function ro(e,t){this.a=t,this.c=e,this.g=null,this.l=1,this.u=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.s=!1,this.F=null,this.D=this.f=this.m=!1,this.B=0}function ao(e){return so(e,"audio")}function oo(e){return so(e,"video")}function so(e,t){var n=e.b.get(t);return n?n.Ka||n.stream:null}function lo(e,t){return f((function n(){var i,r,a,o,s,l,u,c,d;return N(n,(function(n){switch(n.j){case 1:return i=Wt,T(n,In(e.a.L,i.ra),2);case 2:return e.B++,e.D=!1,r=e.B,a=e.a.L,o=new Map,s=new Set,o.set(i.ra,t),s.add(t),T(n,a.init(o,!1),3);case 3:return e.f?n.return():T(n,vo(e,s),4);case 4:if(e.f)return n.return();l=e.a.L.g.isTextVisible()||e.g.alwaysStreamText,e.B!=r||e.b.has(i.ra)||e.D||!l||(u=e.a.Va(),c=To(e,u),d=yo(t,c,0),e.b.set(i.ra,d),Ro(e,d,0)),w(n)}}))}))}function uo(e,t){var n=e.b.get("video");if(n){var i=n.stream;if(i)if(t){var r=i.trickModeVideo;r&&!n.Ka&&(ho(e,r,!1,0,!1),n.Ka=i)}else(i=n.Ka)&&(n.Ka=null,ho(e,i,!0,0,!1))}}function co(e,t,n,i){var r=!1;if(t.video){var a=ho(e,t.video,n,i,!1);r=r||a}return t.audio&&(e=ho(e,t.audio,n,i,!1),r=r||e),r}function ho(e,t,n,i,r){var a=e.b.get(t.type);if(!a&&"text"==t.type&&e.g.ignoreTextStreamFailures)return lo(e,t),!0;if(!a)return!1;var o=wo(e,t),s=Array.from(e.b.values()).every((function(e){return e.ia==a.ia}));return n&&o!=a.ia&&s?(e.b.forEach((function(t){po(e,t)})),!0):(a.Ka&&(t.trickModeVideo?(a.Ka=t,t=t.trickModeVideo):a.Ka=null),!(!(s=e.h[o])||!s.Fb)&&(!(!(s=e.i.get(t.id))||!s.Fb||a.stream==t&&!r)&&("text"==t.type&&An(e.a.L,Xe(t.mimeType,t.codecs)),a.stream=t,a.oc=!0,function(e,t,n){if(!t.Sb)return!1;var i=e.a.Va(),r=wn(e.a.L,t.type),a=Eo(e,t,i,r,n);return n=a&&a.a?a.a-a.b:null,a&&!n&&(n=(a.endTime-a.lc())*t.stream.bandwidth/8),!isNaN(n)&&((a=t.stream.initSegmentReference)&&(n+=(a.a?a.a-a.b:null)||0),a=e.a.getBandwidthEstimate(),8*n/a<r-i-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.Sb.b.a>n)}(e,a,o)&&a.Sb.abort(),n&&(a.Sa?a.Dc=!0:a.Ja?(a.Oa=!0,a.ec=i,a.Dc=!0):(Io(a),Co(e,a,!0,i).catch((function(t){e.a&&e.a.onError(t)})))),!0)))}function po(e,t){t.Sa||t.Oa||(t.Ja?(t.Oa=!0,t.ec=0):null==Tn(e.a.L,t.type)?null==t.Ga&&Ro(e,t,0):(Io(t),Co(e,t,!1,0).catch((function(t){e.a&&e.a.onError(t)}))))}function fo(e,t,n,i,r){return f((function a(){var o,s,l,u,c,d,h;return N(a,(function(a){switch(a.j){case 1:return o=e.a.Va(),s=To(e,o),l=Wt,u=new Map,c=new Set,t&&(u.set(l.Gb,t),c.add(t)),n&&(u.set(l.Qa,n),c.add(n)),i&&(u.set(l.ra,i),c.add(i)),d=e.a.L,h=e.g.forceTransmuxTS,T(a,d.init(u,h),2);case 2:return e.f?a.return():(function(e){var t=e.c.presentationTimeline.Y();1/0>t?e.a.L.xa(t):e.a.L.xa(Math.pow(2,32))}(e),T(a,vo(e,c),3));case 3:if(e.f)return a.return();u.forEach((function(t,n){if(!e.b.has(n)){var i=yo(t,s,r);e.b.set(n,i),Ro(e,i,0)}})),w(a)}}))}))}function yo(e,t,n){return{stream:e,type:e.type,ub:null,Da:null,Ka:null,oc:!0,ia:t,endOfStream:!1,Ja:!1,Ga:null,Oa:!1,ec:0,Dc:!1,Sa:!1,qd:!1,Qb:!1,td:n||0,Sb:null}}function go(e,t){var n=e.h[t];if(n)return n.promise;n={promise:new ge,Fb:!1},e.h[t]=n;for(var i=new Set,r=h(e.c.periods[t].variants),a=r.next();!a.done;a=r.next())(a=a.value).video&&i.add(a.video),a.video&&a.video.trickModeVideo&&i.add(a.video.trickModeVideo),a.audio&&i.add(a.audio);for(a=(r=h(e.c.periods[t].textStreams)).next();!a.done;a=r.next())i.add(a.value);return e.u=e.u.then(function(){if(!this.f)return vo(this,i)}.bind(e)).then(function(){this.f||(this.h[t].promise.resolve(),this.h[t].Fb=!0)}.bind(e)).catch(function(e){this.f||(this.h[t].promise.catch((function(){})),this.h[t].promise.reject(),delete this.h[t],this.a.onError(e))}.bind(e)),n.promise}function vo(e,t){return f((function n(){var i,r,a,o,s,l,u;return N(n,(function(n){switch(n.j){case 1:i=[];for(var c=h(t),d=c.next();!d.done;d=c.next())r=d.value,(a=e.i.get(r.id))?i.push(a.promise):(e.i.set(r.id,{promise:new ge,Fb:!1}),i.push(r.createSegmentIndex()));return S(n,2),T(n,Promise.all(i),4);case 4:if(e.f)return n.return();R(n,3);break;case 2:if(o=I(n),e.f)return n.return();for(d=(n=h(t)).next();!d.done;d=n.next())s=d.value,e.i.get(s.id).promise.catch((function(){})),e.i.get(s.id).promise.reject(),e.i.delete(s.id);throw o;case 3:for(d=(c=h(t)).next();!d.done;d=c.next())l=d.value,(u=e.i.get(l.id)).Fb||(u.promise.resolve(),u.Fb=!0);w(n)}}))}))}function mo(e,t){if(!e.f&&!t.Ja&&null!=t.Ga&&!t.Sa)if(t.Ga=null,t.Oa)Co(e,t,t.Dc,t.ec);else{try{var n=function(e,t){if(Ao(t))return Rn(e.a.L,t.stream.originalId||""),null;var n=e.a.Va(),i=bo(e,t,n),r=wo(e,t.stream),a=To(e,i),o=function(e,t,n){return"text"==t?null==(e=e.a).b||e.b<n?0:e.b-Math.max(n,e.a):Ht(e=Sn(e,t),n)}(e.a.L,t.type,n),s=Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal,e.g.bufferingGoal)*e.l;if(i>=e.c.presentationTimeline.Y())return t.endOfStream=!0,"video"==t.type&&(i=e.b.get("text"))&&"application/cea-608"==i.stream.mimeType&&(i.endOfStream=!0),null;if(t.endOfStream=!1,t.ia=a,a!=r)return null;if(o>=s)return.5;if(a=wn(e.a.L,t.type),!(a=Eo(e,t,n,a,r)))return 1;var l=1/0;return Array.from(e.b.values()).forEach((function(t){Ao(t)||(t=bo(e,t,n),l=Math.min(l,t))})),i>=l+e.c.presentationTimeline.a?1:(t.td=0,function(e,t,n,i,r){var a=e.c.periods[i],o=t.stream,s=e.c.presentationTimeline.Y(),l=e.c.periods[i+1];i=function(e,t,n,i,r){return t.oc?(n=function(e,t,n,i,r){return"text"==t?(e.a.m=n,(e=e.a).f=i,e.h=r,Promise.resolve()):Promise.all([Dn(e,t,e.Ge.bind(e,t)),Dn(e,t,e.mg.bind(e,t,n)),Dn(e,t,e.jg.bind(e,t,i,r))])}(e.a.L,t.type,e.c.periods[n].startTime-t.stream.presentationTimeOffset,i,r),t.stream.initSegmentReference?(e=So(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return Cn(this.a.L,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch((function(e){return t.oc=!0,Promise.reject(e)})),Promise.all([n,e])):n):Promise.resolve()}(e,t,i,Math.max(0,a.startTime-.1),l?l.startTime+.01:s),t.Ja=!0,t.oc=!1,s=So(e,t,r),Promise.all([i,s]).then(function(e){if(!this.f&&!this.m)return function(e,t,n,i,r,a,o){var s=r.closedCaptions&&0<r.closedCaptions.size;return null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length&&(new Mi).fa("emsg",e.H.bind(e,i,a,r.emsgSchemeIdUris)).parse(o),function(e,t,n){var i=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),r=Tn(e.a.L,t.type);return null==r||0>=(n=n-r-i)?Promise.resolve():e.a.L.remove(t.type,r,r+n).then(function(){}.bind(e))}(e,t,n).then(function(){if(!this.f)return Cn(this.a.L,t.type,o,a.startTime+i.startTime,a.endTime+i.startTime,s)}.bind(e)).then(function(){if(!this.f)return t.ub=r,t.Da=a,Promise.resolve()}.bind(e))}(this,t,n,a,o,r,e[1])}.bind(e)).then(function(){this.f||this.m||(t.Ja=!1,t.qd=!1,t.Oa||this.a.ld(),Ro(this,t,0),function(e,t){if(!e.s){var n=Array.from(e.b.values());if(1==n.length&&"text"==n[0].type||(e.s=n.every((function(e){return"text"==e.type||!e.Oa&&!e.Sa&&e.Da}))),e.s){for(n=wo(e,t),e.h[n]||go(e,n).then(function(){this.f||this.a.fe()}.bind(e)).catch(Kt.pc),n=0;n<e.c.periods.length;++n)go(e,n).catch(Kt.pc);e.a.Pf&&e.a.Pf()}}}(this,o))}.bind(e)).catch(function(e){this.f||this.m||(t.Ja=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?this.b.delete("text"):7001==e.code?(t.Ja=!1,t.Ga=null,Ro(this,t,0)):3017==e.code?function(e,t,n){if(!Array.from(e.b.values()).some((function(e){return e!=t&&e.qd}))){var i=Math.round(100*e.l);if(20<i)e.l-=.2;else{if(!(4<i))return t.Qb=!0,e.m=!0,void e.a.onError(n);e.l-=.04}t.qd=!0}Ro(e,t,4)}(this,t,e):(t.Qb=!0,e.severity=2,Do(this,e)))}.bind(e))}(e,t,n,r,a),null)}(e,t);null!=n&&(Ro(e,t,n),t.Qb=!1)}catch(t){return void Do(e,t)}n=Array.from(e.b.values()),function(e,t){var n=wo(e,t.stream);if(t.ia!=n){var i=t.ia,r=Array.from(e.b.values());r.every((function(e){return e.ia==i||Ao(e)}))&&r.every(_o)&&go(e,i).then(function(){if(!this.f&&r.every(function(e){var t=_o(e),n=wo(this,e.stream);return!!Ao(e)||t&&e.ia==i&&n!=i}.bind(this))){var e=this.c.periods[i],t=this.a.ge(e),n=new Map;t.variant&&t.variant.video&&n.set("video",t.variant.video),t.variant&&t.variant.audio&&n.set("audio",t.variant.audio),t.text&&n.set("text",t.text);for(var a=(t=h(this.b.keys())).next();!a.done;a=t.next())if(a=a.value,!n.has(a)&&"text"!=a)return void this.a.onError(new ye(2,5,5005));for(a=(t=h(Array.from(n.keys()))).next();!a.done;a=t.next())if(a=a.value,!this.b.has(a)){if("text"!=a)return void this.a.onError(new ye(2,5,5005));fo(this,null,null,n.get("text"),e.startTime),n.delete(a)}for(a=(t=h(Array.from(this.b.keys()))).next();!a.done;a=t.next()){a=a.value;var o=this.b.get(a),s=n.get(a);if(s){var l=Ao(o);l&&(o.ia=i,o.td=e.startTime),ho(this,s,!1,0,!1),l&&Ao(o)||Ro(this,this.b.get(a),0)}else this.b.delete(a)}this.a.fe()}}.bind(e)).catch(Kt.pc)}}(e,t),e.s&&n.every((function(e){return e.endOfStream}))&&e.a.L.endOfStream().then(function(){if(!this.f){var e=this.a.L.Y();0!=e&&e<this.c.presentationTimeline.Y()&&this.c.presentationTimeline.xa(e)}}.bind(e))}}function bo(e,t,n){return t.ub&&t.Da?(n=wo(e,t.ub),e.c.periods[n].startTime+t.Da.endTime):Math.max(n,t.td)}function Eo(e,t,n,i,r){if(t.Da&&t.stream==t.ub)return ko(e,t,r,t.Da.position+1);if(t.Da?(n=wo(e,t.ub),n=t.stream.findSegmentPosition(Math.max(0,e.c.periods[n].startTime+t.Da.endTime-e.c.periods[r].startTime))):n=t.stream.findSegmentPosition(Math.max(0,(i||n)-e.c.periods[r].startTime)),null==n)return null;var a=null;return null==i&&(a=ko(e,t,r,Math.max(0,n-1))),a||ko(e,t,r,n)}function ko(e,t,n,i){return n=e.c.periods[n],(t=t.stream.getSegmentReference(i))?(e=(i=e.c.presentationTimeline).Pb(),i=i.qb(),n.startTime+t.endTime<e||n.startTime+t.startTime>i?null:t):null}function Ao(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function _o(e){return!e.Ja&&null==e.Ga&&!e.Oa&&!e.Sa}function To(e,t){var n=Ua(e.c.periods,t+.06666666666666667);return n?e.c.periods.indexOf(n):0}function wo(e,t){for(var n=e.c.periods,i=0;i<n.length;i++){for(var r=n[i],a=new Set,o=h(r.variants),s=o.next();!s.done;s=o.next())(s=s.value).audio&&a.add(s.audio),s.video&&a.add(s.video),s.video&&s.video.trickModeVideo&&a.add(s.video.trickModeVideo);for(o=(r=h(r.textStreams)).next();!o.done;o=r.next())a.add(o.value);if(a.has(t))return i}return-1}function So(e,t,n){return n=Er(n.c(),n.b,n.a,e.g.retryParameters),e=e.a.wb.request(1,n),t.Sb=e,e.promise.then((function(e){return t.Sb=null,e.data}))}function Co(e,t,n,i){return f((function r(){var a,o,s;return N(r,(function(r){switch(r.j){case 1:return t.Oa=!1,t.Dc=!1,t.ec=0,t.Sa=!0,i?(o=e.a.Va(),s=e.a.L.Y(),a=e.a.L.remove(t.type,o+i,s)):a=In(e.a.L,t.type).then(function(){if(!this.f&&n)return this.a.L.flush(t.type)}.bind(e)),T(r,a,2);case 2:if(e.f)return r.return();t.ub=null,t.Da=null,t.Sa=!1,t.endOfStream=!1,Ro(e,t,0),w(r)}}))}))}function Ro(e,t,n){t.Ga=new de((function(){return f((function n(){var i;return N(n,(function(n){switch(n.j){case 1:return S(n,2),T(n,mo(e,t),4);case 4:R(n,0);break;case 2:i=I(n),e.a&&e.a.onError(i),w(n)}}))}))})).R(n)}function Io(e){null!=e.Ga&&(e.Ga.stop(),e.Ga=null)}function Do(e,t){fe(e.F).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function Oo(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,nd:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=ut(t)}catch(e){}throw new ye(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function Po(e,t,n,i){var r=new Po.b;$e(t.headers).forEach((function(e,t){r.append(t,e)}));var a=new Po.a,o={Md:!1,ye:!1};if(e=new ve(e=Po.l(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,i),(function(){return o.Md=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new he((function(){o.ye=!0,a.abort()}));s.R(t/1e3),e.finally((function(){s.stop()}))}return e}function xo(e,t,n,i){var r=new xo.f,a=Date.now(),o=0;return new ve(new Promise((function(s,l){for(var u in r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){l(new ye(1,1,7001,e,n))},r.onload=function(t){for(var i=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),r={},a=(i=h(i)).next();!a.done;a=i.next())r[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var o=Oo(r,t.response,t.status,e,t.responseURL,n);s(o)}catch(e){l(e)}},r.onerror=function(t){l(new ye(1,1,1002,e,t,n))},r.ontimeout=function(){l(new ye(1,1,1003,e,n))},r.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(i(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)r.setRequestHeader(u.toLowerCase(),t.headers[u]);r.send(t.body)})),(function(){return r.abort(),Promise.resolve()}))}function Lo(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Mo(e,t,n){this.h=e,this.b=new Map,this.c=!1,this.g=t,this.f=n,this.a=new Lo}function No(e,t,n,i,r,a){var o=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.a,i);i=e.b.get(t)||Promise.resolve(),e.b.set(t,i.then((function(){return f((function t(){var i,s,l,u,c,d;return N(t,(function(t){switch(t.j){case 1:return T(t,function(e,t){return f((function n(){var i;return N(n,(function(n){switch(n.j){case 1:return T(n,e.h.request(1,t).promise,2);case 2:return i=n.o,n.return(i.data)}}))}))}(e,n),2);case 2:if(i=t.o,e.c)throw new ye(2,9,7001);if(r)for(var h in s=new Uint8Array(i),(l=new Hi(s)).data)u=Number(h),c=l.data[u],d=l.a[u],e.f(c,d);return e.a.close(o,i.byteLength),h=e.a,e.g(0==h.b?0:h.f/h.b,e.a.a),t.return(a(i))}}))}))})))}function Uo(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new ge,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Bo(e,t){return new Promise((function(n,i){var r=e.b.openCursor();r.onerror=i,r.onsuccess=function(e){if(!(e=e.target.result))return n();t(e.key,e.value,e),e.continue()}}))}function Fo(e){this.b=e,this.a=[]}function jo(e,t){return Ho(e,t,"readwrite")}function Ho(e,t,n){var i=new Uo(n=e.b.transaction([t],n),t);return e.a.push(i),i.promise().then((function(){Ie(e.a,i)}),(function(){Ie(e.a,i)})),i}function Vo(e,t,n){this.b=new Fo(e),this.c=t,this.a=n}function Ko(e){return Promise.reject(new ye(2,9,9011,"Cannot add new value to "+e))}function zo(e,t,n,i){t=(e=jo(e.b,t)).store();for(var r={},a=(n=h(n)).next();!a.done;r={key:r.key},a=n.next())r.key=a.value,t.delete(r.key).onsuccess=function(e){return function(){return i(e.key)}}(r);return e.promise()}function Go(e,t,n){return f((function i(){var r,a,o,s,l,u,c;return N(i,(function(i){switch(i.j){case 1:for(r=Ho(e.b,t,"readonly"),a=r.store(),o={},s=[],l={},u=h(n),c=u.next();!c.done;l={request:l.request,key:l.key},c=u.next())l.key=c.value,l.request=a.get(l.key),l.request.onsuccess=function(e){return function(){null==e.request.result&&s.push(e.key),o[e.key]=e.request.result}}(l);return T(i,r.promise(),2);case 2:if(s.length)throw new ye(2,9,9012,"Could not find values for "+s);return i.return(n.map((function(e){return o[e]})))}}))}))}function Wo(e){this.a=new Fo(e)}function Yo(){this.a=new Map}function $o(e,t,n){if(!(e=e.a.get(t)))throw new ye(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new ye(2,9,9013,"Could not find cell with name "+n);return t}function qo(e,t){Xo.set(e,t)}ro.prototype.destroy=function(){for(var e=h(this.b.values()),t=e.next();!t.done;t=e.next())Io(t.value);return this.b.clear(),this.i.clear(),this.g=this.h=this.u=this.c=this.a=null,this.f=!0,Promise.resolve()},ro.prototype.configure=function(e){this.g=e,this.F=new pe({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},ro.prototype.start=function(){var e=this;return f((function t(){var n,i,r;return N(t,(function(t){switch(t.j){case 1:return n=e.a.Va(),i=To(e,n),(r=e.a.ge(e.c.periods[i])).variant||r.text?T(t,fo(e,r.variant?r.variant.audio:null,r.variant?r.variant.video:null,r.text,n),2):t.return(new ye(2,5,5005));case 2:if(e.f)return t.return();e.a&&e.a.Gf&&e.a.Gf(),w(t)}}))}))},ro.prototype.H=function(e,t,n,i){var r=i.reader.od(),a=i.reader.od(),o=i.reader.G(),s=i.reader.G(),l=i.reader.G(),u=i.reader.G();i=i.reader.$a(i.reader.K.byteLength-i.reader.ca()),e=e.startTime+t.startTime+s/o,n.includes(r)&&("urn:mpeg:dash:event:2012"==r?this.a.Hf():this.a.onEvent(new Te("emsg",{detail:{startTime:e,endTime:e+l/o,schemeIdUri:r,value:a,timescale:o,presentationTimeDelta:s,eventDuration:l,id:u,messageData:i}})))},V("shaka.net.HttpFetchPlugin",Po),Po.l=function(e,t,n,i,r){return f((function a(){var o,s,l,u,c,d,h,p,y,g,v,m;return N(a,(function(a){switch(a.j){case 1:return o=Po.g,s=Po.c,d=c=0,h=Date.now(),S(a,2),T(a,o(e,n),4);case 4:return l=a.o,p=l.clone().body.getReader(),g=(y=l.headers.get("Content-Length"))?parseInt(y,10):0,new s({start:function(e){!function t(){return f((function n(){var i,a;return N(n,(function(n){switch(n.j){case 1:return S(n,2),T(n,p.read(),4);case 4:i=n.o,R(n,3);break;case 2:return I(n),n.return();case 3:i.done||(c+=i.value.byteLength),(100<(a=Date.now())-h||i.done)&&(r(a-h,c-d,g-c),d=c,h=a),i.done?e.close():(e.enqueue(i.value),t()),w(n)}}))}))}()}}),T(a,l.arrayBuffer(),5);case 5:u=a.o,R(a,3);break;case 2:if(v=I(a),i.Md)throw new ye(1,1,7001,e,t);if(i.ye)throw new ye(1,1,1003,e,t);throw new ye(1,1,1002,e,v,t);case 3:return m={},l.headers.forEach((function(e,t){m[t.trim()]=e})),a.return(Oo(m,u,l.status,e,l.url,t))}}))}))},Po.isSupported=function(){if(!t.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!t.fetch||!t.AbortController)},Po.isSupported=Po.isSupported,Po.g=t.fetch,Po.a=t.AbortController,Po.c=t.ReadableStream,Po.b=t.Headers,Po.isSupported()&&(Me("http",Po,2),Me("https",Po,2)),V("shaka.net.HttpXHRPlugin",xo),xo.f=t.XMLHttpRequest,Me("http",xo,1),Me("https",xo,1),Lo.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},Mo.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then((function(){}),(function(){}))},Uo.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch((function(){}))},Uo.prototype.store=function(){return this.b},Uo.prototype.promise=function(){return this.a},Fo.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},(i=Vo.prototype).destroy=function(){return this.b.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Ko(this.c)},i.removeSegments=function(e,t){return zo(this,this.c,e,t)},i.getSegments=function(e){var t=this;return f((function n(){var i;return N(n,(function(n){switch(n.j){case 1:return T(n,Go(t,t.c,e),2);case 2:return i=n.o,n.return(i.map((function(e){return t.Od(e)})))}}))}))},i.addManifests=function(){return Ko(this.a)},i.updateManifestExpiration=function(e,t){var n=jo(this.b,this.a),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return zo(this,this.a,e,t)},i.getManifests=function(e){var t=this;return f((function n(){var i;return N(n,(function(n){switch(n.j){case 1:return T(n,Go(t,t.a,e),2);case 2:return i=n.o,n.return(i.map((function(e){return t.fc(e)})))}}))}))},i.getAllManifests=function(){var e=this;return f((function t(){var n,i;return N(t,(function(t){switch(t.j){case 1:return n=Ho(e.b,e.a,"readonly"),i=new Map,T(t,Bo(n,(function(t,n){i.set(t,e.fc(n))})),2);case 2:return T(t,n.promise(),3);case 3:return t.return(i)}}))}))},i.Od=function(e){return e},i.fc=function(e){return e},i.add=function(e,t){var n=this;return f((function i(){var r,a,o,s;return N(i,(function(i){switch(i.j){case 1:r=jo(n.b,e),a=r.store(),o=[];for(var l=h(t),u=l.next();!u.done;u=l.next())s=u.value,a.add(s).onsuccess=function(e){o.push(e.target.result)};return T(i,r.promise(),2);case 2:return i.return(o)}}))}))},Wo.prototype.destroy=function(){return this.a.destroy()},Wo.prototype.getAll=function(){var e=this;return f((function t(){var n,i;return N(t,(function(t){switch(t.j){case 1:return n=Ho(e.a,"session-ids","readonly"),i=[],T(t,Bo(n,(function(e,t){i.push(t)})),2);case 2:return T(t,n.promise(),3);case 3:return t.return(i)}}))}))},Wo.prototype.add=function(e){for(var t=jo(this.a,"session-ids"),n=t.store(),i=(e=h(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},Wo.prototype.remove=function(e){var t=this;return f((function n(){var i;return N(n,(function(n){switch(n.j){case 1:return T(n,Bo(i=jo(t.a,"session-ids"),(function(t,n,i){0<=e.indexOf(n.sessionId)&&i.delete()})),2);case 2:return T(n,i.promise(),0)}}))}))},Yo.prototype.destroy=function(){for(var e=[],t=h(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Yo.prototype.init=function(){var e=this;Xo.forEach((function(t,n){var i=t();i&&e.a.set(n,i)}));for(var t=[],n=h(this.a.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},Yo.prototype.erase=function(){var e=this;return f((function t(){var n,i;return N(t,(function(t){switch(t.j){case 1:return n=Array.from(e.a.values()),(i=0<n.length)||Xo.forEach((function(e){(e=e())&&n.push(e)})),T(t,Promise.all(n.map((function(e){return e.erase()}))),2);case 2:if(!i)return T(t,Promise.all(n.map((function(e){return e.destroy()}))),0);t.A(0)}}))}))},V("shaka.offline.StorageMuxer.register",qo),V("shaka.offline.StorageMuxer.unregister",(function(e){Xo.delete(e)}));var Xo=new Map;function Qo(e){Vo.apply(this,arguments)}function Zo(e){return function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType})),n=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!n.every((function(e){return e.variantIds}))){t.forEach((function(e){e.variantIds=[]})),n.forEach((function(e){e.variantIds=[]}));var i=0;if(n.length&&!t.length){var r=i++;n.forEach((function(e){e.variantIds.push(r)}))}if(!n.length&&t.length){var a=i++;t.forEach((function(e){e.variantIds.push(a)}))}n.length&&t.length&&t.forEach((function(e){n.forEach((function(t){var n=i++;e.variantIds.push(n),t.variantIds.push(n)}))}))}}(e),e.streams.forEach((function(){})),{startTime:e.startTime,streams:e.streams.map(Jo)}}function Jo(e){var t=e.initSegmentUri?ts(e.initSegmentUri):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(es),variantIds:e.variantIds}}function es(e){var t=ts(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function ts(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ye(2,9,9004,"Could not parse uri "+e)}function ns(e,t,n,i){Vo.call(this,e,t,n),this.f=i}function is(){this.g=this.c=this.b=this.a=this.f=null}function rs(e,t,n,i){this.a=e,this.g=t,this.f=n,this.c=i,this.b=["offline:",e,"/",t,"/",n,"/",i].join("")}function as(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new rs(t,n,i,Number(e[4])):null}function os(e,t){this.b=e,this.a=t}function ss(e,t,n){var i=t.streams.filter((function(e){return"audio"==e.contentType})),r=t.streams.filter((function(e){return"video"==e.contentType}));return i=function(e,t,n){for(var i=new Set,r=h(t),a=r.next();!a.done;a=r.next()){var o=h(a.value.variantIds);for(a=o.next();!a.done;a=o.next())i.add(a.value)}for(r=h(n),a=r.next();!a.done;a=r.next())for(o=h(a.value.variantIds),a=o.next();!a.done;a=o.next())i.add(a.value);for(r=new Map,i=h(i),a=i.next();!a.done;a=i.next())a=a.value,r.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=h(t),i=t.next();!i.done;i=t.next())for(i=i.value,a=ls(e,i),o=h(i.variantIds),i=o.next();!i.done;i=o.next())(i=r.get(i.value)).language=a.language,i.primary=i.primary||a.primary,i.audio=a;for(n=h(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=ls(e,i),a=h(i.variantIds),i=a.next();!i.done;i=a.next())(i=r.get(i.value)).primary=i.primary||t.primary,i.video=t;return r}(e,i,r),r=t.streams.filter((function(e){return"text"==e.contentType})).map((function(t){return ls(e,t)})),t.streams.forEach((function(i){i=i.segments.map((function(t,n){return us(e,n,t)})),n.xb(i,t.startTime)})),{startTime:t.startTime,variants:Array.from(i.values()),textStreams:r}}function ls(e,t){var n=t.segments.map((function(t,n){return us(e,n,t)})),i=new nr(n);return n={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return i.find(e)},getSegmentReference:function(e){return i.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,pixelAspectRatio:t.pixelAspectRatio||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},null!=t.initSegmentKey&&(n.initSegmentReference=function(e,t){var n=new rs("segment",e.b,e.a,t);return new Ji((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey)),n}function us(e,t,n){var i=new rs("segment",e.b,e.a,n.dataKey);return new er(t,n.startTime,n.endTime,(function(){return[i.toString()]}),0,null)}function cs(){this.a=null}function ds(e){var t=as(e);return t&&"manifest"==t.a?ds.h(e):t&&"segment"==t.a?ds.i(t.key(),t):me(new ye(2,1,9004,e))}function hs(e,t,n){return f((function i(){var r,a,o,s,l,u;return N(i,(function(i){switch(i.j){case 1:r=[];for(var c=[],d=h(n),p=d.next();!p.done;p=d.next()){p=p.value;for(var y=!1,g=h(c),v=g.next();!v.done;v=g.next())if(ps((v=v.value).info,p)){v.sessionIds.push(p.sessionId),y=!0;break}y||c.push({info:p,sessionIds:[p.sessionId]})}a=h(c),o=a.next();case 2:if(o.done){i.A(4);break}return s=o.value,l=function(e,t,n){return f((function i(){var r,a;return N(i,(function(i){switch(i.j){case 1:return r=new yt({wb:t,onError:function(){},rc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),S(i,2),r.configure(e),T(i,function(e,t,n,i,r,a){var o=new Map;return o.set(t,{audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,initData:null,keyIds:null}]}),Tt(e,o)}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:R(i,3);break;case 2:return I(i),T(i,r.destroy(),5);case 5:return i.return([]);case 3:return S(i,6),T(i,mt(r),8);case 8:R(i,7);break;case 6:return I(i),T(i,r.destroy(),9);case 9:return i.return([]);case 7:return a=[],T(i,Promise.all(n.sessionIds.map((function(e){return f((function t(){return N(t,(function(t){switch(t.j){case 1:return S(t,2),T(t,function(e,t){return f((function n(){var i,r,a;return N(n,(function(n){switch(n.j){case 1:return T(n,wt(e,t),2);case 2:return(i=n.o)?(r=[],(a=e.b.get(i))&&(a.ya=new ge,r.push(a.ya)),r.push(i.remove()),T(n,Promise.all(r),0)):n.return()}}))}))}(r,e),4);case 4:a.push(e),R(t,0);break;case 2:I(t),w(t)}}))}))}))),10);case 10:return T(i,r.destroy(),11);case 11:return i.return(a)}}))}))}(e,t,s),T(i,l,5);case 5:u=i.o,r=r.concat(u),o=a.next(),i.A(2);break;case 4:return i.return(r)}}))}))}function ps(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&De(e.audioCapabilities,t.audioCapabilities,n)&&De(e.videoCapabilities,t.videoCapabilities,n)}function fs(e,t){var n={Aa:null,v:null,mimeType:null,startTime:null,Dd:null,uri:null},i=this;this.h=t,this.c=e,this.f=n,this.i=null,this.g=[],this.b=this.a=null,this.l=!0,this.m=Promise.resolve().then((function(){return function(e){return f((function t(){return N(t,(function(t){switch(t.j){case 1:if(e.l){if(0==e.g.length||e.a&&!e.a.Wa)var n=!1;else{e.a&&(e.a.va.Za(),e.a=null);var i=(n=e.g.shift()).create(e.f);i?(n.va.yb(),e.a={node:i.node,payload:i.payload,Wa:i.Wa,va:n.va}):n.va.sc(),n=!0}return n?n=Promise.resolve():e.a?n=function(e){return f((function t(){var n,i;return N(t,(function(t){switch(t.j){case 1:return e.c=e.h.hf(e.c,e.f,e.a.node,e.a.payload),S(t,2),e.b=e.h.Qe(e.c,e.f,e.a.payload),T(t,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.va.qc(),e.a=null),R(t,0);break;case 2:return 7001==(n=I(t)).code?e.a.va.Za():e.a.va.onError(n),e.a=null,e.b=null,i=e,T(t,e.h.handleError(e.f,n),5);case 5:i.c=t.o,w(t)}}))}))}(e):(e.h.Ff(e.c),e.i=new ge,n=e.i),T(t,n,1)}t.A(0)}}))}))}(i)}))}function ys(e,t){var n={yb:function(){},qc:function(){},Za:function(){},onError:function(){},sc:function(){},Lg:function(){}};return e.g.push({create:t,va:n}),e.b&&e.b.abort(),gs(e),n}function gs(e){e.i&&(e.i.resolve(),e.i=null)}function vs(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function ms(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,t.size=e.size;try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function bs(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=e.cues,r=i.length-1;0<=r;r--){var a=i[r];a&&t(a)&&e.removeCue(a)}e.mode=n}function Es(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var l=r+"."+a,u=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===u||o?delete e[a]:e[a]=Ce(u):u.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ce(u)),l=Es(e[a],t[a],u,i,l),s=s&&l):typeof t[a]!=typeof u||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=u.constructor?($("Invalid config, wrong type for "+l),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&q("Unexpected number of arguments for "+l),e[a]=t[a]):($("Invalid config, unrecognized key "+l),s=!1)}return s}function ks(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function As(){}function _s(){var e=5e5,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Ct,fairPlayTransform:!0},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(e){return[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};it("Web0S")&&(r.stallEnabled=!1);var a={trackSelectionCallback:function(e){return f((function t(){return N(t,(function(t){switch(t.j){case 1:return t.return(e)}}))}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},o={drm:n,manifest:i,streaming:r,offline:a,abrFactory:jn,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return f((function t(){return N(t,(function(t){switch(t.j){case 1:return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=Un(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return Mn(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),n=[],i.length){var o=Math.floor(i.length/2);i.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(i[o])}for(i=h(e),o=i.next();!o.done;o=i.next())"text"==(o=o.value).type&&n.push(o);return n}(e,o.preferredAudioLanguage))}}))}))},o}function Ts(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Es(e,t,n||_s(),i,"")}function ws(){this.a=null,this.b=[]}function Ss(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function Cs(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var i=h(e.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function Rs(){this.b=this.c=null,this.a=[]}function Is(){this.f=this.s=this.h=this.b=this.i=this.l=this.m=this.g=this.u=NaN,this.a=new ws,this.c=new Rs}function Ds(e,n){var i=this;Se.call(this),this.i=El,this.a=null,this.hb=!1,this.g=new He,this.Ec=this.l=this.Hb=this.c=this.s=this.f=this.Zb=this.B=this.$b=this.F=this.jb=this.m=this.D=this.h=this.O=null,this.ce=1e9,this.bc=new Set,this.lb=!0,this.pa=null,this.$d=!1,this.Wd=0,this.oa=null,this.$=new ya,this.b=Ks(this),this.cc={width:1/0,height:1/0},this.u=null,this.Ib=new Ta(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.na=this.b.preferredTextLanguage,this.gb=this.b.preferredTextRole,n&&n(this),this.O=function(e){return new xe((function(t,n){e.l&&e.l.segmentDownloaded(t,n)}))}(this),this.g.w(t,"online",(function(){i.ud()})),this.H={name:"detach"},this.S={name:"attach"},this.Ha={name:"unload"},this.Nc={name:"manifest-parser"},this.Lc={name:"manifest"},this.ib={name:"media-source"},this.Fc={name:"drm-engine"},this.W={name:"load"},this.Sc={name:"src-equals-drm-engine"},this.kb={name:"src-equals"};var r=new Map;r.set(this.S,(function(e,t){return ke(function(e,t,n){return null==t.v&&(t.v=n.v,e.g.w(t.v,"error",(function(){var t=ol(e);t&&e.Ma(t)}))),e.a=t.v,Promise.resolve()}(i,e,t))})),r.set(this.H,(function(e){return e.v&&(i.g.ea(e.v,"error"),e.v=null),i.a=null,ke(e=Promise.resolve())})),r.set(this.Ha,(function(e){return ke(Ls(i,e))})),r.set(this.ib,(function(e){return ke(e=function(e,n){return f((function i(){var r,a,o,s;return N(i,(function(i){switch(i.j){case 1:return r=t.muxjs?new Ut:new Bt,a=e.b.textDisplayFactory,o=new a,e.Gc=a,T(i,(s=new bn(n.v,r,o)).s,2);case 2:e.D=s,w(i)}}))}))}(i,e))})),r.set(this.Nc,(function(e,t){return ke(function(e,t,n){return f((function i(){var r,a,o,s;return N(i,(function(i){switch(i.j){case 1:if(t.Aa=n.Aa,t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,a=e.O,e.Hb=r,t.Aa){e.s=t.Aa(),i.A(2);break}return o=e,T(i,mr.create(r,a,e.b.manifest.retryParameters,t.mimeType),3);case 3:o.s=i.o;case 2:s=Ce(e.b.manifest),n.v&&"AUDIO"===n.v.nodeName&&(s.disableVideo=!0),e.s.configure(s),w(i)}}))}))}(i,e,t))})),r.set(this.Lc,(function(e){return function(e,t){var n=t.uri,i=e.O;e.Zb=new Ja,function(e,t){e.b=t}(e.Zb,(function(t){al(e,"timelineregionadded",t)}));var r={networkingEngine:i,filterNewPeriod:function(t){return e.Oc(t)},filterAllPeriods:function(t){return zs(e,t)},onTimelineRegionAdded:function(t){var n=e.Zb;e:{for(var i=h(n.a),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.Ma(t)}};return new ve(Promise.resolve().then((function(){return f((function t(){var i;return N(t,(function(t){switch(t.j){case 1:return i=e,T(t,e.s.start(n,r),2);case 2:if(i.c=t.o,e.dispatchEvent(new Te("manifestparsed")),0==e.c.periods.length)throw new ye(2,4,4014);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some((function(e){return e.variants.some(t)}))&&e.forEach((function(e){e.variants=e.variants.filter(t)}))}(e.c.periods),w(t)}}))}))})),(function(){return e.s.stop()}))}(i,e)})),r.set(this.Fc,(function(){return ke(function(e){return f((function t(){return N(t,(function(t){switch(t.j){case 1:return e.h=new yt({wb:e.O,onError:function(t){e.Ma(t)},rc:function(t){sl(e,t)},onExpirationUpdated:function(t,n){ll(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.h.configure(e.b.drm),T(t,gt(e.h,Na(e.c.periods),e.c.offlineSessionIds),2);case 2:zs(e,e.c.periods),w(t)}}))}))}(i))})),r.set(this.W,(function(e,t){return ke(function(e,t,n){return f((function i(){var r,a,o,s,l,u,c,d,p;return N(i,(function(i){switch(i.j){case 1:return t.startTime=n.startTime,r=t.v,a=t.uri,e.Hb=a,e.F=new Fa({kc:function(){return t.v.playbackRate},Ad:function(e){t.v.playbackRate=e},de:function(e){t.v.currentTime+=e}}),e.u=new Is,o=function(){return qs(e)},s=function(){return $s(e)},e.g.w(r,"playing",o),e.g.w(r,"pause",o),e.g.w(r,"ended",o),e.g.w(r,"ratechange",s),l=e.b.abrFactory,e.l&&e.Ec==l||(e.Ec=l,e.l=new l,e.l.configure(e.b.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var i=t[n],r=new Map,a=h(i.variants),o=a.next();!o.done;o=a.next())if((o=o.value).video&&o.video.closedCaptions)for(var s=h((o=o.video).closedCaptions.keys()),l=s.next();!l.done;l=s.next())if(l=l.value,!r.has(l)){var u={id:e.ce++,originalId:l,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:o.closedCaptions.get(l),label:null,type:"text",primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null};r.set(l,u)}for(a=(r=h(r.values())).next();!a.done;a=r.next())i.textStreams.push(a.value)}}(e,e.c.periods),e.Ib=new Ta(e.b.preferredAudioLanguage,e.b.preferredVariantRole,e.b.preferredAudioChannelCount),e.na=e.b.preferredTextLanguage,function(e,t,n){0<t&&(e.V()||e.ve(t)),n<e.Y()&&(e.V()||e.xa(n))}(e.c.presentationTimeline,e.b.playRangeStart,e.b.playRangeEnd),T(i,e.h.Jb(r),2);case 2:return e.l.init((function(t,n,i){n=void 0!==n&&n,i=void 0===i?0:i;e:{for(var r=h(e.c.periods),a=r.next();!a.done;a=r.next())if((a=a.value).variants.includes(t)){r=a;break e}r=null}Hs(e,r,t,!0),e.f&&co(e.f,t,n,i)&&Js(e)})),e.m=function(e,t){return new qa(e.a,e.c,e.b.streaming,t,(function(){e.jb&&Ma(e.jb,!0),e.f&&function(e){function t(t){var r=e.a.L;return t="text"==t?null!=(t=r.a).a&&null!=t.b&&n>=t.a&&n<t.b:jt(t=Sn(r,t),n,i)}var n=e.a.Va(),i=e.g.smallGapLimit,r=To(e,n);if(Ye(e.b.values(),(function(e){return e.ia==r})))for(var a=h(e.b.keys()),o=a.next();!o.done;o=a.next())t(o=o.value)||po(e,e.b.get(o));else Ye(e.b.keys(),t)||e.b.forEach((function(t){po(e,t)}))}(e.f),e.B&&Bs(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.jb=function(e){var t=new Ba(e.c);!function(e,t){e.b=t}(t,(function(){el(e)}));var n=new eo(e.Zb);!function(e,t,n,i){e.a=t,e.b=n,e.c=i}(n,(function(t){al(e,"timelineregionenter",t)}),(function(t){al(e,"timelineregionexit",t)}),(function(t,n){n||(al(e,"timelineregionenter",t),al(e,"timelineregionexit",t))}));var i=new La(e.a);return i.a.add(t),i.a.add(n),i}(e),u=Math.max(e.c.minBufferTime,e.b.streaming.rebufferingGoal),Us(e,u),e.f=function(e){return new ro(e.c,{Va:function(){return e.m.g()},getBandwidthEstimate:function(){return e.l.getBandwidthEstimate()},L:e.D,wb:e.O,ge:e.Df.bind(e),fe:e.Ke.bind(e),onError:e.Ma.bind(e),onEvent:function(t){return e.dispatchEvent(t)},Hf:e.If.bind(e),ld:e.Nf.bind(e)})}(e),e.f.configure(e.b.streaming),Fn.Nd(e.c,e.b.preferredAudioChannelCount),e.i=kl,e.dispatchEvent(new Te("streaming")),T(i,e.f.start(),3);case 3:e.b.streaming.startAtSegmentBoundary&&(c=e.m.g(),d=function(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-a.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+a.startTime:null}var i=ao(e.f),r=oo(e.f),a=fl(e);return i=n(i,t),null!=(r=n(r,t))&&null!=i?Math.max(r,i):null!=r?r:null!=i?i:t}(e,c),e.m.m(d)),e.c.periods.forEach(e.Oc.bind(e)),el(e),Js(e),(p=fl(e)||e.c.periods[0]).variants.some((function(e){return e.primary})),Xs(e,p.variants),e.g.da(r,"loadeddata",(function(){e.u.b=Date.now()/1e3-n.Dd})),w(i)}}))}))}(i,e,t))})),r.set(this.Sc,(function(e){return ke(e=function(e,t){return f((function n(){var i,r;return N(n,(function(n){switch(n.j){case 1:return i=Wt,e.h=new yt({wb:e.O,onError:function(t){e.Ma(t)},rc:function(t){sl(e,t)},onExpirationUpdated:function(t,n){ll(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.h.configure(e.b.drm),r={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:i.Qa,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},T(n,gt(e.h,[r],[]),2);case 2:return T(n,e.h.Jb(t.v),0)}}))}))}(i,e))})),r.set(this.kb,(function(e,t){return function(e,t,n){function i(){return qs(e)}if(t.uri=n.uri,t.startTime=n.startTime,e.Hb=t.uri,e.u=new Is,e.m=new $a(t.v),null!=t.startTime&&e.m.m(t.startTime),e.F=new Fa({kc:function(){return t.v.playbackRate},Ad:function(e){t.v.playbackRate=e},de:function(e){t.v.currentTime+=e}}),Us(e,e.b.streaming.rebufferingGoal),e.g.w(t.v,"playing",i),e.g.w(t.v,"pause",i),e.g.w(t.v,"ended",i),e.g.w(t.v,"ratechange",(function(){return $s(e)})),e.g.da(t.v,"loadeddata",(function(){e.u.b=Date.now()/1e3-n.Dd})),e.a.audioTracks&&(e.g.w(e.a.audioTracks,"addtrack",(function(){return el(e)})),e.g.w(e.a.audioTracks,"removetrack",(function(){return el(e)})),e.g.w(e.a.audioTracks,"change",(function(){return el(e)}))),e.a.textTracks){var r=e.a.textTracks;e.g.w(r,"addtrack",(function(){return el(e)})),e.g.w(r,"removetrack",(function(){return el(e)})),e.g.w(r,"change",(function(){return el(e)}))}t.v.src=t.uri,e.i=Al,e.dispatchEvent(new Te("streaming"));var a=new ge;return e.a.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?(Ms(e),Ns(e),a.resolve()):e.a.error?a.reject(ol(e)):(e.g.da(e.a,"loadeddata",(function(){Ms(e),Ns(e),a.resolve()})),e.g.da(e.a,"error",(function(){a.reject(ol(e))}))),t.v.load(),new ve(a,(function(){return a.reject(new ye(2,7,7001)),Promise.resolve()}))}(i,e,t)})),this.Pa=new fs(this.H,{hf:function(e,t,n,r){var a=null;return e==i.H&&(a=n==i.H?i.H:i.S),e==i.S&&(a=n==i.H||t.v!=r.v?i.H:n==i.S?i.S:n==i.ib||n==i.W?i.ib:n==i.kb?i.Sc:null),e==i.ib&&(a=n==i.W&&t.v==r.v?i.Nc:i.Ha),e==i.Nc&&(a=vl(i.W,i.Lc,i.Ha,n,t,r)),e==i.Lc&&(a=vl(i.W,i.Fc,i.Ha,n,t,r)),e==i.Fc&&(a=vl(i.W,i.W,i.Ha,n,t,r)),e==i.Sc&&(a=n==i.kb&&t.v==r.v?i.kb:i.Ha),e!=i.W&&e!=i.kb||(a=i.Ha),e==i.Ha&&(a=r.v&&t.v==r.v?i.S:i.H),a},Qe:function(e,t,n){return i.dispatchEvent(new Te("onstatechange",{state:e.name})),r.get(e)(t,n)},handleError:function(e){return f((function t(){return N(t,(function(t){switch(t.j){case 1:return T(t,Ls(i,e),2);case 2:return t.return(e.v?i.S:i.H)}}))}))},Ff:function(e){i.dispatchEvent(new Te("onstateidle",{state:e.name}))}}),e&&this.Jb(e,!0)}E(Qo,Vo),Qo.prototype.updateManifestExpiration=function(e,t){var n=jo(this.b,this.a),i=n.store(),r=new ge;return i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new ye(2,9,9012,"Could not find values for "+e))},n.promise().then((function(){return r}))},Qo.prototype.fc=function(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(Zo),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}},Qo.prototype.Od=function(e){return{data:e.data}},E(ns,Vo),ns.prototype.hasFixedKeySpace=function(){return this.f},ns.prototype.addSegments=function(e){return this.f?Ko(this.c):this.add(this.c,e)},ns.prototype.addManifests=function(e){return this.f?Ko(this.a):this.add(this.a,e)},ns.prototype.fc=function(e){return null==e.expiration&&(e.expiration=1/0),e},(i=is.prototype).init=function(){var e=this,n=new ge,i=t.indexedDB.open("shaka_offline_db",4);return i.onsuccess=function(t){t=t.target.result,e.f=t;var i=t.objectStoreNames;i=i.contains("manifest")&&i.contains("segment")?new Qo(t,"segment","manifest"):null,e.a=i,i=(i=t.objectStoreNames).contains("manifest-v2")&&i.contains("segment-v2")?new ns(t,"segment-v2","manifest-v2",!0):null,e.b=i,i=(i=t.objectStoreNames).contains("manifest-v3")&&i.contains("segment-v3")?new ns(t,"segment-v3","manifest-v3",!1):null,e.c=i,t=t.objectStoreNames.contains("session-ids")?new Wo(t):null,e.g=t,n.resolve()},i.onupgradeneeded=function(e){e=e.target.result;for(var t=h(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new ye(2,9,9001,i.error)),e.preventDefault()},n},i.destroy=function(){var e=this;return f((function t(){return N(t,(function(t){switch(t.j){case 1:if(!e.a){t.A(2);break}return T(t,e.a.destroy(),2);case 2:if(!e.b){t.A(4);break}return T(t,e.b.destroy(),4);case 4:if(!e.c){t.A(6);break}return T(t,e.c.destroy(),6);case 6:if(!e.g){t.A(8);break}return T(t,e.g.destroy(),8);case 8:e.f&&e.f.close(),w(t)}}))}))},i.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},i.getEmeSessionCell=function(){return this.g},i.erase=function(){var e=this;return f((function n(){return N(n,(function(n){switch(n.j){case 1:if(!e.a){n.A(2);break}return T(n,e.a.destroy(),2);case 2:if(!e.b){n.A(4);break}return T(n,e.b.destroy(),4);case 4:if(!e.c){n.A(6);break}return T(n,e.c.destroy(),6);case 6:return e.f&&e.f.close(),T(n,function(){var e=new ge,n=t.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){e.resolve()},n.onerror=function(t){e.reject(new ye(2,9,9001,n.error)),t.preventDefault()},e}(),8);case 8:return e.f=null,e.a=null,e.b=null,e.c=null,T(n,e.init(),0)}}))}))},qo("idb",(function(){return t.indexedDB?new is:null})),rs.prototype.wa=function(){return this.g},rs.prototype.ba=function(){return this.f},rs.prototype.key=function(){return this.c},rs.prototype.toString=function(){return this.b},(i=cs.prototype).configure=function(){},i.start=function(e){var t=this;return f((function n(){var i,r,a,o,s;return N(n,(function(n){switch(n.j){case 1:return i=as(e),t.a=i,null==i||"manifest"!=i.a?n.return(Promise.reject(new ye(2,1,9004,i))):(r=new Yo,C(n,2),T(n,r.init(),4));case 4:return T(n,$o(r,i.wa(),i.ba()),5);case 5:return T(n,n.o.getManifests([i.key()]),6);case 6:return a=n.o,o=a[0],s=new os(i.wa(),i.ba()),n.return(function(e,t){var n=new br(null,0);n.xa(t.duration);var i=t.periods.map((function(t){return ss(e,t,n)})),r=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&i.forEach((function(e){e.variants.forEach((function(e){e.drmInfos=r}))})),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:i}}(s,o));case 2:return D(n),T(n,r.destroy(),7);case 7:O(n,0)}}))}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n=this;return f((function i(){var r,a,o,s,l,u,c;return N(i,(function(i){switch(i.j){case 1:return r=n.a,a=new Yo,S(i,2,3),T(i,a.init(),5);case 5:return T(i,$o(a,r.wa(),r.ba()),6);case 6:return T(i,(o=i.o).getManifests([r.key()]),7);case 7:if(s=i.o,l=s[0],u=l.sessionIds.includes(e),c=null==l.expiration||l.expiration>t,!u||!c){i.A(3);break}return T(i,o.updateManifestExpiration(r.key(),t),3);case 3:return D(i),T(i,a.destroy(),10);case 10:O(i,0);break;case 2:I(i),i.A(3)}}))}))},mr.Eb("application/x-offline-manifest",cs),V("shaka.offline.OfflineScheme",ds),ds.h=function(e){return Ee(e={uri:e,nd:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},ds.i=function(e,t){var n=new Yo;return Ee(void 0).U((function(){return n.init()})).U((function(){return $o(n,t.wa(),t.ba())})).U((function(e){return e.getSegments([t.key()])})).U((function(e){return{uri:t,nd:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))},Me("offline",ds),fs.prototype.destroy=function(){var e=this;return f((function t(){return N(t,(function(t){switch(t.j){case 1:return e.l=!1,e.b&&e.b.abort(),gs(e),T(t,e.m,2);case 2:e.a&&e.a.va.Za();for(var n=h(e.g),i=n.next();!i.done;i=n.next())i.value.va.Za();e.a=null,e.g=[],e.h=null,w(t)}}))}))},V("shaka.text.SimpleTextDisplayer",vs),vs.prototype.remove=function(e,t){return!!this.a&&(bs(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},vs.prototype.remove=vs.prototype.remove,vs.prototype.append=function(e){for(var t=ms,n=[],i=(e=h(e)).next();!i.done;i=e.next())(i=i.value).nestedCues.length?n=n.concat(i.nestedCues):n.push(i);var r=[];e=this.a.cues?Array.from(this.a.cues):[],i={};for(var a=(n=h(n)).next();!a.done;i={sb:i.sb},a=n.next())i.sb=a.value,e.some(function(e){return function(t){return t.startTime==e.sb.startTime&&t.endTime==e.sb.endTime&&t.text==e.sb.payload}}(i))||(a=t(i.sb))&&r.push(a);r.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:r.indexOf(t)-r.indexOf(e)})).forEach(function(e){this.a.addCue(e)}.bind(this))},vs.prototype.append=vs.prototype.append,vs.prototype.destroy=function(){return this.a&&bs(this.a,(function(){return!0})),this.a=null,Promise.resolve()},vs.prototype.destroy=vs.prototype.destroy,vs.prototype.isTextVisible=function(){return"showing"==this.a.mode},vs.prototype.isTextVisible=vs.prototype.isTextVisible,vs.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},vs.prototype.setTextVisibility=vs.prototype.setTextVisibility,V("shaka.util.ConfigUtils.mergeConfigObjects",Es),V("shaka.util.ConfigUtils.convertToConfigObject",ks),V("shaka.util.PlayerConfiguration",As),As.mergeConfigObjects=Ts,K(Ds,Se),V("shaka.Player",Ds),Ds.prototype.destroy=function(){var e=this;return f((function t(){var n;return N(t,(function(t){switch(t.j){case 1:return e.i==bl?t.return():(e.i=bl,n=ys(e.Pa,(function(){return{node:e.H,payload:{Aa:null,v:null,mimeType:null,startTime:null,Dd:null,uri:null},Wa:!1}})),T(t,new Promise((function(t){n.yb=function(){},n.qc=function(){t(),e.dispatchEvent(new Te("loaded"))},n.Za=function(){t()},n.onError=function(){t()},n.sc=function(){t()}})),2));case 2:return T(t,e.Pa.destroy(),3);case 3:if(e.g&&(e.g.release(),e.g=null),e.Ec=null,e.l=null,e.b=null,!e.O){t.A(0);break}return T(t,e.O.destroy(),5);case 5:e.O=null,w(t)}}))}))},Ds.prototype.destroy=Ds.prototype.destroy,Ds.version="v2.5.11";var Os=["2","5"];Wn=new function(e){this.a=e,this.c=zn,this.b=Gn}(new Vn(Number(Os[0]),Number(Os[1])));var Ps=["output-restricted","internal-error"],xs={};function Ls(e,t){return f((function n(){return N(n,(function(n){switch(n.j){case 1:if(e.i!=bl&&(e.i=El),e.dispatchEvent(new Te("unloading")),t.Aa=null,t.mimeType=null,t.startTime=null,t.uri=null,t.v&&(e.g.ea(t.v,"loadeddata"),e.g.ea(t.v,"playing"),e.g.ea(t.v,"pause"),e.g.ea(t.v,"ended"),e.g.ea(t.v,"ratechange")),e.jb&&(e.jb.release(),e.jb=null),e.$b&&(e.$b.stop(),e.$b=null),!e.s){n.A(2);break}return T(n,e.s.stop(),3);case 3:e.s=null;case 2:if(!e.l){n.A(4);break}return T(n,e.l.stop(),4);case 4:if(!e.f){n.A(6);break}return T(n,e.f.destroy(),7);case 7:e.f=null;case 6:if(e.F&&(e.F.release(),e.F=null),e.m&&(e.m.release(),e.m=null),!e.D){n.A(8);break}return T(n,e.D.destroy(),9);case 9:e.D=null;case 8:if(!t.v||!t.v.src){n.A(10);break}return T(n,new Promise((function(e){return new he(e).R(.1)})),11);case 11:t.v.removeAttribute("src"),t.v.load();case 10:if(!e.h){n.A(12);break}return T(n,e.h.destroy(),13);case 13:e.h=null;case 12:e.$.a.clear(),e.Hb=null,e.B=null,e.bc.clear(),e.c=null,e.u=null,e.Gc=null,e.lb=!0,Ys(e),w(n)}}))}))}function Ms(e){var t=e.b.preferredAudioLanguage;if(""!=t){e.vd(t);var n=e.b.preferredVariantRole;""!=n&&e.vd(t,n)}}function Ns(e){var t=e.b.preferredTextLanguage;if(""!=t){e.wd(t);var n=e.b.preferredTextRole;""!=n&&e.wd(t,n)}}function Us(e,t){e.B=new wa,e.B.a=Ca,Sa(e.B,t,Math.min(.5,t/2)),Ys(e),e.$b=new he((function(){Bs(e)})).Na(.25)}function Bs(e){switch(e.i){case Al:var t=!!e.a.ended||Ft(e.a.buffered)>=e.a.duration-1;break;case kl:e:if(e.a.ended||_n(e.D))t=!0;else{if(e.c.presentationTimeline.V()){var n=e.c.presentationTimeline.qb();if(Ft(e.a.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var i=Ht(e.a.buffered,e.a.currentTime),r=t,a=(n=e.B).b.get(n.a);t=n.a,i=r||i>=a?Ra:Ca,n.a=i,t!=i&&Ys(e)}function Fs(e){if(e.s){var t=Ce(e.b.manifest);e.a&&"AUDIO"===e.a.nodeName&&(t.disableVideo=!0),e.s.configure(t)}if(e.h&&e.h.configure(e.b.drm),e.f){e.f.configure(e.b.streaming);try{e.c.periods.forEach(e.Oc.bind(e))}catch(t){e.Ma(t)}var n=ao(e.f),i=oo(e.f);t=fl(e),n=Fn.Vd(n,i,t.variants),e.l&&n&&n.allowedByApplication&&n.allowedByKeySystem?Xs(e,t.variants):Qs(e,t)}if(e.D&&(t=e.b.textDisplayFactory,e.Gc!=t)){n=new t;var r=(i=e.D).g;i.g=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.a&&(i.a.c=n),e.Gc=t,e.f&&((n=(t=e.f).b.get("text"))&&ho(t,n.stream,!0,0,!0))}e.l&&(e.l.configure(e.b.abr),e.b.abr.enabled&&!e.lb?e.l.enable():e.l.disable(),rl(e)),e.B&&(t=e.b.streaming.rebufferingGoal,e.c&&(t=Math.max(t,e.c.minBufferTime)),Sa(e.B,t,Math.min(.5,t/2)))}function js(e){return Array.from(e.a.textTracks).filter((function(e){return"metadata"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Hs(e,t,n,i){va(e.$,t).variant=n,(e=e.u.c).c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:i,bandwidth:n.bandwidth}))}function Vs(e,t,n,i){ga(e.$,t,n),(e=e.u.c).b!=n&&(e.b=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:i,bandwidth:null}))}function Ks(e){var t=_s();return t.streaming.failureCallback=function(t){e.V()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.ud())},t.textDisplayFactory=function(){return new vs(e.a)},t}function zs(e,t){var n=e.f?ao(e.f):null,i=e.f?oo(e.f):null;if(t.forEach(Fn.filterNewPeriod.bind(null,e.h,n,i)),0==(n=function(e,t){var n=0;return e.forEach((function(e){n+=t(e)?1:0})),n}(t,(function(e){return e.variants.some(Fn.tb)}))))throw new ye(2,4,4032);if(n<t.length)throw new ye(2,4,4011);t.forEach(function(e){Fn.Kd(e.variants,this.b.restrictions,this.cc)&&this.f&&fl(this)==e&&el(this),ul(this,e.variants)}.bind(e))}function Gs(e,t,n,i){return n=void 0!==n&&n,i=void 0===i?0:i,e.lb?(e.pa=t,e.$d=n,e.Wd=i,!0):((t=co(e.f,t,n,i))&&tl(e),t)}function Ws(e,t){if(e.lb)return e.oa=t,!0;var n=ho(e.f,t,!0,0,!1);return n&&nl(e),n}function Ys(e){var t=e.Yc();if(e.u&&e.B&&e.m){var n=e.F;n.f=t,ja(n),qs(e)}e.dispatchEvent(new Te("buffering",{buffering:t}))}function $s(e){var t=e.a.playbackRate;0!=t&&e.F.set(t)}function qs(e){if(e.u&&e.B){var t=e.u.a;e.B.a==Ca?Ss(t,"buffering"):e.a.paused?Ss(t,"paused"):e.a.ended?Ss(t,"ended"):Ss(t,"playing")}}function Xs(e,t){try{ul(e,t)}catch(t){return e.Ma(t),null}var n=t.filter((function(e){return Fn.tb(e)}));return n=e.Ib.create(n),e.l.setVariants(Array.from(n.values())),e.l.chooseVariant()}function Qs(e,t){var n=Zs(e,t,!1),i=Fn.Lb(t.textStreams,e.na,e.gb)[0]||null,r=!1;i&&(e.b.streaming.alwaysStreamText||e.nc())&&(Vs(e,t,i,!0),r=Ws(e,i)),(n||r)&&Js(e)}function Zs(e,t,n){n=void 0===n||n;var i=Xs(e,t.variants),r=!1;return i&&(Hs(e,t,i,!0),r=Gs(e,i,!0)),n&&r&&Js(e),r}function Js(e){cl(e,new Te("adaptation"))}function el(e){cl(e,new Te("trackschanged"))}function tl(e){cl(e,new Te("variantchanged"))}function nl(e){cl(e,new Te("textchanged"))}function il(e){cl(e,new Te("texttrackvisibility"))}function rl(e){cl(e,new Te("abrstatuschanged",{Kg:e.b.abr.enabled}))}function al(e,t,n){e.dispatchEvent(new Te(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function ol(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new ye(2,3,3016,t,n,e.a.error.message)}function sl(e,t){if(e.f){var n=fl(e),i=!1,r=Object.keys(t),a=1==r.length&&"00"==r[0];r.length&&e.c.periods.forEach((function(e){e.variants.forEach((function(e){Fn.tf(e).forEach((function(n){var r=e.allowedByKeySystem;n.keyId&&(n=t[a?"00":n.keyId],e.allowedByKeySystem=!!n&&!Ps.includes(n)),r!=e.allowedByKeySystem&&(i=!0)}))}))})),r=ao(e.f);var o=oo(e.f);(r=Fn.Vd(r,o,n.variants))&&!r.allowedByKeySystem&&Zs(e,n),i&&(el(e),Xs(e,n.variants))}}function ll(e,t,n){e.s&&e.s.onExpirationUpdated&&e.s.onExpirationUpdated(t,n),e.dispatchEvent(new Te("expirationupdated"))}function ul(e,t){var n=e.h?qe(e.h.W):{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,a=!1,o=[],s=[],l=h(t),u=l.next();!u.done;u=l.next()){var c=[];(u=u.value).audio&&c.push(u.audio),u.video&&c.push(u.video);for(var d=(c=h(c)).next();!d.done;d=c.next())if((d=d.value).keyId){var p=n[i?"00":d.keyId];p?Ps.includes(p)&&(s.includes(p)||s.push(p)):o.includes(d.keyId)||o.push(d.keyId)}u.allowedByApplication?u.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new ye(2,4,4012,{hasAppRestrictions:a,missingKeys:o,restrictedKeyStatuses:s})}function cl(e,t){f((function n(){return N(n,(function(n){switch(n.j){case 1:return T(n,Promise.resolve(),2);case 2:e.i!=bl&&e.dispatchEvent(t),w(n)}}))}))}function dl(e){for(var t=new Set,n=(e=h(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Mn(n.language)):t.add("und");return t}function hl(e){for(var t=new Map,n=(e=h(e)).next();!n.done;n=e.next()){var i=n.value;n="und";var r=[];for(i.language&&(n=Mn(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),t.has(n)||t.set(n,new Set),r=(i=h(r)).next();!r.done;r=i.next())r=r.value,t.get(n).add(r)}var a=[];return t.forEach((function(e,t){for(var n=h(e),i=n.next();!i.done;i=n.next())a.push({language:t,role:i.value})})),a}function pl(e){return null==(e=fl(e))?[]:e.variants.filter((function(e){return Fn.tb(e)}))}function fl(e){for(var t=e.m.g(),n=null,i=(e=h(e.c.periods)).next();!i.done;i=e.next())(i=i.value).startTime<=t&&(n=i);return n}function yl(e){var t=fl(e);return va(e.$,t).variant}function gl(){return new ye(2,7,7e3)}function vl(e,t,n,i,r,a){return i==e&&r.v==a.v&&r.uri==a.uri&&r.mimeType==a.mimeType&&r.Aa==a.Aa?t:n}function ml(e){return new Promise((function(t,n){e.Za=function(){return n(gl())},e.qc=function(){return t()},e.onError=function(e){return n(e)},e.sc=function(){return n(gl())}}))}Ds.registerSupportPlugin=function(e,t){xs[e]=t},Ds.isBrowserSupported=function(){if(!(t.Promise&&t.Uint8Array&&Array.prototype.forEach))return!1;var e=nt();return!(e&&12>e||!(t.MediaKeys&&t.navigator&&t.navigator.requestMediaKeySystemAccess&&t.MediaKeySystemAccess&&t.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Je()||et("application/x-mpegurl"))},Ds.probeSupport=function(){return It().then((function(e){for(var t=mr.Wf(),n={},i=h('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),r=i.next();!r.done;r=i.next()){n[r=r.value]=Je()?!!gn(r)||(MediaSource.isTypeSupported(r)||$t(r)):et(r);var a=r.split(";")[0];n[a]=n[a]||n[r]}for(var o in e={manifest:t,media:n,drm:e},xs)e[o]=xs[o]();return e}))},Ds.prototype.Jb=function(e,t){if(t=void 0===t||t,this.i==bl)return Promise.reject(gl());var n={Aa:null,v:null,mimeType:null,startTime:null,Dd:null,uri:null};n.v=e,Je()||(t=!1);var i=t?this.ib:this.S,r=ys(this.Pa,(function(){return{node:i,payload:n,Wa:!1}}));return r.yb=function(){},ml(r)},Ds.prototype.attach=Ds.prototype.Jb,Ds.prototype.detach=function(){var e=this;if(this.i==bl)return Promise.reject(gl());var t=ys(this.Pa,(function(){return{node:e.H,payload:{Aa:null,v:null,mimeType:null,startTime:null,Dd:null,uri:null},Wa:!1}}));return t.yb=function(){},ml(t)},Ds.prototype.detach=Ds.prototype.detach,Ds.prototype.Gd=function(e){var t=this;if(e=void 0===e||e,this.i==bl)return Promise.reject(gl());Je()||(e=!1);var n={Aa:null,v:null,mimeType:null,startTime:null,Dd:null,uri:null},i=ys(this.Pa,(function(i){var r=i.v&&e?t.ib:i.v?t.S:t.H;return n.v=i.v,{node:r,payload:n,Wa:!1}}));return i.yb=function(){},ml(i)},Ds.prototype.unload=Ds.prototype.Gd,Ds.prototype.load=function(e,t,n){if(this.i==bl)return Promise.reject(gl());this.dispatchEvent(new Te("loading"));var i={Aa:null,v:null,mimeType:null,startTime:null,Dd:null,uri:null};i.uri=e,i.Dd=Date.now()/1e3,n&&"string"!=typeof n&&(Kn("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),i.Aa=function(){return new n}),n&&"string"==typeof n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var r=function(e,t){if(t.Aa)return!1;if(!Je())return!0;var n=t.mimeType,i=t.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[mr.getExtension(i)]),!!n&&(""!=(t.v||rt()).canPlayType(n)&&(!mr.isSupported(i,n)||tt()&&e.b.streaming.useNativeHlsOnSafari))}(this,i)?this.kb:this.W,a=ys(this.Pa,(function(e){return null==e.v?null:(i.v=e.v,{node:r,payload:i,Wa:!0})}));return a.yb=function(){},new Promise((function(e,t){a.sc=function(){return t(new ye(2,7,7002))},a.qc=function(){return e()},a.Za=function(){return t(gl())},a.onError=function(e){return t(e)}}))},Ds.prototype.load=Ds.prototype.load,Ds.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ks(e,t));var n=Ts(this.b,e,Ks(this));return Fs(this),n},Ds.prototype.configure=Ds.prototype.configure,Ds.prototype.getConfiguration=function(){var e=Ks(this);return Ts(e,this.b,Ks(this)),e},Ds.prototype.getConfiguration=Ds.prototype.getConfiguration,Ds.prototype.dg=function(){for(var e in this.b)delete this.b[e];Ts(this.b,Ks(this),Ks(this)),Fs(this)},Ds.prototype.resetConfiguration=Ds.prototype.dg,Ds.prototype.af=function(){return this.i},Ds.prototype.getLoadMode=Ds.prototype.af,Ds.prototype.ff=function(){return this.a},Ds.prototype.getMediaElement=Ds.prototype.ff,Ds.prototype.Nb=function(){return this.O},Ds.prototype.getNetworkingEngine=Ds.prototype.Nb,Ds.prototype.ic=function(){return this.Hb},Ds.prototype.getAssetUri=Ds.prototype.ic,Ds.prototype.df=function(){return Kn("getManifestUri",'Please use "getAssetUri" instead.'),this.ic()},Ds.prototype.getManifestUri=Ds.prototype.df,Ds.prototype.V=function(){return this.c?this.c.presentationTimeline.V():!(!this.a||!this.a.src)&&1/0==this.a.duration},Ds.prototype.isLive=Ds.prototype.V,Ds.prototype.Ya=function(){return!!this.c&&this.c.presentationTimeline.Ya()},Ds.prototype.isInProgress=Ds.prototype.Ya,Ds.prototype.yf=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Ds.prototype.isAudioOnly=Ds.prototype.yf,Ds.prototype.fg=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.pb(),end:e.Ca()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},Ds.prototype.seekRange=Ds.prototype.fg,Ds.prototype.keySystem=function(){return kt(this.drmInfo())},Ds.prototype.keySystem=Ds.prototype.keySystem,Ds.prototype.drmInfo=function(){return this.h?this.h.a:null},Ds.prototype.drmInfo=Ds.prototype.drmInfo,Ds.prototype.Mb=function(){return this.h?this.h.Mb():1/0},Ds.prototype.getExpiration=Ds.prototype.Mb,Ds.prototype.Yc=function(){return!!this.B&&this.B.a==Ca},Ds.prototype.isBuffering=Ds.prototype.Yc,Ds.prototype.kf=function(){if(this.F){var e=this.F;e=e.f?0:e.c}else e=0;return e},Ds.prototype.getPlaybackRate=Ds.prototype.kf,Ds.prototype.wg=function(e){0==e?q("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.F&&this.F.set(e),this.i==kl&&uo(this.f,1<Math.abs(e)))},Ds.prototype.trickPlay=Ds.prototype.wg,Ds.prototype.Le=function(){this.i==Al&&this.F.set(1),this.i==kl&&(this.F.set(1),uo(this.f,!1))},Ds.prototype.cancelTrickPlay=Ds.prototype.Le,Ds.prototype.Wc=function(){if(this.c&&this.m){for(var e=yl(this),t=[],n=h(pl(this)),i=n.next();!i.done;i=n.next()){i=i.value;var r=Fn.Id(i);r.active=i==e,t.push(r)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){return Fn.Xd(e)})):[]},Ds.prototype.getVariantTracks=Ds.prototype.Wc,Ds.prototype.rb=function(){if(this.c&&this.m){for(var e=function(e){var t=fl(e);if(null==t)return null;if(!va(e.$,t).text){var n=Fn.Lb(t.textStreams,e.na,e.gb);n.length&&ga(e.$,t,n[0])}return va(e.$,t).text}(this),t=[],n=h(function(e){var t=fl(e);return null==t?[]:t.textStreams.filter((function(t){return!e.bc.has(t)}))}(this)),i=n.next();!i.done;i=n.next()){i=i.value;var r=Fn.yc(i);r.active=i==e,t.push(r)}return t}return this.a&&this.a.src&&this.a.textTracks?js(this).map((function(e){return Fn.wf(e)})):[]},Ds.prototype.getTextTracks=Ds.prototype.rb,Ds.prototype.xd=function(e){if(this.c&&this.f){var t=fl(this),n=t.textStreams.find((function(t){return t.id==e.id}));n&&(Vs(this,t,n,!1),Ws(this,n),this.na=n.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(t=h(t=js(this))).next();!n.done;n=t.next())n=n.value,Fn.Xc(n)==e.id?n.mode=this.hb?"showing":"hidden":n.mode="disabled";nl(this)}},Ds.prototype.selectTextTrack=Ds.prototype.xd,Ds.prototype.gg=function(){Kn("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.rb().filter((function(e){return"application/cea-608"==e.mimeType}));0<e.length&&this.xd(e[0])},Ds.prototype.selectEmbeddedTextTrack=Ds.prototype.gg,Ds.prototype.Bg=function(){Kn("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.rb().filter((function(e){return e.active}))[0];return!!e&&"application/cea-608"==e.mimeType},Ds.prototype.usingEmbeddedTextTrack=Ds.prototype.Bg,Ds.prototype.hg=function(e,t,n){if(n=void 0===n?0:n,this.c&&this.f){var i=fl(this);this.b.abr.enabled&&q("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=i.variants.find((function(t){return t.id==e.id}));r&&Fn.tb(r)&&(Hs(this,i,r,!1),Gs(this,r,t,n),this.Ib=new _a(r),Xs(this,i.variants))}else if(this.a&&this.a.audioTracks){for(n=(t=h(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())n=n.value,Fn.Xc(n)==e.id&&(n.enabled=!0);tl(this)}},Ds.prototype.selectVariantTrack=Ds.prototype.hg,Ds.prototype.We=function(){return hl(this.Wc())},Ds.prototype.getAudioLanguagesAndRoles=Ds.prototype.We,Ds.prototype.sf=function(){return hl(this.rb())},Ds.prototype.getTextLanguagesAndRoles=Ds.prototype.sf,Ds.prototype.Ve=function(){return Array.from(dl(this.Wc()))},Ds.prototype.getAudioLanguages=Ds.prototype.Ve,Ds.prototype.rf=function(){return Array.from(dl(this.rb()))},Ds.prototype.getTextLanguages=Ds.prototype.rf,Ds.prototype.vd=function(e,t){if(this.c&&this.m){var n=fl(this);this.Ib=new Ta(e,t||"",0,"","audio"),Zs(this,n)}else if(this.a&&this.a.audioTracks){var i=Array.from(this.a.audioTracks);n=Mn(e);for(var r=(i=h(i)).next();!r.done;r=i.next()){r=r.value;var a=Fn.Xd(r);Mn(a.language)!=n||t&&!a.roles.includes(t)||(r.enabled=!0)}tl(this)}},Ds.prototype.selectAudioLanguage=Ds.prototype.vd,Ds.prototype.wd=function(e,t){if(this.c&&this.m){var n=fl(this);this.na=e,this.gb=t||"";var i=Fn.Lb(n.textStreams,this.na,this.gb)[0]||null;i&&(Vs(this,n,i,!1),(this.b.streaming.alwaysStreamText||this.nc())&&Ws(this,i))}else{var r=Mn(e);(n=this.rb().filter((function(e){return Mn(e.language)==r&&(!t||e.roles.includes(t))}))[0])&&this.xd(n)}},Ds.prototype.selectTextLanguage=Ds.prototype.wd,Ds.prototype.ig=function(e){if(this.c&&this.m){for(var t=fl(this),n=null,i=h(pl(this)),r=i.next();!r.done;r=i.next())if((r=r.value).audio.label==e){n=r;break}null!=n&&(this.Ib=new Ta(n.language,"",0,e),Zs(this,t))}},Ds.prototype.selectVariantsByLabel=Ds.prototype.ig,Ds.prototype.nc=function(){var e=this.hb;return this.D?this.D.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?js(this).some((function(e){return"showing"==e.mode})):e},Ds.prototype.isTextTrackVisible=Ds.prototype.nc,Ds.prototype.lg=function(e){var t=this;return f((function n(){var i,r,a,o;return N(n,(function(n){switch(n.j){case 1:if(t.hb==(i=!!e))return n.return();if(t.hb=i,t.i!=kl){if(t.a&&t.a.src&&t.a.textTracks)for(var s=h(js(t)),l=s.next();!l.done;l=s.next())"disabled"!=(r=l.value).mode&&(r.mode=i?"showing":"hidden");n.A(2);break}if(t.D.g.setTextVisibility(i),t.b.streaming.alwaysStreamText){n.A(2);break}if(!i){(s=t.f).D=!0,(l=s.b.get("text"))&&(Io(l),s.b.delete("text")),n.A(2);break}if(a=fl(t),!(0<(o=Fn.Lb(a.textStreams,t.na,t.gb)).length)){n.A(2);break}return T(n,lo(t.f,o[0]),2);case 2:il(t),w(n)}}))}))},Ds.prototype.setTextTrackVisibility=Ds.prototype.lg,Ds.prototype.mf=function(){if(!this.V())return null;var e=this.Pa.f,t=0;if(this.m)t=this.m.g();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.c?new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime)):this.a&&this.a.getStartDate?(e=this.a.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},Ds.prototype.getPlayheadTimeAsDate=Ds.prototype.mf,Ds.prototype.pf=function(){if(!this.V())return null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},Ds.prototype.getPresentationStartTimeAsDate=Ds.prototype.pf,Ds.prototype.Tc=function(){var e={total:[],audio:[],video:[],text:[]};return this.i==Al&&(e.total=Vt(this.a.buffered)),this.i==kl&&this.D.Tc(e),e},Ds.prototype.getBufferedInfo=Ds.prototype.Tc,Ds.prototype.getStats=function(){if(this.i!=kl&&this.i!=Al)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,switchHistory:[],stateHistory:[]};qs(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.u,n=Number(e.totalVideoFrames);t.m=Number(e.droppedVideoFrames),t.l=n,this.u.i=Number(e.corruptedVideoFrames)}this.h?e=(e=this.h).H?e.H:NaN:e=NaN,this.u.h=e,this.i==kl&&((e=yl(this))&&(this.u.s=e.bandwidth),e&&e.video&&(t=this.u,n=e.video.height||NaN,t.u=e.video.width||NaN,t.g=n),e=this.l.getBandwidthEstimate(),this.u.f=e);var i=this.u;e=i.u,t=i.g,n=i.s;for(var r=i.l,a=i.m,o=i.i,s=i.f,l=i.b,u=Cs(i.a,"playing"),c=Cs(i.a,"paused"),d=Cs(i.a,"buffering"),p=i.h,f=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=h(e.b),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.a&&n.push(t(e.a)),n}(i.a),y=[],g=(i=h(i.c.a)).next();!g.done;g=i.next())g=g.value,y.push({timestamp:g.timestamp,id:g.id,type:g.type,fromAdaptation:g.fromAdaptation,bandwidth:g.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:r,droppedFrames:a,corruptedFrames:o,estimatedBandwidth:s,loadLatency:l,playTime:u,pauseTime:c,bufferingTime:d,licenseTime:p,stateHistory:f,switchHistory:y}},Ds.prototype.getStats=Ds.prototype.getStats,Ds.prototype.addTextTrack=function(e,t,n,i,r,a){var o=this;return f((function s(){var l,u,c,d,h,p,f,y,g;return N(s,(function(s){switch(s.j){case 1:if(o.i==Al)throw Error("State error!");if(o.i!=kl)throw Error("State error!");if(l=fl(o),u=Wt,c=o.c.periods.indexOf(l),h=(d=c+1)>=o.c.periods.length?o.c.presentationTimeline.Y():o.c.periods[d].startTime,1/0==(p=h-l.startTime))throw new ye(1,4,4033);return f=new er(1,0,p,(function(){return[e]}),0,null),y={id:o.ce++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?f:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:i,codecs:r||"",kind:n,encrypted:!1,keyId:null,language:t,label:a||null,type:u.ra,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},o.bc.add(y),l.textStreams.push(y),T(s,lo(o.f,y),2);case 2:return(g=so(o.f,"text"))&&ga(o.$,l,g),o.bc.delete(y),Qs(o,l),el(o),s.return(Fn.yc(y))}}))}))},Ds.prototype.addTextTrack=Ds.prototype.addTextTrack,Ds.prototype.zd=function(e,t){this.cc.width=e,this.cc.height=t},Ds.prototype.setMaxHardwareResolution=Ds.prototype.zd,Ds.prototype.ud=function(){if(this.i==kl){var e=this.f;if(e.f)e=!1;else if(e.m)e=!1;else{for(var t=h(e.b.values()),n=t.next();!n.done;n=t.next())(n=n.value).Qb&&(n.Qb=!1,Ro(e,n,.1));e=!0}}else e=!1;return e},Ds.prototype.retryStreaming=Ds.prototype.ud,Ds.prototype.bf=function(){return this.c},Ds.prototype.getManifest=Ds.prototype.bf,Ds.prototype.cf=function(){return this.s?this.s.constructor:null},Ds.prototype.getManifestParserFactory=Ds.prototype.cf,(i=Ds.prototype).Oc=function(e){var t=this.f?ao(this.f):null,n=this.f?oo(this.f):null;if(Fn.filterNewPeriod(this.h,t,n,e),!(t=e.variants).some(Fn.tb))throw new ye(2,4,4011);if(ul(this,e.variants),Fn.Kd(t,this.b.restrictions,this.cc)&&this.f&&fl(this)==e&&el(this),e=this.h?this.h.a:null)for(n=(t=h(t)).next();!n.done;n=t.next())for(var i=(n=h(n.value.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==e.keySystem)for(var r=(i=h(i.initData||[])).next();!r.done;r=i.next())r=r.value,Et(this.h,r.initDataType,r.initData)},i.Df=function(e){try{this.lb=!0,this.l.disable(),rl(this);var t=Xs(this,e.variants),n=Fn.Lb(e.textStreams,this.na,this.gb)[0]||null;this.pa&&(e.variants.includes(this.pa)&&(t=this.pa),this.pa=null),this.oa&&(e.textStreams.includes(this.oa)&&(n=this.oa),this.oa=null),t&&Hs(this,e,t,!0),n&&Vs(this,e,n,!0);var i=this.f,r=i.b.get("video");if(r)var a=i.c.periods[r.ia];else{var o=i.b.get("audio");a=o?i.c.periods[o.ia]:null}var s=t?t.audio:null;if(!a&&n){var l;if(l=s){e=n;var u=Mn(this.b.preferredTextLanguage),c=Mn(s.language),d=Mn(e.language);l=xn(d,u)&&!xn(c,d)}l&&(this.hb=!0),this.hb&&this.D.g.setTextVisibility(!0),il(this)}return this.b.streaming.alwaysStreamText||this.nc()?{variant:t,text:n}:{variant:t,text:null}}catch(e){return this.Ma(e),{variant:null,text:null}}},i.Ke=function(){this.lb=!1,this.b.abr.enabled&&(this.l.enable(),rl(this)),this.pa&&(co(this.f,this.pa,this.$d,this.Wd),tl(this),this.pa=null),this.oa&&(ho(this.f,this.oa,!0,0,!1),nl(this),this.oa=null)},i.If=function(){this.s&&this.s.update&&this.s.update()},i.Nf=function(){this.m&&this.m.s()},i.Ma=function(e){if(this.i!=bl){var t=new Te("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var bl=0,El=1,kl=2,Al=3;function _l(e,t){var n=ss(new os(e.wa(),e.ba()),t.periods[0],new br(null,0)),i=t.appMetadata||{};return n=Tl(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function Tl(e){for(var t=[],n=Fn.jf(e.variants),i=(n=h(n)).next();!i.done;i=n.next())t.push(Fn.Id(i.value));for(n=(e=h(e.textStreams)).next();!n.done;n=e.next())t.push(Fn.yc(n.value));return t}function wl(){this.a={}}function Sl(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.a[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.a[i.id]=i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,a=i.bandwidth||t.bandwidth-r;0>=a&&(a=t.bandwidth),e.a[n.id]=r,e.a[i.id]=a}}function Cl(e,t){var n=e.a[t];return null==n&&(n=0),n}function Rl(e){this.a=!1,this.b=new ge,this.c=e}function Il(e){var t=new Ol;e.periods.forEach((function(e,n){var i=xl(e.variants);if(0==n)for(var r=(i=h(i.a)).next();!r.done;r=i.next())t.add(r.value);else!function(e,t){e.a=e.a.filter((function(e){return Pl(t,e)}))}(t,i)}));for(var n=(e=h(e.periods)).next();!n.done;n=e.next())(n=n.value).variants=n.variants.filter((function(e){return Pl(t,new Dl(e))}))}function Dl(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function Ol(){this.a=[]}function Pl(e,t){return e.a.some((function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c}))}function xl(e){for(var t=new Ol,n=(e=h(e)).next();!n.done;n=e.next())t.add(new Dl(n.value));return t}function Ll(e){var t=this;if(e&&e.constructor!=Ds)throw new ye(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.Nb()):(this.a=_s(),this.b=new xe),this.f=!1,this.c=[],this.g=[];var n=!e;this.h=new Rl((function(){return f((function e(){var i;return N(e,(function(e){switch(e.j){case 1:return i=function(){},T(e,Promise.all(t.g.map((function(e){return e.then(i,i)}))),2);case 2:if(!n){e.A(3);break}return T(e,t.b.destroy(),3);case 3:t.a=null,t.b=null,w(e)}}))}))}))}function Ml(){if(Je())e:{for(var e=h(Xo.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Nl(e,t){for(var n=[],i=h(e.periods),r=i.next();!r.done;r=i.next())for(var a=(r=h(r.value.streams)).next();!a.done;a=r.next())a=a.value,t&&"video"==a.contentType?n.push({contentType:Xe(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||n.push({contentType:Xe(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function Ul(e,t,n){return f((function i(){return N(i,(function(i){switch(i.j){case 1:return T(i,function(e,t,n,i){return f((function r(){var a,o,s;return N(r,(function(r){switch(r.j){case 1:return i.drmInfo?(a=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new ye(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),o=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:Nl(i,!1),videoCapabilities:Nl(i,!0)}})),T(r,hs(t,e,o),2)):r.return();case 2:return s=r.o,T(r,a.remove(s),3);case 3:return T(r,a.add(o.filter((function(e){return-1==s.indexOf(e.sessionId)}))),0)}}))}))}(e.b,e.a.drm,n,t),0)}}))}))}function Bl(e,t,n,i){function r(){s+=1,e.a.offline.progressCallback(l,s/o)}var a=function(e){var t=[];return e.periods.forEach((function(e){e.streams.forEach((function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach((function(e){t.push(e.dataKey)}))}))})),t}(i),o=a.length+1,s=0,l=_l(n,i);return Promise.all([t.removeSegments(a,r),t.removeManifests([n.key()],r)])}function Fl(e,t,n,i,r,a){var o={id:a.id,originalId:a.originalId,primary:a.primary,presentationTimeOffset:a.presentationTimeOffset||0,contentType:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,initSegmentKey:null,encrypted:a.encrypted,keyId:a.keyId,segments:[],variantIds:[]};r=r.presentationTimeline.Pb();var s=a.id,l=a.initSegmentReference;return l&&(l=Er(l.c(),l.b,l.a,e.a.streaming.retryParameters),No(t,s,l,.5*Cl(i,a.id),!0,(function(t){return f((function i(){var r;return N(i,(function(i){switch(i.j){case 1:return T(i,n.addSegments([{data:t}]),2);case 2:r=i.o,e.c.push(r[0]),o.initSegmentKey=r[0],w(i)}}))}))}))),function(e,t,n){for(var i=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);i;)n(i),i=e.getSegmentReference(++t)}(a,r,(function(r){var l=Er(r.c(),r.b,r.a,e.a.streaming.retryParameters);No(t,s,l,function(e,t,n){return n=n.endTime-n.startTime,Cl(e,t)*n}(i,a.id,r),!1,(function(t){return f((function i(){var a;return N(i,(function(i){switch(i.j){case 1:return T(i,n.addSegments([{data:t}]),2);case 2:a=i.o,e.c.push(a[0]),o.segments.push({startTime:r.startTime,endTime:r.endTime,dataKey:a[0]}),w(i)}}))}))}))})),o}function jl(e){if(e.h.a)throw new ye(2,9,7001)}function Hl(){if(!Ml())throw new ye(2,9,9e3)}function Vl(e,t){return f((function n(){return N(n,(function(n){switch(n.j){case 1:return e.g.push(t),C(n,2),T(n,t,4);case 4:return n.return(n.o);case 2:D(n),Ie(e.g,t),O(n,0)}}))}))}function Kl(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=h(t),i=n.next();!i.done;i=n.next())for(var r=(i=h(t)).next();!r.done;r=i.next());for(n=(t=h(e)).next();!n.done;n=t.next())for(i=(n=h(e)).next();!i.done;i=n.next());}Ds.LoadMode={DESTROYED:bl,NOT_LOADED:El,MEDIA_SOURCE:kl,SRC_EQUALS:Al},Rl.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},Ol.prototype.add=function(e){Pl(this,e)||this.a.push(e)},V("shaka.offline.Storage",Ll),Ll.support=Ml,Ll.prototype.destroy=function(){return this.h.destroy()},Ll.prototype.destroy=Ll.prototype.destroy,Ll.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=ks(e,t));var n=e,i=!1;return null!=n.trackSelectionCallback&&(i=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(i=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(i=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),i&&Kn("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Ts(this.a,e)},Ll.prototype.configure=Ll.prototype.configure,Ll.prototype.getConfiguration=function(){var e=_s();return Ts(e,this.a,_s()),e},Ll.prototype.getConfiguration=Ll.prototype.getConfiguration,Ll.prototype.Nb=function(){return this.b},Ll.prototype.getNetworkingEngine=Ll.prototype.Nb,Ll.prototype.store=function(e,t,n){var i=this;return Vl(this,function(e,t,n,i){return f((function r(){var a,o,s,l,u,c,d,p,y;return N(r,(function(r){switch(r.j){case 1:return Hl(),e.f?r.return(Promise.reject(new ye(2,9,9006))):(e.f=!0,T(r,function(e,t,n){return f((function i(){var r,a,o,s,l,u;return N(i,(function(i){switch(i.j){case 1:return r=null,a=e.b,o={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e}},T(i,n(),2);case 2:return(s=i.o).configure(e.a.manifest),jl(e),C(i,3),T(i,s.start(t,o),5);case 5:return l=i.o,jl(e),u=function(e){for(var t=new Set,n=(e=h(e.periods)).next();!n.done;n=e.next()){for(var i=h((n=n.value).textStreams),r=i.next();!r.done;r=i.next())t.add(r.value);for(i=(n=h(n.variants)).next();!i.done;i=n.next())(i=i.value).audio&&t.add(i.audio),i.video&&t.add(i.video)}return t}(l),T(i,Promise.all(We(u,(function(e){return e.createSegmentIndex()}))),6);case 6:if(jl(e),r)throw r;return i.return(l);case 3:return D(i),T(i,s.stop(),7);case 7:O(i,0)}}))}))}(e,t,i),2));case 2:if(a=r.o,jl(e),!(!a.presentationTimeline.V()&&!a.presentationTimeline.Ya()))throw new ye(2,9,9005,t);return o=null,s=new Yo,u=l=null,S(r,3,4),T(r,function(e,t,n){return f((function i(){var r,a,o;return N(i,(function(i){switch(i.j){case 1:return r=new yt({wb:e.b,onError:n,rc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=Na(t.periods),o=e.a,r.configure(o.drm),T(i,function(e,t,n){return e.s=[],e.D=n,vt(e,t)}(r,a,o.offline.usePersistentLicense),2);case 2:return T(i,mt(r),3);case 3:return T(i,bt(r),4);case 4:return i.return(r)}}))}))}(e,a,(function(e){u=u||e})),6);case 6:if(o=r.o,jl(e),u)throw u;return T(r,function(e,t,n){return f((function i(){var r,a;return N(i,(function(i){switch(i.j){case 1:return r={width:1/0,height:1/0},function(e,t,n){for(var i=(e=h(e.periods)).next();!i.done;i=e.next())(i=i.value).variants=i.variants.filter((function(e){return Fn.cd(e,t,n)}))}(t,e.a.restrictions,r),function(e){for(var t=(e=h(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&kn(e.audio)),e.video&&(t=t&&kn(e.video)),t}))}(t),function(e,t){for(var n=h(e.periods),i=n.next();!i.done;i=n.next())(i=i.value).variants=i.variants.filter((function(e){return Dt(t,e)}))}(t,n),Il(t),a=e.a.preferredAudioChannelCount,Fn.Nd(t,a),T(i,function(e,t){return f((function n(){var i,r,a,o;return N(n,(function(n){switch(n.j){case 1:i=null,r=h(e.periods),a=r.next();case 2:if(a.done){n.A(0);break}return o=a.value,i&&(o.variants=o.variants.filter((function(e){return Pl(i,new Dl(e))}))),T(n,t(o),5);case 5:i=xl(o.variants),a=r.next(),n.A(2)}}))}))}(t,(function(t){return f((function n(){var i,r,a,o,s,l,u,c;return N(n,(function(n){switch(n.j){case 1:i=Fn,r=[];for(var d=h(t.variants),p=d.next();!p.done;p=d.next())a=p.value,r.push(i.Id(a));for(p=(d=h(t.textStreams)).next();!p.done;p=d.next())o=p.value,r.push(i.yc(o));return T(n,e.a.offline.trackSelectionCallback(r),2);case 2:for(s=n.o,l=new Set,u=new Set,p=(d=h(s)).next();!p.done;p=d.next())"variant"==(c=p.value).type&&l.add(c.id),"text"==c.type&&u.add(c.id);t.variants=t.variants.filter((function(e){return l.has(e.id)})),t.textStreams=t.textStreams.filter((function(e){return u.has(e.id)})),w(n)}}))}))})),2);case 2:(function(e){if(0==e.periods.length)throw new ye(2,4,4014);for(var t=(e=h(e.periods)).next();!t.done;t=e.next())Kl(t.value)})(t),w(i)}}))}))}(e,a,o),7);case 7:return T(r,s.init(),8);case 8:return jl(e),T(r,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{wa:n,ba:i},ba:e})}))})),t)return t;throw new ye(2,9,9013,"Could not find a cell that supports add-operations")}(s),9);case 9:return l=r.o,jl(e),T(r,function(e,t,n,i,r,a){return f((function o(){var s,l,u,c,d,p,y,g,v,m;return N(o,(function(o){switch(o.j){case 1:return s=function(e,t,n){var i=null==t.expiration?1/0:t.expiration;return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.Y(),size:0,expiration:i,tracks:t=Tl(t.periods[0]),appMetadata:n}}(r,i,a),l=i.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos&&e.drmInfos.length}))})),u=i.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos.some((function(e){return e.initData&&e.initData.length}))}))})),d=null,(c=l&&!u)&&(p=n.a,d=zl.get(p.keySystem)),y=new Mo(e.b,(function(t,n){s.size=n,e.a.offline.progressCallback(s,t)}),(function(t,i){c&&e.a.offline.usePersistentLicense&&d==i&&Et(n,"cenc",t)})),C(o,2),v=g=function(e,t,n,i,r,a,o){var s=new wl,l=r.periods.map((function(i){return function(e,t,n,i,r,a){for(var o=h(a.variants),s=o.next();!s.done;s=o.next())Sl(i,s.value);for(o=h(a.textStreams),s=o.next();!s.done;s=o.next())i.a[s.value.id]=52;o=function(e){for(var t=new Set,n=h(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=h(e.variants),n=e.next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}(a);var l=new Map;for(o=h(o),s=o.next();!s.done;s=o.next()){var u=Fl(e,t,n,i,r,s=s.value);l.set(s.id,u)}return a.variants.forEach((function(e){e.audio&&l.get(e.audio.id).variantIds.push(e.id),e.video&&l.get(e.video.id).variantIds.push(e.id)})),{startTime:a.startTime,streams:Array.from(l.values())}}(e,t,n,s,r,i)})),u=i.a,c=e.a.offline.usePersistentLicense;return u&&c&&(u.initData=[]),{originalManifestUri:a,duration:r.presentationTimeline.Y(),size:0,expiration:i.Mb(),periods:l,sessionIds:c?_t(i):[],drmInfo:u,appMetadata:o}}(e,y,t,n,i,r,a),T(o,function(e){return f((function t(){return N(t,(function(t){switch(t.j){case 1:return T(t,Promise.all(e.b.values()),2);case 2:return t.return(e.a.a)}}))}))}(y),4);case 4:if(v.size=o.o,g.expiration=n.Mb(),m=_t(n),g.sessionIds=e.a.offline.usePersistentLicense?m:[],l&&e.a.offline.usePersistentLicense&&!m.length)throw new ye(2,9,9007);return o.return(g);case 2:return D(o),T(o,y.destroy(),5);case 5:O(o,0)}}))}))}(e,l.ba,o,a,t,n),10);case 10:if(c=r.o,jl(e),u)throw u;return T(r,l.ba.addManifests([c]),11);case 11:return d=r.o,jl(e),p=new rs("manifest",l.path.wa,l.path.ba,d[0]),r.return(_l(p,c));case 4:return D(r),e.f=!1,e.c=[],T(r,s.destroy(),12);case 12:if(!o){r.A(13);break}return T(r,o.destroy(),13);case 13:O(r,0);break;case 3:if(y=I(r),!l){r.A(15);break}return T(r,l.ba.removeSegments(e.c,(function(){})),15);case 15:throw u||y}}))}))}(this,e,t||{},(function(){return f((function t(){var r,a;return N(t,(function(t){switch(t.j){case 1:return n&&"string"!=typeof n?(Kn("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),r=n,t.return(new r)):T(t,mr.create(e,i.b,i.a.manifest.retryParameters,n),2);case 2:return a=t.o,t.return(a)}}))}))})))},Ll.prototype.store=Ll.prototype.store,Ll.prototype.qf=function(){return this.f},Ll.prototype.getStoreInProgress=Ll.prototype.qf,Ll.prototype.remove=function(e){return Vl(this,function(e,t){return f((function n(){var i,r,a,o,s,l;return N(n,(function(n){switch(n.j){case 1:return Hl(),null==(i=as(t))||"manifest"!=i.a?n.return(Promise.reject(new ye(2,9,9004,t))):(r=i,a=new Yo,C(n,2),T(n,a.init(),4));case 4:return T(n,$o(a,r.wa(),r.ba()),5);case 5:return T(n,(o=n.o).getManifests([r.key()]),6);case 6:return s=n.o,l=s[0],T(n,Promise.all([Ul(e,l,a),Bl(e,o,r,l)]),2);case 2:return D(n),T(n,a.destroy(),8);case 8:O(n,0)}}))}))}(this,e))},Ll.prototype.remove=Ll.prototype.remove,Ll.prototype.ag=function(){return Vl(this,function(e){return f((function t(){var n,i,r,a,o,s,l,u,c;return N(t,(function(t){switch(t.j){case 1:return Hl(),n=e.b,i=e.a.drm,r=new Yo,a=!1,C(t,2),T(t,r.init(),4);case 4:for(o=[],function(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}(r,(function(e){return o.push(e)})),s=Promise.resolve(),l={},u=h(o),c=u.next();!c.done;l={xc:l.xc},c=u.next())l.xc=c.value,s=s.then(function(e){return function(){return f((function t(){var r,o;return N(t,(function(t){switch(t.j){case 1:return T(t,e.xc.getAll(),2);case 2:return r=t.o,T(t,hs(i,n,r),3);case 3:return o=t.o,T(t,e.xc.remove(o),4);case 4:o.length!=r.length&&(a=!0),w(t)}}))}))}}(l));return T(t,s,2);case 2:return D(t),T(t,r.destroy(),6);case 6:O(t,3);break;case 3:return t.return(!a)}}))}))}(this))},Ll.prototype.removeEmeSessions=Ll.prototype.ag,Ll.prototype.list=function(){return Vl(this,f((function e(){var t,n,i;return N(e,(function(e){switch(e.j){case 1:return Hl(),t=[],n=new Yo,C(e,2),T(e,n.init(),4);case 4:return i=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){t({wa:n,ba:i},e)}))}))}(n,(function(e,n){i=i.then((function(){return f((function i(){return N(i,(function(i){switch(i.j){case 1:return T(i,n.getAllManifests(),2);case 2:i.o.forEach((function(n,i){var r=_l(new rs("manifest",e.wa,e.ba,i),n);t.push(r)})),w(i)}}))}))}))})),T(e,i,2);case 2:return D(e),T(e,n.destroy(),6);case 6:O(e,3);break;case 3:return e.return(t)}}))})))},Ll.prototype.list=Ll.prototype.list,Ll.deleteAll=function(){return f((function e(){var t;return N(e,(function(e){switch(e.j){case 1:return t=new Yo,C(e,2),T(e,t.erase(),2);case 2:return D(e),T(e,t.destroy(),5);case 5:O(e,0)}}))}))};var zl=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");xs.offline=Ml,V("shaka.polyfill.installAll",(function(){for(var e=0;e<Yl.length;++e)try{Yl[e].Ie()}catch(e){q("Error installing polyfill!",e)}}));var Gl,Wl,Yl=[];function $l(e,t){for(var n={priority:t=t||0,Ie:e},i=0;i<Yl.length;i++)if(Yl[i].priority<t)return void Yl.splice(i,0,n);Yl.push(n)}function ql(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function Xl(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function Ql(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return(n=e.apply(this,n)).abort=function(){},n}}function Zl(e,t){try{var n=new Jl(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Jl(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=h(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var a=!1,o=!1;if(r.audioCapabilities)for(var s=h(r.audioCapabilities),l=s.next();!l.done;l=s.next())if((l=l.value).contentType){a=!0;var u=l.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(i.audioCapabilities.push(l),o=!0)}if(r.videoCapabilities)for(l=(r=h(r.videoCapabilities)).next();!l.done;l=r.next())(s=l.value).contentType&&(a=!0,l=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,l)&&(i.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=o?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function eu(e){var t=this.mediaKeys;return t&&t!=e&&nu(t,null),delete this.mediaKeys,(this.mediaKeys=e)?nu(e,this):Promise.resolve()}function tu(e){this.b=new WebKitMediaKeys(e),this.a=new He}function nu(e,t){if(e.a.ab(),!t)return Promise.resolve();e.a.w(t,"webkitneedkey",ru);try{return 1<=t.readyState?t.webkitSetMediaKeys(e.b):e.a.da(t,"loadedmetadata",(function(){t.webkitSetMediaKeys(e.b)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function iu(e){Se.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new He,this.sessionId="",this.expiration=NaN,this.closed=new ge,this.keyStatuses=new ou}function ru(e){if(e=new Uint8Array(e.initData),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ct(e=lt(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=e,this.dispatchEvent(t)}function au(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Te("keystatuseschange"))}function ou(){this.size=0,this.a=void 0}function su(e,t){try{var n=new lu(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function lu(e,t){this.keySystem=e;for(var n=!1,i=0;i<t.length;++i){var r=t[i],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=0;s<r.audioCapabilities.length;++s){var l=r.audioCapabilities[s];if(l.contentType){o=!0;var u=l.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.audioCapabilities.push(l),n=!0)}}if(r.videoCapabilities)for(s=0;s<r.videoCapabilities.length;++s)(l=r.videoCapabilities[s]).contentType&&(o=!0,u=l.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.videoCapabilities.push(l),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function uu(e){var t=this.mediaKeys;return t&&t!=e&&du(t,null),delete this.mediaKeys,(this.mediaKeys=e)?du(e,this):Promise.resolve()}function cu(e){this.a=new MSMediaKeys(e),this.b=new He}function du(e,t){if(e.b.ab(),!t)return Promise.resolve();e.b.w(t,"msneedkey",pu);var n=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",(function e(){t.msSetMediaKeys(n.a),t.removeEventListener("loadedmetadata",e)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function hu(e){Se.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new He,this.sessionId="",this.expiration=NaN,this.closed=new ge,this.keyStatuses=new yu}function pu(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new Hi(e);if(1>=t.data.length)return e;e=[];for(var n={},i=(t=h(t.data)).next();!i.done;n={mc:n.mc},i=t.next())n.mc=i.value,e.some(function(e){return function(t){return ft.za(t,e.mc)}}(n))||e.push(n.mc);return ft.concat.apply(ft,e instanceof Array?e:function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(h(e)))}(e.initData).buffer,this.dispatchEvent(t)}}function fu(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Te("keystatuseschange"))}function yu(){this.size=0,this.a=void 0}function gu(){return Promise.reject(Error("The key system specified is not supported."))}function vu(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function mu(){throw new TypeError("Illegal constructor.")}function bu(){throw new TypeError("Illegal constructor.")}V("shaka.polyfill.register",$l),$l((function(){Pc()}),-1),$l((function(){if(t.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ql),document.addEventListener("webkitfullscreenerror",ql),document.addEventListener("mozfullscreenchange",ql),document.addEventListener("mozfullscreenerror",ql),document.addEventListener("MSFullscreenChange",ql),document.addEventListener("MSFullscreenError",ql)}})),$l((function(){var e=!1;if(it("CrKey"))e=!0;else try{t.indexedDB&&(e=!1)}catch(t){e=!0}e&&delete t.indexedDB})),$l((function(){it("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Xl)})),$l((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),$l((function(){})),$l((function(){var e=nt();t.MediaSource&&(t.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var i=n.split(/ *; */),r=i[0],a={},o=1;o<i.length;++o){var s=i[o].split("="),l=s[0];s=s[1].replace(/"(.*)"/,"$1"),a[l]=s}if(!(i=a.codecs))return e(n);var u=!1,c=!1;for(var d in n=i.split(",").filter((function(e){return t.test(e)&&(c=!0),/^(hev|hvc)1\.2/.test(e)&&(u=!0),!0})),c&&(u=!1),a.codecs=n.join(","),u&&(a.eotf="smpte2084"),a)r+="; "+d+'="'+a[d]+'"';return cast.__platform__.canDisplayType(r)}}():e?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=e?(Ql(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):Ql()):it("Tizen")&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Qe(t)[0]&&e(t)}}())})),Jl.prototype.createMediaKeys=function(){var e=new tu(this.keySystem);return Promise.resolve(e)},Jl.prototype.getConfiguration=function(){return this.a},tu.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new iu(this.b,e)},tu.prototype.setServerCertificate=function(e){return Promise.resolve(!0)},K(iu,Se),(i=iu.prototype).generateRequest=function(e,t){this.a=new ge;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.w(this.b,"webkitkeymessage",this.qg.bind(this)),this.f.w(this.b,"webkitkeyadded",this.og.bind(this)),this.f.w(this.b,"webkitkeyerror",this.pg.bind(this)),au(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.c=new ge;try{this.b.update(new Uint8Array(e))}catch(e){this.c.reject(e)}return this.c},i.close=function(){try{this.b.close(),this.closed.resolve(),this.f.ab()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},i.qg=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Te("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},i.og=function(){this.c&&(au(this,"usable"),this.c.resolve(),this.c=null)},i.pg=function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:au(this,"output-not-allowed");break;default:au(this,"internal-error")}},(i=ou.prototype).forEach=function(e){this.a&&e(this.a,Gl)},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=Gl;return!(!this.a||!ft.za(new Uint8Array(e),new Uint8Array(t)))},i.entries=function(){},i.keys=function(){},i.values=function(){},$l((function(){t.HTMLVideoElement&&t.WebKitMediaKeys&&(Gl=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=eu,t.MediaKeys=tu,t.MediaKeySystemAccess=Jl,navigator.requestMediaKeySystemAccess=Zl)})),lu.prototype.createMediaKeys=function(){var e=new cu(this.keySystem);return Promise.resolve(e)},lu.prototype.getConfiguration=function(){return this.a},cu.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new hu(this.a,e)},cu.prototype.setServerCertificate=function(){return Promise.resolve(!1)},K(hu,Se),(i=hu.prototype).generateRequest=function(e,t){this.a=new ge;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.w(this.c,"mskeymessage",this.Mf.bind(this)),this.f.w(this.c,"mskeyadded",this.Kf.bind(this)),this.f.w(this.c,"mskeyerror",this.Lf.bind(this)),fu(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.b=new ge;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},i.close=function(){try{this.c.close(),this.closed.resolve(),this.f.ab()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},i.Mf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Te("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},i.Kf=function(){this.a?(fu(this,"usable"),this.a.resolve(),this.a=null):this.b&&(fu(this,"usable"),this.b.resolve(),this.b=null)},i.Lf=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:fu(this,"output-not-allowed");break;default:fu(this,"internal-error")}},(i=yu.prototype).forEach=function(e){this.a&&e(this.a,Wl)},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=Wl;return!(!this.a||!ft.za(new Uint8Array(e),new Uint8Array(t)))},i.entries=function(){},i.keys=function(){},i.values=function(){},$l((function(){!t.HTMLVideoElement||!t.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(Wl=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=uu,t.MediaKeys=cu,t.MediaKeySystemAccess=lu,navigator.requestMediaKeySystemAccess=su)})),mu.prototype.createSession=function(){},mu.prototype.setServerCertificate=function(){},bu.prototype.getConfiguration=function(){},bu.prototype.createMediaKeys=function(){},$l((function(){!t.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=gu,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=vu,t.MediaKeys=mu,t.MediaKeySystemAccess=bu)}),-10);var Eu,ku="";function Au(e){return ku?ku+e.charAt(0).toUpperCase()+e.slice(1):e}function _u(e,t){try{var n=new wu(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Tu(e){var t=this.mediaKeys;return t&&t!=e&&Cu(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Cu(e,this),Promise.resolve()}function wu(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=0;a<t.length;++a){var o=t[a],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},l=!1;if(o.audioCapabilities)for(var u=0;u<o.audioCapabilities.length;++u){var c=o.audioCapabilities[u];if(c.contentType){l=!0;var d=c.contentType.split(";")[0];r.canPlayType(d,this.a)&&(s.audioCapabilities.push(c),i=!0)}}if(o.videoCapabilities)for(u=0;u<o.videoCapabilities.length;++u)(c=o.videoCapabilities[u]).contentType&&(l=!0,r.canPlayType(c.contentType,this.a)&&(s.videoCapabilities.push(c),i=!0));if(l||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Su(e){this.g=e,this.b=null,this.a=new He,this.c=[],this.f={}}function Cu(e,t){e.b=t,e.a.ab();var n=ku;t&&(e.a.w(t,n+"needkey",e.Qf.bind(e)),e.a.w(t,n+"keymessage",e.tg.bind(e)),e.a.w(t,n+"keyadded",e.rg.bind(e)),e.a.w(t,n+"keyerror",e.sg.bind(e)))}function Ru(e,t){var n=e.f[t];return n||((n=e.c.shift())?(n.sessionId=t,e.f[t]=n):null)}function Iu(e,t,n){Se.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new ge,this.keyStatuses=new Pu}function Du(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var i=new Uint8Array(ct("LOAD_SESSION|"+n));else{var r=ct("PERSISTENT|"),a=new Uint8Array(r.byteLength+t.byteLength);a.set(new Uint8Array(r),0),a.set(new Uint8Array(t),r.byteLength),i=a}else i=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new ge;var o=Au("generateKeyRequest");try{e.f[o](e.c,i)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new he((function(){try{e.f[o](e.c,i)}catch(t){e.b.reject(t),e.b=null}})).R(.01)}return e.b}function Ou(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Te("keystatuseschange"))}function Pu(){this.size=0,this.a=void 0}function xu(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Lu(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Mu(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Nu(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Uu(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Bu(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Fu(e,n,i){return new t.TextTrackCue(e,n,i)}function ju(e,n,i){return new t.TextTrackCue(e+"-"+n+"-"+i,e,n,i)}function Hu(){}wu.prototype.createMediaKeys=function(){var e=new Su(this.a);return Promise.resolve(e)},wu.prototype.getConfiguration=function(){return this.b},(i=Su.prototype).createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new Iu(t,this.g,e),this.c.push(e),e},i.setServerCertificate=function(){return Promise.resolve(!1)},i.Qf=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",e.initData instanceof ArrayBuffer?t.initData=e.initData:t.initData=e.initData.buffer,this.b.dispatchEvent(t)},i.tg=function(e){var t=Ru(this,e.sessionId);t&&(e=new Te("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},i.rg=function(e){(e=Ru(this,e.sessionId))&&(Ou(e,"usable"),e.a&&e.a.resolve(),e.a=null)},i.sg=function(e){var t=Ru(this,e.sessionId);t&&t.handleError(e)},K(Iu,Se),(i=Iu.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.b?(45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ou(this,"output-restricted"):Ou(this,1==t?"expired":"internal-error"))},i.Cd=function(e,t){if(this.a)this.a.then(this.Cd.bind(this,e,t)).catch(this.Cd.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=st(t),i=JSON.parse(n);"oct"!=i.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=ft.Ba(i.keys[0].k),i=ft.Ba(i.keys[0].kid)}else n=new Uint8Array(t),i=null;var r=Au("addKey");try{this.f[r](this.c,n,i,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},i.generateRequest=function(e,t){return Du(this,t,null)},i.load=function(e){return"persistent-license"==this.g?Du(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new ge;return this.Cd(t,e),t},i.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Au("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(i=Pu.prototype).forEach=function(e){this.a&&e(this.a,Eu)},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=Eu;return!(!this.a||!ft.za(new Uint8Array(e),new Uint8Array(t)))},i.entries=function(){},i.keys=function(){},i.values=function(){},$l((function(){if(!(!t.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)ku="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;Eu=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=_u,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Tu,t.MediaKeys=Su,t.MediaKeySystemAccess=wu}})),$l((function(){if(t.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=Lu,Object.defineProperty(e,"disablePictureInPicture",{get:Nu,set:Uu,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Mu,document.addEventListener("webkitpresentationmodechanged",xu,!0))}})),$l((function(){if(t.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch((function(){})),t}}})),$l((function(){if(t.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=Bu)}})),$l((function(){if(!t.VTTCue&&t.TextTrackCue){var e=TextTrackCue.length;if(3==e)t.VTTCue=Fu;else if(6==e)t.VTTCue=ju;else{try{var n=!!Fu(1,2,"")}catch(e){n=!1}n&&(t.VTTCue=Fu)}}})),V("shaka.text.TtmlTextParser",Hu),Hu.prototype.parseInit=function(){},Hu.prototype.parseInit=Hu.prototype.parseInit,Hu.prototype.parseMedia=function(e,t){var n=st(e),i=[],r=new DOMParser,a=null;if(""==n)return i;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new ye(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new ye(2,2,2005,n.textContent);if(!(r=a.getElementsByTagName("tt")[0]))throw new ye(2,2,2005,"TTML does not contain <tt> tag.");var o=Vi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Vi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),l=Vi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),u=Vi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","tickRate");if(a=r.getAttribute("xml:space")||"default",n=r.getAttribute("tts:extent"),"default"!=a&&"preserve"!=a)throw new ye(2,2,2005,"Invalid xml:space value: "+a);a="default"==a,o=new hc(o,s,l,u),s=tc(r.getElementsByTagName("metadata")[0]),l=tc(r.getElementsByTagName("styling")[0]),u=tc(r.getElementsByTagName("layout")[0]);for(var c=[],d=0;d<u.length;d++){var p,f,y=u[d],g=l,v=n,m=new dn,b=y.getAttribute("xml:id");if(b)m.id=b,b=null,v&&(b=zu.exec(v)||Wu.exec(v)),v=b?Number(b[1]):null,b=b?Number(b[2]):null,(p=sc(y,g,"extent"))&&(null!=(p=(f=zu.exec(p))||Wu.exec(p))&&(m.width=null!=v?100*Number(p[1])/v:Number(p[1]),m.height=null!=b?100*Number(p[2])/b:Number(p[2]),m.widthUnits=f||null!=v?hn:0,m.heightUnits=f||null!=b?hn:0)),(y=sc(y,g,"origin"))&&(null!=(p=(f=zu.exec(y))||Wu.exec(y))&&(m.viewportAnchorX=null!=b?100*Number(p[1])/b:Number(p[1]),m.viewportAnchorY=null!=v?100*Number(p[2])/v:Number(p[2]),m.viewportAnchorUnits=f||null!=v?hn:0));else m=null;m&&c.push(m)}for(n=nc(r.getElementsByTagName("body")[0]),r=(n=h(n)).next();!r.done;r=n.next())(r=rc(r.value,t.periodStart,o,s,l,u,c,a,!1))&&i.push(r)}return i},Hu.prototype.parseMedia=Hu.prototype.parseMedia;var Vu,Ku,zu=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Gu=/^(\d+px|\d+em)$/,Wu=/^(\d+)px (\d+)px$/,Yu=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,$u=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,qu=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Xu=/^(\d*(?:\.\d*)?)f$/,Qu=/^(\d*(?:\.\d*)?)t$/,Zu=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Ju={left:on,center:"center",right:"end",start:on,end:"end"},ec={left:"line-left",center:"center",right:"line-right"};function tc(e){var t=[];if(!e)return t;for(var n=h(e.childNodes),i=n.next();!i.done;i=n.next())(i=i.value).nodeType==Node.ELEMENT_NODE&&"br"!==i.nodeName&&(i=tc(i),t=t.concat(i));return t.length||t.push(e),t}function nc(e){if(!e)return[];for(var t=[],n=(e=h(e.childNodes)).next();!n.done;n=e.next())(n=n.value)instanceof Element&&(n.hasAttribute("begin")?t.push(n):t=t.concat(nc(n)));return t}function ic(e,t){for(var n="",i=h(e.childNodes),r=i.next();!r.done;r=i.next())"br"==(r=r.value).nodeName&&e.childNodes[0]!==r?n+="\n":r.childNodes&&0<r.childNodes.length?n+=ic(r,t):t?n+=r=(r=r.textContent.trim()).replace(/\s+/g," "):n+=r.textContent;return n}function rc(e,t,n,i,r,a,o,s,l){if(l&&"br"==e.nodeName)return(e=new Xt(0,0,"")).spacer=!0,e;var u=/^[\s\n]*$/.test(e.textContent),c=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||c&&u||c&&!l)return null;u=cc(e.getAttribute("begin"),n),c=cc(e.getAttribute("end"),n);var d=cc(e.getAttribute("dur"),n);if(null==c&&null!=d&&(c=u+d),!l&&(null==u||null==c))throw new ye(2,2,2001);if(u+=t,c+=t,d="",l=[],Array.from(e.childNodes).find((function(e){return e.nodeType===Node.TEXT_NODE&&/\S+/.test(e.textContent)})))d=ic(e,s);else for(var p=h(e.childNodes),f=p.next();!f.done;f=p.next())(f=rc(f.value,t,n,i,r,a,o,s,!0))&&(f.startTime=f.startTime||u,f.endTime=f.endTime||c,l.push(f));if((t=new Xt(u,c,d)).nestedCues=l,(a=uc(e,"region",a,"")[0])&&a.getAttribute("xml:id")){var y=a.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==y}))[0]}return function(e,t,n,i,r){"rtl"==oc(t,n,r,"direction")&&(e.direction="rtl");var a=oc(t,n,r,"writingMode");"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=nn),(a=oc(t,n,r,"textAlign"))?(e.positionAlign=ec[a],e.lineAlign=Ju[a],e.textAlign=Jt[a.toUpperCase()]):e.textAlign="start",(a=oc(t,n,r,"displayAlign"))&&(e.displayAlign=tn[a.toUpperCase()]);(a=oc(t,n,r,"color"))&&(e.color=a);(a=oc(t,n,r,"backgroundColor"))&&(e.backgroundColor=a);(a=oc(t,n,r,"fontFamily"))&&(e.fontFamily=a);(a=oc(t,n,r,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=oc(t,n,r,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=oc(t,n,r,"lineHeight"))&&a.match(Gu)&&(e.lineHeight=a),(a=oc(t,n,r,"fontSize"))&&a.match(Gu)&&(e.fontSize=a),(a=oc(t,n,r,"fontStyle"))&&(e.fontStyle=cn[a.toUpperCase()]);if(i){a=i.getAttribute("imagetype");var o=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==a&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(n=sc(n,r,"textDecoration"))&&ac(e,n),(t=lc(t,r,"textDecoration"))&&ac(e,t)}(t,e,a,i=uc(e,"smpte:backgroundImage",i,"#")[0],r),t}function ac(e,t){for(var n=t.split(" "),i=0;i<n.length;i++)switch(n[i]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ie(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ie(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ie(e.textDecoration,"overline")}}function oc(e,t,n,i){return(e=lc(e,n,i))?e:sc(t,n,i)}function sc(e,t,n){for(var i=tc(e),r=0;r<i.length;r++){var a=Vi.getAttributeNS(i[r],"http://www.w3.org/ns/ttml#styling",n);if(a)return a}return(e=uc(e,"style",t,"")[0])?Vi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function lc(e,t,n){var i=Vi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n);if(i)return i;for(e=uc(e,"style",t,""),t=null,i=0;i<e.length;i++){var r=Vi.getAttributeNS(e[i],"http://www.w3.org/ns/ttml#styling",n);r&&(t=r)}return t}function uc(e,t,n,i){var r=[];if(!e||1>n.length)return r;var a=e;for(e=null;a&&!(e=a.getAttribute(t))&&(a=a.parentNode)instanceof Element;);if(t=e)for(e=(t=h(t=t.split(" "))).next();!e.done;e=t.next()){e=e.value;for(var o=(a=h(n)).next();!o.done;o=a.next())if(i+(o=o.value).getAttribute("xml:id")==e){r.push(o);break}}return r}function cc(e,t){var n=null;if(Yu.test(e)){n=Yu.exec(e);var i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.b)/t.frameRate)+60*r+3600*i}else $u.test(e)?n=dc($u,e):qu.test(e)?n=dc(qu,e):Xu.test(e)?(n=Xu.exec(e),n=Number(n[1])/t.frameRate):Qu.test(e)?(n=Qu.exec(e),n=Number(n[1])/t.a):Zu.test(e)&&(n=dc(Zu,e));return n}function dc(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function hc(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function pc(){this.a=new Hu}function fc(){}function yc(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?Zt:Jt[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=sn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=an,e.line=Number(n[1]),n[2]&&(e.lineAlign=sn[n[2].toUpperCase()]))}function gc(e){if(null==(e=Br(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function vc(){this.a=null}function mc(e,t,n){var i,r,a;return(new Mi).I("payl",Bi((function(e){i=st(e)}))).I("iden",Bi((function(e){r=st(e)}))).I("sttg",Bi((function(e){a=st(e)}))).parse(e),i?function(e,t,n,i,r){if(e=new Xt(i,r,e),t&&(e.id=t),n)for(t=new Nr(n),n=Fr(t);n;)yc(e,n,[]),Ur(t),n=Fr(t);return e}(i,r,a,t,n):null}
/*
   @license
   EME Encryption Scheme Polyfill
   Copyright 2019 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
function bc(){}function Ec(){Vu?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Vu=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=kc):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function kc(e,t){var n=this;return f((function i(){var r;return N(i,(function(i){switch(i.j){case 1:return console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),T(i,Vu.call(n,e,t),2);case 2:return Dc(r=i.o)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Vu,i.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Ac,i.return(Ac.call(n,e,t)))}}))}))}function Ac(e,t){var n=this;return f((function i(){var r,a,o,s,l,u,c,d;return N(i,(function(i){switch(i.j){case 1:console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=Ic(e),a=[];for(var p=h(t),f=p.next();!f.done;f=p.next())o=f.value,s=_c(o.videoCapabilities,r),l=_c(o.audioCapabilities,r),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!l.length||((u=Object.assign({},o)).videoCapabilities=s,u.audioCapabilities=l,a.push(u));if(!a.length)throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return T(i,Vu.call(n,e,a),2);case 2:return d=i.o,i.return(new Rc(d,r))}}))}))}function _c(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Tc(){}function wc(){navigator.mediaCapabilities?(Ku=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Sc):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Sc(e){var t=this;return f((function n(){var i;return N(n,(function(n){switch(n.j){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),T(n,Ku.call(t,e),2);case 2:return i=n.o,e.keySystemConfiguration?Dc(i.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Ku,n.return(i)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Cc,n.return(Cc.call(t,e))):n.return(i)}}))}))}function Cc(e){var t=this;return f((function n(){var i,r,a,o,s,l,u;return N(n,(function(n){switch(n.j){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),i=null,e.keySystemConfiguration&&(r=e.keySystemConfiguration,a=r.keySystem,o=r.audio&&r.audio.encryptionScheme,s=r.video&&r.video.encryptionScheme,i=Ic(a),l={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},o&&o!=i||s&&s!=i)?n.return(l):T(n,Ku.call(t,e),2);case 2:return(u=n.o).keySystemAccess&&(u.keySystemAccess=new Rc(u.keySystemAccess,i)),n.return(u)}}))}))}function Rc(e,t){this.b=e,this.a=t,this.keySystem=e.keySystem}function Ic(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Dc(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Oc(){}function Pc(){Ec(),wc()}yn["application/ttml+xml"]=Hu,V("shaka.text.Mp4TtmlParser",pc),pc.prototype.parseInit=function(e){var t=!1;if((new Mi).I("moov",Ni).I("trak",Ni).I("mdia",Ni).I("minf",Ni).I("stbl",Ni).fa("stsd",Ui).I("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new ye(2,2,2007)},pc.prototype.parseInit=pc.prototype.parseInit,pc.prototype.parseMedia=function(e,t){var n=!1,i=[];if((new Mi).I("mdat",Bi(function(e){n=!0,i=i.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new ye(2,2,2007);return i},pc.prototype.parseMedia=pc.prototype.parseMedia,yn['application/mp4; codecs="stpp"']=pc,yn['application/mp4; codecs="stpp.ttml.im1t"']=pc,yn['application/mp4; codecs="stpp.TTML.im1t"']=pc,V("shaka.text.VttTextParser",fc),fc.prototype.parseInit=function(){},fc.prototype.parseInit=fc.prototype.parseInit,fc.prototype.parseMedia=function(e,t){var n=st(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new ye(2,2,2e3);var i=t.segmentStart;if(null==i&&(i=0,n[0].includes("X-TIMESTAMP-MAP"))){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(i=gc(new Nr(r[1]))))throw new ye(2,2,2e3);i=t.periodStart+(Number(a[1])/9e4-i)}}a=[];var o=n[0].split("\n");for(r=1;r<o.length;r++)if(/^Region:/.test(o[r])){var s=new Nr(o[r]),l=new dn;Fr(s),Ur(s);for(var u=Fr(s);u;){var c=l,d=u;(u=/^id=(.*)$/.exec(d))?c.id=u[1]:(u=/^width=(\d{1,2}|100)%$/.exec(d))?c.width=Number(u[1]):(u=/^lines=(\d+)$/.exec(d))?(c.height=Number(u[1]),c.heightUnits=2):(u=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.regionAnchorX=Number(u[1]),c.regionAnchorY=Number(u[2])):(u=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.viewportAnchorX=Number(u[1]),c.viewportAnchorY=Number(u[2])):/^scroll=up$/.exec(d)&&(c.scroll="up"),Ur(s),u=Fr(s)}a.push(l)}for(r=[],s=1;s<n.length;s++){if(u=o=n[s].split("\n"),d=i,o=a,1==u.length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0])o=null;else{l=null,u[0].includes("--\x3e")||(l=u[0],u.splice(0,1));var h=gc(c=new Nr(u[0])),p=Br(c,/[ \t]+--\x3e[ \t]+/g),f=gc(c);if(null==h||null==p||null==f)throw new ye(2,2,2001);for(u=new Xt(h+d,f+d,u.slice(1).join("\n").trim()),Ur(c),d=Fr(c);d;)yc(u,d,o),Ur(c),d=Fr(c);null!=l&&(u.id=l),o=u}o&&r.push(o)}return r},fc.prototype.parseMedia=fc.prototype.parseMedia,yn["text/vtt"]=fc,yn['text/vtt; codecs="vtt"']=fc,V("shaka.text.Mp4VttParser",vc),vc.prototype.parseInit=function(e){var t=!1;if((new Mi).I("moov",Ni).I("trak",Ni).I("mdia",Ni).fa("mdhd",function(e){0==e.version?(e.reader.M(4),e.reader.M(4),this.a=e.reader.G(),e.reader.M(4)):(e.reader.M(8),e.reader.M(8),this.a=e.reader.G(),e.reader.M(8)),e.reader.M(4)}.bind(this)).I("minf",Ni).I("stbl",Ni).fa("stsd",Ui).I("wvtt",(function(){t=!0})).parse(e),!this.a)throw new ye(2,2,2008);if(!t)throw new ye(2,2,2008)},vc.prototype.parseInit=vc.prototype.parseInit,vc.prototype.parseMedia=function(e,t){var n=this;if(!this.a)throw new ye(2,2,2008);var i,r=0,a=[],o=[],s=!1,l=!1,u=!1,c=null;if((new Mi).I("moof",Ni).I("traf",Ni).fa("tfdt",(function(e){s=!0,r=0==e.version?e.reader.G():e.reader.Db()})).fa("tfhd",(function(e){var t=e.flags;(e=e.reader).M(4),1&t&&e.M(8),2&t&&e.M(4),c=8&t?e.G():null})).fa("trun",(function(e){l=!0;var t=e.version,n=e.flags,i=(e=e.reader).G();1&n&&e.M(4),4&n&&e.M(4);for(var r=[],o=0;o<i;o++){var s={duration:null,sampleSize:null,Ed:null};256&n&&(s.duration=e.G()),512&n&&(s.sampleSize=e.G()),1024&n&&e.M(4),2048&n&&(s.Ed=0==t?e.G():e.pe()),r.push(s)}a=r})).I("mdat",Bi((function(e){u=!0,i=e}))).parse(e),!u&&!s&&!l)throw new ye(2,2,2008);var d=r,h=new Pi(new DataView(i.buffer,i.byteOffset,i.byteLength),0);return a.forEach((function(e){var i=e.duration||c,a=e.Ed?r+e.Ed:d;d=a+(i||0);var s=0;do{var l=h.G();s+=l;var u=null;"vttc"==ji(h.G())?8<l&&(u=h.$a(l-8)):h.M(l-8),i&&u&&o.push(mc(u,t.periodStart+a/n.a,t.periodStart+d/n.a))}while(e.sampleSize&&s<e.sampleSize)})),o.filter(Kt.Ia)},vc.prototype.parseMedia=vc.prototype.parseMedia,yn['application/mp4; codecs="wvtt"']=vc,V("shaka.util.Dom.createHTMLElement",(function(e){return document.createElement(e)})),V("shaka.util.Dom.createVideoElement",(function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e})),V("shaka.util.Dom.asHTMLElement",(function(e){return e})),V("shaka.util.Dom.asHTMLMediaElement",(function(e){return e})),V("shaka.util.Dom.removeAllChildren",(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})),V("EmeEncryptionSchemePolyfill",bc),bc.install=Ec,V("McEncryptionSchemePolyfill",Tc),Tc.install=wc,Rc.prototype.getConfiguration=function(){var e=this.b.getConfiguration();if(e.videoCapabilities)for(var t=h(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.a;if(e.audioCapabilities)for(n=(t=h(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.a;return e},Rc.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},V("EncryptionSchemePolyfills",Oc),Oc.install=Pc,e.Se&&(e.Se=Oc)}.call(i,n,n),i.shaka)t[r]=i.shaka[r]}()}));function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gt(e,t,n){return t&&yt(e.prototype,t),n&&yt(e,n),e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=kt(e);if(t){var r=kt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _t(this,n)}}function wt(e,t,n){return(wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kt(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function St(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,a=Math.max(r>=0?r:i-Math.abs(r),0);a<i;){if(n[a]===e)return!0;a++}return!1}}),Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var Rt=function(){function e(){ft(this,e)}return gt(e,null,[{key:"s4",value:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},{key:"generate",value:function(){return"".concat(this.s4()+this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4()).concat(this.s4()).concat(this.s4())}}]),e}(),It=function(e){return e&&"function"==typeof e.getTime?Math.trunc(e.getTime()/1e3):NaN},Dt=!N.isChrome&&!N.isChromecast&&!N.isSmartTvEnvironment,Ot=function(){function e(t){ft(this,e),this.httpOnly=t,this.protocol="http".concat(t?"":"s")}return gt(e,null,[{key:"isInternal",get:function(){return/(ef(-.*)?|publish\.api\.video|player)(\.qa01|\.local|\.dev)?\.globoi\.com$/.test(location.hostname)}},{key:"isLocalhost",get:function(){return["localhost","127.0.0.1"].includes(location.hostname)}},{key:"isGloboiDomain",get:function(){return/\.globoi\.com$/.test(location.hostname)}},{key:"isGloboDomain",get:function(){return!this.isInternal&&/\.globo\.com$/.test(location.hostname)}},{key:"playerId",get:function(){return this._playerId||(this._playerId=Rt.generate()),this._playerId}},{key:"hashQueryString",get:function(){var e="&version=".concat("1.1.0"),t="hash?".concat("resource_id=<%= resourceId %>").concat("<%= callback ? '&callback=' + callback : '' %>").concat(e).concat("&player=<%= player %>").concat("&tz=<%= tz %>").concat("&cdn=<%= cdn %>").concat("&profile=<%= profile %>");return Dt&&(t+="&ts=<%= ts %>"),t}}]),gt(e,[{key:"blackVideoUrl",get:function(){return"".concat(this.protocol,"://p.glbimg.com/black.mp4")}},{key:"blackVideoStreamingUrl",get:function(){return"".concat(this.protocol,"://p.glbimg.com/black.m3u8")}},{key:"blackDashUrl",get:function(){return"".concat(this.protocol,"://p.glbimg.com/black.mpd")}}],[{key:"get",value:function(t,n){return"qa1"===t&&(t="dev"),new e[t=e.isInternal?"dev"===t?"internalDev":"internal":t||"prod"](n)}}]),e}();Ot.local=re.extend(Ot,{get name(){return"local"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return"".concat(this.protocol,"://router.video.globo.com/cdn")},get hashTemplate(){return $e("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Ot.hashQueryString))},get playlistTemplate(){return $e("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/callback/<%= callback %>"))},get posterTemplate(){return $e("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))},get posterAdultTemplate(){return $e("".concat(this.protocol,"://a0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Ot.dev=re.extend(Ot,{get name(){return"dev"},get securityHost(){return"".concat(this.protocol,"://security.video.dev.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://router.video.dev.globoi.com/cdn")},get hashTemplate(){return $e("".concat(this.protocol,"://security.video.dev.globoi.com/videos/<%= videoId %>/").concat(Ot.hashQueryString))},get playlistTemplate(){return $e("".concat(this.protocol,"://api.globovideos.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/callback/<%= callback %>"))},get posterTemplate(){return $e("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))},get posterAdultTemplate(){return $e("".concat(this.protocol,"://a0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Ot.internalDev=re.extend(Ot,{get name(){return"internalDev"},get securityHost(){return"".concat(this.protocol,"://api.video.dev.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://router.video.dev.globoi.com/cdn")},get hashTemplate(){return $e("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(Ot.hashQueryString))},get playlistTemplate(){return $e("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/callback/<%= callback %>"))},get posterTemplate(){return $e("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))},get posterAdultTemplate(){return $e("".concat(this.protocol,"://a0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Ot.internal=re.extend(Ot,{get name(){return"internal"},get securityHost(){return"".concat(this.protocol,"://api.video.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://router.video.globo.com/cdn")},get hashTemplate(){return $e("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(Ot.hashQueryString))},get playlistTemplate(){return $e("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/callback/<%= callback %>"))},get posterTemplate(){return $e("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))},get posterAdultTemplate(){return $e("".concat(this.protocol,"://a0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Ot.prod=re.extend(Ot,{get name(){return"prod"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return"".concat(this.protocol,"://router.video.globo.com/cdn")},get hashTemplate(){return $e("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Ot.hashQueryString))},get playlistTemplate(){return $e("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/callback/<%= callback %>"))},get posterTemplate(){return $e("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))},get posterAdultTemplate(){return $e("".concat(this.protocol,"://a0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}});var Pt=function(e,t){var n=t+1-e.toString().length;return new Array(Math.max(0,n)).join("0")+e},xt="0123456789abcdef",Lt=function(e){for(var t="",n=e.length,i=0;i<n;i+=3)for(var r=e.charCodeAt(i)<<16|(i+1<n?e.charCodeAt(i+1)<<8:0)|(i+2<n?e.charCodeAt(i+2):0),a=0;a<4;a++)8*i+6*a>8*e.length?t+="":t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(r>>>6*(3-a)&63);return t},Mt=function(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);t+=xt.charAt(i>>>4&15)+xt.charAt(15&i)}return t},Nt=function(e){var t=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},n=function(e,n,i,r,a,o){return t((s=t(t(n,e),t(r,o)))<<(l=a)|s>>>32-l,i);var s,l},i=function(e,t,i,r,a,o,s){return n(t&i|~t&r,e,t,a,o,s)},r=function(e,t,i,r,a,o,s){return n(t&r|i&~r,e,t,a,o,s)},a=function(e,t,i,r,a,o,s){return n(t^i^r,e,t,a,o,s)},o=function(e,t,i,r,a,o,s){return n(i^(t|~r),e,t,a,o,s)};return function(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var s=1732584193,l=-271733879,u=-1732584194,c=271733878,d=0;d<e.length;d+=16){var h=s,p=l,f=u,y=c;s=i(s,l,u,c,e[d+0],7,-680876936),c=i(c,s,l,u,e[d+1],12,-389564586),u=i(u,c,s,l,e[d+2],17,606105819),l=i(l,u,c,s,e[d+3],22,-1044525330),s=i(s,l,u,c,e[d+4],7,-176418897),c=i(c,s,l,u,e[d+5],12,1200080426),u=i(u,c,s,l,e[d+6],17,-1473231341),l=i(l,u,c,s,e[d+7],22,-45705983),s=i(s,l,u,c,e[d+8],7,1770035416),c=i(c,s,l,u,e[d+9],12,-1958414417),u=i(u,c,s,l,e[d+10],17,-42063),l=i(l,u,c,s,e[d+11],22,-1990404162),s=i(s,l,u,c,e[d+12],7,1804603682),c=i(c,s,l,u,e[d+13],12,-40341101),u=i(u,c,s,l,e[d+14],17,-1502002290),l=i(l,u,c,s,e[d+15],22,1236535329),s=r(s,l,u,c,e[d+1],5,-165796510),c=r(c,s,l,u,e[d+6],9,-1069501632),u=r(u,c,s,l,e[d+11],14,643717713),l=r(l,u,c,s,e[d+0],20,-373897302),s=r(s,l,u,c,e[d+5],5,-701558691),c=r(c,s,l,u,e[d+10],9,38016083),u=r(u,c,s,l,e[d+15],14,-660478335),l=r(l,u,c,s,e[d+4],20,-405537848),s=r(s,l,u,c,e[d+9],5,568446438),c=r(c,s,l,u,e[d+14],9,-1019803690),u=r(u,c,s,l,e[d+3],14,-187363961),l=r(l,u,c,s,e[d+8],20,1163531501),s=r(s,l,u,c,e[d+13],5,-1444681467),c=r(c,s,l,u,e[d+2],9,-51403784),u=r(u,c,s,l,e[d+7],14,1735328473),l=r(l,u,c,s,e[d+12],20,-1926607734),s=a(s,l,u,c,e[d+5],4,-378558),c=a(c,s,l,u,e[d+8],11,-2022574463),u=a(u,c,s,l,e[d+11],16,1839030562),l=a(l,u,c,s,e[d+14],23,-35309556),s=a(s,l,u,c,e[d+1],4,-1530992060),c=a(c,s,l,u,e[d+4],11,1272893353),u=a(u,c,s,l,e[d+7],16,-155497632),l=a(l,u,c,s,e[d+10],23,-1094730640),s=a(s,l,u,c,e[d+13],4,681279174),c=a(c,s,l,u,e[d+0],11,-358537222),u=a(u,c,s,l,e[d+3],16,-722521979),l=a(l,u,c,s,e[d+6],23,76029189),s=a(s,l,u,c,e[d+9],4,-640364487),c=a(c,s,l,u,e[d+12],11,-421815835),u=a(u,c,s,l,e[d+15],16,530742520),l=a(l,u,c,s,e[d+2],23,-995338651),s=o(s,l,u,c,e[d+0],6,-198630844),c=o(c,s,l,u,e[d+7],10,1126891415),u=o(u,c,s,l,e[d+14],15,-1416354905),l=o(l,u,c,s,e[d+5],21,-57434055),s=o(s,l,u,c,e[d+12],6,1700485571),c=o(c,s,l,u,e[d+3],10,-1894986606),u=o(u,c,s,l,e[d+10],15,-1051523),l=o(l,u,c,s,e[d+1],21,-2054922799),s=o(s,l,u,c,e[d+8],6,1873313359),c=o(c,s,l,u,e[d+15],10,-30611744),u=o(u,c,s,l,e[d+6],15,-1560198380),l=o(l,u,c,s,e[d+13],21,1309151649),s=o(s,l,u,c,e[d+4],6,-145523070),c=o(c,s,l,u,e[d+11],10,-1120210379),u=o(u,c,s,l,e[d+2],15,718787259),l=o(l,u,c,s,e[d+9],21,-343485551),s=t(s,h),l=t(l,p),u=t(u,f),c=t(c,y)}return[s,l,u,c]}(function(e){var t,n=new Array(e.length>>2);for(t=0;t<n.length;t++)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}(e),8*e.length))}(function(e,t){var n,i,r="",a=-1;for(e+=t.substr(1,8);++a<e.length;)n=e.charCodeAt(a),i=a+1<e.length?e.charCodeAt(a+1):0,55296<=n&&n<=56319&&56320<=i&&i<=57343&&(n=65536+((1023&n)<<10)+(1023&i),a++),n<=127?r+=String.fromCharCode(n):n<=2047?r+=String.fromCharCode(192|n>>>6&31,128|63&n):n<=65535?r+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):n<=2097151&&(r+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return r}(e,"=0xAC10FD"))},Ut=function(e){return Lt(Nt(e))},Bt=function(){var e=Math.round(1e10*Math.random()).toString();return Pt(e,10)},Ft=function(e){var t=e.substr(0,2),n=e.substr(2,1),i=e.substr(3,10),r=e.substr(13,10),a=e.substr(24,22),o=Pt(parseInt((new Date).getTime()/1e3,10)+3600,10),s=Bt();return t+n+i+r+o+s+Ut(a+o+s)},jt=function(e){var t=N.isMobile?3:1,n=e.substr(0,2),i=e.substr(2,10),r=e.substr(12,10),a=e.substr(22,22),o=Pt(Number(i)+3600,10),s=Bt();return"05"+n+i+r+o+s+t+Ut(a+o+s+t)},Ht={signedHash:function(e){var t=e.substr(0,2);return["04","14"].includes(t)?Ft(e):["03","13"].includes(t)||["02","12"].includes(t)?jt(e):""},hexGrf:function(e){return Mt(Nt(e))}},Vt=function(){return new Date},Kt=function(){return Vt().getTime()},zt=function(e,t,n){return t.replace(/\[/g,".").replace(/]/g,"").split(".").filter(Boolean).every((function(t){return!(t&&void 0===(e=e[t]))}))?e:n},Gt=function(){var e=-Vt().getTimezoneOffset(),t=Math.abs(e)/60,n=Math.abs(e)%60;return"".concat(0===e?"":e>0?"+":"-").concat(Pt(t,2),":").concat(Pt(n,2))},Wt=function(e){var t=document.cookie.match("(^|;) ?".concat(e,"=([^;]*)(;|$)"));return t?window.unescape(t[2]):null},Yt=function(e){var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toGMTString()},$t={applySizeClass:function(e,t){t&&"number"==typeof t&&(e.removeClass("w960 w640 w540 w480 w360"),t<=360?e.addClass("w360"):t<=480?e.addClass("w480"):t<540?e.addClass("w540"):t<=640?e.addClass("w640"):e.addClass("w960"))},toLowerCase:function(e){return"string"==typeof e?e.toLowerCase():e},embedScript:function(e){var t=x.Deferred(),n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=e,n.onload=function(){t.resolve()},n.onerror=function(e){t.reject(e)},document.head.appendChild(n),t.promise()},get:zt,getCookie:Wt,getCurrentDate:Vt,getCurrentTime:Kt,getExpiresDateInGMT:Yt,getHostname:function(){return location.hostname},getHostAndPathName:function(){var e=(location.pathname||"").split("/")||[];return location.hostname+(e.length>0?"/".concat(e[1]):"")},isNaN:function(e){return e!=e},iso8601TimezoneOffset:Gt,loadUrlAsImage:function(e){var t=new Image;return t.src=e,t},now:function(){return window.performance&&window.performance.now&&performance.now()||Date.now()},percent:function(e,t){return 0===e?e:e/t*100},toDurationString:function(e){var t,n=e/6e4,i=[0,1,2,3,4,5,7,10];for(t=0;t<i.length&&!(n<i[t]);t++);return t<i.length?"".concat(Pt(i[t-1],2),":0").concat(0===t?0:1," - ").concat(Pt(i[t],2),":00"):"10:01 +"},secondsToMillis:function(e){return 1e3*e>>0},copyToClipboard:function(e,t){if(t){var n=x('<textarea style="opacity:0" class="copytextarea"/>');n.text(e),t.append(n[0]);var i=t.find(".copytextarea")[0],r=document.activeElement;i.focus(),i.select();var a=document.execCommand("copy");return n.remove(),r.focus(),a}},mergePlugins:function(e,t){var n=[];return e.concat(t).filter((function(e){if(!e)return!1;var t=e.prototype.name,i=-1===n.indexOf(t);return i&&n.push(t),i}))},hexGrf:Ht&&Ht.hexGrf},qt={jsonp:function(e){var t=new x.Deferred;e.callbackName=e.callbackName||"json_callback",e.timeout=e.timeout||15e3,window[e.callbackName]=function(e){qt.isErrorObject(e)?t.reject(e):t.resolve(e)};var n=x("head")[0],i=document.createElement("script");return i.setAttribute("src",e.url),i.setAttribute("async","async"),i.onload=i.onreadystatechange=function(t){i.readyState&&!/loaded|complete/.test(i.readyState)||(e.timeoutId&&window.clearTimeout(e.timeoutId),i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=void 0)},i.onerror=function(){t.reject({error:!0,message:"jsonp load error"})},n.insertBefore(i,n.firstChild),e.error&&(e.timeoutId=window.setTimeout(e.error,e.timeout)),t.promise()},isErrorObject:function(e){return e&&e.http_status_code&&200!==e.http_status_code}},Xt={isFullscreen:function(){return document.webkitIsFullScreen||document.mozFullScreen},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},cancelFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},Qt=N.isSmartTvEnvironment?["google","$YB"]:["google","google.ima","$YB"],Zt=function(){function e(){ft(this,e),this.loadScriptsIntervalId=null,this.loadScriptsAttempts=5}return gt(e,[{key:"ready",value:function(){return!Qt.filter((function(e){return void 0===zt(window,e,void 0)})).length}},{key:"isAvailable",value:function(){var e=this,t=new x.Deferred;return this.loadScriptsIntervalId=setInterval((function(){e.ready()?(clearInterval(e.loadScriptsIntervalId),t.resolve()):e.loadScriptsAttempts--,e.loadScriptsAttempts||(clearInterval(e.loadScriptsIntervalId),t.reject())}),200),t.promise()}}]),e}(),Jt=window.WM&&window.WM.version||"legacy_api",en=function(e){return"object"===pt(e.playerExperiments)},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!en(e))return"";var n=e.playerExperiments,i=n&&n[t];return i&&i.alternative||""},nn=function(){function e(){ft(this,e)}return gt(e,null,[{key:"keyspaceFor",value:function(e){return"wm.player.".concat(e)}},{key:"load",value:function(e,t){return this.loadRaw(this.keyspaceFor(e),t)}},{key:"loadRaw",value:function(e,t){if(N.hasLocalstorage&&localStorage[e])return t?t(localStorage[e]):localStorage[e]}},{key:"store",value:function(e,t){return this.storeRaw(this.keyspaceFor(e),t)}},{key:"storeRaw",value:function(e,t){if(N.hasLocalstorage)try{return localStorage[e]=t,!0}catch(e){return!1}return!1}}]),e}(),rn={code:"default-error",description:"There was a problem trying to load the video.",reportAs:"ERROR",internalError:!0},an={DEFAULT_ERROR:rn,AUTH_REQUIRED:bt(bt({},rn),{},{code:"auth-required",description:"Authentication required.",reportAs:"INFO"}),DEVICE_NOT_AUTHORIZED:bt(bt({},rn),{},{code:"DEV",description:"Device needs register to play content.",reportAs:"INFO"}),DEVICE_NOT_SUPPORTED:bt(bt({},rn),{},{code:"DNS",description:"Device not supported",reportAs:"INFO"}),GEOFENCING:bt(bt({},rn),{},{code:"geofencing",description:"This video cannot be played in the current location.",reportAs:"INFO"}),GEO_BLOCKED:bt(bt({},rn),{},{code:"GB",description:"This video cannot be played in the current region.",reportAs:"INFO"}),HASH_LOAD_ERROR:bt(bt({},rn),{},{code:"security-load-error",description:"Error loading hash."}),PLAYER_NOT_RECOGNIZED:bt(bt({},rn),{},{code:"PNR",description:"Player Not Recognized."}),RESOURCE_LOAD_ERROR:bt(bt({},rn),{},{code:"resource-load-error",description:"Error loading resource."}),LOCATION_UNAVAILABLE:bt(bt({},rn),{},{code:"location-unavailable",description:"Could not play content. Location is unavailable.",reportAs:"INFO"}),NOT_ALLOWED_DOMAIN:bt(bt({},rn),{},{code:"not-allowed-domain",description:"The video cannot be played on the current domain.",reportAs:"INFO"}),NOT_FOUND:bt(bt({},rn),{},{code:"NF",description:"Content not available.",reportAs:"INFO"}),PLAYLIST_LOAD_ERROR:bt(bt({},rn),{},{code:"playlist-load-error",description:"Error loading video resources."}),RESTRICTED_CONTENT:bt(bt({},rn),{},{code:"restricted-content-error",description:"Restricted content.",reportAs:"INFO"}),SIMULTANEOUS_ACCESS:bt(bt({},rn),{},{code:"LCK",description:"There are too much sessions currently active on the same account.",reportAs:"INFO"}),STREAMING_PAUSE_TIME_EXPIRED:bt(bt({},rn),{},{code:"streaming-pause-time-expired",description:"The video was paused for a long time.",reportAs:"INFO"}),SUBSCRIBERS_ONLY:bt(bt({},rn),{},{code:"AUT",description:"Exclusive content for subscribers.",reportAs:"INFO"}),UNSUPPORTED_BROWSER:bt(bt({},rn),{},{code:"unsupported-browser",description:"Browser not supported.",reportAs:"INFO"}),UNSUPPORTED_MOBILE_DEVICE:bt(bt({},rn),{},{code:"unsupported-mobile-device",description:"Mobile device not supported.",reportAs:"INFO"}),TIMESTAMP_ERROR:bt(bt({},rn),{},{code:"TER",description:"Timestamp error.",reportAs:"INFO"})},on=function(){function e(){ft(this,e)}return gt(e,null,[{key:"getLocation",value:function(){var e=new x.Deferred;return navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.resolve(t)}),(function(t){e.reject(bt({error:t},an.LOCATION_UNAVAILABLE))})):e.reject(an.LOCATION_UNAVAILABLE),e}}]),e}(),sn=function(){function e(){ft(this,e)}return gt(e,null,[{key:"params",get:function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(t," "))},r=window.location.search.substring(1),a={};e=n.exec(r);)a[i(e[1]).toLowerCase()]=i(e[2]);return a}}]),e}(),ln=function(){var e=0,t=sn.params.s||"",n=t.match(/[0-9]+[hms]+/g)||[];if(n.length>0){var i={h:3600,m:60,s:1};n.forEach((function(t){if(t){var n=t[t.length-1],r=parseInt(t.slice(0,t.length-1),10);e+=r*i[n]}}))}else t&&(e=parseInt(t,10));return e},un=function(){function e(){ft(this,e)}return gt(e,null,[{key:"getProviderCookieName",value:function(e){return e?"WMPTOKEN_".concat(e):"GLBID"}},{key:"hasGlbId",value:function(){var e=Wt("GLBID");return"string"==typeof e&&e.length>10}},{key:"hasTokenForProvider",value:function(e){if(!e)return this.hasGlbId();var t=this.getProviderCookieName(e);return!!t&&"string"==typeof Wt(t)}},{key:"isExperimentEnabled",value:function(e,t){var n="experiment.".concat(e),i=nn.load(n,parseFloat);return i||(i=Math.random(),nn.store(n,i)),i<=t}},{key:"uid",get:function(){var e="user.uid",t=nn.load(e);return t||(t=Rt.generate(),nn.store(e,t)),t}}]),e}(),cn={hasPlayerElement:function(e){if(e&&e.childNodes.length>0){var t=Array.prototype.slice.call(e.childNodes).find((function(e){return"DIV"===e.tagName&&-1!==e.id.indexOf("wp3-player-")}));return t&&!!document.getElementById(t.id)}return!1},hasChildElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=e.id||"function"==typeof e.attr&&e.attr("id"),i="#".concat(n," ").concat(t),r=!!document.querySelectorAll(i).length;return r}},isIframe:function(){return window.top!==window}},dn=new(function(){function e(){ft(this,e),this.sessions={}}return gt(e,[{key:"startSession",value:function(e){this.sessions[e]=Rt.generate()}},{key:"getVideoSessionId",value:function(e){return this.sessions[e]}},{key:"storeLockId",value:function(e){this.sessions.lockId=e}},{key:"getLockId",value:function(){return this.sessions.lockId}}]),e}()),hn="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO=document.createElement("video"),window.WM_PLAYER_VIDEO_TAG_TEST_MUTE=document.createElement("video");var pn=new(function(){function e(){ft(this,e),this._deferred=new x.Deferred,this.playerHasConsent=!1,this._setBrowserFlags()}return gt(e,[{key:"isAutoPlayMutedAllowed",value:function(e){return this.isAvailable(!0)&&e.autoPlay}},{key:"allowAutoplay",value:function(e){return e.autoPlay&&this.isAvailable(e.mute)||N.isSmartTvEnvironment&&e.autoPlay||N.isChromecast}},{key:"onAutoplayAvailable",value:function(e,t,n){var i=this;return this._deferred.then((function(){i.allowAutoplay(t)?e():"function"==typeof n&&n()}))}},{key:"isAvailable",value:function(e){return this.playerHasConsent||this.isAllowedWithAudio||e&&this.isAllowedWithoutAudio}},{key:"consent",value:function(){this.playerHasConsent=!0}},{key:"_setBrowserFlags",value:function(){var e=this;if(N.isSmartTvEnvironment||N.isChromecast)this._deferred.resolve();else{var t=this._createVideoElement(hn,!1),n=this._createVideoElement(hn,!0);N.isMobile?this.isAllowedWithAudio=!1:this._setFlag(t,"isAllowedWithAudio"),this._setFlag(n,"isAllowedWithoutAudio"),setTimeout((function(){return e._deferred.resolve()}),5e3)}}},{key:"_setFlag",value:function(e,t){var n=this,i=e.play();i?i.then((function(){n[t]=!0}),(function(){n[t]=!1})).then((function(){return n._resolve()})):(this[t]=!N.isMobile,this._resolve())}},{key:"_resolve",value:function(){"isAllowedWithAudio"in this&&"isAllowedWithoutAudio"in this&&this._deferred.resolve()}},{key:"_createVideoElement",value:function(e,t){var n=t?window.WM_PLAYER_VIDEO_TAG_TEST_MUTE:window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO;return n.src=e,n.muted=t,n.playsInline=!0,n}}]),e}()),fn=function(e){try{if("object"===pt(e))return JSON.stringify(e)}catch(e){}return e},yn={html5_video:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls_fairplay_playback:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls:function(e){return e.raw.type===dt.ErrorTypes.NETWORK_ERROR&&e.raw.response&&!(e.raw.response.code>=400&&e.raw.response.code<500)},dash_shaka_playback:function(e){var t=e.raw.category===ht.util.Error.Category.NETWORK||e.raw.detail&&e.raw.detail.category===ht.util.Error.Category.NETWORK;return e.raw.code===ht.util.Error.Code.BAD_HTTP_STATUS&&e.raw.data&&!(e.raw.data[1]>=400&&e.raw.data[1]<500)||t}},gn=function(e,t){return yn[e]&&yn[e](t)},vn=function(e,t){return t&&"function"==typeof t.getTime?Math.trunc(t.getTime()/1e3+e):NaN},mn=function(e){var t=e.getCurrentTime(),n=new Date(e.getProgramDateTime());return vn(t,n)},bn=function(e,t){return mn(e)-t},En=function(e,t){return e.getCurrentTime()-bn(e,t)},kn=bt(bt({},$t),{},{Ajax:qt,getExperimentsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!en(e))return[];var t=Object.keys(e.playerExperiments)||[],n=t.map((function(t){var n=e.playerExperiments[t];return n&&n.alternative||""}))||[];return n=n.filter((function(e){return""!==e}))},getExperimentAlternative:tn,Fullscreen:Xt,getDeviceType:function(){return N.isChromecast||N.isMobile?"mobile":"desktop"},getPlatformName:function(e){return"web-".concat(e)},isNaN:isNaN,LocalStorage:nn,Location:on,QueryString:sn,toQueryString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return e[t]||""===e[t]||0===e[t]},n=encodeURIComponent,i=Object.keys(e);return i.filter(t).map((function(t){return"".concat(n(t),"=").concat(n(e[t]))})).join("&")},seekStringToSeconds:ln,rstr2hex:Mt,rstr2b64:Lt,zeroPad:Pt,User:un,Uid:Rt,registerGlobal:function(e){Qt.push(e)},GlobalsManager:Zt,getUnixTimestamp:It,truncateTimeSeconds:function(e){var t=new Date(1e3*e);return t.setSeconds(0,0),It(t)},isTimestampOnHashNeeded:Dt,DOM:cn,API_VERSION:Jt,convertToString:fn,autoplayManager:pn,session:dn,checkRecoverableError:gn,getTimeFromPosition:vn,getCurrentTime:mn,getLiveDifferenceFromTime:bn,getPositionFromTime:En}),An={getStyleFrom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""},n=t||{},i=$e(e.toString())(n);return n.playerId&&(i=i.replace(/\#wp3-player-0/g,"#wp3-player-".concat(n.playerId))),x('<style class="clappr-style"></style>').html(i)}},_n=function e(){ft(this,e)};_n.WM_PLAY_REQUESTED="wm:play:requested",_n.WM_PLAY_REQUESTED_READY="wm:play:requested:ready",_n.CHROMECAST_SCRIPT_ERROR="chromecast:script:error",_n.CHROMECAST_SCRIPT_LOADED="chromecast:script:loaded",_n.CHROMECAST_API_ERROR="chromecast:api:error",_n.CHROMECAST_API_READY="chromecast:api:ready",_n.CHROMECAST_INITIALIZE_ERROR="chromecast:initialize:error",_n.CHROMECAST_INITIALIZE_SUCCESS="chromecast:initialize:success",_n.CHROMECAST_AVAILABLE="chromecast:available",_n.CHROMECAST_UNAVAILABLE="chromecast:unavailable",_n.CHROMECAST_LAUNCH_REQUEST="chromecast:launch:request",_n.CHROMECAST_LAUNCH_ERROR="chromecast:launch:error",_n.CHROMECAST_LAUNCH_SUCCESS="chromecast:launch:success",_n.CHROMECAST_MEDIA_LOAD_ERROR="chromecast:mediaload:error",_n.CHROMECAST_MEDIA_LOAD_SUCCESS="chromecast:mediaload:success",_n.CHROMECAST_MEDIA_WATCHING="chromecast:media:watching",_n.CHROMECAST_MEDIA_STOP_WATCHING="chromecast:mediastop:watching",_n.DFP_MANAGER_LOADED="dfp:manager:loaded",_n.DFP_ENABLE="dfp:enable",_n.DFP_DISABLE="dfp:disable",_n.DFP_AD_LOADED="dfp:ad:loaded",_n.DFP_AD_CLOSED="dfp:ad:closed",_n.DFP_AD_STARTED="dfp:ad:started",_n.DFP_AD_RESUME="dfp:playback:resume",_n.DFP_AD_PAUSE="dfp:playback:pause",_n.DFP_AD_CLICKED="dfp:ad:clicked",_n.DFP_AD_COMPLETED="dfp:ad:completed",_n.DFP_AD_SKIPPED="dfp:ad:skipped",_n.DFP_AD_NOTSERVED="dfp:ad:notserved",_n.DFP_AD_ERROR="dfp:ad:error",_n.DFP_AD_METADATA="dfp:metadata",_n.DFP_ALL_ADS_COMPLETED="dfp:allads:completed",_n.DFP_CONTENT_PAUSE="dfp:content:pause",_n.DFP_CONTENT_RESUME="dfp:content:resume",_n.DFP_CONTENT_STARTED="dfp:content:started",_n.DFP_CONTENT_ENDED="dfp:content:ended",_n.DFP_FINISHED="dfp:finished",_n.YOUBORA_TIMEMARK="youbora:timemark",_n.DID_LOAD_CUEPOINTS="wm:didloadcuepoints",_n.DID_REACH_CUEPOINT="wm:didreachcuepoint",_n.DID_LOAD_EPG="wm:didloadepg",_n.DID_CHANGE_CURRENT_PROGRAM="wm:didchangecurrentprogram",_n.WM_STREAMING_DATA_LOADED="wm:streamingdata:loaded",_n.WM_VIDEO_METADATA_LOADED="wm:videometadata:loaded",_n.WM_VIDEO_METADATA_ERROR="wm:videometadata:error",_n.WM_RESOURCE_LOADED="wm:resource:loaded",_n.WM_RESOURCE_SELECTED="wm:resource:selected",_n.WM_REQUEST_HASH="wm:request:hash",_n.WM_HASH_RECEIVED="wm:hash:received",_n.WM_RESOURCE_READY="wm:resource:ready",_n.WM_RESOURCE_ERROR="wm:resource:error",_n.WM_SETTINGS_SHOW="wm:settings:show",_n.WM_VOLUME_SHOW="wm:volume:show",_n.WM_VOLUME_HIDE="wm:volume:hide",_n.WM_MUTED="wm:muted",_n.WM_UNMUTED="wm:unmuted",_n.WM_SHARE_SHOW="wm:share:show",_n.WM_SHARE_HIDE="wm:share:hide",_n.WM_SPINNER_START="wm:spinner:start",_n.WM_SPINNER_STOP="wm:spinner:stop",_n.WM_SETTINGS_HIDE="wm:settings:hide",_n.WM_SETTINGS_OPTIONS_CHANGED="wm:settings:options:changed",_n.WM_SETTINGS_LEVEL_SELECTED="wm:settings:level:selected",_n.WM_LEVELSELECTOR_READY="wm:levelselector:ready",_n.WM_AUDIOSELECTOR_READY="wm:audioselector:ready",_n.STREAMSENSE_READY="streamsense:ready",_n.WM_SUBTITLE_CHANGED="wm:subtitle:changed",_n.WM_SUBTITLE_CONTENT_CHANGED="wm:subtitle:content:changed",_n.WM_SUBTITLE_AVAILABLE="wm:subtitle:available",_n.WM_AUDIO_CHANGED="wm:audio:changed",_n.WM_AUDIO_AVAILABLE="wm:audio:available",_n.WM_WROOM_AUTHORIZE="wm:authorize:wroom",_n.WM_WROOM_AUTHORIZED="wm:authorized:wroom",_n.WM_WROOM_WAITING="wm:waiting:wroom",_n.WM_PLAYBACK_CAN_PLAY="wm:playback:canplay",_n.WM_PLAYBACK_WILL_PLAY="wm:playback:willplay",_n.WM_PLAYBACK_BUILT="wm:playback:built",_n.WM_PIP_ADDED="wm:pip:added",_n.WM_PIP_DISCARDED="wm:pip:discarded",_n.WM_MASTER_ADDED="wm:master:added",_n.WM_MASTER_CHANGED="wm:master:changed",_n.WM_PIPTOMASTER="wm:piptomaster",_n.WM_MASTERTOPIP="wm:mastertopip",_n.WM_STATS_REPORTED="wm:stats:reported",_n.WM_LOCATION_AVAILABLE="wm:location:available",_n.WM_HASH_EXPIRED="wm:hash:expired",_n.WM_GA_UNTRACKED_EVENT="wm:ga:untracked:event",_n.WILL_SELECT_FALLBACK_SOURCE="will:select:fallback:source",_n.FALLBACK_SOURCE_SELECTED="fallback:source:selected",_n.WM_BITRATE_CAP="wm:bitrate:cap",_n.PLAYER_PIP_ADDED="player:pip:added",_n.PLAYER_PIP_DISCARDED="player:pip:discarded",_n.PLAYER_MASTER_ADDED="player:master:added",_n.PLAYER_MASTER_CHANGED="player:master:changed",_n.PLAYER_PIPTOMASTER="player:piptomaster",_n.PLAYER_CAN_PLAY="player:canplay",_n.WILL_SHOW_MODAL_ELEMENT="will:show:mediacontrol:element:modal",_n.DID_HIDE_MODAL_ELEMENT="did:hide:mediacontrol:element:modal",_n.MEDIACONTROL_MODAL_SHOW="mediacontrol:showmodal",_n.MEDIACONTROL_MODAL_HIDE="mediacontrol:hidemodal",_n.MEDIACONTROL_KEEPVISIBLE="mediacontrol:keepvisible",_n.MEDIACONTROL_ITEMCLICKED="mediacontrol:itemclicked",_n.MEDIACONTROL_DOUBLE_TAP="mediacontrol:doubletap",_n.WILL_QUICK_SEEK="will:quickseek",_n.WILL_SHOW_QUICK_SEEK_HINT="will:show:quick:seek:hint",_n.WILL_HIDE_QUICK_SEEK_HINT="will:hide:quick:seek:hint",_n.PLAYER_MEDIACONTROL_SHOW="player:mediacontrol:show",_n.PLAYER_MEDIACONTROL_HIDE="player:mediacontrol:hide",_n.SKIP_BUTTON_SHOW="skip:button:show",_n.SKIP_BUTTON_CLICKED="skip:button:clicked",_n.BACK_BUTTON_CLICKED="back:button:clicked",_n.TAP_TO_UNMUTE_CLICKED="taptounmute:clicked",_n.TAP_TO_UNMUTE_SHOW="taptounmute:show",_n.WILL_AUTO_SKIP_RECAP="will:auto:skip:recap",_n.START_DRAGGING_SEEKBAR="start:dragging:seekbar",_n.STOP_DRAGGING_SEEKBAR="stop:dragging:seekbar",_n.SIMULCAST_PING="simulcastPing",_n.SHOW_HEADER_REQUESTED="show:header:requested",_n.WILL_SHOW_HEADER="will:show:header",_n.DID_SHOW_HEADER="did:show:header",_n.CLOSE_HEADER_REQUESTED="close:header:requested",_n.WILL_CLOSE_HEADER="will:close:header",_n.DID_CLOSE_HEADER="did:close:header",_n.WILL_SHOW_DRAWER="will:show:drawer",_n.DID_SHOW_DRAWER="did:show:drawer",_n.DID_SHOW_DRAWER_HINT="did:show:drawer:hint",_n.WILL_HIDE_DRAWER="will:hide:drawer",_n.DID_HIDE_DRAWER="did:hide:drawer",_n.DID_HIDE_DRAWER_HINT="did:hide:drawer:hint",_n.HIDE_DRAWER_REQUESTED="hide:drawer:requested",_n.SHOW_DRAWER_REQUESTED="show:drawer:requested",_n.DRAWER_HAS_PLACEHOLDER="drawer:has:placeholder",_n.SHOW_HEADER_REQUESTED="show:header:requested",_n.SYNC_DRAWER_STATE_REQUEST="sync:drawer:state:request",_n.SYNC_DRAWER_STATE_RESPONSE="sync:drawer:state:response",_n.DID_SHOW_OVERLAY="did:show:overlay",_n.DID_HIDE_OVERLAY="did:hide:overlay";var Tn={code:"AUT",http_status_code:403},wn={code:"invalid-video"},Sn="globo",Cn="GET",Rn={hlsMinimumDvrSize:120,playback:{controls:!0,preload:"none",playInline:!0,recycleVideo:N.isMobile},allowLocation:!1,disableVideoTagContextMenu:!0,maxQualityLevel:"max",skipWaitingRoom:!1},In=function(e){Et(n,e);var t=Tt(n);function n(){return ft(this,n),t.apply(this,arguments)}return gt(n,[{key:"_addContainerEventListeners",value:function(){wt(kt(n.prototype),"_addContainerEventListeners",this).call(this);var e=this.core.getCurrentPlayback();this.listenTo(e,_n.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(e,_n.WM_PLAYBACK_CAN_PLAY,this.onCanPlay)}},{key:"onCanPlay",value:function(){this.trigger(_n.PLAYER_CAN_PLAY)}},{key:"onResourceReady",value:function(e){if(this.options.onAuthorized){var t=e&&e.selectedResource&&e.selectedResource.hashData;t&&this.options.onAuthorized(t)}}},{key:"version",value:function(){return n.version}},{key:"allVersions",value:function(){return n.allVersions}},{key:"resize",value:function(e){x(this.element).css({width:e.width,height:e.height}),this.core&&wt(kt(n.prototype),"resize",this).call(this,e)}},{key:"eventsMapping",get:function(){return Object.assign(wt(kt(n.prototype),"eventsMapping",this),{onCanPlay:_n.PLAYER_CAN_PLAY})}},{key:"defaultOptions",get:function(){return Rn}}],[{key:"version",get:function(){return"1.1.0"}},{key:"allVersions",get:function(){return{Player:n.version,Clappr:st.version}}}]),n}(st.Player);if(!window.console){window.console={log:function(){}}}st.Log.setLevel(st.Log.LEVEL_WARN);var Dn=window.WM&&window.WM.Settings||{},On=Dn&&Dn.Domains||[],Pn=kn.DOM.isIframe,xn=function(e){Et(n,e);var t=Tt(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ft(this,n);var i=bt(bt({},Rn),e);i.env=Ot.get(i.env,i.httpOnly);var r=!(Ot.isLocalhost||Ot.isGloboDomain),a=N.isSafari||N.isiOS||N.isSmartTvEnvironment,o=N.isMobile&&(Pn()||i.isIFrame);return N.preventUsingCookies=r||a||o,t.call(this,i)}return gt(n,[{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}}]),gt(n,[{key:"attachTo",value:function(e){x(e).html(""),this.element=e,this.options.parentElement=e,this.options.customStyle&&this._renderCustomStyle(e,this.options.customStyle),this.core&&this.core.destroy(),wt(kt(n.prototype),"attachTo",this).call(this,e),this.core.$el.attr("id","wp3-player-".concat(this.core.options.playerId)),this.core.$el.addClass("clappr-player")}},{key:"_renderCustomStyle",value:function(e,t){var n=An.getStyleFrom(t,{playerId:this.options.playerId});x(e).append(n)}}]),n}(In);N.supportsFakeLocation=/puffin/i.test(navigator.userAgent),xn.isAllowedDomain=function(e){return!Dn.Domains||On.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||st;var Ln=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ft(this,e),this.options=n,this.id=t.id,this.title=t.title,this.kind=t.kind,this.program=t.program,this.channel=t.channel,this.category=t.category,this.createdAt=t.created_at,this.exhibitedAt=t.exhibited_at,this.programId=t.program_id,this.channelId=t.channel_id,this.duration=t.duration,this.serviceId=t.service_id,this.providerId=t.provider_id,this.providerUrl=t.provider_url,this.type=t.type,this.affiliate=t.affiliate,this.geofencing=!!t.geofencing,this.isSubscriberOnly=!!t.subscriber_only,this.encrypted=!!t.encrypted,this.isArchived=t.archived,this.urlForConsumption=t.url_for_consumption,this.adult=t.adult,this.contentRating=t.content_rating,this.contentRatingCriteria=t.content_rating_criteria,this.adUnit=t.ad_unit,this.adCustomData=t.ad_custom_data,this.adAccountId=t.ad_account_id,this.adCmsId=t.ad_cms_id,this.cuepoints=t.cuepoints;var i=n.getPlayerType;this.playerType="function"==typeof i&&i(this,n.isLimited),this.playerType||(this.playerType=e.getPlayerType(this,n.isLimited)),this.rawData=t,this.rawData.videos=[t],this.selectedLevel=n.selectedLevel,this.preferredLevel=n.preferredLevel,this.preferredCDN=n.preferredCDN,this.posterImageUrls=this.createPosterImageUrl(),this.encrypted&&(this.drm=this.getDRMProtocol())}return gt(e,[{key:"isLive",get:function(){return"Live"===this.type}},{key:"queryStringTemplate",get:function(){return this.selectedResource?this.selectedResource.queryStringTemplate:null}},{key:"posterTemplate",get:function(){var e=this.options.env,t=void 0===e?{}:e;return this.adult?t.posterAdultTemplate:t.posterTemplate}}]),gt(e,[{key:"createPosterImageUrl",value:function(){var e=this,t=this.posterTemplate;if(t){var n=Number(this.id)%4+1,i={};return[240,360,720].forEach((function(r){i[r]=t({domainNumber:n,size:"x".concat(r),videoId:e.id})})),i}}},{key:"getDRMProtocol",value:function(){return N.isSmartTvEnvironment?"playready":N.isSafari||N.isiOS?"fairplay":N.isChromecast?this.isLive?"widevine":"playready":N.isChrome||N.isFirefox?"widevine":"playready"}},{key:"setHashData",value:function(e){this.selectedResource.hash=e.hash,this.selectedResource.token=e.token,this.selectedResource.hashData=e}}],[{key:"getPlayerType",value:function(){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return N.isMobile?N.isAndroid?e?"android_limited":N.preventUsingCookies?"android_flat":"android":N.isiOS?"safari_mobile":N.isWindowsPhone?"windows_phone":"html5":N.isChromecast?"chromecast":N.isSafari?"safari":N.preventUsingCookies?"desktop_flat":"desktop"}}]),e}(),Mn="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Nn(){throw new Error("setTimeout has not been defined")}function Un(){throw new Error("clearTimeout has not been defined")}var Bn=Nn,Fn=Un;function jn(e){if(Bn===setTimeout)return setTimeout(e,0);if((Bn===Nn||!Bn)&&setTimeout)return Bn=setTimeout,setTimeout(e,0);try{return Bn(e,0)}catch(t){try{return Bn.call(null,e,0)}catch(t){return Bn.call(this,e,0)}}}"function"==typeof Mn.setTimeout&&(Bn=setTimeout),"function"==typeof Mn.clearTimeout&&(Fn=clearTimeout);var Hn,Vn=[],Kn=!1,zn=-1;function Gn(){Kn&&Hn&&(Kn=!1,Hn.length?Vn=Hn.concat(Vn):zn=-1,Vn.length&&Wn())}function Wn(){if(!Kn){var e=jn(Gn);Kn=!0;for(var t=Vn.length;t;){for(Hn=Vn,Vn=[];++zn<t;)Hn&&Hn[zn].run();zn=-1,t=Vn.length}Hn=null,Kn=!1,function(e){if(Fn===clearTimeout)return clearTimeout(e);if((Fn===Un||!Fn)&&clearTimeout)return Fn=clearTimeout,clearTimeout(e);try{Fn(e)}catch(t){try{return Fn.call(null,e)}catch(t){return Fn.call(this,e)}}}(e)}}function Yn(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Vn.push(new $n(e,t)),1!==Vn.length||Kn||jn(Wn)}function $n(e,t){this.fun=e,this.array=t}$n.prototype.run=function(){this.fun.apply(null,this.array)};var qn=Mn.performance||{},Xn=(qn.now||qn.mozNow||qn.msNow||qn.oNow||qn.webkitNow,function(e){e.getNetworkingEngine().registerRequestFilter((function(e,t){e!==ht.net.NetworkingEngine.RequestType.LICENSE&&(t.allowCrossSiteCredentials=!0)}))}),Qn=function(e){var t={maxAttempts:8};e.shakaConfiguration=e.shakaConfiguration||{};["drm","manifest","streaming"].forEach((function(n){return e.shakaConfiguration[n]=function(n){return bt(bt({},e.shakaConfiguration[n]||{}),{},{retryParameters:t})}(n)}))},Zn=function(e){e.shakaConfiguration=e.shakaConfiguration||{},e.shakaConfiguration.streaming=bt(bt({},e.shakaConfiguration.streaming||{}),{bufferingGoal:120,rebufferingGoal:2,bufferBehind:30})},Jn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=tn(e,"player-isolated-experiment-01"),i=window.WM&&window.WM.Settings||{},r=i.ShakaConfig||{},a=r["shaka-config-set-control"]||{},o=t?a:r[n]||a;e.shakaConfiguration=bt(bt({},e.shakaConfiguration),{},{streaming:bt(bt({},e.shakaConfiguration.streaming||{}),o.streaming),abr:bt(bt({},e.shakaConfiguration.abr||{}),o.abr)})},ei=function(e){e.shakaConfiguration=bt(bt({},e.shakaConfiguration),{},{manifest:bt(bt({},e.shakaConfiguration.manifest||{}),{},{dash:bt(bt({},e.shakaConfiguration.manifest&&e.shakaConfiguration.manifest.dash||{}),{},{ignoreMinBufferTime:!0})})})},ti=function(e){e.shakaConfiguration=bt(bt({},e.shakaConfiguration),{},{preferredAudioLanguage:e.defaultAudio||"por"})},ni=function(e){Et(n,e);var t=Tt(n);function n(){var e;ft(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60,e}return gt(n,[{key:"name",get:function(){return"html5"}},{key:"isLive",get:function(){return this.getPlaybackType()===we.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}}]),gt(n,[{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"_updateDvr",value:function(e){this.trigger(ye.PLAYBACK_DVR,e),this.trigger(ye.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){var t=e;e<0&&(ce.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),t+=this.el.seekable.start(0),this.el.currentTime=t}},{key:"getDuration",value:function(){var e=this;if(this.isLive)try{return this.el.seekable.end(0)-this.el.seekable.start(0)}catch(t){setTimeout((function(){return e._updateSettings()}),1e3)}return this.el.duration}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(ye.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}}]),n}(Je),ii=/{{deviceId}}/g,ri=function(e,t){return(t?e.replace("https://","http://"):e).replace(ii,"ZDY4NDM5MDgtMzQ4Mi0zZGU5LThlZDQtYjRiNWM5ZjBmOWU5")},ai=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||{},i=n.type,r={};return r[i]=ri(e.server,t),{shakaConfiguration:{drm:{servers:{"com.microsoft.playready":r.playready||"","com.widevine.alpha":r.widevine||""}}},fairplay:{server:r.fairplay||"",certificate:e&&e.cert},licenseServer:r}},oi=function(e,t,n){return t.loader.playbackPlugins.find((function(t){return t.canPlay(e.toString(),"",n)}))},si=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=this,r=!N.isChromecast&&t&&t.url,a=e||r||n,o=this.video&&this.video.encrypted,s=N.isiOS&&!o?ni:oi(a,i.options,o),l=t&&t.contentProtection,u=o&&l?ai(l,i.options.httpOnly):{},c=u.shakaConfiguration&&u.shakaConfiguration.drm||{},d=i.options.shakaConfiguration&&i.options.shakaConfiguration.drm||{},h={drm:bt(bt({},c),d)},p=bt(bt(bt({},i.options),u),{},{shakaConfiguration:bt(bt(bt({},i.options.shakaConfiguration||{}),u.shakaConfiguration||{}),h),autoPlay:!1,isLivePlayback:"live"===i.getPlaybackType(),src:a});return new s(p,i.i18n,i.playerError)},li=function(){function e(t){ft(this,e),this.pLoader=new window.peer5.HlsJsPlaylistLoader(t)}return gt(e,[{key:"load",value:function(e,t,n){this.pLoader.load(e,t,n)}},{key:"destroy",value:function(){this.pLoader.destroy()}},{key:"abort",value:function(){this.pLoader.abort()}}]),e}(),ui=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(dt){var n=t?li:dt.DefaultConfig.loader,i=function(t){Et(i,t);var n=Tt(i);function i(){return ft(this,i),n.apply(this,arguments)}return gt(i,[{key:"load",value:function(t,n,r){if("manifest"===t.type){var a=r.onSuccess;r.onSuccess=function(t,n,i,r){var o={pop:r.getResponseHeader("x-pop"),host:r.getResponseHeader("x-host")};e.trigger(_n.WM_STREAMING_DATA_LOADED,o),a(t,n,i)}}wt(kt(i.prototype),"load",this).call(this,t,n,r)}}]),i}(n);return e.video.isLive?i:void 0}},ci=function(e,t){var n=t?window.peer5.HlsJsFragmentLoader:void 0;return e.video.isLive?n:void 0},di={enableWorker:!1,liveSyncDurationCount:2,capLevelToPlayerSize:!0,enableWebVTT:!1,xhrSetup:function(e){e.withCredentials=!0}},hi=/^\d+$/,pi=Object.freeze({VIDEO_ID:"application/vnd.globo.videoid"}),fi=function(e,t){return hi.test(e)||t===pi.VIDEO_ID};var yi=".clappr-player#wp3-player-0 .id-playback.cover-viewport video {\n  -o-object-fit: cover;\n     object-fit: cover; }\n";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(yi);var gi=st.Log.getInstance(),vi=window.WM&&window.WM.Settings||{},mi=function(e){Et(n,e);var t=Tt(n);function n(){var e;ft(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._isReady=!1,e.bindEvents(),e.$el.css("height","100%"),e.settings=e.defaultSettings,e.options.swfBasePath=e.options.baseUrl,e.options.startFromBitrate=4e5,e.currentVolume=null,e.currentTime=0,e.duration=0,e.skipWaitingGlobals=!1,e.globalsManager=new Zt,e.setupSession(),e.on(_n.WM_PLAY_REQUESTED,(function(){e.playback&&e.consent(),e.play()})),e.newHashForFallback=vi&&vi.newHashForFallback,e}return gt(n,[{key:"name",get:function(){return"id_playback"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"attributes",get:function(){return{class:"id-playback","data-id-playback":""}}},{key:"srcUrl",get:function(){var e=this.playback&&this.playback.options&&this.playback.options.src,t=this.playback&&this.playback._src;return e||t||this.options.src}},{key:"blackResourceUrl",get:function(){return N.isSmartTvEnvironment||N.isChromecast?this.options.env.blackVideoUrl:N.isiOS||N.isSafari||!this.video.encrypted?this.options.env.blackVideoStreamingUrl:this.options.env.blackDashUrl}},{key:"src",get:function(){return this.options.src}},{key:"selectedResource",get:function(){return this.video&&this.video.selectedResource}},{key:"isEncrypted",get:function(){return this.video&&this.video.encrypted}},{key:"isReady",get:function(){return this._isReady}},{key:"defaultSettings",get:function(){return{seekEnabled:!0}}},{key:"dvrEnabled",get:function(){return!!this.playback&&!!this.playback.dvrEnabled}},{key:"levels",get:function(){return this.playback.levels}},{key:"buffering",get:function(){return this.playback&&this.playback.buffering}},{key:"videoEl",get:function(){return this.playback&&this.playback.el}},{key:"innerPlaybackName",get:function(){return this.playback&&this.playback.name||""}},{key:"isLive",get:function(){return this.getPlaybackType()===we.LIVE}},{key:"liveInitialPosition",get:function(){return En(this.playback,this.options.liveStartTime)}},{key:"posterImage",get:function(){var e=this.video&&this.video.posterImageUrls||{},t=Object.keys(e),n=this.playback.el.clientHeight;return e[t.find((function(e){return e>=n}))||t[t.length-1]]}}]),gt(n,[{key:"bindEvents",value:function(){this.on(_n.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.on(_n.WM_VIDEO_METADATA_ERROR,this.onError),this.on(_n.WM_RESOURCE_READY,this.onResourceReady),this.on(_n.WM_RESOURCE_ERROR,this.onError),this.on(_n.WM_PLAYBACK_WILL_PLAY,this.onBeforePlay),this.on(_n.WM_HASH_EXPIRED,this.onHashExpired),this.on(_n.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected)}},{key:"onHashExpired",value:function(e){this.revalidateHashCallback=e,this.hashExpired=!0}},{key:"revalidateHash",value:function(e){var t=this,n=function(n){return t.hashExpired=!1,e(n)};this.revalidateHashCallback().then(n,n)}},{key:"play",value:function(){if(this.hashExpired)return this.revalidateHash(this.play.bind(this));this.canRequestPlay()?(this.loadingResource=!0,this.trigger(_n.WM_PLAY_REQUESTED_READY,this.video)):this.isPaused?this.playWhenReady():this.checkingAutoplayPermission?gi.debug(this.name,"Call to play was ignored"):this.startAutoPlayCheck({autoPlay:!0})}},{key:"canRequestPlay",value:function(){var e=this.waitToPlay()||this.playbackError||this.isPlaying(),t=this.video&&!this._resourceReady&&!this.loadingResource,n=pn.isAvailable(this.options.mute)||this.mutedAutoplay;return!e&&t&&n}},{key:"playWhenReady",value:function(){var e=this;this.isReady?Yn((function(){return e.playback.play()})):(this.listenToOnce(this,_n.WM_PLAYBACK_WILL_PLAY,this.playWhenReady),this.prepareInnerPlaybackToPlay())}},{key:"onBeforePlay",value:function(){this.disablePlayWhenReady||this.playWhenReady()}},{key:"consent",value:function(){this.playback.consent(),pn.consent(),this.mutedAutoplay=!1}},{key:"waitToPlay",value:function(){var e=this,t=!0,n=!this.globalsManager.ready(),i=!this.video||!this.playback;return n&&!this.skipWaitingGlobals?(this.globalsManager.isAvailable().then((function(){return e.play()}),(function(){return e.play()})),this.skipWaitingGlobals=!0):i?this.listenToOnce(this,_n.WM_VIDEO_METADATA_LOADED,this.play):t=!1,t}},{key:"isPlaying",value:function(){return!!this.playback&&this.playback.isPlaying()}},{key:"setInitialTime",value:function(e){var t=this;N.isChromecast||N.isiOS||!this.isPlaying()?this.listenToOnce(this.playback,ye.PLAYBACK_PLAY,(function(){return t.seek(e)})):this.seek(e)}},{key:"getDuration",value:function(){return this.playback&&this.playback.getDuration()}},{key:"stop",value:function(){this.stopAndClearPlayback(),this.playback&&this.trigger(ye.PLAYBACK_STOP)}},{key:"stopAndClearPlayback",value:function(){this.playback&&(this.playback.stop(),this.currentTime=0)}},{key:"volume",value:function(e){var t=this;this.playback&&(this.playback.isReady?(this.playback.volume(e),this.currentVolume=e):this.listenToOnce(this.playback,ye.PLAYBACK_READY,(function(){return t.volume(e)})))}},{key:"getVolume",value:function(){return this.currentVolume}},{key:"pause",value:function(){this.isPaused=!0,this.playback&&this.playback.pause()}},{key:"seek",value:function(e){if(this.hashExpired)return this.revalidateHash(this.seek.bind(this,e));var t=this.playback&&this.playback.getCurrentTime(),n=Math.round(t)!==Math.round(e);this.playback&&n&&this.playback.seek(e)}},{key:"getLastProgramDate",value:function(){return"hls"===this.playback.name?this.playback.getLastProgramDate():-1}},{key:"getStartTimeOffset",value:function(){return this.playback&&"function"==typeof this.playback.getStartTimeOffset?this.playback.getStartTimeOffset():0}},{key:"isPip",value:function(e){this.onPip=e}},{key:"destroy",value:function(){this.playback&&(this.stopListening(this.playback),this.playback.stop(),this.playback.destroy(),this.playback=null),this.reportID&&clearInterval(this.reportID),this.$el.remove()}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.validateRestrictedContent(),N.isSmartTvEnvironment||(this.options.playback.hlsjsConfig=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=bt({p2pEnabled:!1},t),i=(e.options,{fragLoadingMaxRetry:7,manifestLoadingMaxRetry:7,levelLoadingMaxRetry:7});return bt(bt(bt(bt({},di),i),t.HLSJSConfiguration||{}),{},{fLoader:ci(e,n.p2pEnabled),pLoader:ui(e,n.p2pEnabled)})}(this,this.options),function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).forceDefaultConfigFromSettings,n=void 0!==t&&t;e.shakaOnBeforeLoad=Xn,e.shakaMinimumDvrSize=180,e.shakaConfiguration=e.shakaConfiguration||{},Qn(e),Zn(e),Jn(e,n),ei(e),ti(e)}(this.options,{forceDefaultConfigFromSettings:this.getPlaybackType()===we.LIVE})),this.initInnerPlayback()}},{key:"validateRestrictedContent",value:function(){this.video.adult&&!this.options.allowRestrictedContent&&this.onError(an.RESTRICTED_CONTENT)}},{key:"onPlaybackReady",value:function(){var e=this;this.playback.isReady?this.ready():this.playback.once(ye.PLAYBACK_READY,(function(){return e.ready()}))}},{key:"onError",value:function(e){gi.warn(this.name,"id playback error:",e),this.playbackError=function(e,t,n){var i=t.customErrors?t.customErrors:an,r=n&&n.selectedResource,a=i.DEFAULT_ERROR;return 404===e.http_status_code?a=i.NOT_FOUND:403===e.http_status_code?("AUT"===e.code&&"function"==typeof t.onUnauthorized&&n&&t.onUnauthorized(Object.assign(e,{fromPlayer3:!0}),n.rawData),a=e.anonymous?i.AUTH_REQUIRED:i.SUBSCRIBERS_ONLY,"GB"===e.code?a=i.GEO_BLOCKED:"DEV"===e.code?a=i.DEVICE_NOT_AUTHORIZED:"LCK"===e.code&&(a=i.SIMULTANEOUS_ACCESS)):415===e.http_status_code||"DNS"===e.code?a=n.geofencing?i.GEOFENCING:i.DEVICE_NOT_SUPPORTED:400===e.http_status_code&&"SRF"===e.code?a=i.GEOFENCING:e.code===i.TIMESTAMP_ERROR.code?a=bt(bt({},i.TIMESTAMP_ERROR),{},{description:"".concat(i.TIMESTAMP_ERROR.description,", ts: ").concat(Math.trunc(Kt()/1e3))}):e.code===i.LOCATION_UNAVAILABLE.code?a=i.LOCATION_UNAVAILABLE:e.code===i.RESTRICTED_CONTENT.code?a=i.RESTRICTED_CONTENT:e.code===i.NOT_ALLOWED_DOMAIN.code?a=i.NOT_ALLOWED_DOMAIN:e.code===i.UNSUPPORTED_BROWSER.code?a=i.UNSUPPORTED_BROWSER:e.code===i.PLAYER_NOT_RECOGNIZED.code?a=i.PLAYER_NOT_RECOGNIZED:n&&!r?a=bt(bt({},i.RESOURCE_LOAD_ERROR),{},{description:"".concat(i.RESOURCE_LOAD_ERROR.description," ").concat(e.message||fn(e)),raw:e}):!n||r&&r.hashData?n||(a=i.PLAYLIST_LOAD_ERROR):a=i.HASH_LOAD_ERROR,a}(e,this.options,this.video);this.trigger(ye.PLAYBACK_ERROR,this.createError(this.playbackError,{useCodePrefix:!1}))}},{key:"onResourceReady",value:function(e,t){this.video=e,this.user=t,this._resourceReady=!0,this.loadingResource=!1;var n=!(N.isSmartTvEnvironment||N.isChromecast)&&"live"===this.getPlaybackType()&&e.cdn===Sn;N.isSmartTvEnvironment&&this.configureSmartTvResourceParams(),!this.options.skipWaitingRoom&&n?this.trigger(_n.WM_WROOM_AUTHORIZE,this.selectedResource):this.setupAuthorized()}},{key:"setupAuthorized",value:function(){this.setupPlayback(),this.onPlaybackReady()}},{key:"configureSmartTvResourceParams",value:function(){var e=this,t=this.video&&this.video.encrypted,n=this.selectedResource&&this.selectedResource.contentProtection,i=t&&n?ai(n,this.options.httpOnly):{},r=this.selectedResource&&this.selectedResource.singleAudioUrls||{},a={};Object.keys(r).forEach((function(t){var n=e.selectedResource.signedUrl(e.video.isSubscriberOnly,e.user,r[t]);a[t]=n})),this.playback&&this.playback.configure(bt({singleAudioUrls:r,signedSingleAudioUrls:a,contentProtection:n},i))}},{key:"getPlaybackType",value:function(){if(this.video)return"Live"===this.video.type||this.video.isLive?"live":"vod"}},{key:"initInnerPlayback",value:function(e){if(this.playback=si.call(this,e,this.selectedResource,this.blackResourceUrl),"no_op"===this.playback.name)return this.onError(an.DEVICE_NOT_SUPPORTED);this.bindPlaybackEvents(),this.renderInnerPlayback(),this.onInnerPlaybackReady(),this.options.autoPlay&&this.startAutoPlayCheck()}},{key:"startAutoPlayCheck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoPlay,n=void 0===t?this.options.autoPlay:t;this.checkingAutoplayPermission=!0,pn.onAutoplayAvailable(this.onAutoplaySuccess.bind(this),bt(bt({},this.options),{},{autoPlay:n}),this.onAutoplayFail.bind(this))}},{key:"onAutoplaySuccess",value:function(){var e=this;Yn((function(){return e.play()}))}},{key:"onAutoplayFail",value:function(){pn.isAvailable(!0)&&this.playMuted()}},{key:"playMuted",value:function(){var e=this;this.mutedAutoplay=!0,this.playback&&(this.playback.volume(0),this.currentVolume=0),Yn((function(){return e.play()}))}},{key:"setupPlayback",value:function(){var e=this.selectedResource.signedUrl(this.video.isSubscriberOnly,this.user);if(this.trigger(ye.PLAYBACK_STATS_ADD,{midia:this.options.src,url:e}),this.updateSrc(e),this._playbackWasBuilt=!0,this.trigger(_n.WM_PLAYBACK_BUILT),this.options.selectedLevel)try{this.play()}catch(e){gi.warn(this.name,"play()",e)}else this.onPip&&this.playWhenReady()}},{key:"updateSrc",value:function(e){"function"==typeof this.playback.load&&this.playback.load(e),"object"===pt(this.playback.options)&&(this.playback.options.src=e),"function"==typeof this.playback._setupSrc&&this.playback._setupSrc(e),"function"==typeof this.playback.setupSrc&&this.playback.setupSrc(e),this.prepareInnerPlaybackToPlay()}},{key:"prepareInnerPlaybackToPlay",value:function(){var e=this;this.playback&&"function"==typeof this.playback._setup&&!this._innerPlaybackSetupDone&&(this._playbackWasBuilt?this.playback._setup():this.listenToOnce(this,_n.WM_PLAYBACK_BUILT,(function(){e.configureInnerPlaybackDRM(),e.playback._setup()})),this._innerPlaybackSetupDone=!0)}},{key:"configureInnerPlaybackDRM",value:function(){if(this.isEncrypted){var e=ai(this.selectedResource.contentProtection,this.options.httpOnly);this.playback.options.fairplay=e.fairplay,"dash_shaka_playback"===this.playback.name&&(this.playback._options.shakaConfiguration.drm=bt(bt({},e.shakaConfiguration.drm),this.playback._options.shakaConfiguration.drm))}}},{key:"recreatePlayback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.playback)return this.initInnerPlayback(e),!0;var n=this.playback.constructor.canPlay(e,"",this.isEncrypted),i="flashls"===this.playback.name||"hls_fairplay_playback"===this.playback.name;return t||!n||i?(this.stopListening(this.playback),this.playback.destroy(),this.initInnerPlayback(e),!0):void 0}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,ye.PLAYBACK_SETTINGSUPDATE,this.settingsupdate),this.listenTo(this.playback,ye.PLAYBACK_LOADEDMETADATA,this.loadedmetadata),this.listenTo(this.playback,ye.PLAYBACK_PLAYBACKSTATE,this.playbackstate),this.listenTo(this.playback,ye.PLAYBACK_ERROR,this.onInnerPlaybackError),this.listenTo(this.playback,ye.PLAYBACK_PROGRESS,this.progress),this.listenTo(this.playback,ye.PLAYBACK_TIMEUPDATE,this.timeupdate),this.listenTo(this.playback,ye.PLAYBACK_PLAY_INTENT,this.playintent),this.listenTo(this.playback,ye.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,ye.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,ye.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,ye.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,ye.PLAYBACK_STATS_ADD,this.statsAdd),this.listenTo(this.playback,ye.PLAYBACK_DVR,this.onDvr),this.listenTo(this.playback,ye.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,ye.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,ye.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,ye.PLAYBACK_ENDED,this.ended)}},{key:"playbackstate",value:function(e){this.trigger(ye.PLAYBACK_PLAYBACKSTATE,e)}},{key:"updateBitrate",value:function(e){this.trigger(ye.PLAYBACK_BITRATE,e)}},{key:"progress",value:function(e){this.trigger(ye.PLAYBACK_PROGRESS,e)}},{key:"statsAdd",value:function(e){this.trigger(ye.PLAYBACK_STATS_ADD,e)}},{key:"onDvr",value:function(e){this.trigger(ye.PLAYBACK_DVR,e)}},{key:"timeupdate",value:function(e){e.current&&(this.currentTime=e.current,this.duration=e.total,this.trigger(ye.PLAYBACK_TIMEUPDATE,bt(bt({},e),{},{playbackType:this.getPlaybackType()})))}},{key:"ready",value:function(){this._isReady=!0,this.settingsupdate(),this.trigger(_n.WM_PLAYBACK_WILL_PLAY,this.name)}},{key:"onSeek",value:function(){this.trigger(ye.PLAYBACK_SEEK,this.name)}},{key:"onSeeked",value:function(){this.trigger(ye.PLAYBACK_SEEKED,this.name),this.isPaused&&this.trigger(ye.PLAYBACK_PAUSE,this.name)}},{key:"onBuffering",value:function(){this.trigger(ye.PLAYBACK_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(ye.PLAYBACK_BUFFERFULL,this.name)}},{key:"settingsupdate",value:function(){var e=this.getPlaybackType();e&&("ad"===e?this.settings=this.playback.settings:(this.settings=bt({},this.defaultSettings),"vod"!==e&&this.playback&&!this.playback.dvrEnabled&&(this.settings.seekEnabled=!1)),this.trigger(ye.PLAYBACK_SETTINGSUPDATE))}},{key:"loadedmetadata",value:function(e){this.trigger(ye.PLAYBACK_LOADEDMETADATA,e),this.checkInitialSeek()}},{key:"checkInitialSeek",value:function(){var e=this.isLive?this.options.liveStartTime&&this.liveInitialPosition:this.options.resumeAt||ln();e&&e>0&&this.setInitialTime(e)}},{key:"setupSession",value:function(){dn.startSession(this.options.playerId)}},{key:"ended",value:function(){var e=this;this.stopAndClearPlayback(),this.trigger(ye.PLAYBACK_ENDED,this.name),Yn((function(){return e.setupSession()}))}},{key:"playintent",value:function(){this.trigger(ye.PLAYBACK_PLAY_INTENT,this.name)}},{key:"playing",value:function(){this.isPaused=!1,this.trigger(ye.PLAYBACK_PLAY,this.name)}},{key:"paused",value:function(){this.isPaused=!0,this.trigger(ye.PLAYBACK_PAUSE,this.name)}},{key:"onInnerPlaybackError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.playback._src!==this.blackResourceUrl&&e&&this.checkFallbackPossibility(e)}},{key:"checkFallbackPossibility",value:function(e){if(gn(this.playback.name,e)&&this.selectedResource.hasFallbackSource()){var t=this.selectedResource.resourceCDN,n={code:e.code,description:e.description};this.trigger(_n.WILL_SELECT_FALLBACK_SOURCE,{recovered_error:JSON.stringify(n),currentSrc:this.srcUrl}),this.selectedResource.setupFallbackSource(),this.newHashForFallback||t!==this.selectedResource.resourceCDN?(this.playback.destroy(),this.listenToOnce(this,_n.WM_HASH_RECEIVED,this.selectFallbackSource),this.trigger(_n.WM_REQUEST_HASH,this.video)):this.selectFallbackSource()}else this.trigger(ye.PLAYBACK_ERROR,e)}},{key:"selectFallbackSource",value:function(){var e=this.selectedResource.signedUrl(this.video.isSubscriberOnly,this.user);return this.trigger(_n.FALLBACK_SOURCE_SELECTED,{currentSrc:e}),this.playWhenReady()}},{key:"onFallbackSourceSelected",value:function(e){var t=e.currentSrc,n=this.currentTime,i=this.getVolume();this.recreatePlayback(t,!0),this.ready(),this.setInitialTime(n),null!==i&&this.volume(i)}},{key:"onInnerPlaybackReady",value:function(){var e=this;this.trigger(ye.PLAYBACK_READY,this.name),Yn((function(){return e.trigger(_n.WM_PLAYBACK_CAN_PLAY,e.name)}))}},{key:"renderInnerPlayback",value:function(){this.playback.render(),this.playback.el.id=this.cid,this.playback.el.poster=this.posterImage,this.playback.el.controlsList="nodownload noremoteplayback",this.playback.el.removeAttribute("src"),this.$el.html(this.playback.el);var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=An.getStyleFrom(yi.toString(),e);this.$el.append(t[0]);var n="cover-viewport";this.options.preventBlackBars?this.$el.addClass(n):this.$el.removeClass(n)}},{key:"bandwidthEstimate",get:function(){return this.playback&&this.playback.bandwidthEstimate}}]),n}(we);mi.canPlay=function(e){return fi(e.toString())};var bi=ce.getInstance(),Ei=function(e){Et(n,e);var t=Tt(n);function n(e){var i;return ft(this,n),(i=t.call(this,e)).options.src&&fi(i.options.src)?(i.setRequestData(),i.load().then((function(e){return i.playback.trigger(_n.WM_VIDEO_METADATA_LOADED,e)}),(function(e){return i.playback.trigger(_n.WM_VIDEO_METADATA_ERROR,e)})),i):_t(i)}return gt(n,[{key:"name",get:function(){return"video_metadata"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"callbackPrefix",get:function(){return"wmPlayerPlaylistLoaded"}},{key:"playback",get:function(){return this.container.playback}},{key:"metadataOptions",get:function(){return{selectedLevel:this.options.selectedLevel,preferredLevel:this.options.preferredLevel,preferredCDN:this.options.cdn,env:this.options.env,profile:this.options.maxQualityLevel,getPlayerType:this.options.overrides&&this.options.overrides.getPlayerType}}}]),gt(n,[{key:"setRequestData",value:function(){var e=this.options.src,t=this.options.env;this.callback=this.callbackPrefix+this.options.playerId+e,this.url=t.playlistTemplate({videoId:e,callback:this.callback})}},{key:"load",value:function(){var e=this;return bi.info(this.name,"loading playlist from:",this.url),qt.jsonp({callbackName:this.callback,url:this.url}).then((function(t){return e.parsePlaylist(t)}))}},{key:"parsePlaylist",value:function(e){var t=new x.Deferred;if(this.isValidPlaylist(e)){var n=new Ln(e.videos[0],this.metadataOptions);bi.info(this.name,"video:",n),t.resolve(n)}else bi.warn(this.name,"error on playlist: ",e),t.reject(e);return t}},{key:"isValidPlaylist",value:function(e){return!!e&&!!e.videos&&e.videos.length>0}}]),n}(Ue),ki=$e.settings.interpolate,Ai=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ft(this,e),t&&t.resource&&(this.options=n,this.forceGloboCDN&&(this.options.preferredCDN="globo"),this.availableSources=St(t.resource.sources),this.fallbackCounterId=1,this.source=this.options.preferredCDN&&this.preferredSource(t.resource)||this.availableSources[0],this.singleAudioUrls=this.source.single_audio_urls,this.id=t.resource._id,this.originalURL=this.source.url,this.contentProtection=t.resource.content_protection||{},this.options.forceDRMServer&&this.forceDRMServer(),this.signal=t.resource.signal,this.thumbUrl=t.thumbs_preview_base_url,this.subtitles=this.source.subtitles,this.subtitlesWebVTT=this.source.subtitles_webvtt,this.resourceCDN=this.source.cdn,this.resourcePOP=this.source.pop,this.selectedQueryStringTemplate=this.source.auth_param_templates.query_string,this.hash=null,this.token=null,this.rawData=t,this.videoUrlTemplate=$e("<%= videoUrl %>?<%= queryString %>"),N.preventUsingCookies&&(this.flatUrlTemplate=$e("<%= origin %>/<%= hashParams %><%= path %>")))}return gt(e,[{key:"cdn",get:function(){return this.resourceCDN||Sn}},{key:"isGloboCDN",get:function(){return this.cdn===Sn}},{key:"queryStringTemplate",get:function(){return this.selectedQueryStringTemplate||"h={{hash}}&k={{key}}&a={{openClosed}}&u={{user}}"}},{key:"url",get:function(){return this.originalURL}},{key:"forceGloboCDN",get:function(){return N.isiOS&&!N.isSafari||N.isSmartTvEnvironment}}]),gt(e,[{key:"forceDRMServer",value:function(){this.contentProtection.server=this.options.forceDRMServer}},{key:"preferredSource",value:function(e){var t=this;return e.sources.find((function(e){return e.cdn===t.options.preferredCDN}))}},{key:"signedUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.url;if(N.preventUsingCookies&&this.isGloboCDN)return this.flatUrl(e,t,n);$e.settings.interpolate=/\{\{(.+?)\}\}/g;var i={hash:this.hash&&Ht.signedHash(this.hash),token:this.token,key:"html5",openClosed:e?"F":"A",user:t.id||""};this.hashData&&this.hashData.cip&&(i.cip=this.hashData.cip),this.hashData&&this.hashData.et&&(i.et=this.hashData.et);var r=$e(this.queryStringTemplate)(i);return $e.settings.interpolate=ki,this.options.env&&this.options.env.httpOnly&&(n=n.replace("https://","http://")),this.videoUrlTemplate({videoUrl:n,queryString:r})}},{key:"flatUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.url,i=this.queryStringTemplate.replace(/[=&]+/g,"/");$e.settings.interpolate=/\{\{(.+?)\}\}/g;var r=$e(i)({hash:this.hash&&Ht.signedHash(this.hash),key:"html5",openClosed:e?"F":"A",user:t.id||""});$e.settings.interpolate=ki;var a=n.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return n={origin:"".concat(a[1],"//").concat(a[2]),pathname:a[5]},this.flatUrlTemplate({origin:n.origin,path:n.pathname,hashParams:r}).replace(/\/\w+\/\//,"/")}},{key:"hasFallbackSource",value:function(){return this.fallbackCounterId<this.availableSources.length}},{key:"setupFallbackSource",value:function(){this.source=this.availableSources[this.fallbackCounterId],this.fallbackCounterId++,this.originalURL=this.source.url,this.subtitles=this.source.subtitles,this.subtitlesWebVTT=this.source.subtitles_webvtt,this.resourceCDN=this.source.cdn,this.resourcePOP=this.source.pop,this.selectedQueryStringTemplate=this.source.auth_param_templates.query_string}}]),e}(),_i=function e(t){ft(this,e),this.id=t.transmission_id,this.affiliate=t.affiliate,this.signal=t.signal},Ti=function e(t){ft(this,e),this.id=t.user,this.product=t.product},wi=function(e){Et(n,e);var t=Tt(n);function n(){return ft(this,n),t.apply(this,arguments)}return gt(n,[{key:"bindEvents",value:function(){this.listenTo(this.playback,_n.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.playback,_n.WM_RESOURCE_LOADED,this.onResourceLoaded),this.listenToOnce(this.playback,_n.WM_HASH_RECEIVED,this.onResourceReady)}},{key:"onMetadataLoaded",value:function(e){this.video=e}},{key:"onResourceLoaded",value:function(e){this.resource=new Ai(e,this.options),this.selectResource(),this.onResourceSelected(),this.playback.trigger(_n.WM_REQUEST_HASH,this.video)}},{key:"onResourceReady",value:function(e,t){this.video=e,this.user=t,this.resource&&this.resource.cdn&&(this.video.cdn=this.resource.cdn),this.isResourceValid()&&this.playback.trigger(_n.WM_RESOURCE_READY,this.video,this.user)}},{key:"selectResource",value:function(){this.video.selectedResource=this.resource,this.video.isLive&&(this.video.transmission=new _i(this.video.selectedResource.rawData.resource))}},{key:"onResourceSelected",value:function(){this.video.selectedResource&&this.playback.trigger(_n.WM_RESOURCE_SELECTED,this.video,this.resource)}},{key:"isResourceValid",value:function(){return!Array.isArray(this.resource)||(this.trigger(ye.PLAYBACK_ERROR,an.PLAYLIST_LOAD_ERROR),!1)}},{key:"name",get:function(){return"resource"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"playback",get:function(){return this.container.playback}}]),n}(Ue),Si=24e4,Ci={CDNRouter:function(e){Et(n,e);var t=Tt(n);function n(){return ft(this,n),t.apply(this,arguments)}return gt(n,[{key:"bindEvents",value:function(){this.listenTo(this.playback,_n.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,_n.WM_PLAY_REQUESTED_READY,this.onPlayRequested)}},{key:"onMetadataLoaded",value:function(e){this.video=e}},{key:"onPlayRequested",value:function(){var e=this,t=dn.getVideoSessionId(this.options.playerId),n=this.appendQueryStrings(this.options.env.CDNRouterHost,t);return this.getResource(n).then((function(t){return e.onResourceLoaded(t)}),(function(t,i,r){var a={status:i,error:t&&t.statusText||r,url:t&&t.responseURL||n,http_status_code:t&&t.status};try{a=bt(bt({},a),JSON.parse(t.response))}catch(e){}e.onResourceError(a)}))}},{key:"getResource",value:function(e){var t=this;return this.video.geofencing&&this.options.allowLocation?this.getLocation().then((function(n){return t.sendRequest("".concat(e,"&lat=").concat(n.latitude,"&long=").concat(n.longitude))}),(function(){return t.sendRequest(e)})):this.sendRequest(e)}},{key:"sendRequest",value:function(e){return x.ajax({url:e,xhrFields:{withCredentials:!0}})}},{key:"appendQueryStrings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(e,"?video_id=").concat(this.video.id,"&player_type=").concat(this.video.playerType,"&video_type=").concat(this.video.type,"&vsid=").concat(t);return this.video.encrypted&&(n="".concat(n,"&content_protection=").concat(this.video.drm)),this.options.maxQualityLevel&&(n="".concat(n,"&quality=").concat(this.options.maxQualityLevel)),this.options.httpOnly&&(n="".concat(n,"&ho=true")),n}},{key:"getLocation",value:function(){var e=this;if(Ot.isGloboiDomain&&this.options.lat&&this.options.long){var t={latitude:this.options.lat,longitude:this.options.long};return this.container.trigger(_n.WM_LOCATION_AVAILABLE,t),new Promise((function(e){return e(t)}))}return on.getLocation().then((function(t){var n={latitude:t.coords.latitude,longitude:t.coords.longitude};return e.container.trigger(_n.WM_LOCATION_AVAILABLE,n),n}),(function(t){return ce.warn(e.name,"Failed to get location. We make the request to /cdn without passing lat/long params",t),t}))}},{key:"onResourceLoaded",value:function(e){this.playback.trigger(_n.WM_RESOURCE_LOADED,e)}},{key:"onResourceError",value:function(e){this.playback.trigger(_n.WM_RESOURCE_ERROR,e)}},{key:"name",get:function(){return"cdn_router"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"playback",get:function(){return this.container.playback}}]),n}(Ue),Resource:wi,Security:function(e){Et(n,e);var t=Tt(n);function n(){return ft(this,n),t.apply(this,arguments)}return gt(n,[{key:"bindEvents",value:function(){this.listenTo(this.container,_n.WM_LOCATION_AVAILABLE,this.onLocationAvailable),this.listenTo(this.playback,_n.WM_REQUEST_HASH,this.loadHash),this.listenTo(this.playback,ye.PLAYBACK_PAUSE,this.startTimer),this.listenTo(this.playback,ye.PLAYBACK_STOP,this.startTimer),this.listenTo(this.playback,ye.PLAYBACK_ENDED,this.startTimer),this.listenTo(this.playback,ye.PLAYBACK_PLAY,this.stopTimer),this.listenTo(this.playback,ye.PLAYBACK_SEEKED,this.onSeeked)}},{key:"onLocationAvailable",value:function(e){this.geofencingCoordinates=e}},{key:"loadHash",value:function(e){e.geofencing&&N.supportsFakeLocation?this.playback.trigger(_n.WM_RESOURCE_ERROR,wn):this.checkAuthorized(e)}},{key:"checkAuthorized",value:function(e){var t=this;if(e){var n=!N.isChromecast&&!this.options.token,i=null===this.options.token||this.options.token,r=un.hasTokenForProvider(e.providerId),a=!i&&(n||r||!Ot.isGloboDomain);!e.isSubscriberOnly||a?this.performHashRequest(e):this.options.token?N.preventUsingCookies?this.performHashRequest(e,{method:"POST"}):this.setAuthenticationToken(e).then((function(){return t.performHashRequest(e)})):this.playback.trigger(_n.WM_RESOURCE_ERROR,bt(bt({},Tn),{},{anonymous:!0}))}else this.playback.trigger(_n.WM_RESOURCE_ERROR,wn)}},{key:"setAuthenticationToken",value:function(e){var t="setAuthenticationToken_".concat(Kt()),n="?callback=".concat(t,"&expires=").concat(Yt(7)),i="/providers/".concat(un.getProviderCookieName(e.providerId),"/tokens/").concat(this.options.token,"/session"),r="".concat(i).concat(n),a="".concat(this.options.env.securityHost).concat(r);return qt.jsonp({url:a,callbackName:t})}},{key:"performHashRequest",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.method,r=void 0===i?Cn:i;if(e.geofencing&&this.options.allowLocation&&this.geofencingCoordinates)this.performHashPost(e,{latitude:this.geofencingCoordinates.latitude,longitude:this.geofencingCoordinates.longitude}).then((function(n){return t.parseHashData(e,n)}),(function(e){return t.playback.trigger(_n.WM_RESOURCE_ERROR,e)}));else{var a=(r===Cn?this.performHashGet:this.performHashPost).bind(this);a(e).then((function(n){return t.parseHashData(e,n)}),(function(e){return t.playback.trigger(_n.WM_RESOURCE_ERROR,e)}))}}},{key:"getHashUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.options.env.hashTemplate,i={videoId:e.id,resourceId:e.selectedResource&&e.selectedResource.id||"",callback:t.callbackName,player:e.playerType,tz:encodeURIComponent(Gt()),cdn:e.selectedResource&&e.selectedResource.cdn||e.cdn,profile:this.options.maxQualityLevel};return Dt&&(i.ts=Math.trunc(Kt()/1e3)),n(i)}},{key:"performHashGet",value:function(e){var t="getHash_".concat((new Date).getTime()),n=this.getHashUrl(e,{callbackName:t});return qt.jsonp({callbackName:t,url:n})}},{key:"performHashPost",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};t.latitude&&(n.lat=t.latitude),t.longitude&&(n.long=t.longitude),this.options.token&&(n.token=this.options.token),N.isSmartTvEnvironment&&dn.getLockId()&&(n.lock_session=dn.getLockId());var i=!this.options.token;return x.ajax({type:"POST",data:n,xhrFields:{withCredentials:i},url:this.getHashUrl(e)})}},{key:"isValidSecurityData",value:function(e){var t=e&&e.hash,n=e&&e.token;return t||n}},{key:"parseHashData",value:function(e,t){if(this.isValidSecurityData(t)){dn.storeLockId(t.hash),e.setHashData(t);var n=new Ti(t);this.playback.trigger(_n.WM_HASH_RECEIVED,e,n)}else this.playback.trigger(_n.WM_RESOURCE_ERROR,t)}},{key:"startTimer",value:function(){var e=this;this.playback.video.isLive||(this.stopTimer(),this.expirationTimeout=setTimeout((function(){e.playback.trigger(_n.WM_HASH_EXPIRED,e.reloadHash.bind(e))}),N.isSmartTvEnvironment?this.flatUrlExpireTimeout:3e5))}},{key:"stopTimer",value:function(){clearTimeout(this.expirationTimeout)}},{key:"onSeeked",value:function(){!this.playback.isPlaying()&&this.startTimer()}},{key:"reloadHash",value:function(){var e=new x.Deferred;return this.listenToOnce(this.playback,_n.WM_HASH_RECEIVED,(function(t,n){var i=t.selectedResource.signedUrl(t.isSubscriberOnly,n);x.ajax({url:i,type:"GET",xhrFields:{withCredentials:!0},success:function(t,n,r){if(!r.ok&&"OK"!==r.statusText)return e.reject();e.resolve(i)},error:function(){return e.reject()}})})),this.listenToOnce(this.playback,_n.WM_RESOURCE_ERROR,(function(){return e.reject()})),this.loadHash(this.playback.video),e.promise()}},{key:"destroy",value:function(){this.stopTimer(),wt(kt(n.prototype),"destroy",this).call(this)}},{key:"name",get:function(){return"security"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"playback",get:function(){return this.container.playback}},{key:"videoDuration",get:function(){return this.playback.video.duration}},{key:"isShortVideo",get:function(){return this.videoDuration<Si}},{key:"flatUrlExpireTimeout",get:function(){return this.isShortVideo?Si:this.videoDuration}}]),n}(Ue),VideoMetadata:Ei};Le.registerPlayback(mi),Object.values(Ci).forEach((function(e){return Le.registerPlugin(e)}));var Ri={Video:Ln};function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pi(e,t,n){return t&&Oi(e.prototype,t),n&&Oi(e,n),e}function xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(n),!0).forEach((function(t){xi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ni(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bi(e,t)}function Ui(e){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bi(e,t){return(Bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ji(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Fi(e):t}function Hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ui(e);if(t){var r=Ui(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ji(this,n)}}function Vi(e,t,n){return(Vi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ui(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Ki(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||Gi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e){return function(e){if(Array.isArray(e))return Wi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Gi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gi(e,t){if(e){if("string"==typeof e)return Wi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wi(e,t):void 0}}function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Yi=function(e){Ni(n,e);var t=Hi(n);function n(e,i){var r;Di(this,n);var a=(r=t.call(this,e)).core.options.adUnit,o=r.core.options.adCompanion;if(o&&i&&a){var s=("object"===Ii(o)&&Object.keys(o)||[])[0];r.unitcode="/".concat(i,"/").concat(a),r.companionWidth=+s.split("x")[0],r.companionHeight=+s.split("x")[1],r.companionDiv=o[s],r.embedScript(),r.setup(),r.show()}else r.disable();return r}return Pi(n,[{key:"name",get:function(){return"dfp_companion"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,_n.DFP_CONTENT_RESUME,this.hide),this.listenTo(this.core.options.dfp,_n.DFP_AD_ERROR,this.hide),this.listenTo(this.core.options.dfp,_n.DFP_CONTENT_ENDED,this.hide)}},{key:"embedScript",value:function(){var e="//www.googletagservices.com/tag/js/gpt.js";if(0===x('script[src="'.concat(e,'"]')).length){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",e),document.head.appendChild(t)}}},{key:"setup",value:function(){var e=this;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],googletag.cmd.push((function(){googletag.defineSlot(e.unitcode,[e.companionWidth,e.companionHeight],e.companionDiv).addService(googletag.companionAds()).addService(googletag.pubads()).addService(googletag.content()),googletag.companionAds().setRefreshUnfilledSlots(!0),googletag.pubads().enableVideoAds(),googletag.enableServices()}))}},{key:"show",value:function(){var e=this;googletag.cmd.push((function(){googletag.display(e.companionDiv)}))}},{key:"hide",value:function(){x("#".concat(this.companionDiv)).hide()}}]),n}(Be),$i="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function qi(){throw new Error("setTimeout has not been defined")}function Xi(){throw new Error("clearTimeout has not been defined")}var Qi=qi,Zi=Xi;function Ji(e){if(Qi===setTimeout)return setTimeout(e,0);if((Qi===qi||!Qi)&&setTimeout)return Qi=setTimeout,setTimeout(e,0);try{return Qi(e,0)}catch(t){try{return Qi.call(null,e,0)}catch(t){return Qi.call(this,e,0)}}}"function"==typeof $i.setTimeout&&(Qi=setTimeout),"function"==typeof $i.clearTimeout&&(Zi=clearTimeout);var er,tr=[],nr=!1,ir=-1;function rr(){nr&&er&&(nr=!1,er.length?tr=er.concat(tr):ir=-1,tr.length&&ar())}function ar(){if(!nr){var e=Ji(rr);nr=!0;for(var t=tr.length;t;){for(er=tr,tr=[];++ir<t;)er&&er[ir].run();ir=-1,t=tr.length}er=null,nr=!1,function(e){if(Zi===clearTimeout)return clearTimeout(e);if((Zi===Xi||!Zi)&&clearTimeout)return Zi=clearTimeout,clearTimeout(e);try{Zi(e)}catch(t){try{return Zi.call(null,e)}catch(t){return Zi.call(this,e)}}}(e)}}function or(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];tr.push(new sr(e,t)),1!==tr.length||nr||Ji(ar)}function sr(e,t){this.fun=e,this.array=t}sr.prototype.run=function(){this.fun.apply(null,this.array)};var lr=$i.performance||{};lr.now||lr.mozNow||lr.msNow||lr.oNow||lr.webkitNow;function ur(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var cr=".clappr-player#wp3-player-0 .dfp-ad-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 994;\n  transform: translateY(0);\n  transition: transform 0.3s ease; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--notransition {\n    transition: none !important; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mode {\n    visibility: hidden !important; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mobile-mode {\n    display: none !important; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--overlay-mode {\n    transform: translateY(-20px);\n    height: 80px; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--over-media-control {\n    z-index: 998; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--media-control-show {\n    transform: translateY(-80px); }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay video {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%; }\n";ur(cr);var dr=function(){function e(){Di(this,e)}return Pi(e,null,[{key:"Full",get:function(){return""}},{key:"Overlay",get:function(){return"dfp-ad-overlay--overlay-mode dfp-ad-overlay--over-media-control"}},{key:"Hidden",get:function(){return"dfp-ad-overlay--poster-mode"}},{key:"HiddenMobile",get:function(){return"dfp-ad-overlay--poster-mobile-mode"}}]),e}(),hr=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).setHiddenMode(),i.dfp||i.disable(),i}return Pi(n,[{key:"name",get:function(){return"dfp_ad_overlay"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"attributes",get:function(){return{class:"dfp-ad-overlay"}}}],[{key:"Mode",get:function(){return dr}}]),Pi(n,[{key:"bindEvents",value:function(){this.dfp=this.core.options.dfp,this.listenTo(this.dfp,_n.DFP_AD_LOADED,this.adLoaded),this.listenTo(this.dfp,_n.DFP_AD_CLOSED,this.setHiddenMode),this.listenTo(this.dfp,_n.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.dfp,_n.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.dfp,_n.DFP_ALL_ADS_COMPLETED,this.adEnded),this.listenTo(this.dfp,_n.DFP_CONTENT_STARTED,this.setHiddenMode),this.listenTo(this.dfp,_n.DFP_CONTENT_ENDED,this.setHiddenMode),this.listenTo(this.core,ye.CORE_RESIZE,this.updateSize),this.listenToOnce(this.core,ye.CORE_READY,this.bindMediaControlPluginsEvents),this.bindMediaControlEvents()}},{key:"bindMediaControlEvents",value:function(){this.unbindMediaControlEvents(),this.listenTo(this.core,ye.MEDIACONTROL_SHOW,this.mediaControlShow),this.listenTo(this.core,ye.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.removeClass("dfp-ad-overlay--notransition")}},{key:"unbindMediaControlEvents",value:function(){this.stopListening(this.core,ye.MEDIACONTROL_SHOW,this.mediaControlShow),this.stopListening(this.core,ye.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.addClass("dfp-ad-overlay--notransition")}},{key:"bindMediaControlPluginsEvents",value:function(){this.listenTo(this.core.mediaControl,ye.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,ye.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.mediaControlInteractionEnd),this.listenTo(this.core.mediaControl,_n.MEDIACONTROL_MODAL_SHOW,this.mediaControlModalShow),this.listenTo(this.core.mediaControl,_n.MEDIACONTROL_MODAL_HIDE,this.mediaControlModalHide),this.listenTo(this.core.mediaControl,_n.WM_VOLUME_SHOW,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,_n.WM_VOLUME_HIDE,this.mediaControlInteractionEnd)}},{key:"adLoaded",value:function(e){var t=e.isLinear();this.setMode(t?dr.Full:dr.Overlay),t&&(this.unbindMediaControlEvents(),this.mediaControlHide()),N.isMobile&&!t&&this.mediaControlShow()}},{key:"adEnded",value:function(e){this.setHiddenMode(),e&&this.bindMediaControlEvents()}},{key:"setHiddenMode",value:function(){this.setMode(N.isMobile?dr.HiddenMobile:dr.Hidden)}},{key:"mediaControlShow",value:function(){this.$el.addClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlHide",value:function(){this.$el.removeClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlModalShow",value:function(){this._modalVisible=!0,this.mediaControlInteractionStart()}},{key:"mediaControlModalHide",value:function(){this._modalVisible=!1,this.mediaControlInteractionEnd()}},{key:"mediaControlInteractionStart",value:function(){this._mode==dr.Overlay&&this.$el.removeClass("dfp-ad-overlay--over-media-control")}},{key:"mediaControlInteractionEnd",value:function(){this._modalVisible||this._mode==dr.Overlay&&this.$el.addClass("dfp-ad-overlay--over-media-control")}},{key:"setMode",value:function(e){var t=this;this._mode=e,this.$el.removeClass(dr.Overlay),this.$el.removeClass(dr.Hidden),this.$el.removeClass(dr.HiddenMobile),e&&(this.$el.addClass(e),or((function(){return t.updateSize()})))}},{key:"updateSize",value:function(){var e=this.$el.width(),t=this.$el.height();this.dfp.adsManager&&e&&t&&this.dfp.adsManager.resize(e,t,google.ima.ViewMode.NORMAL)}},{key:"render",value:function(){return this.$el.append(An.getStyleFrom(cr,{playerId:this.core.options.playerId})[0]),this}}]),n}(Ae),pr=function(e){Ni(n,e);var t=Hi(n);function n(e,i){var r;return Di(this,n),(r=t.call(this,e)).dfp=i,r.settings=r.defaultSettings,r.bindEvents(),r}return Pi(n,[{key:"name",get:function(){return"dfp_playback"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"tagName",get:function(){return"video"}},{key:"attributes",get:function(){return{"data-dfp-playback":""}}},{key:"adsManager",get:function(){return this.dfp&&this.dfp.adsManager}},{key:"defaultSettings",get:function(){return{seekEnabled:!1}}}]),Pi(n,[{key:"ready",value:function(){this.trigger(ye.PLAYBACK_READY,this.name)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.dfp,_n.DFP_AD_LOADED,(function(t){return e.duration=t&&t.getDuration()}))}},{key:"render",value:function(){return this}},{key:"getPlaybackType",value:function(){return"ad"}},{key:"getDuration",value:function(){return this.duration}},{key:"getRemainingTime",value:function(){return this.adsManager?this.adsManager.getRemainingTime():0}},{key:"play",value:function(){this.adsManager&&(this.playing=!0,this.trigger(ye.PLAYBACK_PLAY),this.adsManager.resume(),!this.updateTimer&&this.startUpdateTimer())}},{key:"pause",value:function(){this.adsManager&&(this.adsManager.pause(),this.playing=!1,this.trigger(ye.PLAYBACK_PAUSE),this.stopUpdateTimer())}},{key:"stop",value:function(){this.stopUpdateTimer(),Vi(Ui(n.prototype),"stop",this).call(this)}},{key:"startUpdateTimer",value:function(){var e=this;this.stopUpdateTimer(),this.updateTimer=setInterval((function(){var t=e.getRemainingTime();e.trigger(ye.PLAYBACK_TIMEUPDATE,{current:e.duration-t,total:e.duration,playbackType:e.getPlaybackType()})}),100)}},{key:"stopUpdateTimer",value:function(){clearInterval(this.updateTimer),delete this.updateTimer}},{key:"isPlaying",value:function(){return this.playing}},{key:"destroy",value:function(){this.stopUpdateTimer(),this.stopListening(),Vi(Ui(n.prototype),"destroy",this).call(this)}},{key:"volume",value:function(e){this.adsManager&&this.adsManager.setVolume(e/100)}},{key:"getVolume",value:function(){return this.adsManager?this.adsManager.getVolume():this.dfp.container.playback.getVolume()/100}}]),n}(we),fr=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).isServedAd=!1,i.isFirstPlay=!0,i}return Pi(n,[{key:"name",get:function(){return"dfp_video_ad"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"videoElement",get:function(){var e=this.container.playback,t=e&&e.playback;return t&&t.el}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,_n.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,_n.WM_RESOURCE_SELECTED,this.onResourceSelected),this.listenToOnce(this.container.playback,_n.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container,ye.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,ye.CONTAINER_ENDED,this.containerEnded),this.listenTo(this.container,ye.CONTAINER_STOP,this.containerEnded),this.listenTo(this.container,ye.CONTAINER_ERROR,this.containerError),this.listenTo(this.options.dfp,_n.DFP_AD_LOADED,this.adLoaded),this.listenTo(this.options.dfp,_n.DFP_CONTENT_PAUSE,this.adBreakStarted),this.listenTo(this.container,_n.DFP_AD_STARTED,this.onAdStarted),this.listenTo(this.container,_n.DFP_AD_RESUME,this.onDFPAdResume),this.listenTo(this.options.dfp,_n.DFP_CONTENT_RESUME,this.adBreakEnded),this.listenTo(this.options.dfp,_n.DFP_AD_ERROR,this.adError),this.listenTo(this.container,_n.WM_MASTERTOPIP,this.onPip)}},{key:"onPlayRequestedReady",value:function(){this.container.playback.disablePlayWhenReady=!this.options.dfp.shouldSkipAd}},{key:"onPip",value:function(){this.stopListening(),this.listenTo(this.container,_n.WM_PIPTOMASTER,this.bindEvents)}},{key:"onResourceSelected",value:function(){this.hasError=!1}},{key:"onResourceReady",value:function(){var e=this.container.playback.options;e.onPip||(this.adPlayback=new pr(e,this.options.dfp)),this.containerPlay(),this.options.dfp.contentStarted()}},{key:"containerPlay",value:function(){var e=this;this.containerPlaying=!0,this.hasError&&or((function(){return e.adBreakEnded()}))}},{key:"containerEnded",value:function(){this.options.dfp.contentEnded(),this.stopListening(),this.bindEvents(),this.containerPlaying=!1,this.hasError&&this.adPlayback&&this.adPlayback.stop()}},{key:"containerError",value:function(){this.hasError=!0}},{key:"adError",value:function(){this.hasError=!0,this.adBreakEnded()}},{key:"adLoaded",value:function(e){var t=this,n=e.isLinear();this.options.dfp.podIndex=e.getAdPodInfo().getPodIndex();var i={"-1":function(){ce.info(t.name,"Post-roll loaded"),t.adPlayback&&(t.adPlayback.duration=e.getDuration()),t.postroll=!0},0:function(){return ce.info(t.name,"Pre-roll loaded")},midroll:function(){t.adPlayback&&(t.adPlayback.duration=e.getDuration()),ce.info(t.name,"Mid-roll loaded")}};n?(i[this.options.dfp.podIndex]||i.midroll)():ce.info(this.name,"Overlay loaded")}},{key:"onDFPAdResume",value:function(){this.isFirstPlay&&(this.syncVolumeWithIdPlayback(),this.isFirstPlay=!1)}},{key:"adBreakStarted",value:function(e){this.isServedAd=!0,this.onBreak=!0,this.hasError?this.adBreakEnded():this.container.playback.isPlaying()?this.pauseMainContent(e):this.initAdPlayback(e)}},{key:"onAdStarted",value:function(){this.container.getPlugin("click_to_pause").disable(),this.adPlayback&&this.adPlayback.play(),this.container.settingsUpdate(),this.container.trigger(ye.CONTAINER_PLAY)}},{key:"pauseMainContent",value:function(e){this.listenToOnce(this.container.playback,ye.PLAYBACK_PAUSE,this.initAdPlayback.bind(this,e)),this.container.pause()}},{key:"initAdPlayback",value:function(e){var t=this.container.playback.options;this.playback=this.container.playback,this.playback.stopListening(),this.container.stopListening(),this.adPlayback||(this.adPlayback=new pr(t,this.options.dfp),this.adPlayback.duration=e.getDuration()),this.syncVolumeWithIdPlayback(),this.container.playback=this.adPlayback,this.container.bindEvents(),this.adPlayback.ready()}},{key:"adBreakEnded",value:function(){var e=this;this.onBreak&&(this.container.stopListening(),this.playback.bindPlaybackEvents(),this.playback._options=Mi({},this.adPlayback._options),this.container.playback=this.playback,this.container.playback.volume(100*this.adPlayback.getVolume()),this.container.currentTime=this.playback.currentTime,0===this.options.dfp.podIndex&&this.playback.checkInitialSeek(),this.container.bindEvents()),this.adPlayback&&(this.adPlayback.stop(),this.adPlayback.destroy(),this.adPlayback=null),this.listenToOnce(this.container,ye.CONTAINER_PLAY,(function(){return e.container.settingsUpdate()})),this.containerPlaying||this.hasError||this.options.dfp.shouldSkipAd?(!N.supportsTouchEvents&&this.container.getPlugin("click_to_pause").enable(),or((function(){return e.container.playback.playWhenReady()}))):this.container.getPlugin("poster").show(),this.onBreak=!1,this.hasError=!1,this.isServedAd=!1}},{key:"syncVolumeWithIdPlayback",value:function(){var e=this.playback.getVolume();null!==e&&this.adPlayback.volume(e)}},{key:"containerTimeUpdate",value:function(e){}}]),n}(Ue),yr=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).core=e,i.$el.on("click",(function(e){e.stopPropagation(),i.mediaControl.trigger(_n.MEDIACONTROL_ITEMCLICKED)})),i.$el.addClass("media-control-element"),i}return Pi(n,[{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return"center"}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"kibo",get:function(){return this.mediaControl.kibo}}]),Pi(n,[{key:"applyButtonStyle",value:function(e){this.buttonsColor&&e&&$(e).find("svg path").css("fill",this.buttonsColor)}},{key:"bindKeyAndShow",value:function(e,t){var n=this;this.kibo.down(e,(function(){return n.mediaControl.show(),t()}))}},{key:"triggerWillShowModalElement",value:function(){this.core.trigger(_n.WILL_SHOW_MODAL_ELEMENT,{name:this.name})}},{key:"triggerDidHideModalElement",value:function(){this.core.trigger(_n.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"destroy",value:function(){this._mediaControl=null,Vi(Ui(n.prototype),"destroy",this).call(this)}}]),n}(Ae),gr='.clappr-player#wp3-player-0 .dfp-countdown {\n  display: none;\n  position: relative;\n  z-index: 998;\n  pointer-events: none;\n  font-size: 13px;\n  line-height: 13px;\n  color: #e5e886;\n  transition: transform 0.3s ease-out; }\n  .clappr-player#wp3-player-0 .dfp-countdown.media-control-element {\n    padding-left: 0;\n    padding-right: 0; }\n  .clappr-player#wp3-player-0 .dfp-countdown__text {\n    display: inline-block;\n    font-family: "opensans-regular", sans-serif; }\n  .clappr-player#wp3-player-0 .dfp-countdown__time {\n    display: inline-block;\n    font-family: "opensans-bold", sans-serif; }\n  .clappr-player#wp3-player-0 .dfp-countdown--hidden {\n    display: none; }\n';ur(gr);var vr=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).core=e,i.message={"-1":"Este anúncio encerra em",0:"O seu vídeo começa em",midroll:"O seu vídeo continua em"},i}return Pi(n,[{key:"name",get:function(){return"dfp_countdown"}},{key:"template",get:function(){return $e('<div class="dfp-countdown__text"><%= message %></div>\n<div class="dfp-countdown__time"><%= remainingTime %></div>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"attributes",get:function(){return{class:"dfp-countdown"}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,_n.DFP_AD_STARTED,this.adStarted),this.listenTo(this.core.options.dfp,_n.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.core.options.dfp,_n.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.core.options.dfp,_n.DFP_AD_ERROR,this.adEnded),this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.adEnded),this.mediaControl&&this.listenTo(this.mediaControl,ye.MEDIACONTROL_RENDERED,this.appendToMediaControl)}},{key:"adStarted",value:function(e){e.isLinear()&&(this.playback=this.core.activePlayback,this.renderCountdown(),this.listenTo(this.playback,ye.PLAYBACK_TIMEUPDATE,this.updateCountdown),this.$el.removeClass("dfp-countdown--hidden"))}},{key:"adEnded",value:function(){this.stopListening(this.playback,ye.PLAYBACK_TIMEUPDATE),this.$el.addClass("dfp-countdown--hidden")}},{key:"renderCountdown",value:function(){var e=An.getStyleFrom(gr,{playerId:this.container.options.playerId}),t="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$el.html(this.template({message:this.message[this.core.options.dfp.podIndex]||this.message.midroll,remainingTime:re.formatTime(t)})),this.$el.append(e[0]),this.$duration=this.$el.find(".dfp-countdown__time"),this.$message=this.$el.find(".dfp-countdown__text"),this.appendToMediaControl()}},{key:"appendToMediaControl",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__left");e[0]&&!this.isRendered&&(e.append(this.el),this.isRendered=!0)}},{key:"updateCountdown",value:function(){var e="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$duration.text(re.formatTime(e)),this.$message.text(this.message[this.core.options.dfp.podIndex]||this.message.midroll)}},{key:"destroy",value:function(){this.stopListening(),Vi(Ui(n.prototype),"destroy",this).call(this)}}]),n}(yr);var mr,br,Er=Function.prototype,kr=Object.prototype,Ar=Er.toString,_r=kr.hasOwnProperty,Tr=Ar.call(Object),wr=kr.toString,Sr=(mr=Object.getPrototypeOf,br=Object,function(e){return mr(br(e))});var Cr=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=wr.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Sr(e);if(null===t)return!0;var n=_r.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ar.call(n)==Tr},Rr=1/0,Ir=NaN,Dr=4294967295,Or=/^\s+|\s+$/g,Pr=/^[-+]0x[0-9a-f]+$/i,xr=/^0b[01]+$/i,Lr=/^0o[0-7]+$/i,Mr=parseInt;var Nr=Object.prototype.toString,Ur=Math.min;function Br(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Fr(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Nr.call(e)}(e))return Ir;if(Br(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Br(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Or,"");var n=xr.test(e);return n||Lr.test(e)?Mr(e.slice(2),n?2:8):Pr.test(e)?Ir:+e}(e))===Rr||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function jr(e){return e}var Hr=function(e,t){if((e=function(e){var t=Fr(e),n=t%1;return t==t?n?t-n:t:0}(e))<1||e>9007199254740991)return[];var n=Dr,i=Ur(e,Dr);e-=Dr;for(var r=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(i,t="function"==typeof t?t:jr);++n<e;)t(n);return r};const Vr={_call:e=>{if(window.dmp&&window.dmp.api)try{return window.dmp.api[e]()}catch(t){return console.error(`dmp-api@${e}: `,t.message),null}return null},getSegments:()=>{const e=Vr._call("getSegments");return e||""},getDmpId:()=>{const e=Vr._call("getDmpId");return e||""}};var Kr=Vr,zr=kn.LocalStorage,Gr=kn.embedScript,Wr=kn.DOM,Yr=ce.getInstance(),$r=["video/mp4","video/webm","video/x-msvideo","video/x-motion-jpeg","video/mpeg2","video/x-ms-wmv","application/x-mpegURL","application/vnd.apple.mpegurl","video/MP2T"],qr=new Promise((function(e,t){!(N.isSmartTvEnvironment||window.google&&window.google.ima)?Gr("https://imasdk.googleapis.com/js/sdkloader/ima3.js").then(e,t):e()})),Xr=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).isBootstrapReady=!1,i.isAllAdsCompleted=!1,i.isContainerEnded=!1,i.attachCorePlugins(),i}return Pi(n,[{key:"name",get:function(){return"dfp"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"attributes",get:function(){return{class:"dfp"}}},{key:"imaScript",get:function(){return qr}},{key:"dfpAdTagTemplate",get:function(){return $e("".concat(this.options.env.protocol,"://pubads.g.doubleclick.net/gampad/ads?sz=1280x720&iu=/<%= adAccountId %>/<%= adUnit %>&cmsid=<%= adCmsId %>&vid=<%= videoId %>&cust_params=<%= customParams %>&ciu_szs=940x360&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]"))}},{key:"sizes",get:function(){return{playerWidth:this.core.el&&this.core.el.offsetWidth,defaultWidth:640,linearHeight:400,nonLinearHeight:150}}},{key:"shouldSkipAd",get:function(){var e=this.core.options.skipDFP,t=!window.google||!window.google.ima,n=Wr.hasChildElement(this.core.el,".dfp-ad-overlay");return e||t||!this.adUnit||!n}}],[{key:"DEFAULT_ACCOUNT_ID",get:function(){return 95377733}},{key:"DEFAULT_CMS_ID",get:function(){return 11413}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,ye.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,_n.DFP_DISABLE,this.disable),this.listenTo(this,_n.DFP_FINISHED,this.destroyIMA),this.listenTo(this.core,_n.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked)}},{key:"onTapToUnmuteClicked",value:function(){if(this.adsManager){var e=this.adsManager.getVolume();this.adsManager.setVolume(1),this.adsManager.setVolume(e)}}},{key:"enable",value:function(){this.enabled||(this.dfpAdOverlay&&this.dfpAdOverlay.enable(),this.dfpCountdown&&this.dfpCountdown.enable(),this.dfpVideoAd&&this.dfpVideoAd.enable(),this.adCompanion&&this.adCompanion.enable(),Vi(Ui(n.prototype),"enable",this).call(this),this.bindContainerEvents())}},{key:"disable",value:function(){this.enabled&&(this.dfpAdOverlay&&this.dfpAdOverlay.disable(),this.dfpCountdown&&this.dfpCountdown.disable(),this.dfpVideoAd&&this.dfpVideoAd.disable(),this.adCompanion&&this.adCompanion.disable(),Vi(Ui(n.prototype),"disable",this).call(this),this.listenToOnce(this.core,_n.DFP_ENABLE,this.enable))}},{key:"attachCorePlugins",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0,this.core._options=Object.assign(this.core.options,{dfp:this}),this.dfpAdOverlay=new hr(this.core),!N.isChromecast&&(this.dfpCountdown=new vr(this.core)),this.core.$el.append(this.dfpAdOverlay.el),this.core.addPlugin(this.dfpAdOverlay)}},{key:"attachContainerPlugins",value:function(){this.container&&(this.container._options=Object.assign(this.container.options,{dfp:this}),this.dfpVideoAd=new fr(this.container),this.container.addPlugin(this.dfpVideoAd))}},{key:"configure",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0;var e=this.core.getCurrentContainer().options;this.videoId=e&&e.src||e.sources&&e.sources[0],!1!==this.core.options.useStyledNonLinearAds&&(this.core.options.useStyledNonLinearAds=!0),this.container&&(this.stopListening(this.container.playback,_n.WM_VIDEO_METADATA_LOADED),this.listenTo(this.container.playback,_n.WM_VIDEO_METADATA_LOADED,this.init))}},{key:"parseCustomData",value:function(e){return Cr(e)?Object.keys(e).reduce((function(t,n){var i=e[n],r="".concat(n,"=").concat(i);return t?t+="&".concat(r):r}),""):e}},{key:"init",value:function(e){var t=this,i=this.core.getCurrentContainer().options;this.adAccountId=i.adAccountId||e.adAccountId||n.DEFAULT_ACCOUNT_ID,this.adCmsId=i.adCmsId||e.adCmsId||n.DEFAULT_CMS_ID,this.error=!1,this.adUnit=i.adUnit||e.adUnit,this.adUnit&&(this.adCustomData=this.getAdCustomData(i,e),this.setupCompanion(),this.imaScript.then((function(){return t.bootstrapApi()}),(function(){return t.onAdError({type:"imaLoadError",message:"google.ima not available"})})))}},{key:"getAdCustomData",value:function(e,t){var n=t.adCustomData,i=this.parseCustomData(e.adCustomData),r="";r=e.adUnit?i:n&&i?"".concat(n,"&").concat(i):n||i;var a=Kr.getDmpId(),o=Kr.getSegments(),s=zr.loadRaw("nvgpersona13574",JSON.parse),l={};return l.video_subscription=t.isSubscriberOnly||!1,s&&(l.nvg_gender=s.gender,l.nvg_age=s.age,l.nvg_income=s.income),a&&o&&(l.ognCluster=o,l.kuid=a),0!==Object.keys(l).length?(r?r+"&":"")+this.parseCustomData(l):r}},{key:"triggerContentResume",value:function(){this.trigger(_n.DFP_CONTENT_RESUME),this.container.trigger(_n.DFP_CONTENT_RESUME)}},{key:"bootstrapApi",value:function(){this.error=!1,this.destroyIMA(),this.shouldSkipAd||(this.setupIMA(),this.requestAd(),this.isAllAdsCompleted=!1,this.isBootstrapReady=!0)}},{key:"setupIMA",value:function(){if(google.ima.settings.setLocale("pt-br"),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.adDisplayContainer||(this.adDisplayContainer=new google.ima.AdDisplayContainer(this.dfpAdOverlay.el,this.dfpVideoAd.videoElement)),this.adsLoader||(this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)),this.adsRenderingSettings||(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!N.isChromecast,N.isChrome&&N.isMobile&&(this.adsRenderingSettings.mimeTypes=$r)),!this.adRequest){var e=Math.min(this.sizes.defaultWidth,this.sizes.playerWidth);this.adsRequest=new google.ima.AdsRequest,this.adsRequest.linearAdSlotWidth=e,this.adsRequest.linearAdSlotHeight=this.sizes.linearHeight,this.adsRequest.nonLinearAdSlotWidth=e,this.adsRequest.nonLinearAdSlotHeight=this.sizes.nonLinearHeight}}},{key:"setupCompanion",value:function(){Object.assign({},this.core.options,{adUnit:this.adUnit,adCustomData:this.adCustomData}),this.adCompanion&&this.adCompanion.stopListening(),this.adCompanion=new Yi(this.core,this.adAccountId)}},{key:"destroyIMA",value:function(){this.adsManager&&this.adsManager.destroy(),this.adsLoader&&this.adsLoader.destroy(),this.adsManager=null,this.adsLoader=null,this.isBootstrapReady=!1}},{key:"destroyVideoAd",value:function(){this.dfpVideoAd&&(this.dfpVideoAd.stopListening(),this.dfpVideoAd.destroy(),this.dfpVideoAd=null)}},{key:"onAdError",value:function(e){if(!this.error){var t=e&&this.getErrorData(e);Yr.warn(this.name,"dfp encountered an error, skipping -",t,e),this.error=!0,this.trigger(_n.DFP_AD_ERROR,t),this.container.trigger(_n.DFP_AD_ERROR,t)}}},{key:"getErrorData",value:function(e){var t="function"==typeof e.getError?e.getError():e;return t?{type:"function"==typeof t.getType?t.getType():t.type||t.o||t,message:t.message||t.l||t}:{}}},{key:"onAdsManagerLoaded",value:function(e){var t=this;this.adsRenderingSettings.useStyledNonLinearAds=this.core.options.useStyledNonLinearAds,this.adsManager=e.getAdsManager(this.dfpVideoAd.videoElement,this.adsRenderingSettings),this.discardWatchedAds(this.watchedAds),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,(function(e){return t.onAdLog(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_METADATA,(function(e){return t.onAdMetadata(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(e){return t.onContentPauseRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(e){return t.onContentResumeRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,(function(e){return t.onAdStarted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,(function(e){return t.onAdResumed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,(function(e){return t.onAdPaused(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,(function(e){return t.onAdSkipped(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,(function(e){return t.onAdLoaded(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,(function(e){return t.onAdClosed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,(function(e){return t.onAdCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){return t.onAllAdsCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,(function(e){return t.onAdClicked(e)})),this.trigger(_n.DFP_MANAGER_LOADED),this.container.trigger(_n.DFP_MANAGER_LOADED)}},{key:"onResourceReady",value:function(){this.isContainerEnded=!1,this.shouldSkipAd?this.triggerContentResume():this.startAd()}},{key:"startAd",value:function(){if(this.adsManager)try{this.adsManager.init(this.dfpAdOverlay.$el.width(),this.dfpAdOverlay.$el.height(),google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(e){this.onAdError({type:"adError",message:e&&e.message})}else this.listenToOnce(this,_n.DFP_MANAGER_LOADED,this.startAd)}},{key:"discardWatchedAds",value:function(e){var t=this;Hr(e,(function(e){setTimeout((function(){return t.adsManager.discardAdBreak()}),500*e)}))}},{key:"onAdLog",value:function(e){var t=(e.getAdData()||{}).adError;t.getErrorCode()===google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE&&this.onAdError(t)}},{key:"onAdClicked",value:function(e){var t=e.getAd();this.container.trigger(_n.DFP_AD_CLICKED,t)}},{key:"onAdMetadata",value:function(){this.container.trigger(_n.DFP_AD_METADATA)}},{key:"onAdLoaded",value:function(e){this.error=!1;var t=e.getAd();this.trigger(_n.DFP_AD_LOADED,t),this.container.trigger(_n.DFP_AD_LOADED,t)}},{key:"onAdStarted",value:function(e){var t=e.getAd();this.watchedAds+=1,this.trigger(_n.DFP_AD_STARTED,t),this.container.trigger(_n.DFP_AD_STARTED,t)}},{key:"onAdResumed",value:function(e){var t=e.getAd();this.container.trigger(_n.DFP_AD_RESUME,t.isLinear())}},{key:"onAdPaused",value:function(e){var t=e.getAd();this.container.trigger(_n.DFP_AD_PAUSE,t.isLinear())}},{key:"onAdClosed",value:function(e){var t=e.getAd();this.trigger(_n.DFP_AD_CLOSED,t.isLinear()),this.container.trigger(_n.DFP_AD_CLOSED,t.isLinear())}},{key:"onAdSkipped",value:function(e){var t=e.getAd();this.trigger(_n.DFP_AD_SKIPPED,t.isLinear()),this.container.trigger(_n.DFP_AD_SKIPPED,t.isLinear())}},{key:"onAdCompleted",value:function(e){var t=e.getAd();this.trigger(_n.DFP_AD_COMPLETED,t.isLinear()),this.container.trigger(_n.DFP_AD_COMPLETED,t.isLinear())}},{key:"onAllAdsCompleted",value:function(e){this.isAllAdsCompleted=!0;var t=e.getAd();this.trigger(_n.DFP_ALL_ADS_COMPLETED,t.isLinear()),this.container.trigger(_n.DFP_ALL_ADS_COMPLETED,t.isLinear()),this.watchedAds=0,this.triggerDfpFinished()}},{key:"onContentPauseRequested",value:function(e){var t=e.getAd();this.trigger(_n.DFP_CONTENT_PAUSE,t),this.container.trigger(_n.DFP_CONTENT_PAUSE,t),this.core.getCurrentContainer()||this.adsManager.stop()}},{key:"onContentResumeRequested",value:function(){this.error||(!this.dfpVideoAd.isServedAd&&this.container.trigger(_n.DFP_AD_NOTSERVED),this.triggerContentResume())}},{key:"containerChanged",value:function(){this.destroyVideoAd(),this.container=this.core.activeContainer;var e=this.container.playback;e.options.onPip?this.listenTo(this.core.getCurrentContainer().playback,_n.WM_RESOURCE_READY,(function(){return e.play()})):(this.attachContainerPlugins(),this.configure(),this.bindContainerEvents(),this.trigger(_n.DFP_CONTENT_ENDED),this.container.trigger(_n.DFP_CONTENT_ENDED)),this.listenTo(this.container,ye.CONTAINER_ENDED,this.onContainerEnded),this.listenTo(this.container,ye.CONTAINER_STOP,this.onContainerEnded)}},{key:"triggerDfpFinished",value:function(){var e=this.isContainerEnded&&this.isAllAdsCompleted,t=this.isContainerEnded&&this.error;(e||t)&&(this.trigger(_n.DFP_FINISHED),this.container.trigger(_n.DFP_FINISHED))}},{key:"onContainerEnded",value:function(){this.isContainerEnded=!0,this.bindContainerEvents(),this.triggerDfpFinished()}},{key:"bindContainerEvents",value:function(){this.listenToOnce(this.container.playback,_n.WM_PLAY_REQUESTED_READY,this.onUserGesture),this.listenToOnce(this.container.playback,_n.WM_RESOURCE_READY,this.onResourceReady)}},{key:"contentEnded",value:function(){this.trigger(_n.DFP_CONTENT_ENDED),this.container.trigger(_n.DFP_CONTENT_ENDED),this.adsLoader&&this.adsLoader.contentComplete()}},{key:"contentStarted",value:function(){this.trigger(_n.DFP_CONTENT_STARTED),this.container.trigger(_n.DFP_CONTENT_STARTED)}},{key:"onUserGesture",value:function(){!this.isBootstrapReady&&this.bootstrapApi(),this.adDisplayContainer&&this.adDisplayContainer.initialize()}},{key:"requestAd",value:function(){var e=this.unescapeHtml(this.adUnit),t=encodeURIComponent(this.unescapeHtml(this.adCustomData));this.adsRequest.adTagUrl=this.dfpAdTagTemplate({adAccountId:this.adAccountId,adUnit:e,adCmsId:this.adCmsId,videoId:this.videoId,customParams:t}),this.adsLoader&&this.adsLoader.requestAds(this.adsRequest)}},{key:"unescapeHtml",value:function(e){return x("<div/>").html(e).text()}}]),n}(Be);function Qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jr(e,t,n){return t&&Zr(e.prototype,t),n&&Zr(e,n),e}function ea(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&na(e,t)}function ta(e){return(ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function na(e,t){return(na=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ia(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var ra=function(e){function t(e){return Qr(this,t),ia(this,ta(t).call(this,e))}return ea(t,e),Jr(t,[{key:"name",get:function(){return"click_to_pause"}},{key:"supportedVersion",get:function(){return{min:"0.4.9"}}}]),Jr(t,[{key:"bindEvents",value:function(){this.listenTo(this.container,ye.CONTAINER_CLICK,this.click),this.listenTo(this.container,ye.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}},{key:"click",value:function(){(this.container.getPlaybackType()!==we.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause():this.container.play())}},{key:"settingsUpdate",value:function(){var e=this.container.getPlaybackType()!==we.LIVE||this.container.isDvrEnabled();if(e!==this.pointerEnabled){var t=e?"addClass":"removeClass";this.container.$el[t]("pointer-enabled"),this.pointerEnabled=e}}}]),t}(Ue);function aa(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}aa(".cc-controls[data-cc-controls] {\n  float: right;\n  position: relative;\n  display: none; }\n  .cc-controls[data-cc-controls].available {\n    display: block; }\n  .cc-controls[data-cc-controls] .cc-button {\n    padding: 6px !important; }\n    .cc-controls[data-cc-controls] .cc-button.enabled {\n      display: block;\n      opacity: 1.0; }\n      .cc-controls[data-cc-controls] .cc-button.enabled:hover {\n        opacity: 1.0;\n        text-shadow: none; }\n  .cc-controls[data-cc-controls] > ul {\n    list-style-type: none;\n    position: absolute;\n    bottom: 25px;\n    border: 1px solid black;\n    display: none;\n    background-color: #e6e6e6; }\n  .cc-controls[data-cc-controls] li {\n    font-size: 10px; }\n    .cc-controls[data-cc-controls] li[data-title] {\n      background-color: #c3c2c2;\n      padding: 5px; }\n    .cc-controls[data-cc-controls] li a {\n      color: #444;\n      padding: 2px 10px;\n      display: block;\n      text-decoration: none; }\n      .cc-controls[data-cc-controls] li a:hover {\n        background-color: #555;\n        color: white; }\n        .cc-controls[data-cc-controls] li a:hover a {\n          color: white;\n          text-decoration: none; }\n    .cc-controls[data-cc-controls] li.current a {\n      color: #f00; }\n");aa('.dvr-controls[data-dvr-controls] {\n  display: inline-block;\n  float: left;\n  color: #fff;\n  line-height: 32px;\n  font-size: 10px;\n  font-weight: bold;\n  margin-left: 6px; }\n  .dvr-controls[data-dvr-controls] .live-info {\n    cursor: default;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase; }\n    .dvr-controls[data-dvr-controls] .live-info:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #ff0101; }\n    .dvr-controls[data-dvr-controls] .live-info.disabled {\n      opacity: 0.3; }\n      .dvr-controls[data-dvr-controls] .live-info.disabled:before {\n        background-color: #fff; }\n  .dvr-controls[data-dvr-controls] .live-button {\n    cursor: pointer;\n    outline: none;\n    display: none;\n    border: 0;\n    color: #fff;\n    background-color: transparent;\n    height: 32px;\n    padding: 0;\n    opacity: 0.7;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase;\n    transition: all 0.1s ease; }\n    .dvr-controls[data-dvr-controls] .live-button:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #fff; }\n    .dvr-controls[data-dvr-controls] .live-button:hover {\n      opacity: 1;\n      text-shadow: rgba(255, 255, 255, 0.75) 0 0 5px; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-info {\n  display: none; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-button {\n  display: block; }\n\n.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #005aff; }\n\n.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ff0101; }\n');aa("div.player-error-screen {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2000;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; }\n  div.player-error-screen__content[data-error-screen] {\n    font-size: 14px;\n    color: #CCCACA;\n    margin-top: 45px; }\n  div.player-error-screen__title[data-error-screen] {\n    font-weight: bold;\n    line-height: 30px;\n    font-size: 18px; }\n  div.player-error-screen__message[data-error-screen] {\n    width: 90%;\n    margin: 0 auto; }\n  div.player-error-screen__code[data-error-screen] {\n    font-size: 13px;\n    margin-top: 15px; }\n  div.player-error-screen__reload {\n    cursor: pointer;\n    width: 30px;\n    margin: 15px auto 0; }\n");x('link[rel="shortcut icon"]');var oa=(void 0!==$i?$i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}).performance||{},sa=(oa.now||oa.mozNow||oa.msNow||oa.oNow||oa.webkitNow,function(e){this.element=e||window.document,this.initialize()});sa.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},sa.KEY_CODES_BY_NAME={},function(){for(var e in sa.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(sa.KEY_NAMES_BY_CODE,e)&&(sa.KEY_CODES_BY_NAME[sa.KEY_NAMES_BY_CODE[e]]=+e)}(),sa.MODIFIERS=["shift","ctrl","alt"],sa.registerEvent=document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:document.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:void 0,sa.unregisterEvent=document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:document.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:void 0,sa.stringContains=function(e,t){return-1!==e.indexOf(t)},sa.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},sa.capitalize=function(e){return e.toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},sa.isString=function(e){return sa.stringContains(Object.prototype.toString.call(e),"String")},sa.arrayIncludes=Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},sa.extractModifiers=function(e){var t,n;for(t=[],n=0;n<sa.MODIFIERS.length;n++)sa.stringContains(e,sa.MODIFIERS[n])&&t.push(sa.MODIFIERS[n]);return t},sa.extractKey=function(e){var t,n;for(t=sa.neatString(e).split(" "),n=0;n<t.length;n++)if(!sa.arrayIncludes(sa.MODIFIERS,t[n]))return t[n]},sa.modifiersAndKey=function(e){var t,n;return sa.stringContains(e,"any")?sa.neatString(e).split(" ").slice(0,2).join(" "):(t=sa.extractModifiers(e),(n=sa.extractKey(e))&&!sa.arrayIncludes(sa.MODIFIERS,n)&&t.push(n),t.join(" "))},sa.keyName=function(e){return sa.KEY_NAMES_BY_CODE[e+""]},sa.keyCode=function(e){return+sa.KEY_CODES_BY_NAME[e]},sa.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<sa.MODIFIERS.length;e++)this.lastModifiers[sa.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),sa.registerEvent(this.element,"keydown",this.downHandler),sa.registerEvent(this.element,"keyup",this.upHandler),sa.registerEvent(window,"unload",(function e(){sa.unregisterEvent(t.element,"keydown",t.downHandler),sa.unregisterEvent(t.element,"keyup",t.upHandler),sa.unregisterEvent(window,"unload",e)}))},sa.prototype.handler=function(e){var t=this;return function(n){var i,r,a;for(n=n||window.event,t.lastKeyCode=n.keyCode,i=0;i<sa.MODIFIERS.length;i++)t.lastModifiers[sa.MODIFIERS[i]]=n[sa.MODIFIERS[i]+"Key"];for(sa.arrayIncludes(sa.MODIFIERS,sa.keyName(t.lastKeyCode))&&(t.lastModifiers[sa.keyName(t.lastKeyCode)]=!0),r=t["keys"+sa.capitalize(e)],i=0;i<r.any.length;i++)!1===r.any[i](n)&&n.preventDefault&&n.preventDefault();if(r[a=t.lastModifiersAndKey()])for(i=0;i<r[a].length;i++)!1===r[a][i](n)&&n.preventDefault&&n.preventDefault()}},sa.prototype.registerKeys=function(e,t,n){var i,r,a=this["keys"+sa.capitalize(e)];for(sa.isString(t)&&(t=[t]),i=0;i<t.length;i++)r=t[i],a[r=sa.modifiersAndKey(r+"")]?a[r].push(n):a[r]=[n];return this},sa.prototype.unregisterKeys=function(e,t,n){var i,r,a,o=this["keys"+sa.capitalize(e)];for(sa.isString(t)&&(t=[t]),i=0;i<t.length;i++)if(a=t[i],a=sa.modifiersAndKey(a+""),null===n)delete o[a];else if(o[a])for(r=0;r<o[a].length;r++)if(String(o[a][r])===String(n)){o[a].splice(r,1);break}return this},sa.prototype.off=function(e){return this.unregisterKeys("down",e,null)},sa.prototype.delegate=function(e,t,n){return null!==n||void 0!==n?this.registerKeys(e,t,n):this.unregisterKeys(e,t,n)},sa.prototype.down=function(e,t){return this.delegate("down",e,t)},sa.prototype.up=function(e,t){return this.delegate("up",e,t)},sa.prototype.lastKey=function(e){return e?this.lastModifiers[e]:sa.keyName(this.lastKeyCode)},sa.prototype.lastModifiersAndKey=function(){var e,t;for(e=[],t=0;t<sa.MODIFIERS.length;t++)this.lastKey(sa.MODIFIERS[t])&&e.push(sa.MODIFIERS[t]);return sa.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};var la=sa;aa('.media-control-notransition {\n  transition: none !important; }\n\n.media-control[data-media-control] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  pointer-events: none; }\n  .media-control[data-media-control].dragging {\n    pointer-events: auto;\n    cursor: -webkit-grabbing !important;\n    cursor: grabbing !important;\n    cursor: url("closed-hand.cur"), move; }\n    .media-control[data-media-control].dragging * {\n      cursor: -webkit-grabbing !important;\n      cursor: grabbing !important;\n      cursor: url("closed-hand.cur"), move; }\n  .media-control[data-media-control] .media-control-background[data-background] {\n    position: absolute;\n    height: 40%;\n    width: 100%;\n    bottom: 0;\n    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));\n    transition: opacity 0.6s ease-out; }\n  .media-control[data-media-control] .media-control-icon {\n    line-height: 0;\n    letter-spacing: 0;\n    speak: none;\n    color: #fff;\n    opacity: 0.5;\n    vertical-align: middle;\n    text-align: left;\n    transition: all 0.1s ease; }\n  .media-control[data-media-control] .media-control-icon:hover {\n    color: white;\n    opacity: 0.75;\n    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }\n  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {\n    opacity: 0; }\n  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {\n    bottom: -50px; }\n    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n      opacity: 0; }\n  .media-control[data-media-control] .media-control-layer[data-controls] {\n    position: absolute;\n    bottom: 7px;\n    width: 100%;\n    height: 32px;\n    font-size: 0;\n    vertical-align: middle;\n    pointer-events: auto;\n    transition: bottom 0.4s ease-out; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      left: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {\n      height: 100%;\n      text-align: center;\n      line-height: 32px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      right: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {\n      background-color: transparent;\n      border: 0;\n      margin: 0 6px;\n      padding: 0;\n      cursor: pointer;\n      display: inline-block;\n      width: 32px;\n      height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {\n        width: 100%;\n        height: 22px; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {\n          fill: white; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {\n        outline: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {\n        float: right;\n        background-color: transparent;\n        border: 0;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {\n        background-color: transparent;\n        border: 0;\n        cursor: default;\n        display: none;\n        float: right;\n        height: 100%; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {\n          display: block;\n          opacity: 1.0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {\n            opacity: 1.0;\n            text-shadow: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {\n        float: left; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {\n        float: left; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      display: inline-block;\n      font-size: 10px;\n      color: white;\n      cursor: default;\n      line-height: 32px;\n      position: relative; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {\n      margin: 0 6px 0 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      color: rgba(255, 255, 255, 0.5);\n      margin-right: 6px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {\n        content: "|";\n        margin-right: 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {\n      position: absolute;\n      top: -20px;\n      left: 0;\n      display: inline-block;\n      vertical-align: middle;\n      width: 100%;\n      height: 25px;\n      cursor: pointer; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {\n        width: 100%;\n        height: 1px;\n        position: relative;\n        top: 12px;\n        background-color: #666666; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #c2c2c2;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #005aff;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0;\n          position: absolute;\n          top: -3px;\n          width: 5px;\n          height: 7px;\n          background-color: rgba(255, 255, 255, 0.5);\n          transition: opacity 0.1s ease; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n        opacity: 1; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {\n        cursor: default; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n        position: absolute;\n        transform: translateX(-50%);\n        top: 2px;\n        left: 0;\n        width: 20px;\n        height: 20px;\n        opacity: 1;\n        transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n          position: absolute;\n          left: 6px;\n          top: 6px;\n          width: 8px;\n          height: 8px;\n          border-radius: 10px;\n          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n          background-color: white; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {\n      float: right;\n      display: inline-block;\n      height: 32px;\n      cursor: pointer;\n      margin: 0 6px;\n      box-sizing: border-box; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {\n        float: left;\n        bottom: 0; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {\n          background-color: transparent;\n          border: 0;\n          box-sizing: content-box;\n          width: 32px;\n          height: 32px;\n          opacity: 0.5; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {\n            opacity: 0.75; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {\n            height: 24px;\n            position: relative;\n            top: 3px; }\n            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {\n              fill: white; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {\n            margin-left: 2px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {\n        float: left;\n        position: relative;\n        overflow: hidden;\n        top: 6px;\n        width: 42px;\n        height: 18px;\n        padding: 3px 0;\n        transition: width .2s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {\n          height: 1px;\n          position: relative;\n          top: 7px;\n          margin: 0 3px;\n          background-color: #666666; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #c2c2c2;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #005aff;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n            opacity: 0;\n            position: absolute;\n            top: -3px;\n            width: 5px;\n            height: 7px;\n            background-color: rgba(255, 255, 255, 0.5);\n            transition: opacity 0.1s ease; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {\n          position: absolute;\n          transform: translateX(-50%);\n          top: 0px;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          opacity: 1;\n          transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n            position: absolute;\n            left: 6px;\n            top: 6px;\n            width: 8px;\n            height: 8px;\n            border-radius: 10px;\n            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n            background-color: white; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {\n          float: left;\n          width: 4px;\n          padding-left: 2px;\n          height: 12px;\n          opacity: 0.5;\n          box-shadow: inset 2px 0 0 white;\n          transition: transform .2s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {\n            box-shadow: inset 2px 0 0 #fff;\n            opacity: 1; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {\n            padding-left: 0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {\n            transform: scaleY(1.5); }\n  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {\n    width: 0;\n    height: 12px;\n    top: 9px;\n    padding: 0; }\n');aa(".player-poster[data-poster] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  background-color: transparent;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%; }\n  .player-poster[data-poster].clickable {\n    cursor: pointer; }\n  .player-poster[data-poster]:hover .play-wrapper[data-poster] {\n    opacity: 1; }\n  .player-poster[data-poster] .play-wrapper[data-poster] {\n    width: 100%;\n    height: 25%;\n    margin: 0 auto;\n    opacity: 0.75;\n    transition: opacity 0.1s ease; }\n    .player-poster[data-poster] .play-wrapper[data-poster] svg {\n      height: 100%; }\n      .player-poster[data-poster] .play-wrapper[data-poster] svg path {\n        fill: #fff; }\n");aa('.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n');var ua=re.formatTime,ca=function(e){function t(e){var n;return Qr(this,t),(n=ia(this,ta(t).call(this,e))).hoveringOverSeekBar=!1,n.hoverPosition=null,n.duration=null,n.firstFragDateTime=null,n.actualLiveTime=!!n.mediaControl.options.actualLiveTime,n.actualLiveTime&&(n.mediaControl.options.actualLiveServerTime?n.actualLiveServerTimeDiff=(new Date).getTime()-new Date(n.mediaControl.options.actualLiveServerTime).getTime():n.actualLiveServerTimeDiff=0),n}return ea(t,e),Jr(t,[{key:"name",get:function(){return"seek_time"}},{key:"supportedVersion",get:function(){return{min:"0.4.9"}}},{key:"template",get:function(){return $e("<span data-seek-time></span>\n<span data-duration></span>\n")}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===we.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}}]),Jr(t,[{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,ye.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,ye.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,ye.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,ye.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,ye.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,ye.CONTAINER_TIMEUPDATE,this.updateDuration))}},{key:"onContainerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"updateDuration",value:function(e){this.duration=e.total,this.firstFragDateTime=e.firstFragDateTime,this.update()}},{key:"showTime",value:function(e){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(e),this.update()}},{key:"hideTime",value:function(){this.hoveringOverSeekBar=!1,this.update()}},{key:"calculateHoverPosition",value:function(e){var t=e.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(t/this.mediaControl.$seekBarContainer.width(),0))}},{key:"getSeekTime",value:function(){var e,t,n,i;return this.useActualLiveTime?(this.firstFragDateTime?(i=new Date(this.firstFragDateTime),(n=new Date(this.firstFragDateTime)).setHours(0,0,0,0),t=(i.getTime()-n.getTime())/1e3+this.duration):(n=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),t=((i=new Date(n))-n.setHours(0,0,0,0))/1e3),(e=t-this.duration+this.hoverPosition*this.duration)<0&&(e+=86400)):e=this.hoverPosition*this.duration,{seekTime:e,secondsSinceMidnight:t}}},{key:"update",value:function(){if(this.rendered)if(this.shouldBeVisible()){var e=this.getSeekTime(),t=ua(e.seekTime,this.useActualLiveTime);if(t!==this.displayedSeekTime&&(this.$seekTimeEl.text(t),this.displayedSeekTime=t),this.durationShown){this.$durationEl.show();var n=ua(this.actualLiveTime?e.secondsSinceMidnight:this.duration,this.actualLiveTime);n!==this.displayedDuration&&(this.$durationEl.text(n),this.displayedDuration=n)}else this.$durationEl.hide();this.$el.show();var i=this.mediaControl.$seekBarContainer.width(),r=this.$el.width(),a=this.hoverPosition*i;a-=r/2,a=Math.max(0,Math.min(a,i-r)),this.$el.css("left",a)}else this.$el.hide(),this.$el.css("left","-100%")}},{key:"shouldBeVisible",value:function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration}},{key:"render",value:function(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()}}]),t}(Ae);aa(".spinner-three-bounce[data-spinner] {\n  position: absolute;\n  margin: 0 auto;\n  width: 70px;\n  text-align: center;\n  z-index: 999;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%); }\n  .spinner-three-bounce[data-spinner] > div {\n    width: 18px;\n    height: 18px;\n    background-color: #FFFFFF;\n    border-radius: 100%;\n    display: inline-block;\n    -webkit-animation: bouncedelay 1.4s infinite ease-in-out;\n            animation: bouncedelay 1.4s infinite ease-in-out;\n    /* Prevent first frame from flickering when animation starts */\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both; }\n  .spinner-three-bounce[data-spinner] [data-bounce1] {\n    -webkit-animation-delay: -0.32s;\n            animation-delay: -0.32s; }\n  .spinner-three-bounce[data-spinner] [data-bounce2] {\n    -webkit-animation-delay: -0.16s;\n            animation-delay: -0.16s; }\n\n@-webkit-keyframes bouncedelay {\n  0%, 80%, 100% {\n    transform: scale(0); }\n  40% {\n    transform: scale(1); } }\n\n@keyframes bouncedelay {\n  0%, 80%, 100% {\n    transform: scale(0); }\n  40% {\n    transform: scale(1); } }\n");aa(".clappr-watermark[data-watermark] {\n  position: absolute;\n  min-width: 70px;\n  max-width: 200px;\n  width: 12%;\n  text-align: center;\n  z-index: 10; }\n\n.clappr-watermark[data-watermark] a {\n  outline: none;\n  cursor: pointer; }\n\n.clappr-watermark[data-watermark] img {\n  max-width: 100%; }\n\n.clappr-watermark[data-watermark-bottom-left] {\n  bottom: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-bottom-right] {\n  bottom: 10px;\n  right: 42px; }\n\n.clappr-watermark[data-watermark-top-left] {\n  top: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-top-right] {\n  top: 10px;\n  right: 37px; }\n");var da='.media-control-notransition {\n  transition: none !important; }\n\n.clappr-player#wp3-player-0 .media-control {\n  position: absolute;\n  border-radius: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  height: 100%;\n  z-index: 997;\n  opacity: 1;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .media-control::before, .clappr-player#wp3-player-0 .media-control::after {\n    content: "";\n    position: absolute;\n    left: 0;\n    width: 100%;\n    height: 88px;\n    background: none;\n    z-index: -1;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control::before {\n    top: 0;\n    background-image: linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.7));\n    z-index: -1; }\n  .clappr-player#wp3-player-0 .media-control::after {\n    bottom: 0;\n    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.7)); }\n  .clappr-player#wp3-player-0 .media-control.hide-top-background::after {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control.mobile::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::before {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0.6;\n    background: #000;\n    z-index: -1; }\n  .clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::before {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    height: 88px;\n    background: linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.7)); }\n  .clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::after {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control.mobile::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::after {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-dragging {\n    pointer-events: auto;\n    cursor: -webkit-grabbing !important;\n    cursor: grabbing !important; }\n    .clappr-player#wp3-player-0 .media-control-dragging * {\n      cursor: -webkit-grabbing !important;\n      cursor: grabbing !important; }\n  .clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-button {\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control-panel__upper {\n    position: relative; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer {\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-panel__modal {\n    opacity: 1;\n    will-change: opacity;\n    visibility: visible;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control-panel__modal.modal--hide {\n      opacity: 0;\n      visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control.media-control-hide {\n    pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide.touch .media-control-button {\n      opacity: 0;\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-element, .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-button {\n      pointer-events: none;\n      opacity: 0;\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide::before, .clappr-player#wp3-player-0 .media-control.media-control-hide::after {\n      opacity: 0;\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-panel__front-layer {\n      opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control.media-control--no-background::before {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control--panels-hide:before {\n    transition: none; }\n  .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__between, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__lower {\n    opacity: 0;\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control.media-control--has-placeholder::after {\n    height: 112px; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__between {\n  pointer-events: auto; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle {\n  width: 100%;\n  height: 100%; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__between {\n  padding: 0; }\n\n.clappr-player#wp3-player-0 .media-control .media-control-panel {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  vertical-align: middle;\n  pointer-events: none;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: column nowrap; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .modal-element {\n    z-index: 1000; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    position: relative; }\n    .clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container .media-control-position__between {\n      display: flex;\n      align-items: center;\n      justify-content: center; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__right {\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    z-index: 300; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__center {\n    display: flex;\n    justify-content: center;\n    align-items: center; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper .media-control-position__center {\n    flex-flow: column nowrap; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between, .clappr-player#wp3-player-0 .media-control .media-control-panel__upper {\n    position: relative; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower .media-control-position__center {\n    flex-flow: column-reverse nowrap;\n    position: relative;\n    z-index: 200; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n    display: flex;\n    flex: 1;\n    justify-content: space-between;\n    align-items: center;\n    position: absolute;\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n    display: flex;\n    flex: 1;\n    align-items: center;\n    justify-content: center;\n    height: 100%; }\n    .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n      flex-grow: 1; }\n    .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__center, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n      height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n    padding: 0 4px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n    padding-top: 4px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n    padding-bottom: 4px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper,\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__middle > *, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__modal {\n    pointer-events: auto; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-button[data-playpause] {\n  width: 48px;\n  height: 48px; }\n\n.clappr-player#wp3-player-0 .media-control-panel__lower .media-control-element {\n  padding-top: 4px; }\n\n.clappr-player#wp3-player-0 .media-control-element {\n  padding: 12px;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-element--sticky {\n    opacity: 1 !important;\n    pointer-events: auto !important; }\n  .clappr-player#wp3-player-0 .media-control-element--hidden {\n    display: none; }\n\n.clappr-player#wp3-player-0 .media-control-button {\n  display: inline-block;\n  margin: 0;\n  border: 0;\n  cursor: pointer;\n  background-color: transparent;\n  text-align: center;\n  width: 24px;\n  height: 24px;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-button svg {\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control-button:focus {\n    outline: none; }\n  .clappr-player#wp3-player-0 .media-control-button--hidden {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control-button[data-chromecast] svg.player-cast-loading {\n    width: 24px;\n    height: 24px; }\n\n.clappr-player#wp3-player-0 .media-control.ad {\n  background: none;\n  visibility: visible;\n  opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control.ad.touch {\n    visibility: hidden !important;\n    pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-button {\n      visibility: hidden !important; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__lower {\n      opacity: 1 !important;\n      visibility: visible !important; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__modal {\n      pointer-events: auto !important; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel > * {\n      pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .dfp-countdown {\n      visibility: hidden;\n      pointer-events: none; }\n  .clappr-player#wp3-player-0 .media-control.ad:after, .clappr-player#wp3-player-0 .media-control.ad:before {\n    content: "";\n    left: 0;\n    height: 48px;\n    background: none;\n    opacity: 1;\n    position: absolute;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    width: 100%;\n    will-change: opacity;\n    z-index: -1; }\n  .clappr-player#wp3-player-0 .media-control.ad:before {\n    top: 0;\n    background-image: linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.7)); }\n  .clappr-player#wp3-player-0 .media-control.ad:after {\n    bottom: 0;\n    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.7)); }\n  .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__between,\n  .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__lower .opposites-container {\n    opacity: 1;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    will-change: opacity; }\n  .clappr-player#wp3-player-0 .media-control.ad.media-control-hide:before, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide:after {\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__between,\n  .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__lower .opposites-container {\n    opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n    transform: scale(1); }\n\n.clappr-player#wp3-player-0 .media-control.ad .dfp-countdown {\n  display: block; }\n\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button svg path[fill], .clappr-player#wp3-player-0 .media-control.ad .media-control-element svg path[fill] {\n  fill: #ffff93 !important; }\n\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-settings], .clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-share], .clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-settings], .clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-share] {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.ad .time-indicator,\n.clappr-player#wp3-player-0 .media-control.ad .live-button,\n.clappr-player#wp3-player-0 .media-control.ad .chromecast-button {\n  display: none !important; }\n\n.clappr-player#wp3-player-0 .media-control.ad .bar-container {\n  padding: 0; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n    background-color: #ffff93 !important; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-seekbar] {\n    background-color: #ffff93 !important; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar] {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n    background-color: #ffff93 !important; }\n\n.clappr-player#wp3-player-0 .media-control.ad .bar-container__placeholder {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] {\n  position: fixed;\n  width: 100%;\n  left: 50%;\n  transform: translate(-50%);\n  top: calc(100% - 4px);\n  height: 4px;\n  margin-bottom: 0;\n  overflow: hidden;\n  cursor: default;\n  opacity: 1;\n  transition: none; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] {\n    margin: 0;\n    height: 100%;\n    border-radius: 0;\n    background-color: rgba(255, 255, 255, 0.4);\n    box-shadow: none;\n    transform: scaleY(1);\n    left: 0; }\n    .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n      display: none; }\n    .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n    .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n      border-radius: 0; }\n\n.clappr-player#wp3-player-0 .media-control.live {\n  min-height: auto; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n    background-color: #ff0000; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n    background-color: #fff;\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n    background-color: #ff0000; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n    display: block; }\n  .clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] {\n    pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n      display: none; }\n  .clappr-player#wp3-player-0 .media-control.live .time-indicator {\n    display: none; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #fff; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  background-color: #ff0000; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  background-color: #fff; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: block; }\n';ur(da);var ha=kn.getHostname,pa=kn.applySizeClass,fa=window.WM&&window.WM.Settings||{},ya=la,va=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).core._mediaControl=Fi(i),i.keepVisible=!1,i.userDisabled=!1,i.userKeepVisible=!1,i.isRendered=!1,i.focusElement=i.core.el,i.lastChromelessValue=!!i.options.chromeless,i.kibo=new ya(i.focusElement),i}return Pi(n,[{key:"getTapSide",value:function(e){var t=this.$el.width();return e-this.$el.offset().left<t/2?"left":"right"}},{key:"onTap",value:function(e){this.resetDoubleTapTimeout(),this.checkDoubleTap(e)?this.onDoubleTap(e):this.waitForDoubleTap()}},{key:"waitForDoubleTap",value:function(){var e=this;this.doubleTapWaitingTimeout=setTimeout((function(){e.onSingleTap()}),250)}},{key:"onSingleTap",value:function(){this.toggleMediaControl()}},{key:"onDoubleTap",value:function(e){var t=this.getTapSide(e.pageX);e.preventDefault(),this.core.trigger(_n.MEDIACONTROL_DOUBLE_TAP,{event:e,tapSide:t})}},{key:"checkDoubleTap",value:function(e){var t=this.getTapSide(e.pageX),n=(new Date).getTime(),i=n-this.lastTapTime,r=i<250&&i>0&&this.lastTapPosition===t;return this.lastTapTime=n,this.lastTapPosition=t,r}},{key:"resetDoubleTapTimeout",value:function(){this.doubleTapWaitingTimeout&&clearTimeout(this.doubleTapWaitingTimeout),this.doubleTapWaitingTimeout=null}},{key:"toggleMediaControl",value:function(){this.isVisible()?this.hideDelayed(0,!0):this.show()}},{key:"getPanel",value:function(e){return this.$el.find(".media-control-panel__".concat(e))}},{key:"name",get:function(){return"globo_media_control"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"disabled",get:function(){return this.userDisabled||this.container&&this.container.getPlaybackType()===we.NO_OP}},{key:"hasPlaceholder",get:function(){return this._hasPlaceholder},set:function(e){this._hasPlaceholder=e}},{key:"attributes",get:function(){return{class:"media-control".concat(N.isMobile?" mobile":"").concat(N.supportsTouchEvents?" touch":"")}}},{key:"events",get:function(){var e={click:"onTap"},t={"mouseenter [data-controls]":"setUserKeepVisible","mouseleave [data-controls]":"resetUserKeepVisible"},n=Mi(Mi(Mi({},e),t),{},{touchend:this.resetUserKeepVisible});return N.isHybridDevice?n:N.isMobile?e:t}},{key:"template",get:function(){return $e('<div class="media-control-panel">\n  <div class="media-control-panel__back-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__upper">\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n    <div class="media-control-position__center"></div>\n  </div>\n  <div class="media-control-panel__middle">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__between">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__lower" data-controls>\n    <div class="media-control-position__center"></div>\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__between"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n  </div>\n  <div class="media-control-panel__front-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__modal"></div>\n</div>\n')}}]),Pi(n,[{key:"getExternalInterface",value:function(){return{showMediaControlPanel:this.showPanel,hideMediaControlPanel:this.hidePanel}}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,ye.CORE_RESIZE,this.playerResize),this.listenTo(this.core,ye.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,ye.CORE_MOUSE_LEAVE,this.hideDelayed),this.listenTo(this,_n.MEDIACONTROL_MODAL_SHOW,this.showModal),this.listenTo(this,_n.MEDIACONTROL_MODAL_HIDE,this.hideModal),this.listenTo(this,_n.MEDIACONTROL_KEEPVISIBLE,(function(t){return t?e.setUserKeepVisible():e.resetUserKeepVisible()})),this.listenTo(this,_n.MEDIACONTROL_ITEMCLICKED,this.resetFocus),this.listenTo(this.core,_n.WILL_SHOW_MODAL_ELEMENT,this.onModalElementShow),this.listenTo(this.core,_n.DID_HIDE_MODAL_ELEMENT,this.onModalElementHide),this.listenTo(this.core,_n.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,_n.STOP_DRAGGING_SEEKBAR,this.onStopDragginSeekbar),this.listenTo(this.core,ye.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,_n.WILL_SHOW_DRAWER,this.onStartExpandDrawer),this.listenTo(this.core,_n.WILL_HIDE_DRAWER,this.onStartShrinkDrawer),this.listenTo(this.core,_n.DRAWER_HAS_PLACEHOLDER,this.onPlaceholderRequested),this.listenTo(this.core,_n.SYNC_DRAWER_STATE_RESPONSE,this.syncWithDrawerIsShownResponse)}},{key:"onStartExpandDrawer",value:function(){this.updatePanelsVisibility({hide:!0,opaque:!0})}},{key:"onStartShrinkDrawer",value:function(){this.$modal&&0==this.$modal.contents().length&&(this.updatePanelsVisibility({hide:!1,opaque:!1}),N.isMobile&&this.show())}},{key:"onStartDraggingSeekbar",value:function(){this.hidePanel({panel:"upper"}),this.hidePanel({panel:"between"})}},{key:"onStopDragginSeekbar",value:function(){this.showPanel({panel:"upper"}),this.showPanel({panel:"between"})}},{key:"bindContainerEvents",value:function(){this.container&&(this.container.trigger(ye.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.listenTo(this.container,ye.CONTAINER_PLAY,this.updatePlaybackTypeClass),this.listenTo(this.container,ye.CONTAINER_STATE_BUFFERING,this.updatePlaybackTypeClass),this.listenTo(this.container,ye.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,ye.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,_n.DFP_AD_SKIPPED,this.resetFocus),this.listenTo(this.container,_n.DFP_AD_CLICKED,this.resetFocus),this.listenTo(this.container,_n.WILL_QUICK_SEEK,this.hide),this.render(),this.container.mediaControlDisabled&&this.disable())}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"updateChromelessState",value:function(){this.options.chromeless?(this.options.allowUserInteraction=!1,this.disable(),this.$el.hide()):(this.options.allowUserInteraction=!0,this.enable(),this.$el.show()),this.lastChromelessValue=this.options.chromeless}},{key:"onActiveContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,(this.container&&this.container.mediaControlDisabled||this.core.options.chromeless)&&this.disable(),this.bindContainerEvents(),this.updatePlaybackTypeClass(),this.trigger(ye.MEDIACONTROL_CONTAINERCHANGED)}},{key:"createCachedElements",value:function(){this.$modal=this.$el.find(".media-control-panel__modal"),this.$lowerPanel=this.$el.find(".media-control-panel__lower"),this.$upperPanel=this.$el.find(".media-control-panel__upper")}},{key:"initMediaControlPlugins",value:function(){var e=this;this.core.plugins.filter((function(e){return e instanceof yr})).forEach((function(t){return e.renderMediaControlPlugin(t)}))}},{key:"renderMediaControlPlugin",value:function(e){var t=e.panel,n=e.position,i=e.el,r=".media-control-panel__".concat(t," ").concat(n?".media-control-position__".concat(n):"");this.$el.find(r).append(i),e.render()}},{key:"updatePlaybackTypeClass",value:function(){if(this.container){var e=this.container.getPlaybackType();this.$el.removeClass("vod live dvr ad dvr-disabled"),e&&this.$el.addClass(e),this.addDVRClass(e),"ad"===e&&this.core.$el.removeClass("nocursor")}}},{key:"addDVRClass",value:function(e){"live"===e&&(this.container.isDvrEnabled()?this.container.isDvrInUse()&&this.$el.addClass("dvr"):this.$el.addClass("dvr-disabled"))}},{key:"setKeepVisible",value:function(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0,this.trigger(_n.MEDIACONTROL_KEEPVISIBLE,!0))}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1,this.trigger(_n.MEDIACONTROL_KEEPVISIBLE,!1))}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Mi({hide:!0},e),this.keepVisible=!1,this.userDisabled=!0,this.userKeepVisible=!1,e.hide&&this.hide(),this.updatePlaybackTypeClass()}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.isRendered&&this.render();var t=this.container.getPlaybackType(),n=fa&&fa.MediaControl||{},i=n.ShowOnStartList,r=(i||[]).find((function(e){return e.test(ha())})),a=r||"ad"===t;e=Mi({show:a},e),this.options.chromeless||(this.userDisabled=!1,e.show&&this.show())}},{key:"isVisible",value:function(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function(e){var t=this;if(!N.isMobile||!e||"mousemove"!==e.type){clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),3e3),this.disabled||this.isVisible()||(this.trigger(ye.MEDIACONTROL_SHOW),this.core.trigger(ye.MEDIACONTROL_SHOW),this.container.trigger(ye.CONTAINER_MEDIACONTROL_SHOW),this.$el.removeClass("media-control-hide"),this.updateCursorStyle(!0))}}},{key:"hideDelayed",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.container&&(this.isVisible()&&(!N.supportsTouchEvents||this.container.isPlaying())||n)){var i=t||3e3;clearTimeout(this.hideId),(this.disabled||!1!==this.options.hideMediaControl)&&(!this.disabled&&(t||this.userKeepVisible||this.keepVisible)?this.hideId=setTimeout((function(){return e.hideDelayed()}),i):this.hide())}}},{key:"hide",value:function(){!this.container||this.keepVisible||this.userKeepVisible||(this.core.trigger(ye.MEDIACONTROL_HIDE),this.trigger(ye.MEDIACONTROL_HIDE),this.container.trigger(ye.CONTAINER_MEDIACONTROL_HIDE),this.$el.addClass("media-control-hide"),this.hideModal(),this.updateCursorStyle(!1))}},{key:"updateCursorStyle",value:function(e){"ad"!==this.container.getPlaybackType()&&(e||this.disabled?this.core.$el.removeClass("nocursor"):this.core.$el.addClass("nocursor"))}},{key:"showPanel",value:function(e){var t=e.panel;this.getPanel(t).removeClass("panel--hide")}},{key:"hidePanel",value:function(e){var t=e.panel;this.getPanel(t).addClass("panel--hide")}},{key:"showModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$modal.html(e),this.$modal.show().off("transitionend"),this.$modal.removeClass("modal--hide"),t.hidePanels&&this.updatePanelsVisibility({hide:!0}),this.updateClickToPausePlugin({enable:!1}),this.updateCastInfoVisibility({hidden:!0})}},{key:"hideModal",value:function(){var e=this,t=this.$modal&&this.$modal.contents();!t||t&&!t.length||(this.$modal.addClass("modal--hide").on("transitionend",(function(){e.$modal.hide().off("transitionend"),e.$modal.html("")})),this.syncWithDrawerIsShownRequest(),this.updatePanelsVisibility({hide:this.drawerOverModal}),this.updateClickToPausePlugin({enable:!0}),this.updateCastInfoVisibility({hidden:!1}))}},{key:"syncWithDrawerIsShownRequest",value:function(){this.core.trigger(_n.SYNC_DRAWER_STATE_REQUEST)}},{key:"syncWithDrawerIsShownResponse",value:function(e){this.drawerOverModal=e}},{key:"onModalElementShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.addClass("".concat(t,"-modal--visible"))}},{key:"onModalElementHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.removeClass("".concat(t,"-modal--visible"))}},{key:"updateCastInfoVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hidden?"addClass":"removeClass";if(this.container&&this.container.$el[t]("chromecast-playback-overlay--hidden"),"boolean"==typeof e.opaque){var n=e.opaque?"addClass":"removeClass";this.$el[n]("media-control--panels-opaque")}}},{key:"onPlaceholderRequested",value:function(){this.hasPlaceholder=!0}},{key:"updateClickToPausePlugin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enable?"enable":"disable",n=this.container.getPlugin("click_to_pause");!N.isMobile&&n&&n[t]()}},{key:"updatePanelsVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hide?"addClass":"removeClass";this.$el[t]("media-control--panels-hide")}},{key:"updateBackgroundType",value:function(){if(this.hasPlaceholder)this.$el.addClass("media-control--has-placeholder");else if(!N.isMobile&&!this.disabled){var e=this.$lowerPanel.position().top,t=this.$lowerPanel.height(),n=this.$lowerPanel.offsetParent().height(),i=Math.trunc(n-(e+t)),r=i>4;i!=this._bottomPanelPosition&&(this._bottomPanelPosition=i,r?this.$el.addClass("mobile"):this.$el.removeClass("mobile"));var a=this.$upperPanel.height();a!=this._upperPanelHeight&&(this._upperPanelHeight=a,r||0!=a?this.$el.removeClass("hide-top-background"):this.$el.addClass("hide-top-background"))}}},{key:"addResizeObserver",value:function(){var e=this;this.removeResizeObserver(),this._resizeInterval=setInterval((function(){return e.updateBackgroundType()}),500)}},{key:"removeResizeObserver",value:function(){this._resizeInterval&&clearInterval(this._resizeInterval)}},{key:"destroy",value:function(){this.removeResizeObserver(),Vi(Ui(n.prototype),"destroy",this).call(this)}},{key:"playerResize",value:function(e){var t=this.currentWidth!==e.width;!this.disabled&&t&&(pa(this.$el,e.width),this.currentWidth=e.width)}},{key:"resetFocus",value:function(){this.focusElement.focus()}},{key:"render",value:function(){if(!this.container||this.isRendered)return this;var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=An.getStyleFrom(da.toString(),e);return this.$el.html(this.template()),this.$el.append(t[0]),this.core.$el.append(this.el),this.createCachedElements(),this.initMediaControlPlugins(),this.updatePlaybackTypeClass(),this.updateBackgroundType(),this.addResizeObserver(),this.disabled&&this.hide(),this.isRendered=!0,this.trigger(ye.MEDIACONTROL_RENDERED),this}}]),n}(Ae),ma=function(e){Ni(n,e);var t=Hi(n);function n(e){return Di(this,n),t.call(this,e)}return Pi(n,[{key:"name",get:function(){return"play_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return N.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return N.supportsTouchEvents?"center":"left"}},{key:"attributes",get:function(){return{class:"media-control-button","data-playpause":"","aria-label":"play"}}},{key:"events",get:function(){return{click:this.togglePlayPause}}},{key:"isPauseDisabled",get:function(){var e=this.container&&this.container.getPlaybackType()===we.LIVE,t=this.container.playback&&!this.container.playback.dvrEnabled;return e&&t}}]),Pi(n,[{key:"destroy",value:function(){this.unbindKeyEvents()}},{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,ye.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,ye.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,ye.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,ye.CONTAINER_ENDED,this.changeTogglePlay),this.listenTo(this.container,_n.WM_SPINNER_START,this.hidePlayButton),this.listenTo(this.container,_n.WM_SPINNER_STOP,this.showPlayButton))}},{key:"hidePlayButton",value:function(){N.supportsTouchEvents&&this.$el.hide()}},{key:"showPlayButton",value:function(){N.supportsTouchEvents&&this.$el.show()}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("space",(function(){return e.togglePlayPause()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("space")}},{key:"onContainerChanged",value:function(){this.bindContainerEvents(),this.changeTogglePlay()}},{key:"changeTogglePlay",value:function(){this.$el.html(""),this.container&&this.container.isPlaying()?(this.isPauseDisabled?this.$el.hide():(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="#FFF"/>\n    </g>\n</svg>'),this.$el.attr("aria-label","pause"),this.$el.removeClass("play"),this.$el.addClass("pause"),this.$el.show()),this.trigger(ye.MEDIACONTROL_PLAYING)):(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8 5v14l11-7z"/>\n    </g>\n</svg>'),this.$el.attr("aria-label","play"),this.$el.removeClass("stop pause"),this.$el.addClass("play"),this.$el.show(),this.trigger(ye.MEDIACONTROL_NOTPLAYING)),this.applyButtonStyle(this.$el)}},{key:"togglePlayPause",value:function(){if(!this.isPauseDisabled)return this.container.isPlaying()?this.container.pause():this.container.play(),!1;!this.container.isPlaying()&&this.container.play()}},{key:"render",value:function(){return this.bindKeyEvents(),this.changeTogglePlay(),this}}]),n}(yr),ba='<svg xmlns="http://www.w3.org/2000/svg">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M0 0h24v24H0z"/>\n    <path fill="#FFF" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"/>\n  </g>\n</svg>',Ea=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_OPTIONS_CHANGE,this.onOptionsChange)}},{key:"onClick",value:function(){this.backButtonEnabled&&this.core.trigger(_n.BACK_BUTTON_CLICKED)}},{key:"onOptionsChange",value:function(){this.lastBackButtonValue!==!!this.backButtonEnabled&&this.updateBackButtonState()}},{key:"updateBackButtonState",value:function(){this.backButtonEnabled?this.show():this.hide(),this.lastBackButtonValue=this.backButtonEnabled}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"render",value:function(){return this.$el.html(""),this.$el.append(ba),this.updateBackButtonState(),this}},{key:"name",get:function(){return"back_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"backButtonEnabled",get:function(){return this.options.events&&"function"==typeof this.options.events.onBackButtonClicked}},{key:"attributes",get:function(){return{class:"media-control-button","data-controls":"","aria-label":"back"}}},{key:"events",get:function(){return{click:this.onClick}}}]),n}(yr),ka=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).fullScreenOnVideoTagSupported=null,i}return Pi(n,[{key:"getExternalInterface",value:function(){return{toggleFullscreen:this.toggleFullscreen}}},{key:"name",get:function(){return"fullscreen_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"screenOrientationAvailable",get:function(){return screen&&screen.orientation}},{key:"isIdle",get:function(){var e=this.container.getPlugin("poster");return e&&!e.$el.hasClass("poster--hidden")}},{key:"attributes",get:function(){return{class:"media-control-button","data-fullscreen":"","aria-label":"fullscreen"}}},{key:"events",get:function(){return{click:this.onClick}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,ye.CORE_RESIZE,this.changeToggleFullscreen),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.fullScreenOnVideoTagSupported=null,this.container&&(this.bindKeyEvents(),this.listenTo(this.container,ye.CONTAINER_DBLCLICK,this.toggleFullscreen),this.playback.videoEl&&"video"===this.playback.videoEl.nodeName.toLowerCase()&&this.listenToOnce(this.container,ye.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag),(N.isIE&&!N.isIE11||N.supportsTouchEvents)&&this.stopListening(this.container,ye.CONTAINER_DBLCLICK))}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("f",(function(){return e.toggleFullscreen()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("f")}},{key:"onLoadedMetadataOnVideoTag",value:function(){!re.Fullscreen.fullscreenEnabled()&&this.playback.videoEl.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.render())}},{key:"changeToggleFullscreen",value:function(){this.$el.html(""),re.Fullscreen.fullscreenElement()?this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M7 15h2v6H7v-4H3v-2h4zm10-8h4v2h-6V3h2v4zM7 9H3V7h4V3h2v6H7zm10 6h4v2h-4v4h-2v-6h2z" fill="#FFF"/>\n    </g>\n</svg>'):this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M19 21h-4v-2h4v-4h2v6h-2zm0-18h2v6h-2V5h-4V3h4zM5 19h4v2H3v-6h2v4zM5 3h4v2H5v4H3V3h2z" fill="#FFF"/>\n    </g>\n</svg>'),this.applyButtonStyle(this.$el)}},{key:"onClick",value:function(){this.toggleFullscreen()}},{key:"toggleFullscreen",value:function(){this.container.fullscreen(),this.core.toggleFullscreen(),this.mediaControl.resetUserKeepVisible()}},{key:"render",value:function(){if(this.fullScreenOnVideoTagSupported||re.Fullscreen.fullscreenEnabled())return this.changeToggleFullscreen(),this}}]),n}(yr),Aa='.clappr-player#wp3-player-0 .time-indicator {\n  display: flex;\n  height: 24px;\n  box-sizing: content-box;\n  align-items: center;\n  cursor: default;\n  position: relative;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  line-height: 16px;\n  color: #ffffff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); }\n  .clappr-player#wp3-player-0 .time-indicator .separator {\n    display: inline;\n    margin: 0 5px;\n    opacity: 0.5; }\n  .clappr-player#wp3-player-0 .time-indicator--collapse {\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .time-indicator--collapse .separator, .clappr-player#wp3-player-0 .time-indicator--collapse [data-duration] {\n      display: none; }\n\n.clappr-player#wp3-player-0 .media-control:not(.mobile) .time-indicator {\n  padding-left: 0; }\n\n.clappr-player#wp3-player-0 [data-position],\n.clappr-player#wp3-player-0 [data-duration] {\n  display: inline; }\n';ur(Aa);var _a=function(e){Ni(n,e);var t=Hi(n);function n(e){return Di(this,n),t.call(this,e)}return Pi(n,[{key:"name",get:function(){return"time_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"hasSizeChanged",get:function(){return this.lastSize===this.actualSize}},{key:"attributes",get:function(){return{class:"time-indicator"}}},{key:"events",get:function(){return{click:this.toggleTimeIndicator}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,ye.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&(this.listenTo(this.container,ye.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,_n.WM_VIDEO_METADATA_LOADED,this.setDuration))}},{key:"setDuration",value:function(e){var t=re.formatTime(e.duration/1e3);this.$duration.text(t),this.$rightContainer=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__right")}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&this.$rightContainer&&(this.actualSize=e,this.shouldCollapse=this.actualSize.width-this.$rightContainer.width()<130,this.shouldCollapse?(this.$el.addClass("time-indicator--collapse"),this.$duration.hide()):(this.$el.removeClass("time-indicator--collapse"),this.$duration.show()),this.$position.show(),this.updateTimeIndicator(),this.lastSize=this.actualSize)}},{key:"onTimeUpdate",value:function(e){"ad"!==e.playbackType&&(this.currentPositionValue=e.current<0?e.total:e.current,this.currentDurationValue=e.total,null!==this.currentPositionValue&&null!==this.currentDurationValue&&this.updateTimeIndicator())}},{key:"updateTimeIndicator",value:function(){this.updatePosition(),this.shouldCollapse?this.updateRemainingTime():this.updateDuration()}},{key:"updatePosition",value:function(){if(!this.hasSizeChanged||parseInt(this.currentPositionValue)!==parseInt(this.lastPositionValue)){var e=re.formatTime(this.currentPositionValue);this.$position.text(e),this.lastPositionValue=this.currentPositionValue}}},{key:"updateRemainingTime",value:function(){var e=-1*(this.currentPositionValue-this.currentDurationValue);if(!this.hasSizeChanged||parseInt(e)!==parseInt(this.lastRemainingTime)){var t=e>1,n="";n=(t?"-":"")+(n=re.formatTime(t?e:0)),this.lastRemainingTime=e,this.$duration.text(n)}}},{key:"updateDuration",value:function(){if(!this.hasSizeChanged||parseInt(this.currentDurationValue)!==parseInt(this.lastDurationValue)){var e=re.formatTime(this.currentDurationValue);this.$duration.text(e),this.lastDurationValue=this.currentDurationValue}}},{key:"toggleTimeIndicator",value:function(e){e&&e.stopPropagation(),this.shouldCollapse&&(this.$position.is(":visible")?this.$position.hide():this.$position.show(),this.$duration.is(":visible")?this.$duration.hide():this.$duration.show())}},{key:"render",value:function(){this.$position=$("<span/>").attr("data-position","").html("00:00"),this.$separator=$("<span/>").addClass("separator").html("/"),this.$duration=$("<span/>").attr("data-duration","").html("00:00"),this.$el.empty();var e=An.getStyleFrom(Aa,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$position[0]),this.$el.append(this.$separator[0]),this.$el.append(this.$duration[0]),this}}]),n}(yr),Ta='<span class="skip-button__label"><%= label %></span>\n',wa='.clappr-player#wp3-player-0 .media-control .skip-button {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  bottom: -8px;\n  right: 0;\n  width: auto;\n  height: auto;\n  border-radius: 4px;\n  background-color: #333;\n  margin: 0 12px;\n  pointer-events: auto;\n  z-index: 400;\n  will-change: opacity, transform;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control .skip-button__label {\n    font-family: "opensans-regular", sans-serif;\n    font-size: 14px;\n    font-weight: normal;\n    font-style: normal;\n    font-stretch: normal;\n    line-height: 1.14;\n    letter-spacing: normal;\n    color: #eeeeee; }\n  .clappr-player#wp3-player-0 .media-control .skip-button:hover, .clappr-player#wp3-player-0 .media-control .skip-button:focus {\n    background-color: #eeeeee;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); }\n    .clappr-player#wp3-player-0 .media-control .skip-button:hover .skip-button__label, .clappr-player#wp3-player-0 .media-control .skip-button:focus .skip-button__label {\n      color: #111111; }\n    .clappr-player#wp3-player-0 .media-control .skip-button:hover svg path[fill], .clappr-player#wp3-player-0 .media-control .skip-button:focus svg path[fill] {\n      fill: #111111 !important; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--hidden {\n    visibility: hidden;\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--left {\n    right: auto;\n    left: 0; }\n  .clappr-player#wp3-player-0 .media-control .skip-button svg {\n    width: 24px;\n    height: 24px; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--live_button, .clappr-player#wp3-player-0 .media-control .skip-button--start_over {\n    padding: 6px 12px; }\n    .clappr-player#wp3-player-0 .media-control .skip-button--live_button svg, .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n      margin-top: 2px; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--live_button svg {\n    transform: rotate(180deg);\n    margin-left: 5px; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n    margin-right: 5px; }\n\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--sticky {\n  transform: translateY(0px); }\n\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--force-transform-animation {\n  transition: transform 0.3s ease; }\n\n.clappr-player#wp3-player-0 .media-control-hide .skip-button--sticky {\n  opacity: 1 !important;\n  pointer-events: auto !important; }\n\n.clappr-player#wp3-player-0 .media-control-hide.touch .skip-button--sticky {\n  transform: translateY(52px); }\n\n.clappr-player#wp3-player-0 .media-control-hide.touch.w360 .skip-button--sticky {\n  transform: translateY(60px); }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible.touch .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible.touch .skip-button {\n  opacity: 0.5; }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible .skip-button {\n  opacity: 0.5;\n  z-index: 100; }\n\n.clappr-player#wp3-player-0 .media-control.settings-modal--visible .skip-button {\n  visibility: hidden;\n  opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control.ad .skip-button {\n  visibility: hidden;\n  opacity: 0; }\n';ur(wa);var Sa=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"onClick",value:function(){this.disableButton(),this.container.trigger(_n.SKIP_BUTTON_CLICKED,{name:this.name}),this.seekToEndCuepoint()}},{key:"seekToEndCuepoint",value:function(){this.container.seek(this.endCuepoint.time),!this.container.isPlaying()&&this.container.play()}},{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.listenTo(this.container,_n.DID_LOAD_CUEPOINTS,this.onCuepointsLoaded)}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onCuepointsLoaded",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.startCuepoint=t.find((function(t){return t.type===e.startCuepointType})),this.endCuepoint=t.find((function(t){return t.type===e.endCuepointType})),this.startCuepoint&&this.endCuepoint&&this.shouldActive&&this.listenTo(this.container.playback,ye.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"onTimeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.current,n=t>=this.startCuepoint.time&&t<this.endCuepoint.time,i=t>=this.startCuepoint.time&&t<this.startCuepoint.time+5;n!==this.isActive&&(this.isActive=n,this.isActive?this.enableButton():this.disableButton()),i!==this.isSticky&&(this.isSticky=i,this.isSticky?this.setSticky():this.resetSticky())}},{key:"enableButton",value:function(){this.container.trigger(_n.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden"),this.bindKeyEvents()}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden").removeClass("skip-button--sticky").off("transitionend")}},{key:"setSticky",value:function(){var e=this;if(this.mediaControl.isVisible())return this.$el.addClass("skip-button--sticky skip-button--force-transform-animation");this.$el.addClass("skip-button--sticky").on("transitionend",(function(){e.$el.addClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetSticky",value:function(){var e=this;this.$el.removeClass("skip-button--sticky").on("transitionend",(function(){e.$el.removeClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetState",value:function(){this.isActive=!1,this.isSticky=!1}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("enter",(function(){e.isSticky&&e.onClick()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("enter")}},{key:"render",value:function(){var e=this.template({label:this.label}),t=An.getStyleFrom(wa,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.append(t[0]),this}},{key:"destroy",value:function(){this.unbindKeyEvents(),Vi(Ui(n.prototype),"destroy",this).call(this)}},{key:"name",get:function(){return"skip_button"}},{key:"type",get:function(){return""}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return $e(Ta)}},{key:"label",get:function(){return""}},{key:"startCuepointType",get:function(){return""}},{key:"endCuepointType",get:function(){return""}},{key:"shouldActive",get:function(){return this.endCuepoint.time-this.startCuepoint.time>=10}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.type," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}}]),n}(yr),Ca=kn.seekStringToSeconds,Ra=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"onCuepointsLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Vi(Ui(n.prototype),"onCuepointsLoaded",this).call(this,e),this.autoSkipEnabled){var t=this.endCuepoint.time;t&&(this.container.trigger(_n.WILL_AUTO_SKIP_RECAP),this.container.playback.setInitialTime(t))}}},{key:"name",get:function(){return"skip_recap"}},{key:"type",get:function(){return"recap"}},{key:"label",get:function(){return"Pular Resumo"}},{key:"startCuepointType",get:function(){return"recap_start"}},{key:"endCuepointType",get:function(){return"recap_end"}},{key:"autoSkipEnabled",get:function(){var e=this.options.resumeAt||Ca();return this.options.skipRecap&&this.endCuepoint&&!e}}]),n}(Sa),Ia=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"name",get:function(){return"skip_intro"}},{key:"type",get:function(){return"intro"}},{key:"label",get:function(){return"Pular Abertura"}},{key:"startCuepointType",get:function(){return"opening_start"}},{key:"endCuepointType",get:function(){return"opening_end"}}]),n}(Sa),Da="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Oa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pa(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var xa="Expected a function",La=/^\s+|\s+$/g,Ma=/^[-+]0x[0-9a-f]+$/i,Na=/^0b[01]+$/i,Ua=/^0o[0-7]+$/i,Ba=parseInt,Fa="object"==typeof Da&&Da&&Da.Object===Object&&Da,ja="object"==typeof self&&self&&self.Object===Object&&self,Ha=Fa||ja||Function("return this")(),Va=Object.prototype.toString,Ka=Math.max,za=Math.min,Ga=function(){return Ha.Date.now()};function Wa(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(xa);function p(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function f(e){return u=e,s=setTimeout(g,t),c?p(e):o}function y(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function g(){var e=Ga();if(y(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?za(n,a-(e-u)):n}(e))}function v(e){return s=void 0,h&&i?p(e):(i=r=void 0,o)}function m(){var e=Ga(),n=y(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return f(l);if(d)return s=setTimeout(g,t),p(l)}return void 0===s&&(s=setTimeout(g,t)),o}return t=$a(t)||0,Ya(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Ka($a(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},m.flush=function(){return void 0===s?o:v(Ga())},m}function Ya(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $a(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Va.call(e)}(e))return NaN;if(Ya(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ya(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(La,"");var n=Na.test(e);return n||Ua.test(e)?Ba(e.slice(2),n?2:8):Ma.test(e)?NaN:+e}var qa=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError(xa);return Ya(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Wa(e,t,{leading:i,maxWait:t,trailing:r})},Xa='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <title>\n        Backward\n    </title>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11.5 18V6L3 12l8.5 6zm.5-6l8.5 6V6L12 12z" fill="#FFF"/>\n    </g>\n</svg>',Qa=kn.getHostname,Za=kn.getCurrentTime,Ja=kn.getTimeFromPosition,eo=window.WM&&window.WM.Settings||{},to=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e))._throttledPositionUpdate=qa((function(){var e;return(e=i).updateButtonState.apply(e,arguments)}),5e3,{trailing:!1}),i.currentProgram={},((eo&&eo.StartOver||{}).Blacklist||[]).find((function(e){return e.test(Qa())}))&&i.destroy(),i}return Pi(n,[{key:"name",get:function(){return"start_over"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return $e(Ta)}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"programStartPositionOffset",get:function(){return Za(this.innerPlayback)-this.currentProgram.startTime}},{key:"programStartPosition",get:function(){return this.innerPlayback.getCurrentTime()-this.programStartPositionOffset}},{key:"label",get:function(){var e="Início",t="Assistir do ".concat(e.toLowerCase());return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--left skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"canSeekToProgramStart",get:function(){var e=this.innerPlayback.getCurrentTime()-this.programStartPositionOffset>=0;return this.programStartPositionOffset>5&&e}}]),Pi(n,[{key:"onClick",value:function(){this.container.trigger(_n.SKIP_BUTTON_CLICKED,{name:this.name}),this.canSeekToProgramStart&&(this.seekToProgramStart(),this.updateButtonState())}},{key:"seekToProgramStart",value:function(){this.container.seek(this.programStartPosition),!this.container.isPlaying()&&this.container.play()}},{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,ye.CORE_RESIZE,this.onPlayerResize)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&this.listenToOnce(this.container,_n.DID_LOAD_EPG,this.onEPGLoaded)}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onEPGLoaded",value:function(){this.listenTo(this.container,_n.DID_CHANGE_CURRENT_PROGRAM,this.onProgramChange),this.listenTo(this.playback,ye.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate)}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"getCurrentPositionTime",value:function(){var e=this.innerPlayback.getCurrentTime(),t=this.innerPlayback.getProgramDateTime(),n=new Date(t);return Ja(e,n)}},{key:"onProgramChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program,n=void 0===t?{}:t;this.currentProgram=n||{},this.updateButtonState()}},{key:"updateButtonState",value:function(){this.isActive!==this.canSeekToProgramStart&&(this.isActive=this.canSeekToProgramStart,this.isActive?this.enableButton():this.disableButton())}},{key:"enableButton",value:function(){this.container.trigger(_n.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetState",value:function(){this.isActive=!1}},{key:"render",value:function(){var e=this.template({label:this.label}),t=An.getStyleFrom(wa,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.prepend(Xa),this.$el.append(t[0]),this}}]),n}(yr),no=kn.getHostname,io=window.WM&&window.WM.Settings||{},ro=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),i=t.call(this,e),((io&&io.StartOver||{}).Blacklist||[]).find((function(e){return e.test(no())}))&&i.destroy(),i}return Pi(n,[{key:"name",get:function(){return"live_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return $e(Ta)}},{key:"events",get:function(){return{click:this.onClick}}},{key:"label",get:function(){var e=this.options&&this.options.isLiveContent?"ao vivo":"agora",t="Assistir ".concat(e);return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,ye.CORE_RESIZE,this.onPlayerResize)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,ye.CONTAINER_PLAYBACKDVRSTATECHANGED,this.toggleButton),this.listenTo(this.container,ye.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,ye.CONTAINER_PAUSE,this.updateState)}},{key:"toggleButton",value:function(e){this.dvrInUse=e,this.dvrInUse?this.enableButton():this.disableButton()}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"onClick",value:function(){this.core.mediaControl.container.isPlaying()||this.core.mediaControl.container.play(),this.dvrInUse&&this.core.mediaControl.container.seek(this.core.mediaControl.container.getDuration())}},{key:"updateState",value:function(){this.dvrInUse?this.enableButton():this.disableButton()}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"enableButton",value:function(){this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"render",value:function(){var e=An.getStyleFrom(wa,{playerId:this.core.options.playerId});return this.$el.html(this.template({label:this.label})),this.$el.append(Xa),this.$el.append(e[0]),this}}]),n}(yr),ao='.clappr-player#wp3-player-0 .drawer-container[data-volume] {\n  z-index: 300;\n  position: relative;\n  cursor: pointer; }\n  .clappr-player#wp3-player-0 .drawer-container[data-volume] .media-control-button {\n    padding: 0; }\n  .clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide {\n    z-index: auto; }\n    .clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide .bar-container[data-volume] {\n      opacity: 0;\n      visibility: hidden; }\n\n.clappr-player#wp3-player-0 .drawer-icon-container {\n  width: 24px;\n  height: 24px; }\n\n.clappr-player#wp3-player-0 .bar-container[data-volume] {\n  will-change: visibility, opacity;\n  position: absolute;\n  bottom: 42px;\n  width: 30px;\n  height: 115px;\n  left: 8px;\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.85);\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .bar-container[data-volume]:after {\n    content: "";\n    width: 100%;\n    position: absolute;\n    height: 10px;\n    bottom: -10px;\n    left: 0; }\n  .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] {\n    position: relative;\n    top: 15px;\n    width: 2px;\n    margin-left: 14px;\n    background: rgba(255, 255, 255, 0.2);\n    border-radius: 10px;\n    height: calc(100% - 30px);\n    overflow: hidden;\n    box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, 0.5); }\n    .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n      position: absolute;\n      bottom: 0;\n      background: #fff;\n      width: 100%;\n      height: 0;\n      transition: height .2s ease; }\n  .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] {\n    position: absolute;\n    left: 9px;\n    width: 12px;\n    height: 12px;\n    bottom: 40%;\n    transition: bottom .2s ease; }\n    .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n      width: 100%;\n      height: 100%;\n      border-radius: 6px;\n      background-color: #fff;\n      box-shadow: 0 0 1px black; }\n';ur(ao);var oo='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3 8.77v6h4l5 5v-16l-5 5H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z" fill="#FFF"/>\n    </g>\n</svg>',so='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" fill="#FFF"/>\n    </g>\n</svg>',lo=kn.autoplayManager,uo=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).persistConfig=i.core.options.persistConfig,i.isUserGesture=!1,i.stopDragHandler=function(e){return i.stopDrag(e)},i.updateDragHandler=function(e){return i.updateDrag(e)},$(document).bind("mouseup",i.stopDragHandler),$(document).bind("mousemove",i.updateDragHandler),i}return Pi(n,[{key:"name",get:function(){return"volume"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return $e('<div class="drawer-icon-container" data-volume>\n  <button class="drawer-icon media-control-button media-control-element" data-volume></button>\n</div>\n\n<div class="bar-container" data-volume>\n  <div class="bar-background" data-volume>\n    <div class="bar-fill-1" data-volume></div>\n    <div class="bar-hover" data-volume></div>\n  </div>\n  <div class="bar-scrubber" data-volume>\n    <div class="bar-scrubber-icon" data-volume></div>\n  </div>\n</div>\n')}},{key:"volume",get:function(){return this.container.volume}},{key:"muted",get:function(){return 0===this.volume}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"attributes",get:function(){return{class:"drawer-container volume-hide","data-volume":""}}},{key:"events",get:function(){return{mouseenter:this.showVolumeBar,mouseleave:this.hideVolumeBar,"click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mousedown .bar-container[data-volume]":"startVolumeDrag"}}},{key:"mutedAutoplay",get:function(){return this.idPlayback.mutedAutoplay}}]),Pi(n,[{key:"destroy",value:function(){Vi(Ui(n.prototype),"destroy",this).call(this),$(document).unbind("mouseup",this.stopDragHandler),$(document).unbind("mousemove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,_n.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked)}},{key:"updateContainer",value:function(){this.unbindContainerEvents(),this.container=this.core.activeContainer,this.idPlayback=this.container&&this.container.playback,this.container&&this.bindContainerEvents()}},{key:"onContainerChanged",value:function(){this.updateContainer(),this.setInitialVolume()}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,ye.CONTAINER_VOLUME,this.onContainerVolumeUpdate),this.listenTo(this.idPlayback,_n.WM_PLAY_REQUESTED,this.setInitialVolume)}},{key:"unbindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.idPlayback&&this.stopListening(this.idPlayback)}},{key:"getInitialVolume",value:function(){var e=this.persistConfig?re.Config.restore("volume"):100;return this.lastVolume=e,(this.core.options.mute||this.mutedAutoplay)&&(e=0),this.currentVolume=e,e}},{key:"setInitialVolume",value:function(){this.setVolume(this.getInitialVolume(),{initial:!0})}},{key:"onTapToUnmuteClicked",value:function(){this.isUserGesture=!0,this.setVolume(this.lastVolume||100),this.isAd&&this.idPlayback.volume(this.lastVolume||100),lo.consent()}},{key:"toggleMute",value:function(e){e&&e.stopPropagation(),this.isUserGesture=!0,this.setVolume(this.muted?this.lastVolume||100:0)}},{key:"onContainerVolumeUpdate",value:function(e){e=void 0!==e&&e>=0?e:this.volume,this.updateVolumeUI(e),this.draggingVolumeBar||(this.currentVolume>0&&this.muted?this.container.trigger(_n.WM_MUTED,this.lastVolume,this.isUserGesture):this.currentVolume<=0&&!this.muted&&this.container.trigger(_n.WM_UNMUTED,this.lastVolume,this.isUserGesture),this.isUserGesture=!1,this.lastVolume=this.currentVolume!==e?this.currentVolume:this.lastVolume,this.currentVolume=e)}},{key:"updateVolumeUI",value:function(e){var t=this;this.container.isReady?this.$volumeBarContainer&&(this.updateVolumeBar(e),this.updateVolumeIcon(e)):this.listenToOnce(this.container,ye.CONTAINER_READY,(function(){return t.updateVolumeUI(e)}))}},{key:"setVolume",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.initial;e=Math.min(100,Math.max(e,0)),this.persistConfig&&!i&&re.Config.persist("volume",e);var r=function(){t.stopListening(t.idPlayback,_n.WM_PLAYBACK_WILL_PLAY),t.container.isReady?t.container.setVolume(e):t.listenToOnce(t.idPlayback,_n.WM_PLAYBACK_WILL_PLAY,(function(){t.container.setVolume(t.getInitialVolume())}))};this.container?r():this.listenToOnce(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,(function(){r()}))}},{key:"onVolumeClick",value:function(e){this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"getVolumeFromUIEvent",value:function(e){var t=100*(1-(e.pageY-this.$volumeBarContainer.offset().top)/this.$volumeBarContainer.height());return Math.min(100,Math.max(t,0))}},{key:"updateVolumeBar",value:function(e){var t=this.$volumeBarContainer.height(),n=this.$volumeBarBackground.height(),i=(t-n)/2,r=n*e/100-this.$volumeBarScrubber.height()/2+i;this.$volumeBarFill.css({height:e+"%"}),this.$volumeBarScrubber.css({bottom:r})}},{key:"updateVolumeIcon",value:function(e){this.$volumeIcon.html(""),e>0?this.$volumeIcon.append(oo):this.$volumeIcon.append(so)}},{key:"startVolumeDrag",value:function(e){this.draggingVolumeBar=!0,this.mediaControl.$el.addClass("media-control-dragging"),this.mediaControl.setKeepVisible(),e&&e.preventDefault()}},{key:"stopDrag",value:function(e){this.draggingVolumeBar&&(this.mediaControl.resetKeepVisible(),this.mediaControl.$el.removeClass("media-control-dragging"),this.draggingVolumeBar=!1,this.isUserGesture=!0,this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"updateDrag",value:function(e){this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"showVolumeBar",value:function(){N.supportsTouchEvents||(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.triggerWillShowModalElement(),this.$el.removeClass("volume-hide"),this.mediaControl&&this.mediaControl.trigger(_n.WM_VOLUME_SHOW),this.isVolumeBarVisible=!0)}},{key:"hideVolumeBar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isVolumeBarVisible&&this.$volumeBarContainer&&("number"!=typeof t.timeout&&(t.timeout=150),this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return e.hideVolumeBar(t)}),t.timeout):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){e.$el.addClass("volume-hide"),e.mediaControl&&e.mediaControl.trigger(_n.WM_VOLUME_HIDE),e.isVolumeBarVisible=!1,e.triggerDidHideModalElement()}),t.timeout)))}},{key:"createCachedElements",value:function(){this.hasCachedElements=!0,this.$volumeBarContainer=this.$el.find(".bar-container"),this.$volumeIcon=this.$el.find(".drawer-icon"),this.$volumeBarBackground=this.$el.find(".bar-background"),this.$volumeBarFill=this.$el.find(".bar-fill-1"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber")}},{key:"render",value:function(){if(!this.hasCachedElements){this.$el.html(this.template());var e=An.getStyleFrom(ao,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.createCachedElements(),this.$volumeIcon.html(oo),this}}}]),n}(yr),co=".clappr-player#wp3-player-0 .media-control.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 0.5; }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .thumb-preview {\n  display: none !important; }\n\n.clappr-player#wp3-player-0 .media-control-panel__lower .bar-container[data-seekbar] {\n  padding: 12px 0; }\n\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n  transform: translate(-50%, -50%); }\n\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: none; }\n\n.clappr-player#wp3-player-0 .media-control-dragging .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: scale(2) !important; }\n\n.clappr-player#wp3-player-0 .bar-container__placeholder {\n  height: 36px; }\n\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  width: calc(100% - 24px);\n  height: 24px;\n  cursor: pointer;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  touch-action: manipulation;\n  top: calc(50% + 6px);\n  left: 50%;\n  transform: translate(-50%, -50%); }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] {\n    position: absolute;\n    display: flex;\n    align-self: center;\n    width: 100%;\n    height: 2px;\n    background-color: rgba(255, 255, 255, 0.2);\n    overflow: hidden;\n    top: 50%;\n    left: 50%;\n    will-change: transform;\n    transform-origin: top;\n    transform: scaleY(1) translate(-50%, -50%);\n    transition: transform .2s ease; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 0;\n      height: 100%; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n      background-color: rgba(255, 255, 255, 0.3);\n      transition: width .1s ease; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n      background-color: #ffffff; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n      display: none;\n      position: absolute;\n      width: 5px;\n      height: 100%;\n      background-color: #ff0000; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n    transform: scaleY(2) translate(-50%, -50%); }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n      display: block; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover-disable[data-seekbar] {\n      display: none; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n    transform: scale(1.5); }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar].seek-disabled {\n    cursor: default; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n    position: relative;\n    display: flex;\n    align-self: center;\n    left: 0;\n    width: 8px;\n    height: 8px;\n    text-align: center;\n    z-index: 200; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n      display: inline-block;\n      position: absolute;\n      left: 0;\n      background-color: #fff;\n      border-radius: 50%;\n      height: 100%;\n      width: 100%;\n      will-change: transform;\n      transform: scale(1);\n      transition: transform .2s ease; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber-mobile[data-seekbar] {\n    transition: unset; }\n";ur(co);var ho=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).stopDragHandler=function(e){return i.stopDrag(e)},i.updateDragHandler=function(e){return i.updateDrag(e)},N.supportsTouchEvents&&(x(document).bind("touchend",i.stopDragHandler),x(document).bind("touchmove",i.updateDragHandler)),N.supportsTouchEvents&&!N.isHybridDevice||(x(document).bind("mouseup",i.stopDragHandler),x(document).bind("mousemove",i.updateDragHandler)),i}return Pi(n,[{key:"name",get:function(){return"seekbar"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"center"}},{key:"template",get:function(){return $e('<div class="bar-background" data-seekbar>\n  <div class="bar-fill-1" data-seekbar></div>\n  <div class="bar-fill-2" data-seekbar></div>\n  <div class="bar-hover" data-seekbar></div>\n</div>\n<div class="bar-scrubber" data-seekbar>\n  <div class="bar-scrubber-icon" data-seekbar></div>\n</div>\n')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"isLivePlayback",get:function(){return this.container&&this.container.getPlaybackType()===we.LIVE}},{key:"attributes",get:function(){return{class:"bar-container","data-seekbar":""}}},{key:"events",get:function(){var e={click:this.seek,touchmove:this.startActionOnSeekBar,touchend:this.leaveActionOnSeekBar,touchstart:this.startSeekDrag},t={click:this.seek,mousemove:this.startActionOnSeekBar,mouseleave:this.leaveActionOnSeekBar,"mousedown .bar-scrubber[data-seekbar]":"startSeekDrag"},n=Mi(Mi({},e),t);return N.isHybridDevice?n:N.supportsTouchEvents?e:t}}]),Pi(n,[{key:"destroy",value:function(){Vi(Ui(n.prototype),"destroy",this).call(this),x(document).unbind("mouseup",this.stopDragHandler),x(document).unbind("touchend",this.stopDragHandler),x(document).unbind("mousemove",this.updateDragHandler),x(document).unbind("touchmove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,ye.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,ye.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,ye.CONTAINER_PROGRESS,this.updateProgressBar),this.setSeekPercentage(0))}},{key:"createCachedElements",value:function(){this.$seekBarContainer=this.$el,this.$seekBarHover=this.$el.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=this.$el.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=this.$el.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=this.$el.find(".bar-scrubber[data-seekbar]"),this.$seekBarScrubberIcon=this.$el.find(".bar-scrubber-icon[data-seekbar]"),N.isMobile&&(this.$seekBarHover.addClass("bar-hover-disable"),this.$seekBarScrubber.addClass("bar-scrubber-mobile")),this.mediaControl.$seekBarContainer=this.$seekBarContainer}},{key:"onPlayerResize",value:function(){this.setSeekPercentage(this.currentSeekPercentage)}},{key:"setSeekPercentage",value:function(e){e=Math.min(e,100);var t=this.$seekBarContainer.width()*e/100-this.$seekBarScrubber.width()/2;t=Math.max(t,-(this.$seekBarScrubber.width()-this.$seekBarScrubberIcon.width())/2),t=Math.min(t,this.$seekBarContainer.width()-this.$seekBarScrubber.width()/2-this.$seekBarScrubberIcon.width()/2),this.currentSeekPercentage=e;var n=this.$seekBarScrubberIcon.width()/4;isNaN(n)||isNaN(e)||isNaN(t)||(this.$seekBarPosition.css({width:"calc(".concat(e,"% + ").concat(n,"px)")}),this.$seekBarScrubber.css({transform:"translateX(".concat(t,"px)")}))}},{key:"stopDrag",value:function(e){this.draggingSeekBar&&(this.draggingSeekBar&&this.seek(e),this.mediaControl.$el.removeClass("media-control-dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition media-control-dragging"),this.core.trigger(_n.STOP_DRAGGING_SEEKBAR),this.draggingSeekBar=!1,this.mediaControl.resetKeepVisible())}},{key:"lastTouchEvent",value:function(e){var t=e.originalEvent?e.originalEvent:e;return t.touches&&t.touches.length>0?t.touches[t.touches.length-1]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[t.changedTouches.length-1]:{}}},{key:"updateDrag",value:function(e){if(this.draggingSeekBar){e.preventDefault();var t=((e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;t=Math.min(100,Math.max(t,0)),this.setSeekPercentage(t)}}},{key:"startSeekDrag",value:function(e){this.settings.seekEnabled&&(this.core.trigger(_n.START_DRAGGING_SEEKBAR),this.draggingSeekBar=!0,this.mediaControl.setKeepVisible(),this.mediaControl.$el.addClass("media-control-dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),N.isHybridDevice&&e&&e.preventDefault())}},{key:"startActionOnSeekBar",value:function(e){if(this.settings.seekEnabled){var t=(e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.mediaControl.trigger(ye.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)}},{key:"leaveActionOnSeekBar",value:function(e){this.mediaControl.trigger(ye.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}},{key:"seek",value:function(e){if(this.settings.seekEnabled){var t=e.pageX||this.lastTouchEvent(e).pageX||0,n=Math.max(0,t-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return n=Math.min(100,Math.max(n,.01)),this.container.seekPercentage(n),this.setSeekPercentage(n),!1}}},{key:"updateProgressBar",value:function(e){var t=e.start/e.total*100,n=e.current/e.total*100;this.$seekBarLoaded.css({left:"".concat(t,"%"),width:"".concat(n-t,"%")})}},{key:"onTimeUpdate",value:function(e){this.draggingSeekBar||(this.currentPositionValue=e.current<0?0:e.current,this.currentDurationValue=e.total,this.renderSeekBar())}},{key:"renderSeekBar",value:function(){null!==this.currentPositionValue&&null!==this.currentDurationValue&&(this.currentSeekBarPercentage=this.isLivePlayback?100:0,this.isLivePlayback&&!this.container.isDvrInUse()||(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage))}},{key:"render",value:function(){this.$el.html(this.template());var e=An.getStyleFrom(co,{playerId:this.core.options.playerId}),t=x("<div>").addClass("bar-container__placeholder");return this.$el.append(e[0]),this.$el.parent().append(t),this.createCachedElements(),this}}]),n}(yr),po='.clappr-player#wp3-player-0 .media-control .quick-seek {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek.hidden {\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-container {\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-label {\n    display: inline-block;\n    position: absolute;\n    font-weight: bold;\n    font-family: "opensans-regular";\n    font-weight: 700;\n    letter-spacing: 0px;\n    font-size: 12px;\n    color: #eee;\n    opacity: 0;\n    transition: opacity 0.2s ease;\n    margin-bottom: 8px;\n    top: 40%;\n    left: 36%; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-label.triple-digit {\n      font-size: 10px;\n      left: calc(50% - 9px); }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-label.visible {\n      opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-arrow-placeholder {\n    position: relative;\n    display: flex; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-arrow {\n    display: inline-block;\n    justify-content: center;\n    opacity: 0;\n    transform-origin: 24px 26px;\n    transition: transform 0.6s ease, opacity 0.2s ease; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-arrow.visible {\n      opacity: 1; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-arrow svg {\n      width: 48px;\n      height: 48px; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    color: #eee;\n    width: 45%; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-backdrop {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      z-index: -1;\n      right: -50%;\n      bottom: 0px;\n      border-radius: 50%;\n      background: rgba(0, 0, 0, 0.3);\n      transform: scaleX(0) scaleY(1);\n      opacity: 0%;\n      will-change: opacity;\n      transition: transform 1ms ease, opacity 0.3s ease; }\n      .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-backdrop--left {\n        left: -50%; }\n      .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-backdrop.backdrop-show {\n        opacity: 1;\n        transform: scaleX(0.9) scaleY(1.4); }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      z-index: -1;\n      right: -50%;\n      bottom: 0px;\n      border-radius: 50%;\n      background: rgba(0, 0, 0, 0.3);\n      transform: scaleX(0) scaleY(1);\n      transform-origin: center center;\n      opacity: 0;\n      will-change: opacity, transform;\n      transition: transform 0.7s ease, opacity 0.3s ease; }\n      .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background--left {\n        left: -50%; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder--left .quick-seek-arrow-placeholder {\n      flex-direction: row-reverse; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background.background-scaled {\n      transform: scaleX(0.9) scaleY(1.4); }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background.background-show {\n      opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek.media-control-element {\n    padding: 0;\n    opacity: 1 !important; }\n';ur(po);var fo=10,yo=["1","2","3","4","5","6","7","8","9","0"],go={left:-10,right:10,"shift left":-15,"shift right":15,"shift ctrl left":-20,"shift ctrl right":20},vo=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,_n.MEDIACONTROL_DOUBLE_TAP,this.onMediaControlDoubleTap),this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.updateContainer),this.listenTo(this.mediaControl,ye.MEDIACONTROL_SHOW,this.onMediaControlShow)}},{key:"bindContainerEvents",value:function(){this.listenToOnce(this.container,ye.CONTAINER_PLAY,this.bindKeyEvents),this.listenTo(this.container,ye.CONTAINER_ENDED,this.onContainerEnd)}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),Object.keys(go).forEach((function(t){e.bindKeyAndShow(t,(function(){return e.onKeyPress(t)}))})),yo.forEach((function(t){e.bindKeyAndShow(t,(function(){return e.canSeek&&e.container.seekPercentage(10*t+.1)}))})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&(this.kibo.off(Object.keys(go)),this.kibo.off(yo))}},{key:"updateContainer",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.bindContainerEvents()}},{key:"onContainerEnd",value:function(){this.unbindKeyEvents(),this.listenToOnce(this.container,ye.CONTAINER_PLAY,this.bindKeyEvents)}},{key:"onKeyPress",value:function(e){this.canSeek&&(this.container.trigger(_n.WILL_QUICK_SEEK),this.seekRelative(go[e]))}},{key:"seekRelative",value:function(e){var t=this.container.getCurrentTime(),n=this.container.getDuration(),i=Math.min(Math.max(t+e,0),n);i=Math.min(100*i/n+.01,100),this.container.seekPercentage(i)}},{key:"onMediaControlDoubleTap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide;!this.canSeek||"left"===t&&this.willBackwardToVideoEnd||"right"===t&&this.willForwardToVideoEnd||(this.container.trigger(_n.WILL_QUICK_SEEK),"vibrate"in navigator&&window.navigator.vibrate(15),this.feedBackInProgress?this.lastTapSide===t?this.updateQuickSeekFeedback():(this.hideQuickSeekFeedback(),this.showQuickSeekFeedback(t)):this.showQuickSeekFeedback(t),this.container.seek(this.targetSeekValue(t)))}},{key:"targetSeekValue",value:function(e){var t="right"===e?fo:-10;return Math.min(this.container.getDuration()-1,Math.max(.1,this.container.currentTime+t))}},{key:"cacheAnimatedElements",value:function(e){this.backdrop=this.$el.find(".quick-seek-placeholder-backdrop--".concat(e)),this.background=this.$el.find(".quick-seek-placeholder-background--".concat(e)),this.arrow=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-arrow-placeholder .quick-seek-arrow")),this.label=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-label"))}},{key:"showQuickSeekFeedback",value:function(e){var t=this;this.lastTapSide=e,this.feedBackInProgress=!0,this.showPlugin(),this.cacheAnimatedElements(e),this.resetLabelClasses(),this.backdrop.addClass("backdrop-show"),this.background[0].addEventListener("transitionend",(function(e){return t.onBackgroundShow(e)}),{once:!0}),setTimeout((function(){return t.background.addClass("background-show background-scaled")})),this.displayArrow()}},{key:"onBackgroundShow",value:function(e){e.stopPropagation(),"opacity"!==e.propertyName&&this.background.addClass("opacity-transition")}},{key:"displayArrow",value:function(){var e=this;this.arrow[0].addEventListener("transitionend",(function(t){return e.onArrowShow(t)}),{once:!0}),setTimeout((function(){return e.arrow.addClass("visible")})),this.spinArrow()}},{key:"onArrowShow",value:function(e){e.stopPropagation(),this.displayLabel()}},{key:"spinArrow",value:function(){var e=this;"left"===this.lastTapSide?(!this.leftArrowDegrees&&(this.leftArrowDegrees=0),this.leftArrowDegrees-=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.leftArrowDegrees,"deg);")}))):(!this.rightArrowDegrees&&(this.rightArrowDegrees=0),this.rightArrowDegrees+=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.rightArrowDegrees,"deg);")})))}},{key:"displayLabel",value:function(){var e=this;this.currentSeekTime>=100&&this.label.addClass("triple-digit"),this.label.text(this.currentSeekTime),this.label[0].addEventListener("transitionend",(function(t){return e.onLabelShow(t)}),{once:!0}),setTimeout((function(){return e.label.addClass("visible")}))}},{key:"onLabelShow",value:function(e){var t=this;e.stopPropagation(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){t.hideQuickSeekFeedback()}),3e3)}},{key:"updateQuickSeekFeedback",value:function(){var e=this;this.spinArrow(),this.currentSeekTime+=fo,this.hideLabel(),990!==this.currentSeekTime&&setTimeout((function(){e.displayLabel()}),300)}},{key:"hideQuickSeekFeedback",value:function(){this.feedBackInProgress&&(clearTimeout(this.timeoutId),this.hideLabel(),this.hideArrow(),this.hideBackground(),this.hideBackdrop(),this.currentSeekTime=fo,this.feedBackInProgress=!1,this.hidePlugin())}},{key:"onMediaControlShow",value:function(){this.hideQuickSeekFeedback()}},{key:"hideLabel",value:function(){this.label.removeClass("visible")}},{key:"resetLabelClasses",value:function(){this.label.removeClass("triple-digit")}},{key:"hideArrow",value:function(){this.arrow.removeClass("visible")}},{key:"hideBackground",value:function(){this.background.removeClass("background-show"),this.resetBackgroundClasses()}},{key:"resetBackgroundClasses",value:function(){this.background.removeClass("background-scaled")}},{key:"hideBackdrop",value:function(){this.backdrop.removeClass("backdrop-show")}},{key:"showPlugin",value:function(){this.$el.removeClass("hidden")}},{key:"hidePlugin",value:function(){this.$el.addClass("hidden")}},{key:"destroy",value:function(){Vi(Ui(n.prototype),"destroy",this).call(this),this.unbindKeyEvents()}},{key:"render",value:function(){var e=An.getStyleFrom(po,{playerId:this.core.options.playerId});return this.$el.html(this.template({backwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2L14 12l10 10v-8c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"/>\n    </g>\n</svg>',forwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2l10 10-10 10v-8c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12h4c0 8.84-7.16 16-16 16S8 34.84 8 26s7.16-16 16-16z"/>\n    </g>\n</svg>',currentSeekTime:this.currentSeekTime})),this.$el.append(e[0]),this}},{key:"name",get:function(){return"quick_seek"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return $e('<div class="quick-seek-container">\n  <div class="quick-seek-placeholder quick-seek-placeholder--left">\n    <div class="quick-seek-placeholder-backdrop quick-seek-placeholder-backdrop--left"></div>\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--left"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= backwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label left"><%= currentSeekTime %></span>\n    </div>\n  </div>\n  <div class="quick-seek-placeholder quick-seek-placeholder--right">\n    <div class="quick-seek-placeholder-backdrop quick-seek-placeholder-backdrop--right"></div>\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--right"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= forwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label"><%= currentSeekTime %></span>\n    </div>\n  </div>\n</div>')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"willBackwardToVideoEnd",get:function(){return this.container.currentTime-3<0}},{key:"willForwardToVideoEnd",get:function(){return this.container.currentTime+fo>this.container.getDuration()}},{key:"currentSeekTime",get:function(){return this._currentSeekTime||fo},set:function(e){e<=990&&(this._currentSeekTime=e)}},{key:"attributes",get:function(){return{class:"quick-seek hidden"}}}]),n}(yr),mo='.clappr-player#wp3-player-0 .media-control.ad .quick-seek-hint {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  width: 100%;\n  padding-right: 0;\n  padding-left: 0; }\n  .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__label {\n    margin: 0 auto; }\n  .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow {\n    width: 24px;\n    height: 24px; }\n    .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--left {\n      margin-left: 0;\n      margin-right: 8px; }\n    .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--right {\n      margin-right: 0;\n      margin-left: 8px;\n      transform: rotate(0); }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint--disabled {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint.hidden {\n  opacity: 0;\n  visibility: hidden; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__container {\n  display: flex; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow {\n  display: inline-block;\n  width: 20px;\n  height: 20px; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow svg {\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--left {\n    margin-left: 8px;\n    margin-right: 4px; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--right {\n    margin-right: 8px;\n    transform: rotate(180deg); }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__label {\n  display: flex;\n  align-items: center;\n  opacity: 0.8;\n  font-family: "opensans-regular";\n  font-size: 14px;\n  font-weight: normal;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.14;\n  letter-spacing: normal;\n  color: #eeeeee; }\n';ur(mo);var bo=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).mouseOverSeekbar=!1,i.draggingSeekbar=!1,i.isVisible=!1,i.waitingTimeoutToShow=!1,i.waitingTimeoutToHide=!1,i}return Pi(n,[{key:"name",get:function(){return"quick_seek_hint"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return N.isMobile?"upper":"lower"}},{key:"position",get:function(){return N.isMobile?"":"between"}},{key:"template",get:function(){return $e('<span class="quick-seek-hint__label">\n  <% if (isMobile) { %>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= backward10 %></span>\n    Toque duplo para avançar\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= forward10 %></span>\n  <% } else { %>\n    Use as teclas\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= arrow %></span>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= arrow %></span>\n  para avançar\n  <% } %>\n</span>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"shouldDisable",get:function(){return this.currentWidth<=(N.isMobile?361:600)}},{key:"attributes",get:function(){return{class:"quick-seek-hint hidden"}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_RESIZE,this.onPlayerResize),this.bindSeekbarEvents()}},{key:"bindSeekbarEvents",value:function(){this.listenTo(this.mediaControl,ye.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.listenTo(this.mediaControl,ye.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.listenTo(this.core,_n.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,_n.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!0}},{key:"unbindSeekbarEvents",value:function(){this.stopListening(this.mediaControl,ye.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.stopListening(this.mediaControl,ye.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.stopListening(this.core,_n.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.stopListening(this.core,_n.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!1}},{key:"onStartDraggingSeekbar",value:function(){this.draggingSeekbar=!0}},{key:"onStopDraggingSeekbar",value:function(){this.draggingSeekbar=!1,this.waitingTimeoutToShow&&this.resetTimeoutToShow(),!this.waitingTimeoutToHide||!N.isMobile&&this.mouseOverSeekbar||(this.resetTimeoutToHide(),this.hide())}},{key:"onMousemoveSeekbar",value:function(){var e=this;if(this.mouseOverSeekbar=!0,!(this.isVisible||this.waitingTimeoutToShow||this.draggingSeekbar&&!N.isMobile||this.waitingMouseLeaveSeekbarAfterHide)){if(N.isMobile)return this.show();this.waitingTimeoutToShow=!0,this.showTimeoutId=setTimeout((function(){e.showTimeoutId=null,e.waitingTimeoutToShow=!1,e.show()}),1e3)}}},{key:"onMouseLeaveSeekbar",value:function(){this.mouseOverSeekbar=!1,this.waitingMouseLeaveSeekbarAfterHide=!1,this.draggingSeekbar||(this.waitingTimeoutToHide&&this.resetTimeoutToHide(),this.waitingTimeoutToShow&&this.resetTimeoutToShow(),this.hide())}},{key:"resetTimeoutToHide",value:function(){clearTimeout(this.hideTimeoutId),this.waitingTimeoutToHide=!1,this.hideTimeoutId=null}},{key:"resetTimeoutToShow",value:function(){clearTimeout(this.showTimeoutId),this.waitingTimeoutToShow=!1,this.showTimeoutId=null}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?(this.unbindSeekbarEvents(),this.$el.addClass("quick-seek-hint--disabled")):(!this.seekbarEventsActive&&this.bindSeekbarEvents(),this.$el.removeClass("quick-seek-hint--disabled"))}},{key:"show",value:function(){this.isVisible||(this.isVisible=!0,this.core.trigger(_n.WILL_SHOW_QUICK_SEEK_HINT),this.$el.removeClass("hidden"),N.isMobile&&this.$el.addClass("media-control-element--sticky"),this.hideDelayed())}},{key:"hideDelayed",value:function(){var e=this;this.waitingTimeoutToHide=!0,this.hideTimeoutId=setTimeout((function(){e.hideTimeoutId=null,e.waitingTimeoutToHide=!1,e.hide()}),4e3)}},{key:"hide",value:function(){this.mouseOverSeekbar&&(this.waitingMouseLeaveSeekbarAfterHide=!0),this.isVisible&&(this.core.trigger(_n.WILL_HIDE_QUICK_SEEK_HINT),this.$el.addClass("hidden"),N.isMobile&&this.$el.removeClass("media-control-element--sticky"),this.isVisible=!1)}},{key:"render",value:function(){var e=An.getStyleFrom(mo,{playerId:this.core.options.playerId});return this.$el.html(this.template({isMobile:N.isMobile,arrow:'<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><rect stroke="#EEE" opacity=".3" x=".5" y=".5" width="19" height="19" rx="2"/><path d="M8 9h8v2H8v3l-4-4 4-4v3z" fill="#EEE"/></g></svg>',backward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>',forward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.8 3H10v-3.3L9 13v-.7l1.8-.6h.1V16h-.1zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.8-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'})),this.$el.append(e[0]),this}}]),n}(yr);function Eo(e,t){return encodeURIComponent(e+"?utm_source=".concat(t,"&utm_medium=share-player-desktop"))}function ko(e,t){var n=500,i=window.screen.width/2-260,r=window.screen.height/2-300,a="height=".concat(n,",width=").concat(n,",left=").concat(i,",top=").concat(r,",screenX=").concat(i,",screenY=").concat(r,",\n               resizable=yes,status=no,toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");window.open(e,t,a)}var Ao='.clappr-player#wp3-player-0 .media-control.w360 .share__box--link-copied .share__button[data-share-item="link"] {\n  transform: translate(-286%, 0px); }\n\n.clappr-player#wp3-player-0 .media-control.w360 .share__button {\n  width: 40px;\n  height: 40px;\n  padding: 4px;\n  margin-left: 32px; }\n  .clappr-player#wp3-player-0 .media-control.w360 .share__button:first-child {\n    margin-left: 0; }\n  .clappr-player#wp3-player-0 .media-control.w360 .share__button:nth-last-child(3) {\n    margin-right: 0; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .share__close {\n  box-sizing: content-box;\n  padding: 12px;\n  top: 0;\n  right: 0; }\n\n.clappr-player#wp3-player-0 .share__box {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%; }\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__button {\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__button[data-share-item="link"] {\n    visibility: visible;\n    transition: transform 0.3s ease;\n    transform: translate(-344%, 0px);\n    opacity: 1;\n    cursor: default; }\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__item-copied-box, .clappr-player#wp3-player-0 .share__box--link-copied .share__title {\n    transition: visibility .7s ease, opacity .7s ease;\n    visibility: visible;\n    opacity: 1; }\n\n.clappr-player#wp3-player-0 .share__button {\n  padding: 0px;\n  background-color: transparent;\n  border: 0;\n  opacity: 0.6;\n  cursor: pointer;\n  transition: opacity .2s ease;\n  outline: none;\n  width: 48px;\n  height: 48px;\n  margin-left: 56px;\n  box-sizing: content-box; }\n  .clappr-player#wp3-player-0 .share__button:hover, .clappr-player#wp3-player-0 .share__button:focus {\n    opacity: 1; }\n  .clappr-player#wp3-player-0 .share__button svg {\n    width: 100%; }\n  .clappr-player#wp3-player-0 .share__button:first-child {\n    margin-left: 0; }\n  .clappr-player#wp3-player-0 .share__button:nth-last-child(3) {\n    margin-right: 0; }\n\n.clappr-player#wp3-player-0 .share__item-copied-box {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  position: absolute;\n  top: calc(50% + 22px);\n  left: 0;\n  opacity: 0;\n  visibility: hidden; }\n\n.clappr-player#wp3-player-0 .share__title {\n  position: absolute;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 16px;\n  color: #ffffff;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  cursor: default;\n  visibility: hidden;\n  top: calc(50% - 13px);\n  left: calc(50% - 22px); }\n\n.clappr-player#wp3-player-0 .share__subtitle {\n  padding: 0 35px;\n  max-width: 100%;\n  word-wrap: break-word;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 12px;\n  letter-spacing: -0.5px;\n  color: #ffffff;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  margin: 0; }\n\n.clappr-player#wp3-player-0 .share__close {\n  background-color: transparent;\n  border: 0;\n  padding: 0;\n  transition: opacity 0.3s ease;\n  opacity: 0.6;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 24px;\n  height: 24px;\n  outline: none;\n  cursor: pointer; }\n  .clappr-player#wp3-player-0 .share__close:hover, .clappr-player#wp3-player-0 .share__close:focus {\n    opacity: 1; }\n  .clappr-player#wp3-player-0 .share__close svg {\n    width: 100%;\n    height: 100%; }\n';ur(Ao);var _o='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    </g>\n</svg>',To=kn.copyToClipboard,wo=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).core=e,i.shouldRender=!1,i.$el.on("click",(function(){return i.showShareBox()})),i.options.share&&!1===i.options.share.enabled&&i.disable(),i}return Pi(n,[{key:"name",get:function(){return"share"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return $e('<div class="share__box">\n  <% for (var i = 0; i < shareItems.length; i++) { %>\n    <button class="share__button" data-share-item="<%= shareItems[i].name %>"> <%= shareItems[i].element %> </button>\n  <% } %>\n  <h1 class="share__title">Link Copiado</h1>\n  <div class="share__item-copied-box">\n    <h2 class="share__subtitle"><%= videoUrl %></h2>\n  </div>\n  <button class="share__close"></button>\n</div>\n')}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"attributes",get:function(){return{class:"media-control-button","data-share":"","data-controls":""}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,_n.WM_SHARE_SHOW,this.start),this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents)}},{key:"start",value:function(){var e=this,t=this.modal.find(".share__box"),n=this.modal.find(".share__close");t&&t.on("click",(function(t){t&&t.stopPropagation(),e.hideModal()})),n&&n.append(_o)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.listenTo(this.playback,_n.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.playback,_n.WM_RESOURCE_SELECTED,this.checkUrl),this.listenTo(this.container,ye.CONTAINER_SETTINGSUPDATE,this.shouldHideModal)}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.shareUrl=this.video.urlForConsumption.replace(/(^\w+:|^)\/\//,"");var t=this.core.options.share&&this.core.options.share.socialList;this.loadSocialList(t||[])}},{key:"checkUrl",value:function(){this.shouldRender=!0,this.render()}},{key:"shouldHideModal",value:function(){var e=this.playback&&this.playback.getPlaybackType();"vod"!==e&&"live"!==e&&this.hideModal()}},{key:"loadSocialList",value:function(e){e&&e.length>0?this.socialList=this.verifySocialList(e):this.socialList=this.getDefaultSocialList()}},{key:"verifySocialList",value:function(e){var t=this,n=[];return e.forEach((function(e){t.getDefaultSocialList().forEach((function(t){t.name===e&&n.push(t)}))})),n}},{key:"getDefaultSocialList",value:function(){var e=this;return[{name:"facebook",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M15.04 20v-6.196h2.08l.31-2.415h-2.39V9.848c0-.7.194-1.176 1.196-1.176h1.28v-2.16c-.222-.03-.981-.095-1.864-.095-1.844 0-3.106 1.125-3.106 3.192v1.78h-2.085v2.415h2.085V20H4.883C4.395 20 4 19.605 4 19.117V4.883C4 4.395 4.395 4 4.883 4h14.234c.488 0 .883.395.883.883v14.234c0 .488-.395.883-.883.883H15.04z" fill="#FFF"/>\n    </g>\n</svg>',onClickAction:function(){var t,n,i,r;t=e.video.urlForConsumption,n=e.video.title,i=Eo(t,"facebook"),r="?app_id=".concat("289255557788943","&display=popup&href=").concat(i),-1!=t.search("globoplay")&&(r+="&hashtag=".concat(encodeURIComponent("#GloboPlay"))),ko("".concat("https://www.facebook.com/dialog/share").concat(r),n)}},{name:"twitter",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M8.66 19.617c6.794 0 10.508-5.623 10.508-10.499 0-.16-.003-.319-.01-.477.72-.52 1.348-1.17 1.842-1.91-.662.293-1.374.491-2.12.58.762-.457 1.347-1.18 1.623-2.04-.713.422-1.504.729-2.345.895C17.484 5.449 16.525 5 15.462 5c-2.039 0-3.693 1.653-3.693 3.69 0 .29.033.57.096.841-3.07-.154-5.79-1.623-7.612-3.855-.318.545-.5 1.178-.5 1.854 0 1.28.652 2.41 1.643 3.072-.606-.019-1.175-.185-1.673-.462v.048c0 1.787 1.273 3.279 2.963 3.617-.31.084-.637.13-.974.13-.238 0-.47-.024-.694-.067.47 1.466 1.833 2.533 3.45 2.563-1.264.99-2.857 1.58-4.587 1.58-.298 0-.592-.017-.881-.051 1.634 1.046 3.575 1.657 5.661 1.657" fill="#FFF" fill-rule="nonzero"/>\n    </g>\n</svg>',onClickAction:function(){var t,n,i,r,a,o,s,l;t=e.video.urlForConsumption,n=e.video.title,i=e.video.program,r=function(e){return e?"#".concat(e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("").replace(/[-:]/g,"")):""}(i),a=-1!=t.search("globoplay")?" pelo #GloboPlay":"",o=r&&a?"Assista ".concat(r):"".concat(n),s=Eo(t,"twitter"),l=encodeURIComponent("".concat(o).concat(a)),ko("https://twitter.com/intent/tweet"+"?text=".concat(l,"&url=").concat(s),n)}},{name:"link",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" fill="#FFF"/>\n    </g>\n</svg>',onClickAction:function(t){t.stopPropagation(),e.showLinkCopiedBox(),To(e.video.urlForConsumption,e.modal)}}]}},{key:"hideModal",value:function(){var e=this.modal&&this.modal.find(".share__box"),t=e&&e.contents();!t||t&&!t.length||(e.off("click"),this.mediaControl.trigger(_n.WM_SHARE_HIDE),this.core.trigger(_n.WM_SHARE_HIDE),this.mediaControl.trigger(_n.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.triggerDidHideModalElement(),this.hasPlayingBeforeModal&&this.playback.play())}},{key:"render",value:function(){if(this.shouldRender){this.shouldRender=!1,this.$el.html("");var e=An.getStyleFrom(Ao,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M17 16.08c-.76 0-1.44.3-1.96.77L7.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L7.04 9.81C6.5 9.31 5.79 9 5 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92 0-1.61-1.31-2.92-2.92-2.92z" fill="#FFF"/>\n    </g>\n</svg>'),this}}},{key:"bindShareEvents",value:function(){var e=this;this.socialList.forEach((function(t){var n=e.modal.find(".share__button[data-share-item=".concat(t.name,"]"));"function"==typeof t.onClickAction&&n.on("click",t.onClickAction)}))}},{key:"showShareBox",value:function(e){e&&e.stopPropagation(),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause();var t=this.template({shareItems:this.socialList,videoUrl:this.shareUrl});this.triggerWillShowModalElement(),this.mediaControl.trigger(_n.MEDIACONTROL_MODAL_SHOW,t,{hidePanels:!0}),this.mediaControl.trigger(_n.WM_SHARE_SHOW),this.core.trigger(_n.WM_SHARE_SHOW),this.mediaControl.setKeepVisible(),this.bindShareEvents();var n=this.modal.find(".share__button, .share__item-copied-box, .share__title");n&&n.on("click",(function(e){return e.stopPropagation()}))}},{key:"showLinkCopiedBox",value:function(){var e=this.modal.find(".share__box");e&&e.addClass("share__box--link-copied")}}]),n}(yr),So='<div class="unmute-modal">\n  <div class="unmute-modal__button-box">\n    <button class="unmute-modal__button unmute-modal__button--on unmute-modal__button--hide"><%= volumeOnIcon %></button>\n    <button class="unmute-modal__button unmute-modal__button--off"><%= volumeOffIcon %></button>\n    <span class="unmute-modal__label">Ativar som</span>\n  </div>\n</div>\n',Co='.clappr-player#wp3-player-0 .unmute-modal {\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%; }\n  .clappr-player#wp3-player-0 .unmute-modal__button-box {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 32px;\n    background-color: rgba(17, 17, 17, 0.8);\n    width: 118px;\n    transition: width .5s ease;\n    box-sizing: border-box;\n    margin: 12px;\n    border-radius: 4px; }\n    .clappr-player#wp3-player-0 .unmute-modal__button-box--no-label {\n      width: 40px; }\n  .clappr-player#wp3-player-0 .unmute-modal__button {\n    background-color: transparent;\n    border: 0;\n    opacity: 1;\n    cursor: pointer;\n    margin: 0;\n    padding: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    outline: none; }\n    .clappr-player#wp3-player-0 .unmute-modal__button--hide {\n      display: none; }\n    .clappr-player#wp3-player-0 .unmute-modal__button:hover, .clappr-player#wp3-player-0 .unmute-modal__button:focus {\n      opacity: 1; }\n    .clappr-player#wp3-player-0 .unmute-modal__button svg {\n      height: 24px;\n      width: 24px; }\n  .clappr-player#wp3-player-0 .unmute-modal__label {\n    font-family: "opensans-regular", sans-serif;\n    font-size: 14px;\n    line-height: 1.14;\n    color: #ffffff;\n    width: 77px;\n    padding-left: 7px;\n    opacity: 1;\n    transition: width .5s ease;\n    margin-top: -2px; }\n    .clappr-player#wp3-player-0 .unmute-modal__label--hide {\n      width: 0;\n      opacity: 0;\n      padding: 0; }\n';ur(Co);var Ro=kn.autoplayManager,Io=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.idPlayback=this.core.activePlayback,this.listenToOnce(this.container,ye.CONTAINER_PLAY,this.showUnmuteModal),this.listenToOnce(this.container,_n.WM_UNMUTED,this.hideUnmuteModal)}},{key:"bindUnmuteModalEvents",value:function(){this.modal&&this.modal.on("click",this.onUnmuteModalClick.bind(this))}},{key:"showUnmuteModal",value:function(){var e=this,t=this.options.chromeless&&!N.isMobile,n=this.options.mute||this.mutedAutoplay&&!Ro.playerHasConsent;!t&&n&&(this.renderUnmuteModal(),this.isVisible=!0,setTimeout((function(){e.hideLabel()}),5e3))}},{key:"renderUnmuteModal",value:function(){var e=$e(So)({volumeOffIcon:so,volumeOnIcon:oo}),t=An.getStyleFrom(Co,{playerId:this.core.options.playerId});this.mediaControl&&this.mediaControl.trigger(_n.MEDIACONTROL_MODAL_SHOW,e,{hidePanels:!0}),this.core.trigger(_n.TAP_TO_UNMUTE_SHOW),this.modal&&this.modal.find(".unmute-modal").append(t[0]),this.mediaControl&&this.mediaControl.setKeepVisible(),this.bindUnmuteModalEvents(),this.mediaControl&&this.mediaControl.$el.addClass("media-control--no-background")}},{key:"onUnmuteModalClick",value:function(e){var t=this;e&&e.stopPropagation(),this.core.trigger(_n.TAP_TO_UNMUTE_CLICKED),this.hideLabel(),this.toggleUnmuteButton(),setTimeout((function(){t.hideUnmuteModal()}),1e3)}},{key:"hideUnmuteModal",value:function(){this.isVisible&&(this.modal.off("click"),this.mediaControl.trigger(_n.MEDIACONTROL_MODAL_HIDE),this.isVisible=!1,this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.mediaControl.$el.removeClass("media-control--no-background"))}},{key:"toggleUnmuteButton",value:function(){this.modal&&(this.modal.find(".unmute-modal__button--off").addClass("unmute-modal__button--hide"),this.modal.find(".unmute-modal__button--on").removeClass("unmute-modal__button--hide"))}},{key:"hideLabel",value:function(){this.modal&&(this.modal.find(".unmute-modal__label").addClass("unmute-modal__label--hide"),this.modal.find(".unmute-modal__button-box").addClass("unmute-modal__button-box--no-label"))}},{key:"render",value:function(){return this.$el.html(""),this}},{key:"destroy",value:function(){this._mediaControl=null,Vi(Ui(n.prototype),"destroy",this).call(this)}},{key:"name",get:function(){return"tap_to_unmute"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"template",get:function(){return $e(So)}},{key:"modal",get:function(){return this.mediaControl&&this.mediaControl.$modal}},{key:"mutedAutoplay",get:function(){return this.idPlayback&&this.idPlayback.mutedAutoplay}}]),n}(Ae);ur('.clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .cuepoint:before {\n  transform: scale(1.35, 1.35); }\n\n.clappr-player#wp3-player-0 .cuepoint {\n  position: absolute;\n  height: 100%;\n  width: 2px;\n  bottom: 0px;\n  z-index: 200; }\n  .clappr-player#wp3-player-0 .cuepoint:before {\n    position: absolute;\n    display: inline-block;\n    width: 100%;\n    height: 2px;\n    content: \'\';\n    left: -2px;\n    top: 21px;\n    background-color: #000;\n    border-radius: 50%;\n    border: solid 2px #fff;\n    will-change: transform;\n    transition: transform 0.3s ease; }\n  .clappr-player#wp3-player-0 .cuepoint:hover:before {\n    transform: scale(2, 2) !important; }\n  .clappr-player#wp3-player-0 .cuepoint__details {\n    width: 100%;\n    height: 100%;\n    line-height: 16px;\n    color: #fff;\n    display: flex;\n    justify-content: center;\n    z-index: 100; }\n    .clappr-player#wp3-player-0 .cuepoint__details-title {\n      font-family: "opensans-regular", sans-serif;\n      font-size: 14px;\n      text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n      padding: 4px 9px;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      text-align: left;\n      overflow: hidden;\n      position: absolute;\n      left: 0; }\n    .clappr-player#wp3-player-0 .cuepoint__details-time {\n      padding: 3px 8px 2px;\n      font-family: "opensans-regular", sans-serif;\n      font-size: 14px;\n      color: #fff;\n      text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n      border-radius: 2px;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      background-color: rgba(0, 0, 0, 0.5);\n      display: flex;\n      z-index: 100;\n      align-self: flex-end; }\n');var Do='.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator {\n  display: flex;\n  align-self: flex-start;\n  margin-top: 5px;\n  border-radius: 2px;\n  background-color: red;\n  padding: 3px 6px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--hide {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--first-element {\n    margin-left: 12px; }\n\n.clappr-player#wp3-player-0 [data-live-indicator] {\n  color: #ffffff;\n  font-family: "opensans-bold", sans-serif;\n  font-size: 11px;\n  line-height: 1.45;\n  letter-spacing: -0.5px; }\n';ur(Do);var Oo=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,ye.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVRUpdated),this.listenTo(this.container,ye.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,ye.CONTAINER_PAUSE,this.updateState)}},{key:"onDVRUpdated",value:function(e){this.dvrInUse=e,this.updateState()}},{key:"updateState",value:function(){if(!this.isLive)return this.hide();this.dvrInUse?this.hide():this.show(),this.$el["".concat(this.container.isDvrEnabled()?"remove":"add","Class")]("live-indicator--first-element"),N.supportsTouchEvents&&this.$el.addClass("live-indicator--first-element")}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"show",value:function(){this.$el.removeClass("live-indicator--hide")}},{key:"hide",value:function(){this.$el.addClass("live-indicator--hide")}},{key:"render",value:function(){this.$el.empty(),this.$indicator=$("<span/>").attr("data-live-indicator","").html(this.label);var e=An.getStyleFrom(Do,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$indicator[0]),this}},{key:"name",get:function(){return"live_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"label",get:function(){return this.options&&this.options.isLiveContent?"AO VIVO":"AGORA"}},{key:"isLive",get:function(){return this.container&&this.container.getPlaybackType()===we.LIVE}},{key:"attributes",get:function(){return{class:"live-indicator live-indicator--hide"}}}]),n}(yr),Po=".clappr-player#wp3-player-0 .pip-transition[data-pip] {\n  transition: all 0.3s ease-out; }\n\n.clappr-player#wp3-player-0.nocursor .container[data-container].master-container[data-pip], .clappr-player#wp3-player-0.nocursor .container[data-container].pip-container[data-pip] {\n  cursor: none; }\n  .clappr-player#wp3-player-0.nocursor .container[data-container].master-container[data-pip].pointer-enabled, .clappr-player#wp3-player-0.nocursor .container[data-container].pip-container[data-pip].pointer-enabled {\n    cursor: none; }\n\n.clappr-player#wp3-player-0 .container[data-container].master-container[data-pip] {\n  cursor: default;\n  width: 100%;\n  height: 100%;\n  font-size: 100%;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  padding: 0;\n  margin: 0;\n  border: none; }\n  .clappr-player#wp3-player-0 .container[data-container].master-container[data-pip].pointer-enabled {\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .container[data-container].master-container[data-pip].pointer-enabled.chromeless {\n      cursor: default; }\n  .clappr-player#wp3-player-0 .container[data-container].master-container[data-pip].pip-transition {\n    z-index: 1000; }\n\n.clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip] {\n  cursor: default;\n  width: 24%;\n  height: 24%;\n  min-width: 0;\n  font-size: 24%;\n  z-index: 1000;\n  position: absolute;\n  padding: 0;\n  margin: 0;\n  right: 23px;\n  bottom: 23px;\n  border-width: 2px;\n  border-radius: 3px;\n  border-style: solid;\n  border-color: rgba(255, 255, 255, 0.25);\n  background-clip: padding-box;\n  -webkit-background-clip: padding-box; }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].pointer-enabled {\n    cursor: pointer; }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].over-media-control {\n    transform: translateY(-43px); }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].mouse-over {\n    border-color: rgba(255, 255, 255, 0.5); }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].unobtrusive-mode {\n    opacity: .3;\n    z-index: 993; }\n";ur(Po);var xo=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;Di(this,n),(i=t.call(this,e)).core=e,i.allowPipToMaster=!!i.core.options.allowPipToMaster;var r=An.getStyleFrom(Po,{playerId:i.core.options.playerId});return i.core.$el.append(r[0]),i.setupContainers(),i.addListeners(),i}return Pi(n,[{key:"name",get:function(){return"pip"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"mediaControl",get:function(){return this.core.getPlugin("globo_media_control")}}]),Pi(n,[{key:"getExternalInterface",value:function(){return{addPip:this.addPip,discardPip:this.discardPip,addMaster:this.addMaster,changeMaster:this.changeMaster,getPipSource:this.getPipSource,pipToMaster:this.pipToMaster,hasPip:this.hasPip}}},{key:"addListeners",value:function(){var e=this;this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.mediaControlContainerChanged),this.listenTo(this.mediaControl,ye.MEDIACONTROL_SHOW,this.onMediaControlShow),this.listenTo(this.mediaControl,ye.MEDIACONTROL_HIDE,this.onMediaControlHide),this.listenTo(this.mediaControl,ye.MEDIACONTROL_MOUSEMOVE_SEEKBAR,(function(t){return e.onMouseMove(t)})),this.listenTo(this.mediaControl,ye.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeave),this.listenTo(this.mediaControl,_n.WM_SETTINGS_SHOW,this.setSettingsUnobtrusiveMode),this.listenTo(this.mediaControl,_n.WM_SETTINGS_HIDE,this.removeSettingsUnobtrusiveMode),this.listenTo(this.mediaControl,_n.WM_VOLUME_SHOW,this.setVolumeUnobtrusiveMode),this.listenTo(this.mediaControl,_n.WM_VOLUME_HIDE,this.removeVolumeUnobtrusiveMode),this.listenTo(this.mediaControl,_n.WM_SHARE_SHOW,this.setUnobtrusiveMode),this.listenTo(this.mediaControl,_n.WM_SHARE_HIDE,this.removeUnobtrusiveMode)}},{key:"mediaControlContainerChanged",value:function(){this.core.options.dfp&&(this.stopListening(this.core.options.dfp),this.listenTo(this.core.options.dfp,_n.DFP_AD_STARTED,this.setUnobtrusiveMode),this.listenTo(this.core.options.dfp,_n.DFP_AD_COMPLETED,this.removeUnobtrusiveMode),this.listenTo(this.core.options.dfp,_n.DFP_AD_CLOSED,this.removeUnobtrusiveMode),this.listenTo(this.core.options.dfp,_n.DFP_AD_SKIPPED,this.removeUnobtrusiveMode)),this.masterContainer=this.core.activeContainer,this.setMasterStyle(this.masterContainer,!1)}},{key:"setupContainers",value:function(){this.core.containers.length>0&&(this.masterContainer=this.core.containers[0],this.setMasterStyle(this.masterContainer,!1),2===this.core.containers.length&&(this.pipContainer=this.core.containers[1],this.setPipStyle(this.pipContainer,!1),this.masterContainer.playback&&this.masterContainer.playback.playWhenReady()||this.masterContainer.play(),this.pipContainer.playback&&this.pipContainer.playback.playWhenReady()||this.pipContainer.play(),this.pipContainer.setVolume(0),this.pipContainer.playback.isPip(!0),this.listenToPipClick()))}},{key:"onMouseMove",value:function(e){this.isOnUnobtrusiveMode||((!e||this.mediaControl.container.playback.settings.seekEnabled&&!["thumb","thumb-position"].includes(e.target.className))&&this.pipContainer?this.pipContainer.$el.addClass("unobtrusive-mode"):this.onMouseLeave())}},{key:"onMouseLeave",value:function(){this.isOnUnobtrusiveMode||this.pipContainer&&this.pipContainer.$el.removeClass("unobtrusive-mode")}},{key:"hasPip",value:function(){return!!this.pipContainer}},{key:"getPipSource",value:function(){return this.pipContainer.playback.src}},{key:"canAddMaster",value:function(){return this.masterContainer&&"ad"!==this.masterContainer.getPlaybackType()}},{key:"addPip",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.core.getCurrentPlayback(),i=this.core.getCurrentContainer(),r=!!n.getPlaybackType()&&"ad"!==n.getPlaybackType();r&&n.isPlaying()?(this.discardPip(),this.pipContainer=this.core.createContainer(t,{onPip:!0}),this.addPipCallback()):i.once(ye.CONTAINER_PLAY,(function(){return e.addPip(t)}))}},{key:"addPipCallback",value:function(){var e=this,t=this.pipContainer.playback;t.once(_n.WM_PLAYBACK_WILL_PLAY,(function(){return e.pipContainer.setVolume(0)})),this.setPipStyle(this.pipContainer),t&&t.playWhenReady()||this.pipContainer.play(),this.stopListening(this.pipContainer),this.listenToPipClick(),this.listenTo(this.pipContainer,ye.CONTAINER_ENDED,this.discardPip),this.listenTo(this.pipContainer,ye.CONTAINER_MOUSE_ENTER,this.mouseEnterPip),this.listenTo(this.pipContainer,ye.CONTAINER_MOUSE_LEAVE,this.mouseLeavePip),this.listenTo(this.masterContainer,ye.CONTAINER_ENDED,this.pipToMaster),t.isPip(!0),this.core.trigger(_n.WM_PIP_ADDED)}},{key:"mouseEnterPip",value:function(){this.pipContainer.$el.addClass("mouse-over"),this.pipContainer.setVolume(this.masterContainer.volume),this.masterContainer.setVolume(0)}},{key:"mouseLeavePip",value:function(){this.pipContainer.$el.removeClass("mouse-over"),this.masterContainer.setVolume(this.pipContainer.volume),this.pipContainer.setVolume(0)}},{key:"discardPip",value:function(){this.pipContainer&&(this.mouseLeavePip(),this.stopListening(this.pipContainer),this.discardContainer(this.pipContainer),this.pipContainer=void 0,this.core.trigger(_n.WM_PIP_DISCARDED))}},{key:"discardMaster",value:function(){this.masterContainer&&(this.stopListening(this.masterContainer),this.discardContainer(this.masterContainer),this.masterContainer=void 0)}},{key:"setMasterContainer",value:function(e){this.discardMaster(),this.masterContainer=e,this.setMasterStyle(this.masterContainer),this.listenTo(this.masterContainer,ye.CONTAINER_ENDED,this.pipToMaster),this.masterContainer.playback&&this.masterContainer.playback.playWhenReady()||this.masterContainer.play()}},{key:"addMaster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.canAddMaster()&&this.masterContainer){this.stopListening(this.masterContainer),this.tmpContainer=this.masterContainer,this.tmpContainer.$el.addClass("pip-transition");var t=this.core.createContainer(e.toString(),{onMaster:!0});this.addMasterCallback(t)}}},{key:"addMasterContainer",value:function(e){this.masterContainer&&(this.tmpContainer=this.masterContainer,this.tmpContainer.$el.addClass("pip-transition"),this.addMasterCallback(e))}},{key:"addMasterCallback",value:function(e){var t=Math.max(this.masterContainer.volume,this.pipContainer&&this.pipContainer.volume||0);this.tmpContainer.setVolume(0),this.masterContainer=e,this.pipContainer&&this.discardPip(),this.pipContainer=this.tmpContainer,this.setPipStyle(this.pipContainer),this.setMasterStyle(this.masterContainer);var n=this.masterContainer.playback,i=n&&n.playWhenReady.bind(n)||this.masterContainer.play.bind(this.masterContainer);this.masterContainer.isReady?i():this.listenTo(n,_n.WM_PLAYBACK_WILL_PLAY,(function(){return i()})),this.animateMasterToPip(),this.listenTo(this.pipContainer,ye.CONTAINER_MOUSE_ENTER,this.mouseEnterPip),this.listenTo(this.pipContainer,ye.CONTAINER_MOUSE_LEAVE,this.mouseLeavePip),this.tmpContainer=void 0,this.masterContainer.setVolume(t),this.pipContainer.trigger(_n.WM_MASTERTOPIP),this.core.trigger(_n.WM_MASTER_ADDED)}},{key:"animateMasterToPip",value:function(){this.listenTo(this.masterContainer,ye.CONTAINER_ENDED,this.pipToMaster),this.pipContainer.playback.isPip(!0),this.setPipStyle(this.pipContainer),this.core.activeContainer=this.masterContainer,this.listenToPipClick()}},{key:"changeMaster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.masterContainer){this.stopListening(this.masterContainer),this.tmpContainer=this.masterContainer,this.tmpContainer.$el.addClass("pip-transition");var t=this.core.createContainer(e.toString(),{onMaster:!0});this.changeMasterCallback(t)}}},{key:"changeMasterCallback",value:function(e){this.masterContainer.destroy(),this.masterContainer=e,this.tmpContainer=void 0,this.setMasterStyle(this.masterContainer),this.listenTo(this.masterContainer,ye.CONTAINER_ENDED,this.pipToMaster);var t=this.masterContainer.playback,n=t&&t.playWhenReady.bind(t)||this.masterContainer.play.bind(this.masterContainer);this.masterContainer.isReady?n():this.listenTo(this.masterContainer.playback,_n.WM_PLAYBACK_WILL_PLAY,(function(){return n()})),this.core.activeContainer=this.masterContainer,this.core.trigger(_n.WM_MASTER_CHANGED)}},{key:"listenToPipClick",value:function(){this.pipContainer&&this.allowPipToMaster&&(this.stopListening(this.pipContainer),this.listenTo(this.pipContainer,ye.CONTAINER_CLICK,this.pipToMaster.bind(this)))}},{key:"discardContainer",value:function(e){e.destroy()}},{key:"pipToMaster",value:function(){var e=this;return this.stopListening(this.masterContainer),this.stopListening(this.pipContainer),this.pipContainer&&(this.pipContainer.$el.addClass("pip-transition"),this.setMasterStyle(this.pipContainer),this.pipContainer.$el.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){e.pipContainer.$el.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),e.pipToMasterCallback()}))),this}},{key:"pipToMasterCallback",value:function(){var e=Math.max(this.masterContainer.volume,this.pipContainer.volume);this.discardMaster(),this.pipContainer.playback.isPip(!1),this.masterContainer=this.pipContainer,this.pipContainer=void 0,this.core.activeContainer=this.masterContainer,this.mediaControl.updatePlaybackTypeClass(),this.mediaControl.enable(),this.masterContainer.setVolume(e),this.masterContainer.trigger(_n.WM_PIPTOMASTER)}},{key:"onMediaControlShow",value:function(){this.mediaControl.disabled||this.pipContainer&&this.pipContainer.$el.addClass("pip-transition over-media-control")}},{key:"onMediaControlHide",value:function(){this.mediaControl.keepVisible||(this.masterContainer&&this.masterContainer.$el.removeClass("over-media-control"),this.pipContainer&&(this.pipContainer.$el.addClass("pip-transition"),this.pipContainer.$el.removeClass("over-media-control")))}},{key:"setAnimatedTransition",value:function(e,t){t?e.$el.addClass("pip-transition"):e.$el.removeClass("pip-transition")}},{key:"setPipStyle",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setAnimatedTransition(e,t),e.$el.attr("data-pip",""),e.$el.addClass("pip-container"),e.$el.removeClass("over-media-control master-container"),e.hasPlugin("click_to_pause")&&(e.getPlugin("click_to_pause").disable(),e.getPlugin("click_to_pause").settingsUpdate()),this.mediaControl.isVisible()&&this.onMediaControlShow()}},{key:"setMasterStyle",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setAnimatedTransition(e,t),e.$el.attr("data-pip",""),e.$el.addClass("master-container"),e.$el.removeClass("over-media-control pip-container"),e.hasPlugin("click_to_pause")&&(!N.supportsTouchEvents&&e.getPlugin("click_to_pause").enable(),e.getPlugin("click_to_pause").settingsUpdate())}},{key:"setUnobtrusiveMode",value:function(){this.isOnUnobtrusiveMode=!0,this.pipContainer&&this.pipContainer.$el.addClass("unobtrusive-mode")}},{key:"removeUnobtrusiveMode",value:function(){this.volumeUnobtrusive||this.settingsUnobtrusive||(this.isOnUnobtrusiveMode=!1,this.pipContainer&&this.pipContainer.$el.removeClass("unobtrusive-mode"))}},{key:"setVolumeUnobtrusiveMode",value:function(){this.volumeUnobtrusive=!0,this.setUnobtrusiveMode()}},{key:"removeVolumeUnobtrusiveMode",value:function(){this.volumeUnobtrusive=!1,this.removeUnobtrusiveMode()}},{key:"setSettingsUnobtrusiveMode",value:function(){this.settingsUnobtrusive=!0,this.setUnobtrusiveMode()}},{key:"removeSettingsUnobtrusiveMode",value:function(){this.settingsUnobtrusive=!1,this.removeUnobtrusiveMode()}}]),n}(Be),Lo=Pa((function(e,t){var n="__lodash_hash_undefined__",i=1/0,r=9007199254740991,a="[object Arguments]",o="[object Array]",s="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",f="[object Promise]",y="[object RegExp]",g="[object Set]",v="[object String]",m="[object Symbol]",b="[object WeakMap]",E="[object ArrayBuffer]",k="[object DataView]",A=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_=/^\w*$/,T=/^\./,w=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,C=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[a]=I[o]=I[E]=I[s]=I[k]=I[l]=I[u]=I[c]=I[d]=I[h]=I[p]=I[y]=I[g]=I[v]=I[b]=!1;var D="object"==typeof Da&&Da&&Da.Object===Object&&Da,O="object"==typeof self&&self&&self.Object===Object&&self,P=D||O||Function("return this")(),x=t&&!t.nodeType&&t,L=x&&e&&!e.nodeType&&e,M=L&&L.exports===x&&D.process,N=function(){try{return M&&M.binding("util")}catch(e){}}(),U=N&&N.isTypedArray;function B(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!=t)return function(e,t,n,i){var r=e.length,a=n+(i?1:-1);for(;i?a--:++a<r;)if(t(e[a],a,e))return a;return-1}(e,H,n);var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,0)>-1}function F(e,t,n){for(var i=-1,r=e?e.length:0;++i<r;)if(n(t,e[i]))return!0;return!1}function j(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}function H(e){return e!=e}function V(e,t){return e.has(t)}function K(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function G(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var W,Y=Array.prototype,$=Function.prototype,q=Object.prototype,X=P["__core-js_shared__"],Q=(W=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",Z=$.toString,J=q.hasOwnProperty,ee=q.toString,te=RegExp("^"+Z.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=P.Symbol,ie=P.Uint8Array,re=q.propertyIsEnumerable,ae=Y.splice,oe=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),se=Be(P,"DataView"),le=Be(P,"Map"),ue=Be(P,"Promise"),ce=Be(P,"Set"),de=Be(P,"WeakMap"),he=Be(Object,"create"),pe=We(se),fe=We(le),ye=We(ue),ge=We(ce),ve=We(de),me=ne?ne.prototype:void 0,be=me?me.valueOf:void 0,Ee=me?me.toString:void 0;function ke(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function _e(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Te(e){var t=-1,n=e?e.length:0;for(this.__data__=new _e;++t<n;)this.add(e[t])}function we(e){this.__data__=new Ae(e)}function Se(e,t){var n=Xe(e)||qe(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],i=n.length,r=!!i;for(var a in e)!t&&!J.call(e,a)||r&&("length"==a||je(a,i))||n.push(a);return n}function Ce(e,t){for(var n=e.length;n--;)if($e(e[n][0],t))return n;return-1}function Re(e,t){for(var n=0,i=(t=He(t,e)?[t]:Le(t)).length;null!=e&&n<i;)e=e[Ge(t[n++])];return n&&n==i?e:void 0}function Ie(e,t){return null!=e&&t in Object(e)}function De(e,t,n,i,r){return e===t||(null==e||null==t||!et(e)&&!tt(t)?e!=e&&t!=t:function(e,t,n,i,r,c){var f=Xe(e),b=Xe(t),A=o,_=o;f||(A=(A=Fe(e))==a?p:A);b||(_=(_=Fe(t))==a?p:_);var T=A==p&&!K(e),w=_==p&&!K(t),S=A==_;if(S&&!T)return c||(c=new we),f||it(e)?Ne(e,t,n,i,r,c):function(e,t,n,i,r,a,o){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!i(new ie(e),new ie(t)));case s:case l:case h:return $e(+e,+t);case u:return e.name==t.name&&e.message==t.message;case y:case v:return e==t+"";case d:var c=z;case g:var p=2&a;if(c||(c=G),e.size!=t.size&&!p)return!1;var f=o.get(e);if(f)return f==t;a|=1,o.set(e,t);var b=Ne(c(e),c(t),i,r,a,o);return o.delete(e),b;case m:if(be)return be.call(e)==be.call(t)}return!1}(e,t,A,n,i,r,c);if(!(2&r)){var C=T&&J.call(e,"__wrapped__"),R=w&&J.call(t,"__wrapped__");if(C||R){var I=C?e.value():e,D=R?t.value():t;return c||(c=new we),n(I,D,i,r,c)}}if(!S)return!1;return c||(c=new we),function(e,t,n,i,r,a){var o=2&r,s=rt(e),l=s.length,u=rt(t).length;if(l!=u&&!o)return!1;var c=l;for(;c--;){var d=s[c];if(!(o?d in t:J.call(t,d)))return!1}var h=a.get(e);if(h&&a.get(t))return h==t;var p=!0;a.set(e,t),a.set(t,e);var f=o;for(;++c<l;){var y=e[d=s[c]],g=t[d];if(i)var v=o?i(g,y,d,t,e,a):i(y,g,d,e,t,a);if(!(void 0===v?y===g||n(y,g,i,r,a):v)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var m=e.constructor,b=t.constructor;m==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,i,r,c)}(e,t,De,n,i,r))}function Oe(e){return!(!et(e)||function(e){return!!Q&&Q in e}(e))&&(Ze(e)||K(e)?te:C).test(We(e))}function Pe(e){return"function"==typeof e?e:null==e?at:"object"==typeof e?Xe(e)?function(e,t){if(He(e)&&Ve(t))return Ke(Ge(e),t);return function(n){var i=function(e,t,n){var i=null==e?void 0:Re(e,t);return void 0===i?n:i}(n,e);return void 0===i&&i===t?function(e,t){return null!=e&&function(e,t,n){t=He(t,e)?[t]:Le(t);var i,r=-1,a=t.length;for(;++r<a;){var o=Ge(t[r]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}if(i)return i;return!!(a=e?e.length:0)&&Je(a)&&je(o,a)&&(Xe(e)||qe(e))}(e,t,Ie)}(n,e):De(t,i,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=rt(e),n=t.length;for(;n--;){var i=t[n],r=e[i];t[n]=[i,r,Ve(r)]}return t}(e);if(1==t.length&&t[0][2])return Ke(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,i){var r=n.length,a=r,o=!i;if(null==e)return!a;for(e=Object(e);r--;){var s=n[r];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<a;){var l=(s=n[r])[0],u=e[l],c=s[1];if(o&&s[2]){if(void 0===u&&!(l in e))return!1}else{var d=new we;if(i)var h=i(u,c,l,e,t,d);if(!(void 0===h?De(c,u,i,3,d):h))return!1}}return!0}(n,e,t)}}(e):He(t=e)?(n=Ge(t),function(e){return null==e?void 0:e[n]}):function(e){return function(t){return Re(t,e)}}(t);var t,n}function xe(e){if(n=(t=e)&&t.constructor,i="function"==typeof n&&n.prototype||q,t!==i)return oe(e);var t,n,i,r=[];for(var a in Object(e))J.call(e,a)&&"constructor"!=a&&r.push(a);return r}function Le(e){return Xe(e)?e:ze(e)}ke.prototype.clear=function(){this.__data__=he?he(null):{}},ke.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ke.prototype.get=function(e){var t=this.__data__;if(he){var i=t[e];return i===n?void 0:i}return J.call(t,e)?t[e]:void 0},ke.prototype.has=function(e){var t=this.__data__;return he?void 0!==t[e]:J.call(t,e)},ke.prototype.set=function(e,t){return this.__data__[e]=he&&void 0===t?n:t,this},Ae.prototype.clear=function(){this.__data__=[]},Ae.prototype.delete=function(e){var t=this.__data__,n=Ce(t,e);return!(n<0)&&(n==t.length-1?t.pop():ae.call(t,n,1),!0)},Ae.prototype.get=function(e){var t=this.__data__,n=Ce(t,e);return n<0?void 0:t[n][1]},Ae.prototype.has=function(e){return Ce(this.__data__,e)>-1},Ae.prototype.set=function(e,t){var n=this.__data__,i=Ce(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},_e.prototype.clear=function(){this.__data__={hash:new ke,map:new(le||Ae),string:new ke}},_e.prototype.delete=function(e){return Ue(this,e).delete(e)},_e.prototype.get=function(e){return Ue(this,e).get(e)},_e.prototype.has=function(e){return Ue(this,e).has(e)},_e.prototype.set=function(e,t){return Ue(this,e).set(e,t),this},Te.prototype.add=Te.prototype.push=function(e){return this.__data__.set(e,n),this},Te.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new Ae},we.prototype.delete=function(e){return this.__data__.delete(e)},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ae){var i=n.__data__;if(!le||i.length<199)return i.push([e,t]),this;n=this.__data__=new _e(i)}return n.set(e,t),this};var Me=ce&&1/G(new ce([,-0]))[1]==i?function(e){return new ce(e)}:function(){};function Ne(e,t,n,i,r,a){var o=2&r,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var c=-1,d=!0,h=1&r?new Te:void 0;for(a.set(e,t),a.set(t,e);++c<s;){var p=e[c],f=t[c];if(i)var y=o?i(f,p,c,t,e,a):i(p,f,c,e,t,a);if(void 0!==y){if(y)continue;d=!1;break}if(h){if(!j(t,(function(e,t){if(!h.has(t)&&(p===e||n(p,e,i,r,a)))return h.add(t)}))){d=!1;break}}else if(p!==f&&!n(p,f,i,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function Ue(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Be(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Oe(n)?n:void 0}var Fe=function(e){return ee.call(e)};function je(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function He(e,t){if(Xe(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!nt(e))||(_.test(e)||!A.test(e)||null!=t&&e in Object(t))}function Ve(e){return e==e&&!et(e)}function Ke(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}(se&&Fe(new se(new ArrayBuffer(1)))!=k||le&&Fe(new le)!=d||ue&&Fe(ue.resolve())!=f||ce&&Fe(new ce)!=g||de&&Fe(new de)!=b)&&(Fe=function(e){var t=ee.call(e),n=t==p?e.constructor:void 0,i=n?We(n):void 0;if(i)switch(i){case pe:return k;case fe:return d;case ye:return f;case ge:return g;case ve:return b}return t});var ze=Ye((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(nt(e))return Ee?Ee.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return T.test(e)&&n.push(""),e.replace(w,(function(e,t,i,r){n.push(i?r.replace(S,"$1"):t||e)})),n}));function Ge(e){if("string"==typeof e||nt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function We(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ye(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new(Ye.Cache||_e),n}function $e(e,t){return e===t||e!=e&&t!=t}function qe(e){return function(e){return tt(e)&&Qe(e)}(e)&&J.call(e,"callee")&&(!re.call(e,"callee")||ee.call(e)==a)}Ye.Cache=_e;var Xe=Array.isArray;function Qe(e){return null!=e&&Je(e.length)&&!Ze(e)}function Ze(e){var t=et(e)?ee.call(e):"";return t==c||"[object GeneratorFunction]"==t}function Je(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function et(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function tt(e){return!!e&&"object"==typeof e}function nt(e){return"symbol"==typeof e||tt(e)&&ee.call(e)==m}var it=U?function(e){return function(t){return e(t)}}(U):function(e){return tt(e)&&Je(e.length)&&!!I[ee.call(e)]};function rt(e){return Qe(e)?Se(e):xe(e)}function at(e){return e}e.exports=function(e,t){return e&&e.length?function(e,t,n){var i=-1,r=B,a=e.length,o=!0,s=[],l=s;if(n)o=!1,r=F;else if(a>=200){var u=t?null:Me(e);if(u)return G(u);o=!1,r=V,l=new Te}else l=t?[]:s;e:for(;++i<a;){var c=e[i],d=t?t(c):c;if(c=n||0!==c?c:0,o&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(c)}else r(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s}(e,Pe(t)):[]}})),Mo=function(e){Ni(n,e);var t=Hi(n);function n(e,i){var r;return Di(this,n),(r=t.call(this,e.options)).ready=!1,r.levels=[],r.container=e,r.playback=i.playback,r.bindEvents(),r}return Pi(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.playback,ye.PLAYBACK_LEVELS_AVAILABLE,this.fillLevels)}},{key:"labelFor",value:function(e){return e>=4e5&&e<8e5?"low":e>=8e5&&e<18e5?"mid":e>=18e5&&e<28e5?"high":"max"}},{key:"fillLevels",value:function(){var e=this;(this.playback.levels||[]).forEach((function(t){var n=t.level.bitrate;n<4e5||e.levels.push({id:t.id,label:e.labelFor(n),selected:!1})})),this.levels.push({id:-1,label:"auto",selected:!0}),this.levels=Lo(this.levels.reverse(),"label"),this.ready=!0,this.trigger(_n.WM_LEVELSELECTOR_READY)}},{key:"levelSwitch",value:function(e){this.playback.currentLevel=e,this.container.trigger(_n.WM_SETTINGS_LEVEL_SELECTED,this.levels)}}]),n}(ve),No='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M8 16.59L12.58 12 8 7.41 9.41 6l6 6-6 6z"/>\n    </g>\n</svg>',Uo='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8.59 15.58l-4.17-4.17L3 12.82l5.59 5.59 12-12L19.18 5z"/>\n    </g>\n</svg>',Bo=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"shouldRender",value:function(){return this.options&&this.options.length>1}},{key:"clickOption",value:function(e){e.stopPropagation();var t=x(e.target).data("option-id"),n=parseInt(t);this.selectOption(isNaN(n)?t:n)}},{key:"selectOption",value:function(e){this.playbackUpdate(e),this.interfaceUpdate(e),this.trigger(_n.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"interfaceUpdate",value:function(e){this.availableOptions=this.options.map((function(t){return Mi(Mi({},t),{},{selected:t.id.toString()===e.toString()})})),this.$(".settings__options-menu li").find(".settings__options-active-icon").remove(),this.$(".settings__options-menu li").removeClass("settings__options-item--active");var t=x("<span>").addClass("settings__options-active-icon").append(Uo);this.$('li[data-option-id="'.concat(e,'"]')).addClass("settings__options-item--active").prepend(t)}},{key:"render",value:function(){return this.shouldRender()&&(this.$el.html(this.template({options:this.options||[],title:this.title,activeIcon:Uo,arrowIcon:No})),this.$el.addClass("settings__options-wrapper")),this}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"template",get:function(){return $e('<ul class="settings__options-menu">\n  <% for (var i = 0; i < options.length; i++) { %>\n    <% if (options[i].selected) { %>\n      <li data-option-id="<%= options[i].id %>" class="settings__options-item settings__options-item--active">\n        <span class="settings__options-active-icon"><%= activeIcon %></span><span class="label" data-option-id="<%= options[i].id %>"><%= options[i].label %></span>\n      </li>\n    <% } else { %>\n      <li data-option-id="<%= options[i].id %>" class="settings__options-item">\n        <span class="label" data-option-id="<%= options[i].id %>"><%= options[i].label %></span>\n      </li>\n    <% } %>\n  <% } %>\n</ul>\n')}},{key:"options",get:function(){return this.availableOptions||[]}},{key:"selected",get:function(){var e=this.options.find((function(e){return e.selected}))||this.options.length&&this.options[0];return e&&e.label}},{key:"events",get:function(){return{"click .settings__options-item":"clickOption"}}}]),n}(Ae),Fo={max:"M&aacute;xima",high:"Alta",mid:"M&eacute;dia",low:"Baixa",auto:"Autom&aacute;tica"},jo=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&(this.listenTo(this.playback,_n.WM_VIDEO_METADATA_LOADED,(function(t){return e.video=t})),this.listenTo(this.playback,_n.WM_PLAYBACK_WILL_PLAY,this.setup),this.playback&&this.playback.isReady&&this.setup())}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"setup",value:function(){var e=this.playback.innerPlaybackName;this.video&&e?(this.selector&&this.stopListening(this.selector),"hls"===e?(this.selector=new Mo(this.container,this.playback),this.listenTo(this.selector,_n.WM_LEVELSELECTOR_READY,this.parseLevels),this.selector.ready&&this.parseLevels()):ce.info(this.name,"could not setup quality selector")):ce.info(this.name,"should not setup quality selector")}},{key:"parseLevels",value:function(){var e=this.selector.levels||[];this.availableOptions=e.map((function(e){return Object.assign({},e,{name:e.label,label:Fo[e.label]})})),this.trigger(_n.WM_SETTINGS_OPTIONS_CHANGED),this.container.trigger(_n.WM_SETTINGS_LEVEL_SELECTED,this.availableOptions)}},{key:"playbackUpdate",value:function(e){this.currentQualityId!==e&&(this.selector.levelSwitch(e),this.currentQualityId=e)}},{key:"getCurrentOption",value:function(){var e=this;return this.availableOptions.find((function(t){return t.id===e.currentQualityId}))||this.availableOptions[0]}},{key:"name",get:function(){return"quality_selector"}},{key:"optionName",get:function(){return"quality"}},{key:"title",get:function(){return"Qualidade"}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M19.64 12.98c.042-.32.073-.64.073-.98 0-.34-.031-.66-.072-.98l2.169-1.65c.195-.15.247-.42.123-.64l-2.056-3.46c-.123-.22-.4-.3-.627-.22l-2.56 1c-.534-.4-1.11-.73-1.737-.98l-.39-2.65c-.032-.24-.248-.42-.505-.42H9.946c-.257 0-.473.18-.504.42l-.39 2.65c-.627.25-1.203.59-1.738.98l-2.56-1c-.236-.09-.503 0-.627.22L2.071 8.73c-.133.22-.072.49.124.64l2.169 1.65c-.041.32-.072.65-.072.98 0 .33.03.66.072.98l-2.17 1.65c-.195.15-.246.42-.123.64l2.056 3.46c.124.22.401.3.627.22l2.56-1c.535.4 1.11.73 1.738.98l.39 2.65c.031.24.247.42.504.42h4.112c.257 0 .473-.18.504-.42l.39-2.65c.628-.25 1.204-.59 1.738-.98l2.56 1c.236.09.504 0 .627-.22l2.056-3.46c.124-.22.072-.49-.123-.64l-2.17-1.65zm-7.638 2.52c-1.984 0-3.598-1.57-3.598-3.5s1.614-3.5 3.598-3.5c1.984 0 3.598 1.57 3.598 3.5s-1.614 3.5-3.598 3.5z" fill="#FFF"/>\n    </g>\n</svg>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"defaultOption",get:function(){return"auto"}}]),n}(Bo),Ho={por:{label:"Dublado",language:"por",keys:["pt","por"]},eng:{label:"Original",language:"eng",keys:["original","en","eng","und"]},ger:{label:"Original",language:"ger",keys:["de","ger"]},esp:{label:"Original",language:"spa",keys:["es","esp","spa"]},ron:{label:"Original",language:"ron",keys:["ro","ron"]},cat:{label:"Original",language:"cat",keys:["ca","cat"]},chi:{label:"Original",language:"chi",keys:["zh","chi"]},kor:{label:"Original",language:"kor",keys:["ko","kor"]},dan:{label:"Original",language:"dan",keys:["da","dan"]},fin:{label:"Original",language:"fin",keys:["fi","fin"]},fre:{label:"Original",language:"fre",keys:["fr","fre"]},wel:{label:"Original",language:"wel",keys:["cy","wel"]},heb:{label:"Original",language:"heb",keys:["he","heb"]},dut:{label:"Original",language:"dut",keys:["nl","dut"]},hin:{label:"Original",language:"hin",keys:["hi","hin"]},hun:{label:"Original",language:"hun",keys:["hu","hun"]},ind:{label:"Original",language:"ind",keys:["id","ind"]},ita:{label:"Original",language:"ita",keys:["it","ita"]},jpn:{label:"Original",language:"jpn",keys:["ja","jpn"]},nor:{label:"Original",language:"nor",keys:["no","nor"]},per:{label:"Original",language:"per",keys:["fa","per"]},rus:{label:"Original",language:"rus",keys:["ru","rus"]},swe:{label:"Original",language:"swe",keys:["sv","swe"]},tha:{label:"Original",language:"tha",keys:["th","tha"]},tur:{label:"Original",language:"tur",keys:["tr","tur"]},ara:{label:"Original",language:"ara",keys:["ar","ara"]}},Vo=Mi(Mi({},Ho),{},{off:{label:"Desabilitado",language:"off",keys:[]},por:Mi(Mi({},Ho.por),{},{label:"Português"}),eng:Mi(Mi({},Ho.eng),{},{label:"Inglês"})}),Ko=[],zo=0;for(var Go in Vo)Ko.push(Mi({id:zo},Vo[Go])),zo++;var Wo=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).core=e,i.setInitialValues(),i}return Pi(n,[{key:"name",get:function(){return"subtitle_selector"}},{key:"optionName",get:function(){return"subtitle"}},{key:"title",get:function(){return"Legenda"}},{key:"isReady",get:function(){return this.video&&this.playback.innerPlaybackName}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z" fill="#FFF"/>\n    </g>\n</svg>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"initialSubtitleOption",get:function(){return this.core.options.defaultSubtitle}},{key:"defaultOption",get:function(){return this.initialSubtitleOption||"off"}}]),Pi(n,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&(this.listenTo(this.playback,_n.WM_VIDEO_METADATA_LOADED,(function(t){return e.video=t})),this.listenTo(this.playback,_n.WM_RESOURCE_READY,this.setup))}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"setInitialValues",value:function(){this.availableOptions=[],this.availableContents=[],this.currentSubtitleId=null}},{key:"setup",value:function(){var e=this;if(this.setInitialValues(),this.isReady&&this.video.selectedResource.subtitles){this.onSubtitleLoaded("off","");var t=this.video.selectedResource.subtitles,n=Object.keys(t).map((function(t){return e.fetchSubtitle(t)}));Promise.all(n).then((function(){return e.onAllSubtitlesLoaded()}))}}},{key:"onAllSubtitlesLoaded",value:function(){1!==this.availableOptions.length&&this.onSubtitlesReady()}},{key:"fetchSubtitle",value:function(e){var t=this;return new Promise((function(n){x.ajax({url:t.video.selectedResource.subtitles[e].url,timeout:3e3,success:function(i){t.onSubtitleLoaded(e,i),n()},error:function(e){t.onSubtitleLoadError(e),n()}})}))}},{key:"onSubtitleLoaded",value:function(e,t){var n=Vo[e];n&&(n.id=this.availableOptions.length,this.availableOptions.push(n),this.availableContents.push(t))}},{key:"onSubtitlesReady",value:function(){this.setInitialSubtitle(),this.container.trigger(_n.WM_SUBTITLE_AVAILABLE,this.availableOptions,this.availableContents),this.trigger(_n.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"onSubtitleLoadError",value:function(e){ce.error(this.name,e)}},{key:"findSubtitleOption",value:function(e){return this.availableOptions.find((function(t){return t.language===e}))}},{key:"setInitialSubtitle",value:function(){if(this.availableOptions.length){var e=this.findSubtitleOption(this.initialSubtitleOption),t=this.findSubtitleOption("off"),n=e||t;this.playbackUpdate(n.id,!1),this.interfaceUpdate(n.id)}}},{key:"playbackUpdate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.currentSubtitleId!==e&&(this.selectedSubtitle=this.availableOptions[e],this.selectedSubtitle.selected=!0,this.currentSubtitleId=e,this.playback.currentSubtitle=this.selectedSubtitle,t&&this.container.trigger(_n.WM_SUBTITLE_CHANGED,this.selectedSubtitle))}},{key:"getCurrentOption",value:function(){return this.selectedSubtitle}}]),n}(Bo),Yo=Mi({},Ho),$o=[],qo=0;for(var Xo in Yo)$o.push(Mi({id:qo},Yo[Xo])),qo++;var Qo=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e.options)).idPlayback=e,i.ready=!1,i.availableOptions=[],i.selectedAudio=null,i.currentAudioId=null,i.bindEvents(),i}return Pi(n,[{key:"initialAudioOption",get:function(){return this.idPlayback.currentAudio&&this.idPlayback.currentAudio.language||this.options.defaultAudio}},{key:"playback",get:function(){return this.idPlayback.playback}},{key:"audioTracks",get:function(){return[]}}]),Pi(n,[{key:"bindEvents",value:function(){this.playback&&this.listenToOnce(this.playback,ye.PLAYBACK_PLAY,this.setup)}},{key:"onReady",value:function(){this.ready=!0,this.trigger(_n.WM_AUDIOSELECTOR_READY)}},{key:"setup",value:function(){}},{key:"parseAudioTracks",value:function(){}},{key:"updateAudioPlayback",value:function(){}},{key:"getAudioInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if("string"==typeof e&&""!==e&&"audio"!==e)return Mi(Mi(Mi({language:e},Yo.eng),this.findAudioData(e)||{}),{},{id:t})}},{key:"findAudioData",value:function(e){return $o.find((function(t){return t.language===e||t.keys.includes(e)}))}},{key:"findAudioOption",value:function(e){return this.availableOptions.find((function(t){return t.language===e||t.keys.includes(e)}))}},{key:"setInitialAudio",value:function(){if(this.availableOptions.length){var e=this.findAudioOption(this.initialAudioOption),t=this.findAudioOption("por"),n=e||t;this.audioSwitch(n.id,!0)}}},{key:"getSelectedOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(void 0!==e||void 0!==t)return this.availableOptions.find((function(n){return n.id.toString()===e.toString()||n.language.toString()===t.toString()||n.keys.includes(t)}))}},{key:"audioSwitch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(this.currentAudioId!==e||t)&&(this.selectedAudio=this.getSelectedOption(e),this.selectedAudio&&(this.idPlayback.currentAudio=this.selectedAudio,this.selectedAudio.selected=!0,this.currentAudioId=e,this.updateAudioPlayback(),!t&&this.trigger(_n.WM_AUDIO_CHANGED,this.selectedAudio)))}},{key:"getCurrentOption",value:function(){return this.selectedAudio}}]),n}(ve),Zo=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"setup",value:function(){this.audioTracks.length>1&&(this.parseAudioTracks(),this.setInitialAudio())}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=e.getAudioInfo(t);n&&e.availableOptions.push(n)})),this.onReady()}},{key:"updateAudioPlayback",value:function(){this.playback&&this.playback._player&&this.playback._player.selectAudioLanguage(this.selectedAudio.language)}},{key:"audioTracks",get:function(){return this.playback._player&&this.playback._player.getAudioLanguages()||[]}}]),n}(Qo),Jo=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"setup",value:function(){var e=this;this.playback._hls&&(this.audioTracks.length>1?(this.parseAudioTracks(),this.setInitialAudio()):this.playback._hls.once(dt.Events.AUDIO_TRACKS_UPDATED,(function(){return e.setup()})))}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.lang||t.name||"").toLowerCase(),i=e.getAudioInfo(n,t.id);i&&e.availableOptions.push(i)})),this.onReady()}},{key:"updateAudioPlayback",value:function(){this.playback&&this.playback._hls&&(this.playback._hls.audioTrack=this.selectedAudio.id)}},{key:"audioTracks",get:function(){return this.playback._hls.audioTracks||[]}}]),n}(Qo),es=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"setup",value:function(){this.audioTracks.length>1&&(this.parseAudioTracks(),this.setInitialAudio())}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.language||t.label||"").toLowerCase(),i=e.getAudioInfo(n,t.id);i&&e.availableOptions.push(i)})),this.onReady()}},{key:"updateAudioPlayback",value:function(){var e=this;this.audioTracks.forEach((function(t){if(t.id.toString()===e.selectedAudio.id.toString())return t.enabled=!0,!1}))}},{key:"audioTracks",get:function(){var e=this.playback&&this.playback.el&&this.playback.el.audioTracks;return"object"===Ii(e)&&(e=Object.keys(e).map((function(t){return e[t]}))),e||[]}}]),n}(Qo),ts=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e.options)).idPlayback=e,i.ready=!1,i.playback=i.idPlayback.playback,i.bindEvents(),i}return Pi(n,[{key:"audioTracks",get:function(){return this.playback.getAudioStreams()||[]}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.playback,ye.PLAYBACK_PLAY,this.setup)}},{key:"setup",value:function(){this.audioTracks.length>1&&this.parseAudioTracks()}},{key:"parseAudioTracks",value:function(){this.ready=!0,this.trigger(_n.WM_AUDIOSELECTOR_READY),this.trigger(_n.WM_AUDIO_AVAILABLE,this.audioTracks)}}]),n}(ve),ns=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&this.listenTo(this.playback,_n.WM_PLAYBACK_WILL_PLAY,this.setup),this.playback&&this.playback.isReady&&this.setup()}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"setup",value:function(){var e=this;this.availableOptions=[];var t=this.playback.innerPlaybackName;if(t){if(this.selector&&this.stopListening(this.selector),"dash_shaka_playback"===t)this.selector=new Zo(this.playback);else if("hls"===t)this.selector=new Jo(this.playback);else if(["html5_video","hls_fairplay_playback"].includes(t))this.selector=new es(this.playback);else{if("cast"!==t)return void ce.info(this.name,"could not setup audio selector");this.selector=new ts(this.playback)}this.listenTo(this.selector,_n.WM_AUDIOSELECTOR_READY,this.onSelectorReady),this.listenTo(this.selector,_n.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.selector,_n.WM_AUDIO_AVAILABLE,(function(t){e.container.trigger(_n.WM_AUDIO_AVAILABLE,t)})),this.selector.setup()}else ce.info(this.name,"should not setup audio selector")}},{key:"onSelectorReady",value:function(){this.availableOptions=this.selector.availableOptions,this.trigger(_n.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"playbackUpdate",value:function(e){this.selector.audioSwitch(e)}},{key:"onAudioChanged",value:function(e){this.container.trigger(_n.WM_AUDIO_CHANGED,e)}},{key:"getCurrentOption",value:function(){return this.selector.getCurrentOption()}},{key:"name",get:function(){return"audio_selector"}},{key:"optionName",get:function(){return"audio"}},{key:"title",get:function(){return"&Aacute;udio"}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" fill="#FFF"/>\n    </g>\n</svg>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"defaultOption",get:function(){return this.core.options.defaultAudio||"por"}}]),n}(Bo),is='.clappr-player#wp3-player-0 .media-control.volume-modal--visible .settings__box {\n  opacity: 0.3; }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .media-control-panel__modal {\n  z-index: -1; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-option, .clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-selected {\n  padding-top: 8px;\n  padding-bottom: 8px; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item {\n  padding: 8px 32px 8px 60px; }\n  .clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item--active {\n    padding-left: 4px; }\n\n.clappr-player#wp3-player-0 .media-control .media-control-panel .settings .settings__box--hidden {\n  opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel__modal.settings__modal {\n  z-index: 998; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .settings__box, .clappr-player#wp3-player-0 .media-control.w480 .settings__box, .clappr-player#wp3-player-0 .media-control.w540 .settings__box {\n  background-color: transparent; }\n\n.clappr-player#wp3-player-0 .settings {\n  position: relative;\n  cursor: pointer;\n  line-height: 100%; }\n  .clappr-player#wp3-player-0 .settings__button {\n    width: 100%;\n    height: 100%;\n    padding: 0; }\n  .clappr-player#wp3-player-0 .settings__box {\n    position: absolute;\n    right: 12px;\n    bottom: 64px;\n    cursor: default;\n    border-radius: 4px;\n    background-color: rgba(17, 17, 17, 0.8);\n    z-index: 998;\n    box-sizing: content-box;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    will-change: opacity; }\n    .clappr-player#wp3-player-0 .settings__box--options-rendered .settings__header {\n      display: flex; }\n    .clappr-player#wp3-player-0 .settings__box--options-rendered .settings__title {\n      padding-right: 32px; }\n  .clappr-player#wp3-player-0 .settings__header {\n    display: none;\n    flex-shrink: 0;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .settings__header-info-container {\n      display: flex; }\n    .clappr-player#wp3-player-0 .settings__header--hidden {\n      display: none !important; }\n  .clappr-player#wp3-player-0 .settings__body {\n    display: flex;\n    width: 100%;\n    flex-grow: 2;\n    box-sizing: content-box;\n    padding: 8px 0;\n    align-items: center;\n    max-height: 180px;\n    overflow: auto; }\n  .clappr-player#wp3-player-0 .settings__menu, .clappr-player#wp3-player-0 .settings__options, .clappr-player#wp3-player-0 .settings__options-wrapper, .clappr-player#wp3-player-0 .settings__options-menu {\n    max-height: inherit;\n    overflow: inherit; }\n  .clappr-player#wp3-player-0 .settings__title {\n    display: flex;\n    padding: 12px;\n    align-items: center;\n    opacity: 0.5;\n    font-family: "opensans-regular";\n    letter-spacing: -0.5;\n    font-size: 15px;\n    line-height: 1;\n    color: #FFFFFF;\n    text-transform: capitalize; }\n    .clappr-player#wp3-player-0 .settings__title-option {\n      padding-left: 0; }\n  .clappr-player#wp3-player-0 .settings__close {\n    display: none;\n    box-sizing: content-box;\n    width: 24px;\n    height: 24px;\n    padding: 12px;\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .settings__close svg {\n      width: 100%;\n      height: 100%; }\n  .clappr-player#wp3-player-0 .settings__separator {\n    display: block;\n    width: 100%;\n    height: 1px;\n    border: 0;\n    background-color: #666;\n    opacity: .4;\n    margin: 12px 0; }\n  .clappr-player#wp3-player-0 .settings__menu {\n    display: flex;\n    flex-direction: column;\n    list-style-type: none;\n    background: none;\n    padding: 0;\n    margin: 0;\n    height: auto;\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .settings__menu-item {\n      display: flex;\n      flex-shrink: 0;\n      align-items: center;\n      justify-content: space-between;\n      align-self: stretch;\n      position: static;\n      line-height: 1.14;\n      padding: 0;\n      margin: 0;\n      background: none; }\n      .clappr-player#wp3-player-0 .settings__menu-item-option {\n        padding: 4px 0 4px 16px; }\n      .clappr-player#wp3-player-0 .settings__menu-item-selected {\n        padding: 4px 16px 4px 24px; }\n      .clappr-player#wp3-player-0 .settings__menu-item:hover {\n        cursor: pointer; }\n      .clappr-player#wp3-player-0 .settings__menu-item-option {\n        display: flex;\n        align-items: center;\n        pointer-events: none; }\n      .clappr-player#wp3-player-0 .settings__menu-item-icon {\n        width: 16px;\n        height: 16px;\n        margin-right: 8px; }\n        .clappr-player#wp3-player-0 .settings__menu-item-icon svg {\n          width: 100%;\n          height: 100%; }\n      .clappr-player#wp3-player-0 .settings__menu-item-title {\n        display: inline;\n        pointer-events: none;\n        font-family: "opensans-regular", sans-serif;\n        text-transform: capitalize;\n        font-size: 14px;\n        line-height: 1.14;\n        color: #FFFFFF;\n        opacity: 1; }\n      .clappr-player#wp3-player-0 .settings__menu-item-selected {\n        display: flex;\n        align-items: center;\n        padding-left: 24px;\n        pointer-events: none; }\n      .clappr-player#wp3-player-0 .settings__menu-item-arrow-icon {\n        width: 24px;\n        height: 24px;\n        margin-left: 8px; }\n        .clappr-player#wp3-player-0 .settings__menu-item-arrow-icon svg {\n          width: 100%;\n          height: 100%; }\n      .clappr-player#wp3-player-0 .settings__menu-item-value {\n        font-family: "opensans-regular", sans-serif;\n        font-size: 14px;\n        color: #FFFFFF;\n        opacity: 0.5;\n        cursor: pointer; }\n      .clappr-player#wp3-player-0 .settings__menu-item-title, .clappr-player#wp3-player-0 .settings__menu-item-value {\n        height: 16px; }\n    .clappr-player#wp3-player-0 .settings__menu--hidden {\n      display: none !important; }\n  .clappr-player#wp3-player-0 .settings__back-icon {\n    display: flex;\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n    padding: 12px;\n    margin-right: 4px;\n    box-sizing: content-box; }\n    .clappr-player#wp3-player-0 .settings__back-icon svg {\n      width: 100%;\n      height: 100%; }\n    .clappr-player#wp3-player-0 .settings__back-icon--hidden {\n      display: none !important; }\n  .clappr-player#wp3-player-0 .settings__options {\n    display: flex;\n    cursor: pointer;\n    width: 100%; }\n    .clappr-player#wp3-player-0 .settings__options-wrapper {\n      margin: 0 auto;\n      width: 100%; }\n    .clappr-player#wp3-player-0 .settings__options-header {\n      display: flex;\n      align-items: center; }\n    .clappr-player#wp3-player-0 .settings__options-title {\n      display: flex;\n      cursor: pointer;\n      opacity: 0.7;\n      font-family: "opensans-regular", sans-serif;\n      color: #FFFFFF;\n      text-transform: capitalize;\n      text-align: left;\n      font-size: 14px; }\n    .clappr-player#wp3-player-0 .settings__options-menu {\n      list-style-type: none;\n      background: none;\n      padding: 0;\n      margin: 0; }\n    .clappr-player#wp3-player-0 .settings__options-item {\n      display: flex;\n      align-items: center;\n      box-sizing: content-box;\n      height: 24px;\n      padding: 4px 32px 4px 56px;\n      background: none;\n      font-family: "opensans-regular", sans-serif;\n      font-size: 14px;\n      line-height: 1.14;\n      color: #FFFFFF;\n      opacity: 1; }\n      .clappr-player#wp3-player-0 .settings__options-item::before {\n        content: ""; }\n      .clappr-player#wp3-player-0 .settings__options-item .label {\n        display: inline-block;\n        text-overflow: ellipsis;\n        white-space: nowrap; }\n      .clappr-player#wp3-player-0 .settings__options-item--active {\n        margin-left: 0;\n        font-family: "opensans-regular", sans-serif;\n        opacity: 1;\n        padding-left: 0; }\n    .clappr-player#wp3-player-0 .settings__options-active-icon {\n      display: inline-block;\n      width: 24px;\n      height: 24px;\n      padding: 0 16px;\n      box-sizing: content-box; }\n      .clappr-player#wp3-player-0 .settings__options-active-icon svg {\n        width: 100%;\n        height: 100%; }\n    .clappr-player#wp3-player-0 .settings__options--hidden {\n      display: none !important; }\n';ur(is);var rs=".clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  border-radius: 0;\n  right: 0;\n  bottom: 0;\n  padding: 0; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__header {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    margin-bottom: 8px; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__body {\n    max-height: calc(100% - 57px) !important;\n    max-width: 336px;\n    padding: 0; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    justify-content: center;\n    box-sizing: border-box;\n    flex-direction: column;\n    max-height: 100%; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-title {\n      align-self: center; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-value {\n      line-height: 1.14; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options {\n    max-height: 100%; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-wrapper {\n      margin-left: 20%; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-title {\n      height: 24px;\n      align-items: center; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-item {\n      padding-right: 88px; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__close {\n    display: flex; }\n";ur(rs);var as=".settings__menu",os=".settings__options",ss=".settings__title",ls=".settings__back-icon",us="settings__title-option",cs="settings__box--options-rendered",ds=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).hideSettingsBoxHandler=function(){return i.hideSettingsBox()},i}return Pi(n,[{key:"getExternalInterface",value:function(){return{getSelectedSettings:this.getSelectedSettings,getDefaultSettings:this.getDefaultSettings}}},{key:"name",get:function(){return"settings"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return $e('<div class="settings__box settings__box--hidden" data-controls>\n  <div class="settings__header">\n    <div class="settings__header-info-container">\n      <span class="settings__back-icon settings__back-icon--hidden"><%= backIcon %></span>\n      <span class="settings__title">configurações</span>\n    </div>\n    <span class="settings__close settings__close--hidden"><%= closeIcon %></span>\n  </div>\n  <div class="settings__body">\n    <ul class="settings__menu">\n      <% for (var i = 0; i < selectors.length; i++) { %>\n        <li data-selector-name="<%= selectors[i].name %>" class="settings__menu-item">\n          <span class="settings__menu-item-option">\n            <span class="settings__menu-item-icon"><%= selectors[i].icon %></span>\n            <span class="settings__menu-item-title"><%= selectors[i].title %></span>\n          </span>\n          <span class="settings__menu-item-selected">\n            <span class="settings__menu-item-value"><%= selectors[i].selected %></span>\n            <span class="settings__menu-item-arrow-icon"><%= arrowIcon %></span>\n          </span>\n        </li>\n      <% } %>\n    </ul>\n    <div class="settings__options settings__options--hidden"></div>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"settings","data-settings":""}}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"events",get:function(){return{click:"toggleSettingsBox"}}},{key:"selectors",get:function(){return this._selectors=this._selectors||[new jo(this.core),new ns(this.core),new Wo(this.core)],this._selectors}},{key:"availableSelectors",get:function(){return this.selectors.filter((function(e){return e.shouldRender()}))}}]),Pi(n,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,ye.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.mediaControl,ye.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,ye.MEDIACONTROL_HIDE,this.onMediaControlhide),this.selectors.forEach((function(t){e.listenTo(t,_n.WM_SETTINGS_OPTIONS_CHANGED,e.render)}))}},{key:"onMediaControlhide",value:function(){if(!this.mediaControl.keepVisible&&this.isSettingsBoxVisible){this.$settingsBox.remove();var e=this.mediaControl.$modal;e&&e.removeClass("settings__modal"),this.resetSettings(),this.triggerDidHideModalElement()}}},{key:"bindMenuClickEvents",value:function(){this.unbindMenuClickEvents(),this.$settingsMenuitem=this.$settingsBox.find(".settings__menu-item"),this.$settingsMenuitem.on("click",this.clickMenu.bind(this))}},{key:"unbindMenuClickEvents",value:function(){this.$settingsMenuitem&&this.$settingsMenuitem.off("click")}},{key:"bindSettingsEvents",value:function(){var e=this;this.unbindSettingsEvents(),this.$settingsOptionsTitle=this.$settingsBox.find(".settings__options-title"),this.$settingsBox.on("click",(function(e){return e.stopPropagation()})),this.bindMenuClickEvents(),or((function(){x(document).one("click",e.hideSettingsBoxHandler),e.listenTo(e.mediaControl,_n.MEDIACONTROL_ITEMCLICKED,e.hideSettingsBoxHandler)}))}},{key:"unbindSettingsEvents",value:function(){this.$settingsOptionsTitle&&this.$settingsOptionsTitle.off("click"),this.$settingsClose&&this.$settingsClose.off("click"),x(document).off("click",this.hideSettingsBoxHandler),this.stopListening(this.mediaControl,_n.MEDIACONTROL_ITEMCLICKED,this.hideSettingsBoxHandler)}},{key:"onContainerChanged",value:function(){this.resetSettings(),this.render()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(this.settingsFullScreenEnabled))}},{key:"updateSettingsFullScreenState",value:function(e){this.settingsFullScreenEnabled=this.currentWidth<540,this.isSettingsBoxVisible&&e!==this.settingsFullScreenEnabled&&(this.settingsFullScreenEnabled?this.showSettingsFullScreen():this.hideSettingsFullScreen())}},{key:"getPanelBetweenHeight",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__between");return e&&e.height()}},{key:"getSettingBoxHeaderHeight",value:function(){var e=this.mediaControl.$modal.find(".settings__header");return e&&e.height()}},{key:"updateSettingsBoxMaxHeight",value:function(){if(this.isSettingsBoxVisible){var e=this.getPanelBetweenHeight(),t=this.getSettingBoxHeaderHeight();if(e>=0&&t>=0){var n=e-t;this.mediaControl.$modal.find(".settings__body").css({maxHeight:n})}}}},{key:"clickMenu",value:function(e){e.stopPropagation();var t=x(e.target).data("selector-name"),n=this.selectors.find((function(e){return e.name===t}));this.fromMenuToOptions(),this.renderOptions(n)}},{key:"renderOptions",value:function(e){this.$settingsBox.find(os).html(e.render().el),this.$settingsBox.find(ss).html(e.title),this.$settingsBox.find(ss).addClass(us),this.$settingsBox.find(".settings__header").on("click",this.fromOptionsToMenu.bind(this))}},{key:"fromMenuToOptions",value:function(){this.$settingsBox.addClass(cs),this.$settingsBox.find(as).addClass("settings__menu--hidden"),this.$settingsBox.find(os).removeClass("settings__options--hidden"),this.$settingsBox.find(ls).removeClass("settings__back-icon--hidden"),this.updateSettingsBoxMaxHeight()}},{key:"fromOptionsToMenu",value:function(e){e&&e.stopPropagation(),this.$settingsBox.removeClass(cs),this.$settingsBox.find(as).removeClass("settings__menu--hidden"),this.$settingsBox.find(os).addClass("settings__options--hidden"),this.$settingsBox.find(ls).addClass("settings__back-icon--hidden"),this.$settingsBox.find(ss).html("Configurações"),this.$settingsBox.find(ss).removeClass(us),this.updateSettingsBoxMaxHeight(),this.updateAllSelectors()}},{key:"toggleSettingsBox",value:function(e){e.stopPropagation(),this.isSettingsBoxVisible?this.hideSettingsBox():this.showSettingsBox()}},{key:"showSettingsBox",value:function(){var e=this,t=this.template({selectors:this.availableSelectors,arrowIcon:No,backIcon:ba,closeIcon:_o});this.triggerWillShowModalElement(),this.settingsFullScreenEnabled||(this.$settingsBox=x(t),this.$el.append(this.$settingsBox),or((function(){return e.$settingsBox.removeClass("settings__box--hidden")}))),this.mediaControl.$modal.addClass("settings__modal"),this.mediaControl.trigger(_n.WM_SETTINGS_SHOW),this.mediaControl.trigger(_n.MEDIACONTROL_MODAL_SHOW,"<div/>"),this.isSettingsBoxVisible=!0,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(!1),this.bindSettingsEvents(),this.mediaControl.setKeepVisible()}},{key:"updateAllSelectors",value:function(){var e=this;this.availableSelectors.forEach((function(t){e.updateSelectorValue(t)}))}},{key:"updateSelectorValue",value:function(e){var t="li[data-selector-name=".concat(e.name,"] .settings__menu-item-value"),n=this.$settingsBox&&this.$settingsBox.find(t);n&&n.html(e.selected),this.bindMenuClickEvents()}},{key:"showSettingsFullScreen",value:function(){var e=this;if(this.isSettingsBoxVisible){this.$settingsBox&&this.$settingsBox.remove();var t=this.template({selectors:this.availableSelectors,arrowIcon:No,backIcon:ba,closeIcon:_o});this.mediaControl.updatePanelsVisibility({hide:!0}),this.mediaControl.trigger(_n.MEDIACONTROL_MODAL_SHOW,t),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause(),this.$settingsBox=this.mediaControl.$modal.find(".settings__box"),this.$settingsBox.addClass("settings__fullscreen"),this.bindSettingsEvents(),or((function(){e.$settingsBox.removeClass("settings__box--hidden"),e.$settingsClose=e.$settingsBox.find(".settings__close"),e.$settingsClose&&e.$settingsClose.removeClass("settings__close--hidden"),e.$settingsClose&&e.$settingsClose.on("click",e.hideSettingsBox.bind(e))}))}}},{key:"hideSettingsBox",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isSettingsBoxVisible&&(this.$settingsBox.addClass("settings__box--hidden"),this.$settingsBox.one("transitionend",(function(){return e.$settingsBox.remove()})),this.unbindSettingsEvents(),this.resetSettings(),this.mediaControl.trigger(_n.MEDIACONTROL_MODAL_HIDE,t),this.mediaControl.trigger(_n.WM_SETTINGS_HIDE),this.mediaControl.resetKeepVisible(),this.triggerDidHideModalElement(),this.resetSettings(),this.hasPlayingBeforeModal&&this.playback.play())}},{key:"hideSettingsFullScreen",value:function(){this.mediaControl.updatePanelsVisibility({hide:!1}),this.showSettingsBox()}},{key:"resetSettings",value:function(){this.isSettingsBoxVisible=!1}},{key:"getSelectedSettings",value:function(){var e={};return this.availableSelectors.forEach((function(t){e[t.optionName]=t.getCurrentOption()})),e}},{key:"getDefaultSettings",value:function(){var e={};return this.selectors.forEach((function(t){e[t.optionName]=t.defaultOption})),e}},{key:"shouldRender",value:function(){return this.availableSelectors.length>0&&!["ad","live"].includes(this.core.getPlaybackType())}},{key:"render",value:function(){if(!this.isSettingsBoxVisible){this.$el.html("");var e=An.getStyleFrom(is,{playerId:this.core.options.playerId}),t=An.getStyleFrom(rs,{playerId:this.core.options.playerId});if(this.$el.append(e[0]).append(t[0]),this.shouldRender()){this.$el.removeClass("media-control-element--hidden"),this.$el.attr("style","");var n=x('<button class="settings__button media-control-button"></button>');n.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill="#FFF" fill-rule="nonzero"/>\n    </g>\n</svg>'),this.$el.append(n)}else this.$el.addClass("media-control-element--hidden");return this}}}]),n}(yr),hs='.clappr-player#wp3-player-0 .media-control.settings-modal--visible .thumb-preview {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.touch .thumb-preview {\n  bottom: 52px; }\n\n.clappr-player#wp3-player-0 .thumb-preview {\n  opacity: 1;\n  visibility: visible;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  position: absolute;\n  bottom: 44px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .thumb-preview--hidden {\n    opacity: 0;\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .thumb-preview__thumb {\n    position: absolute;\n    background-color: rgba(0, 0, 0, 0.75);\n    border-radius: 2px;\n    outline: 1px solid transparent;\n    background-repeat: no-repeat;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%; }\n    .clappr-player#wp3-player-0 .thumb-preview__thumb--no-outline {\n      outline: 0 !important; }\n  .clappr-player#wp3-player-0 .thumb-preview__position {\n    padding: 2px 8px 3px;\n    font-family: "opensans-regular", sans-serif;\n    font-size: 14px;\n    color: #fff;\n    text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n    border-radius: 2px;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    z-index: 100;\n    align-self: flex-end; }\n\n.clappr-player#wp3-player-0 .w425 .thumb-preview, .clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.5);\n  width: auto;\n  height: 16px; }\n  .clappr-player#wp3-player-0 .w425 .thumb-preview__position, .clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview__position {\n    display: inline-block;\n    overflow: hidden;\n    position: initial;\n    padding: 0 6px;\n    width: auto;\n    height: auto;\n    font-size: 10px;\n    line-height: 16px; }\n';ur(hs);var ps=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).supportedTypes={vod:{thumb:function(e){return i.updateThumbForVod(e)},text:function(e){return i.thumbTextForVod(e)}},live:{thumb:function(e){return i.updateThumbForLive(e)},text:function(e){return i.thumbTextForLive(e)}}},i}return Pi(n,[{key:"name",get:function(){return"thumb-preview"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"seekbar",get:function(){return this._seekbar||(this._seekbar=this.core.getPlugin("seekbar"))}},{key:"template",get:function(){return $e('<div class="thumb-preview__thumb"></div>\n<div class="thumb-preview__position"></div>\n')}},{key:"attributes",get:function(){return{class:"thumb-preview"}}},{key:"thumbHost",get:function(){return this.options.env.name,"".concat(this.options.env.protocol,"://live-thumbs.video.globo.com/")}}]),Pi(n,[{key:"bindEvents",value:function(){this.mediaControl&&(this.listenTo(this.mediaControl,ye.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.show),this.listenTo(this.mediaControl,ye.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.calculatePosition),this.listenTo(this.mediaControl,ye.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hide),this.listenTo(this.mediaControl,ye.MEDIACONTROL_HIDE,this.hide),this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,ye.CORE_RESIZE,this.checkOutline),this.trigger("plugin:thumbpreview:ready"),this.bindContainerEvents())}},{key:"bindContainerEvents",value:function(){this.mediaControl.container&&(this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.container.playback&&this.stopListening(this.container.playback),this.listenTo(this.container,ye.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container.playback,_n.WM_RESOURCE_SELECTED,this.onResourceSelected))}},{key:"checkOutline",value:function(){re.Fullscreen.fullscreenElement()&&N.isIE11?this.$el.find(".thumb-preview__thumb").addClass("thumb-preview__thumb--no-outline"):this.$el.find(".thumb-preview__thumb").removeClass("thumb-preview__thumb--no-outline")}},{key:"onResourceSelected",value:function(e){this.thumbUrl=e.selectedResource&&e.selectedResource.thumbUrl}},{key:"updateThumbForVod",value:function(e){if(this.lastTimestamp!==e)if(this.lastTimestamp=e,this.thumbUrl){var t=Math.floor(e/60),n=Math.floor(e%60/5),i="".concat(this.thumbUrl,"/x96/tile/").concat(t,".jpg");this.$el.css({height:this.thumbSize.height,width:this.thumbSize.width}),this.$el.find(".thumb-preview__thumb").css({"background-image":"url(".concat(i,")"),"background-position":"center ".concat(n*-this.thumbSize.height,"px")}),this.mediaControl.$el.removeClass("thumb-preview-basic")}else this.mediaControl.$el.addClass("thumb-preview-basic")}},{key:"thumbTextForVod",value:function(e){return e.formattedTime}},{key:"updateThumbForLive",value:function(e){var t=this;this.throttledUpdateThumb||(this.throttledUpdateThumb=qa((function(e){var n=Math.floor(Date.now()/1e3),i=t.mediaControl.container.playback.getDuration(),r=10*Math.floor((n-(i-e))/10),a=t.core.getCurrentPlayback().video.transmission.signal,o=t.thumbHost+a+"/snapshot/172/97/?utc="+r;t.$el.css({height:t.thumbSize.height,width:t.thumbSize.width}),t.$el.find(".thumb-preview__thumb").css({"background-image":"url("+o+")","background-size":"cover"})}),500,!0)),this.mediaControl.container.playback.dvrEnabled&&this.throttledUpdateThumb(e)}},{key:"thumbTextForLive",value:function(e){if(100===this.mediaControl.currentSeekPercentage){var t=this.mediaControl.container.playback.getDuration()-e.timestamp;return"Voltar "+this.formatTimeInterval(t)}return e.formattedTime}},{key:"show",value:function(e){this.$el.removeClass("thumb-preview--hidden"),this.canShow(e)?(this.core.trigger(_n.WILL_SHOW_MODAL_ELEMENT,{name:this.name}),this.$el.css({"z-index":997}),this.$el.removeClass("thumb-preview--hidden")):this.hide()}},{key:"canShow",value:function(e){return this.mediaControl.container.playback.settings.seekEnabled&&Object.keys(this.supportedTypes).includes(this.playbackType)}},{key:"hide",value:function(){this.$el.addClass("thumb-preview--hidden"),this.core.trigger(_n.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"settingsUpdate",value:function(){this.playbackType=this.mediaControl.container.getPlaybackType(),this.thumbSize={width:170,height:96}}},{key:"containerChanged",value:function(){var e=this,t=this.core.getPlugin("seek_time");t.render=function(){return e.render()},t.stopListening(this.mediaControl.container,ye.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),t.update=function(t){return e.update(t)},t.listenTo(this.mediaControl.container,ye.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),this.bindContainerEvents(),this.settingsUpdate(),this.trigger("plugin:thumbpreview:ready")}},{key:"render",value:function(){var e=this.core.getPlugin("seek_time");if(this.mediaControl&&e){this.$el.html(this.template());var t=An.getStyleFrom(hs,{playerId:this.core.options.playerId});this.$el.append(t[0]),e.setElement(this.el),this.seekbar.$seekBarContainer.append(this.el),this.$el.addClass("thumb-preview--hidden")}else this.listenToOnce(this,"plugin:thumbpreview:ready",this.render);this.checkOutline()}},{key:"calculatePosition",value:function(e){var t=e.touches&&e.touches.length>0&&e.touches[e.touches.length-1]||{},n=(e.pageX||t.pageX)-this.seekbar.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(n/this.mediaControl.$seekBarContainer.width(),0))}},{key:"update",value:function(){var e=this.core.getPlugin("seek_time");if(this.hoverPosition&&e.hoveringOverSeekBar){var t=this.hoverPosition*this.core.getCurrentContainer().getDuration(),n=re.formatTime(t),i=this.seekbar.$seekBarContainer;if(!i.length)return;if(isNaN(t))return;if(Object.keys(this.supportedTypes).includes(this.playbackType)){var r=this.supportedTypes[this.playbackType].thumb,a=this.supportedTypes[this.playbackType].text,o=i.width(),s=this.$el.width()/2,l=this.hoverPosition*o-s,u=o-this.$el.width();l=Math.max(0,Math.min(l,u)),this.$el.css("left",l),this.$el.find(".thumb-preview__position").text(a({timestamp:t,formattedTime:n})),this.core.mediaControl.$el.hasClass("w425")||r(t)}}}},{key:"formatTimeInterval",value:function(e){var t=!1;e*=1e3;var n=(e=parseInt(e/1e3,10))%60,i=(e=parseInt(e/60,10))%60,r=(e=parseInt(e/60,10))%24,a="";return r&&r>0&&(a+=r.toString().slice(-2)+"h",t=!0),i&&i>0&&(a+=i.toString().slice(-2)+"m"),t||(a+=("0"+n).slice(-2)+"s"),a.trim()}},{key:"destroy",value:function(){this._mediaControl=null,Vi(Ui(n.prototype),"destroy",this).call(this)}}]),n}(Ae),fs='.clappr-player#wp3-player-0 .media-control--keep-video-info .media-control-panel__upper {\n  opacity: 1 !important;\n  transform: translateY(0) !important; }\n\n.clappr-player#wp3-player-0 .media-control--keep-video-info .video-info {\n  display: block; }\n\n.clappr-player#wp3-player-0 .media-control.w320 .video-info, .clappr-player#wp3-player-0 .media-control.w360 .video-info, .clappr-player#wp3-player-0 .media-control.w480 .video-info {\n  height: 48px; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full {\n    pointer-events: auto; }\n    .clappr-player#wp3-player-0 .media-control.w320 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full .drawer-info-icon {\n      cursor: pointer;\n      padding: 0px; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-container {\n    display: flex;\n    flex-flow: column;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    right: 0px;\n    bottom: 0px;\n    z-index: 998;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0, 0, 0, 0.6); }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-header {\n    height: 36px;\n    width: 100%; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__data, .clappr-player#wp3-player-0 .media-control.w360 .video-info__data, .clappr-player#wp3-player-0 .media-control.w480 .video-info__data {\n    display: flex;\n    flex-flow: column;\n    flex-grow: 1;\n    justify-content: center;\n    margin: 0;\n    padding: 0 12px 12px; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__close, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close {\n    background-color: transparent;\n    border: 0;\n    box-sizing: content-box;\n    padding: 12px;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    position: absolute;\n    right: 0;\n    width: 24px;\n    height: 24px;\n    outline: none;\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .media-control.w320 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close svg {\n      width: 100%;\n      height: 100%; }\n\n.clappr-player#wp3-player-0 .video-info {\n  box-sizing: border-box;\n  color: white;\n  pointer-events: none;\n  text-shadow: none;\n  z-index: 996; }\n  .clappr-player#wp3-player-0 .video-info__data {\n    height: 24px;\n    visibility: visible;\n    text-align: left; }\n    .clappr-player#wp3-player-0 .video-info__data-title {\n      margin-bottom: 6px;\n      overflow: hidden;\n      font-family: "opensans-regular";\n      font-size: 18px;\n      line-height: 24px;\n      letter-spacing: 0;\n      color: #ffffff;\n      text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); }\n    .clappr-player#wp3-player-0 .video-info__data-program {\n      font-family: "opensans-regular";\n      font-size: 14px;\n      line-height: 16px;\n      letter-spacing: 0;\n      color: #ffffff;\n      text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n      overflow: hidden; }\n  .clappr-player#wp3-player-0 .video-info__status {\n    text-align: left;\n    font-family: "opensans-regular";\n    font-size: 16px;\n    line-height: 16px; }\n  .clappr-player#wp3-player-0 .video-info__data, .clappr-player#wp3-player-0 .video-info__status {\n    transition: all ease .2s; }\n  .clappr-player#wp3-player-0 .video-info--chromecast {\n    position: absolute;\n    top: 0;\n    background-color: transparent;\n    transition: opacity ease-in .2s; }\n    .clappr-player#wp3-player-0 .video-info--chromecast .video-info__data {\n      margin: 5vw 0 0 5vw; }\n      .clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-title {\n        font-size: 3.4vh;\n        line-height: 4.4vh;\n        margin-bottom: 8px; }\n      .clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-program {\n        font-size: 2.4vh;\n        line-height: 2.6vh; }\n  .clappr-player#wp3-player-0 .video-info--ad .video-info__data {\n    display: none !important; }\n  .clappr-player#wp3-player-0 .video-info--ad .video-info__status {\n    font-size: 14px;\n    line-height: normal;\n    color: #ffff93; }\n    .clappr-player#wp3-player-0 .video-info--ad .video-info__status:after {\n      content: "Publicidade"; }\n  .clappr-player#wp3-player-0 .video-info--hidden {\n    display: none; }\n';ur(fs);var ys=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,ye.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container&&this.container.playback&&this.stopListening(this.container.playback),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container.playback,_n.WM_VIDEO_METADATA_LOADED,this.initialize),this.listenTo(this.container,_n.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,_n.DFP_AD_STARTED,this.updateState),this.listenTo(this.container,_n.WM_MASTERTOPIP,(function(){return e.$el.addClass("video-info--hidden")})),this.listenTo(this.container.playback,ye.PLAYBACK_PLAY_INTENT,this.updateState),this.container.options.chromeless&&this.disable())}},{key:"initialize",value:function(e){this.videoProgram=e.program,this.videoTitle=e.title,this.render()}},{key:"onPlayerResize",value:function(e){this.playerSize=e,this.render()}},{key:"onPipToMaster",value:function(){this.videoProgram=this.container.playback.video.program,this.videoTitle=this.container.playback.video.title,this.render()}},{key:"updateState",value:function(){(this.currentState!==this.renderedState||N.isMobile)&&(this.$el.removeClass(this.allStates),this.$el.addClass("video-info--".concat(this.currentState)),this.displayInlineMode||this.displayFullScreenMode||"ad"===this.container.getPlaybackType()?this.$el.removeClass("video-info--hidden"):this.$el.addClass("video-info--hidden"),this.renderedState=this.currentState)}},{key:"render",value:function(){if(this.container){N.isChromecast&&(this.$el.remove(),this.container.$el.append(this.el)),this.updateState();var e=Mi(Mi({},this.videoInfoHTMLData),{},{modalMode:!1});return!this.currentState.includes("video-info--ad")&&this.$el.html(this.shouldUseInfoButton?this.buttonTemplate():this.template(e)),this.$el.append(An.getStyleFrom(fs,{playerId:this.options.playerId})[0]),this.shouldUseInfoButton&&this.$el.find(".drawer-info-icon").html('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z" fill="#FFF"/>\n    </g>\n</svg>'),this}}},{key:"showModalvideoInfo",value:function(e){var t=this,n=Mi(Mi({},this.videoInfoHTMLData),{},{modalMode:!0});e&&e.stopPropagation(),this.mediaControl.trigger(_n.MEDIACONTROL_MODAL_SHOW,this.template(n),{hidePanels:!0}),this.mediaControl.$el.addClass("media-control--keep-video-info");var i=this.modal.find(".video-info__mobile-container"),r=this.modal.find(".video-info__close");i&&i.on("click",(function(e){e&&e.stopPropagation(),t.hideModal()})),r&&r.append(_o),this.mediaControl.setKeepVisible()}},{key:"hideModal",value:function(){this.modal&&this.modal.find(".video-info__mobile-container").off("click"),this.mediaControl.trigger(_n.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.mediaControl.$el.removeClass("media-control--keep-video-info")}},{key:"name",get:function(){return"video_info"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"videoInfoHTMLData",get:function(){return{program:this.videoProgram,title:this.videoTitle}}},{key:"template",get:function(){return $e('<% if (modalMode === true) { %>\n  <div class="video-info__mobile-container">\n    <div class="video-info__mobile-header">\n      <button class="video-info__close"></button>\n    </div>\n<% } %>\n  <div class="video-info__data">\n    <div class="video-info__data-title"><%= title %></div>\n    <div class="video-info__data-program"><%= program %></div>\n  </div>\n  <div class="video-info__status"></div>\n<% if (modalMode === true) { %>\n</div>\n<% } %>\n')}},{key:"buttonTemplate",get:function(){return $e('<button class="drawer-info-icon media-control-button" data-video-info></button>\n')}},{key:"shouldUseInfoButton",get:function(){return this.playerSize&&this.playerSize.width<=480}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"allStates",get:function(){return"video-info--chromecast video-info--full video-info--inline video-info--ad video-info--live video-info--dvr"}},{key:"displayInlineMode",get:function(){return this.options.videoInfo.inlineEnabled&&this.$el.hasClass("video-info--inline")}},{key:"displayFullScreenMode",get:function(){return this.options.videoInfo.fullscreenEnabled&&this.$el.hasClass("video-info--full")}},{key:"currentState",get:function(){if(!this.container)return null;var e=N.isChromecast?"chromecast":kn.Fullscreen.isFullscreen()?"full":"inline";this.status=[];var t=this.container.getPlaybackType();return"live"===t&&this.status.push("video-info--live"),this.container.isDvrInUse()&&this.status.push("video-info--dvr"),"ad"===t&&this.status.push("video-info--ad"),"".concat(e," ").concat(this.status.join(" "))}},{key:"events",get:function(){return{"click .drawer-info-icon[data-video-info]":"showModalvideoInfo"}}},{key:"attributes",get:function(){return{class:"video-info","data-video-info":""}}}]),n}(yr),gs=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).src=e.src,i.currentMedia=e.currentMedia,i.mediaControl=e.mediaControl,i.currentMedia.addUpdateListener((function(){return i.onMediaStatusUpdate()})),i.settings=e.settings,i}return Pi(n,[{key:"name",get:function(){return"chromecast_playback"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"template",get:function(){return $e('<div class="chromecast-playback-background"></div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-playback"}}},{key:"isReady",get:function(){return!0}}]),Pi(n,[{key:"render",value:function(){var e=this.template();this.$el.html(e),this.options.poster?this.$(".chromecast-playback-background").css("background-image","url("+this.options.poster+")"):this.$(".chromecast-playback-background").css("background-color","#666")}},{key:"configure",value:function(e){var t=this;ce.debug(this.name,"configure",e),Vi(Ui(n.prototype),"configure",this).call(this,e),e.currentMedia&&(this.currentMedia=e.currentMedia,this.previousMediaState=void 0,this.currentMedia.addUpdateListener((function(){return t.onMediaStatusUpdate()})),clearTimeout(this.idleTimeout),this.onMediaStatusUpdate())}},{key:"play",value:function(){this.currentMedia.play()}},{key:"pause",value:function(){this.stopTimer(),this.currentMedia.pause()}},{key:"stop",value:function(){this.stopTimer(),this.currentMedia.stop()}},{key:"volume",value:function(e){var t=this,n=e/100,i=new chrome.cast.Volume(n,!1),r=new chrome.cast.media.VolumeRequest(i);this.currentMedia.setVolume(r,(function(){return ce.info(t.name,"volume set")}),(function(e){return ce.warn(t.name,e)}))}},{key:"seek",value:function(e){var t=this;this.stopTimer();var n=new chrome.cast.media.SeekRequest;n.currentTime=e,this.currentMedia.seek(n,(function(){return t.startTimer()}),(function(){return ce.warn(t.name,"seek failed")}))}},{key:"getVolume",value:function(){}},{key:"seekPercentage",value:function(e){if(e>=0&&e<=100){var t=this.getDuration();this.seek(e*t/100)}}},{key:"startTimer",value:function(){var e=this;this.timer=setInterval((function(){return e.updateMediaControl()}),100)}},{key:"stopTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"getDuration",value:function(){return this.currentMedia.media.duration}},{key:"isPlaying",value:function(){return"PLAYING"===this.currentMedia.playerState||"BUFFERING"===this.currentMedia.playerState}},{key:"getPlaybackType",value:function(){return"LIVE"==this.currentMedia.streamType?we.LIVE:we.VOD}},{key:"onMediaStatusUpdate",value:function(){var e=this,t=this.currentMedia.loadingItemId||this.currentMedia.preloadedItemId;ce.debug(this.name,"onMediaStatusUpdate",this.currentMedia.playerState,t),this.isPlaying()&&!this.timer&&this.startTimer(),this.updateBufferState(),this.idleTimeout&&"IDLE"!==this.currentMedia.playerState&&clearTimeout(this.idleTimeout),"PLAYING"===this.currentMedia.playerState?(this.trigger(ye.PLAYBACK_PLAY,this.name),this.trigger(ye.PLAYBACK_MEDIACONTROL_ENABLE,this.name)):t||"IDLE"!==this.currentMedia.playerState||"PLAYING"!==this.previousMediaState||"FINISHED"!==this.currentMedia.idleReason?"IDLE"===this.currentMedia.playerState&&"FINISHED"===this.currentMedia.idleReason&&this.trigger(ye.PLAYBACK_MEDIACONTROL_DISABLE,this.name):this.idleTimeout=setTimeout((function(){return e.trigger(ye.PLAYBACK_ENDED,e.name)}),1e3),this.previousMediaState=this.currentMedia.playerState}},{key:"updateBufferState",value:function(){"BUFFERING"===this.currentMedia.playerState?(this.isBuffering=!0,this.trigger(ye.PLAYBACK_BUFFERING,this.name)):this.isBuffering&&(this.isBuffering=!1,this.trigger(ye.PLAYBACK_BUFFERFULL,this.name))}},{key:"updateMediaControl",value:function(){if(this.currentMedia.media){var e=this.currentMedia.getEstimatedTime(),t=this.currentMedia.media.duration;this.trigger(ye.PLAYBACK_TIMEUPDATE,{current:e,total:t},this.name)}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}}]),n}(we),vs=".clappr-player#wp3-player-0 svg #cast, .clappr-player#wp3-player-0 svg #cast-on, .clappr-player#wp3-player-0 svg #Path {\n  fill: #fff; }\n\n.clappr-player#wp3-player-0 .chromecast-playback {\n  height: 100%;\n  width: 100%; }\n  .clappr-player#wp3-player-0 .chromecast-playback .chromecast-playback-background {\n    background-size: cover; }\n\n.clappr-player#wp3-player-0 .chromecast-playback-background,\n.clappr-player#wp3-player-0 .chromecast-playback-overlay {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator.media-control-element {\n  padding-bottom: 0;\n  padding-top: 0; }\n";ur(vs);var ms="urn:x-cast:wm.player",bs=0,Es=1,ks={mp4:"video/mp4",ogg:"video/ogg","3gpp":"video/3gpp",webm:"video/webm",mkv:"video/x-matroska",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ogv:"video/ogg","3gp":"video/3gpp"},As=kn.getCookie,_s=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).contentType="application/video-id",!N.isiOS&&N.isChrome&&i.options.appId?(i.appId=i.options.appId,i.deviceState=bs,i.embedScript()):i.disable(),i.subtitlesAvailable=[],i.audiosAvailable=[],i}return Pi(n,[{key:"version",get:function(){return VERSION}},{key:"name",get:function(){return"chromecast"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"attributes",get:function(){return{class:"chromecast-button media-control-button","data-chromecast":""}}},{key:"events",get:function(){return{click:"click"}}},{key:"options",get:function(){return this.core.options.chromecast||(this.core.options.chromecast={})}},{key:"hasCastLib",get:function(){return window.chrome&&window.chrome.cast}},{key:"isCastAvailable",get:function(){return this.hasCastLib&&window.chrome.cast.isAvailable}}],[{key:"Movie",get:function(){return"movie"}},{key:"TvShow",get:function(){return"tv_show"}},{key:"Generic",get:function(){return"none"}},{key:"version",get:function(){return VERSION}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,ye.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.container&&(this.listenTo(this.container,ye.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,ye.CONTAINER_PLAY,this.containerPlay),this.listenTo(this.container,ye.CONTAINER_ENDED,this.sessionStopped),this.listenTo(this.container,ye.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.playback,_n.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container,_n.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,_n.WM_AUDIO_CHANGED,this.onAudioChanged))}},{key:"onMetadataLoaded",value:function(e){this.providerId=e.providerId}},{key:"onVolumeChanged",value:function(e){var t=this;if(this.session){var n=e/100;this.session.setReceiverVolumeLevel(n,(function(){return ce.info(t.name,"volume set")}),(function(e){return ce.error(t.name,e)}))}}},{key:"onSubtitleChanged",value:function(e){if(this.session){var t={action:"SUBTITLE_CHANGED",payload:this.subtitlesAvailable.find((function(t){return t.language===e.language||t.id===e.id}))};this.sendMessage(t)}}},{key:"onAudioChanged",value:function(e){if(this.session){var t={action:"AUDIO_CHANGED",payload:this.audiosAvailable.find((function(t){return t.language===e.language||t.id===e.id}))};this.sendMessage(t)}}},{key:"enable",value:function(){Vi(Ui(n.prototype),"enable",this).call(this),this.render(),this.embedScript()}},{key:"embedScript",value:function(){var e=this;if(this.isCastAvailable)or((function(){return e.bootstrapCastApi()}));else{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),t.onload=function(){e.core.trigger(_n.CHROMECAST_SCRIPT_LOADED),e.bootstrapCastApi()},t.onerror=function(){e.core.trigger(_n.CHROMECAST_SCRIPT_ERROR,{code:"chromecast-script-error",description:"Chromecast script error.",level:"INFO"})},document.body.appendChild(t)}}},{key:"bootstrapCastApi",value:function(){var e=this;this.isCastAvailable?this.initializeCastApi():window.__onGCastApiAvailable=function(t,n){t?(e.core.trigger(_n.CHROMECAST_API_READY),e.initializeCastApi()):(ce.warn(e.name,"GCastApi error",n),e.core.trigger(_n.CHROMECAST_API_ERROR,{code:"chromecast-api-error",description:n,level:"INFO"}),e.disable())}}},{key:"initializeCastApi",value:function(){var e=this,t=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,n=new chrome.cast.SessionRequest(this.appId),i=new chrome.cast.ApiConfig(n,(function(t){return e.sessionListener(t)}),(function(t){return e.receiverListener(t)}),t);chrome.cast.initialize(i,(function(){e.core.trigger(_n.CHROMECAST_INITIALIZE_SUCCESS),ce.debug(e.name,"init success")}),(function(){e.core.trigger(_n.CHROMECAST_INITIALIZE_ERROR,{code:"chromecast-init-error",description:"Chromecast initialize error.",level:"INFO"}),ce.warn(e.name,"init error")}))}},{key:"sessionListener",value:function(e){ce.debug(this.name,"new session id:"+e.sessionId),this.newSession(e)}},{key:"sessionUpdateListener",value:function(){this.session&&(ce.debug(this.name,this.session.status),this.session.status===chrome.cast.SessionStatus.STOPPED&&(this.sessionStopped(),this.session=null))}},{key:"mediaListener",value:function(){if(ce.debug(this.name,"mediaListener",this.session.media),this.session.media){var e=this.session.media[this.session.media.length-1];this.mediaSession=e,this.playbackProxy&&this.playbackProxy.configure({currentMedia:e})}}},{key:"receiverListener",value:function(e){e===chrome.cast.ReceiverAvailability.AVAILABLE?(this.core.trigger(_n.CHROMECAST_AVAILABLE),ce.debug(this.name,"receiver found"),this.show()):(this.core.trigger(_n.CHROMECAST_UNAVAILABLE),ce.debug(this.name,"receiver list empty"),this.hide())}},{key:"launchSuccess",value:function(e){clearInterval(this.connectAnimInterval),this.core.trigger(_n.CHROMECAST_LAUNCH_SUCCESS),ce.debug(this.name,"launch success - session: "+e.sessionId),this.newSession(e)}},{key:"launchError",value:function(e){var t=this.mediaSession&&this.mediaSession.playerState!==chrome.cast.media.PlayerState.IDLE,n=this.mediaSession&&this.mediaSession.playerState===chrome.cast.media.PlayerState.PLAYING,i=e.code===chrome.cast.ErrorCode.CANCEL;this.core.trigger(_n.CHROMECAST_LAUNCH_ERROR,e),t&&i||(ce.debug(this.name,"error on launch",e),this.renderDisconnected(),clearInterval(this.connectAnimInterval),(this.isPlayingBeforeConnect||n)&&(this.container.play(),this.container.seek(this.currentTime)))}},{key:"loadMediaSuccess",value:function(e,t){this.core.trigger(_n.CHROMECAST_MEDIA_LOAD_SUCCESS),ce.debug(this.name,"new media session",t,"(".concat(e,")")),this.originalPlayback=this.core.getCurrentPlayback();var n=Object.assign({},this.originalPlayback.options,{currentMedia:t,mediaControl:this.core.mediaControl,poster:this.container.options.poster,settings:this.originalPlayback.settings});this.src=this.originalPlayback.src,this.playbackProxy=new gs(n),this.playbackProxy.render(),this.mediaSession=t,this.originalPlayback.$el.hide();var i=this.core.getCurrentContainer();i.$el.append(this.playbackProxy.el),i.stopListening(),i.playback=this.playbackProxy,i.bindEvents(),i.settingsUpdate()}},{key:"loadMediaError",value:function(e){this.core.trigger(_n.CHROMECAST_MEDIA_LOAD_ERROR,e),ce.warn(this.name,"media error",e)}},{key:"newSession",value:function(e){var t=this;this.session=e,this.deviceState=Es,this.renderConnected(),this.core.trigger(_n.DFP_DISABLE),e.addUpdateListener((function(){return t.sessionUpdateListener()})),e.addMediaListener((function(){return t.mediaListener()})),e.addMessageListener(ms,(function(e,n){return t.wmpMessageListener(e,n)})),this.containerPlay()}},{key:"sessionStopped",value:function(){this.renderDisconnected();var e=this.core.getCurrentContainer(),t=void 0;this.mediaSession&&(t=this.mediaSession.playerState,this.mediaSession=null,this.playbackProxy.$el&&this.playbackProxy.$el.remove(),this.originalPlayback.$el&&this.originalPlayback.$el.show(),e.stopListening(),e.playback=this.originalPlayback,e.bindEvents(),e.settingsUpdate(),this.core.trigger(_n.DFP_ENABLE)),this.playbackProxy&&((this.playbackProxy.isPlaying()||"PLAYING"===t)&&(e.play(),e.seek(this.currentTime)),this.playbackProxy.stop(),this.playbackProxy=null)}},{key:"sendMessage",value:function(e){var t=this;this.session.sendMessage(ms,e,(function(e){return t.onMessageSuccess(e)}),(function(e){return t.onMessageFailure(e)}))}},{key:"onMessageSuccess",value:function(e){ce.info(this.name,"message bus: send message success",e)}},{key:"onMessageFailure",value:function(e){ce.error(this.name,"message bus: send message error",e)}},{key:"loadMedia",value:function(){var e=this;if(!this.playback||this.playback.isReady){this.container.pause();var t=this.container.options.src;ce.debug(this.name,"loading... "+t);var n=this.createMediaInfo(t),i=new chrome.cast.media.LoadRequest(n);i.autoplay=!0,i.currentTime="ad"==this.core.getPlaybackType()?0:this.currentTime||0,this.session.loadMedia(i,(function(t){return e.loadMediaSuccess("loadMedia",t)}),(function(t){return e.loadMediaError(t)}))}else this.listenToOnce(this.playback,ye.PLAYBACK_READY,this.loadMedia)}},{key:"createMediaInfo",value:function(e){var t=n.mimeTypeFor(e),i=this.core.options,r=i.dfp,a=r.watchedAds,o=this.getSelectedSettings();"ad"===this.core.getPlaybackType()&&(a+=1);var s={token:i.token||this.getTokenFromCookie(),adUnit:r.adUnit,adCustomData:r.adCustomData,adAccountId:r.adAccountId,adCmsId:r.adCmsId,watchedAds:a,ga:i.ga,defaultSubtitle:o.subtitle,defaultAudio:o.audio,enableBingeWatch:this.options.enableBingeWatch||!1,upa:i.upa,globoId:i.globoId||void 0},l=new chrome.cast.media.MediaInfo(e);return l.contentType=this.contentType||t,l.customData=s,l.metadata=this.createMediaMetadata(),l}},{key:"getSelectedSettings",value:function(){var e=this.core.getPlugin("settings"),t=e.getSelectedSettings()||{},n=t.audio,i=(n=void 0===n?{}:n).language,r=t.subtitle,a=(r=void 0===r?{}:r).language,o=t.quality,s=(o=void 0===o?{}:o).name;return Mi(Mi({},e.getDefaultSettings()||{}),{},{audio:i,subtitle:a,quality:s})}},{key:"getTokenFromCookie",value:function(){var e=this.providerId?"WMPTOKEN_".concat(this.providerId):"GLBID";return As(e)}},{key:"createMediaMetadata",value:function(){this.options.media||(this.options.media={});var e=this.options.media.type,t=this.createCastMediaMetadata(e);return t.title=this.options.media.title,t.subtitle=this.options.media.subtitle,t.releaseDate=this.options.media.releaseDate,e===n.TvShow?(t.episode=this.options.media.episode,t.originalAirdate=this.options.media.originalAirdate,t.season=this.options.media.season,t.seriesTitle=this.options.media.seriesTitle):e===n.Movie&&(t.studio=this.options.media.studio),this.options.media.images&&(t.images=this.options.media.images.map((function(e){return new chrome.cast.Image(e)}))),!t.images&&this.core.options.poster&&(t.images=[new chrome.cast.Image(this.core.options.poster)]),t}},{key:"createCastMediaMetadata",value:function(e){switch(e){case n.Movie:return new chrome.cast.media.MovieMediaMetadata;case n.TvShow:return new chrome.cast.media.TvShowMediaMetadata;default:return new chrome.cast.media.GenericMediaMetadata}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"click",value:function(){var e=this;if(this.core.trigger(_n.CHROMECAST_LAUNCH_REQUEST),chrome.cast.requestSession((function(t){return e.launchSuccess(t)}),(function(t){return e.launchError(t)})),!this.session){this.isPlayingBeforeConnect=this.container.isPlaying(),this.container.pause();var t=0;clearInterval(this.connectAnimInterval),this.connectAnimInterval=setInterval((function(){e.renderConnecting(t),t=(t+1)%3}),600)}}},{key:"containerChanged",value:function(){this.stopListening(),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.bindEvents(),this.currentTime=0,this.session&&(this.originalPlayback=this.playback)&&this.sessionStopped()}},{key:"containerTimeUpdate",value:function(e){this.currentTime=e.current}},{key:"containerPlay",value:function(){!this.session||this.mediaSession&&"IDLE"!==this.mediaSession.playerStatus||(ce.debug(this.name,"load media"),this.currentTime=this.currentTime||0,this.loadMedia())}},{key:"wmpMessageListener",value:function(e,t){if(this.session){var n=JSON.parse(t);this.handleAdBreak(n),this.handleMediaTracks(n)}}},{key:"handleAdBreak",value:function(e){"adBreakStarted"===e.name?(ce.debug(this.name,"ad break started"),this.playbackProxy&&(this.playbackProxy.settings.seekEnabled=!1,this.playbackProxy.trigger(ye.PLAYBACK_SETTINGSUPDATE))):"adBreakEnded"===e.name&&(ce.debug(this.name,"ad break ended"),this.playbackProxy&&(this.playbackProxy.settings.seekEnabled=!0,this.playbackProxy.trigger(ye.PLAYBACK_SETTINGSUPDATE)))}},{key:"handleMediaTracks",value:function(e){switch(e.action){case"SUBTITLE_AVAILABLE":this.subtitlesAvailable=e.payload;break;case"AUDIO_AVAILABLE":this.audiosAvailable=e.payload}}},{key:"createCachedElements",value:function(){this.$mediaControl=this.mediaControl&&this.mediaControl.$el,this.$settingsButton=this.$mediaControl.find(".media-control-button[data-settings]")}},{key:"renderOverlay",value:function(){if(this.removeOverlay(),this.createCachedElements(),this.session){var e=this.session&&this.session.receiver&&this.session.receiver.friendlyName;this.core.trigger(_n.CHROMECAST_MEDIA_WATCHING,e)}}},{key:"renderConnecting",value:function(e){var t=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast0_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-240.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast1_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-272.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast2_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-304.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>'];this.$el.html(t[e]),this.container&&this.container.$el.addClass("cast-connecting"),this.$mediaControl.addClass("media-control-disabled media-control--no-background"),this.mediaControl.setKeepVisible(),this.renderStyle()}},{key:"removeOverlay",value:function(){this.core.trigger(_n.CHROMECAST_MEDIA_STOP_WATCHING)}},{key:"renderConnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="cast-on-a"/>\n        <path id="cast-on-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-on-b" fill="#fff">\n            <use xlink:href="#cast-on-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-on-a"/>\n        <g mask="url(#cast-on-b)">\n            <use fill="#FFF" xlink:href="#cast-on-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.setKeepVisible(),this.container.$el.removeClass("cast-connecting"),this.container.$el.addClass("cast-enabled"),this.renderStyle(),this.renderOverlay()}},{key:"renderDisconnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" id="cast-off-a"/>\n        <path id="cast-off-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-off-b" fill="#fff">\n            <use xlink:href="#cast-off-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-off-a"/>\n        <g mask="url(#cast-off-b)">\n            <use fill="#FFF" xlink:href="#cast-off-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.resetKeepVisible(),this.container&&this.container.$el.removeClass("cast-enabled cast-connecting"),this.$mediaControl.removeClass("media-control--no-background"),this.renderStyle(),this.removeOverlay()}},{key:"renderStyle",value:function(){var e=An.getStyleFrom(vs,{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"render",value:function(){return this.createCachedElements(),this.session?this.renderConnected():this.renderDisconnected(),this.appendToMediaControl(),this}},{key:"appendToMediaControl",value:function(){var e=this.$mediaControl&&this.$mediaControl.find(".media-control-button[data-fullscreen]");e.length>0?x(this.el).insertBefore(e):this.$mediaControl.find(".media-control-center-panel").append(this.el)}}],[{key:"mimeTypeFor",value:function(e){var t=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1];return ks[t]?ks[t]:e.indexOf(".ism")>-1?"application/vnd.ms-sstr+xml":void 0}}]),n}(yr),Ts='.clappr-player#wp3-player-0 .thumb-preview-modal--visible .chromecast-sender-indicator {\n  opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator {\n  padding: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay {\n  display: flex;\n  justify-content: center;\n  z-index: 100;\n  pointer-events: none;\n  flex-direction: row;\n  align-items: center; }\n  .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status {\n    position: relative;\n    top: -16px; }\n    .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-watching,\n    .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n      font-family: "opensans-regular", sans-serif;\n      font-size: 14px;\n      color: #fff; }\n    .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n      font-weight: bold; }\n\n.clappr-player#wp3-player-0 .media-control-panel__between .chromecast-playback-overlay .chromecast-status {\n  top: -36px; }\n';ur(Ts);var ws=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).$el.hide(),i}return Pi(n,[{key:"name",get:function(){return"chromecast_sender_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return N.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return"center"}},{key:"overlayTemplate",get:function(){return $e('<div class="chromecast-playback-overlay">\n  <div class="chromecast-status">\n    <span class="label-watching">Assistindo em</span>\n    <span class="label-device"></span>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-sender-indicator"}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,_n.CHROMECAST_MEDIA_WATCHING,this.renderTemplate),this.listenTo(this.core,_n.CHROMECAST_MEDIA_STOP_WATCHING,this.hideRender)}},{key:"hideRender",value:function(){this.$el.empty(),this.$el.hide()}},{key:"renderStyle",value:function(){var e=An.getStyleFrom(Ts,{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"renderTemplate",value:function(e){this.hideRender(),this.renderStyle(),this.$el.append(this.overlayTemplate()),this.$el.show(),e&&this.$el.find(".label-device").html(e)}}]),n}(yr),Ss='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector">\r\n\t<path d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921c-0.722,0-1.351,0.367-1.707,0.916l0,0\r\n\t\tc-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999c0,1.07,0.898,1.939,2.015,1.939\r\n\t\tc0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004c1.113,0,2.016-0.869,2.016-1.939\r\n\t\tC45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',Cs='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_">\r\n\t<path d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136c-1.004-0.994-1.004-2.599,0-3.589\r\n\t\tc1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g>\r\n\t\t<path d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',Rs='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903c0,1.795,1.141,3.498,2.969,3.498h26.474\r\n\t\tc1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z M23.446,35.267\r\n\t\tc-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',Is='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.7px" height="45.8px" viewBox="0 0 45.7 45.8" enable-background="new 0 0 45.7 45.8" xml:space="preserve">\r\n<g id="Layer_1_1_" display="none">\r\n\t<g id="vector" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M45.3,38.3L45.3,38.3L24.7,5.2l0,0c-0.4-0.6-1-0.9-1.7-0.9c-0.7,0-1.4,0.4-1.7,0.9l0,0\r\n\t\t\tC16,13.6,0.6,38.3,0.6,38.3v0c-0.2,0.3-0.3,0.6-0.3,1c0,1.1,0.9,1.9,2,1.9c0,0,0.1,0,0.1,0l0,0h41.1v0c0,0,0,0,0,0\r\n\t\t\tc1.1,0,2-0.9,2-1.9C45.6,38.9,45.5,38.6,45.3,38.3z M24.2,13.7c1.5,0.5,2.4,1.9,2.2,3.6c-0.2,1.7-0.6,3.4-0.8,5.1\r\n\t\t\tc-0.3,2-0.6,4.1-1,6.2c-1.1,0-2.1,0-3.2,0c-0.3-2.2-0.7-4.3-1-6.4c-0.2-1.4-0.5-2.8-0.8-4.3C19.1,15,21.4,12.8,24.2,13.7z\r\n\t\t\t M23,37.2c-1.9,0-3.5-1.5-3.4-3.3c0-0.7,0.3-1.4,0.7-1.9c0.6-0.8,1.7-1.3,2.8-1.3c1.9,0,3.5,1.5,3.4,3.3\r\n\t\t\tC26.4,35.7,24.9,37.2,23,37.2z"/>\r\n\t</g>\r\n\t<g id="vector_2_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.9,44.7c-1,1-2.7,1-3.7,0L1,4.5c-1-1-1-2.7,0-3.7c1-1,2.7-1,3.7,0L44.9,41C45.9,42,45.9,43.7,44.9,44.7\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M24.3,6.4c0.8,0,1.6,0.4,1.6,1.2c0,1.5,0,3,0,6c1.2,0,1.6,0,4.6,0c0-3,0-5.6,0-7.5c0-2.5-1.5-3.3-3.9-3.3\r\n\t\t\t\tc-4.1,0-8.5,0-12.6,0l3.6,3.6C19.8,6.4,22,6.4,24.3,6.4z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M30.4,15.5C30.4,15.5,30.4,15.5,30.4,15.5c0,0,0.6,0,1.4,0c0.8,0,0.8,0.3,0.8,1.1c0,1.7-0.1,3.3-0.1,5\r\n\t\t\t\tl3.6,3.6c0-3.3,0-6.7,0-10c0-2.5-0.7-3.3-3.1-3.3c-1.3,0-2.6,0-3.5,0l0,0c-1.4,0-2.7,0-4.1,0c-0.7,0-1.6,0-2.6,0.1l3.7,3.5\r\n\t\t\t\tC27.8,15.4,28.4,15.5,30.4,15.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M29.1,37.3c-0.9,0-1.8,0-2.7,0c-1.6,0-2.9,0-4.6,0c-1.7,0-1.7-0.8-1.7-0.8c0-5,0.2-4.5,0.2-6.6l-3.9-4.7\r\n\t\t\t\tc0,1.2,0.1,2.1,0.1,3.3c-0.8,0-1.8,0.1-2.3,0.1c-0.8,0-1-0.6-1-1.4c0-1.9,0-3.9,0-5.8L9.7,18c0,0.5,0,0.8,0,0.8\r\n\t\t\t\tc0,3.8,0,7.8,0,11.9c0,2.5,0.5,3.1,3,3.1c0.9,0,2.8-0.1,3.9-0.1c0.1,2.6,0.1,4.7,0.1,5.9c0,2.2,0.6,3,2.4,3.2c0.3,0,0.5,0,0.9,0\r\n\t\t\t\tc4.3,0,8.7,0,13,0c0.5,0,1-0.1,1.4-0.2L29.1,37.3z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="vector_4_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M40.3,3.6H8.4c-2.3,0-5-0.3-5,2.1v30.2c0,2.4,2.7,6.7,5,6.7h31.9c2.3,0,1.1-4.4,1.1-6.7V5.7\r\n\t\t\tC41.4,3.3,42.6,3.6,40.3,3.6z M32.4,12.6c0,0,0.7,0.1,0.4,0.1c-1.4,0.2-1.9,0.7-2.9,1.8c-0.9,1-1.5,5.1-1.5,5.1c1.3,0,3,0,3,0\r\n\t\t\ts0,1.9,0,3.4c0,0.3,0.5,0.3,0.2,0.3c-1.9,0-3.5,0-5.3,0c-0.2,0-2,4.2-3.3,6c-1.6,2.3-3.8,3.7-6.5,4.3c-1,0.2-1.9,0.3-2.9,0.3\r\n\t\t\tc-0.2,0-0.2,0-0.2-0.2c0-1.6,0-3.1,0-4.7c0-0.2-0.6-0.3-0.3-0.3c-0.1,0-0.8,0-0.8,0c0,0,0,0,0,0.1c0,0,0.8,0,1,0\r\n\t\t\tc1.6-0.1,3.3-0.7,4.4-1.8c0.4-0.4,1.8-2.3,2.1-2.8c0.2-0.3,1.6-3.4,1.9-4.1c0.3-0.8,0.6-1.6,0.9-2.4c0.1-0.3,0.8-1.8,0.9-2\r\n\t\t\tc0.4-0.8,0.8-1.5,1.2-2.3c0.2-0.4,0.5-0.8,0.8-1.2c1.6-2.2,3.4-3.7,5.9-4.4c0.9-0.2,0.8-0.6,0.8-0.6C32.4,10.5,32.4,11,32.4,12.6z\r\n\t\t\t"/>\r\n\t</g>\r\n\t<g id="vector_5_" display="inline">\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path fill="#CCCBCB" d="M23,5.2c-6.9,0-12.5,4.2-12.5,13.3v11.2c0,5.5,4.3,8.7,9.3,9.7c-2.8-1.6-5-5.1-5-10.2v-7.4\r\n\t\t\t\t\tc0-6.8,3.7-12.2,8.2-12.2c4.5,0,8.2,5.5,8.2,12.2v7.4c0,5.1-1.7,8.4-3.9,10c4.5-1.2,8.2-4.3,8.2-9.4V18.5\r\n\t\t\t\t\tC35.4,9.3,29.8,5.2,23,5.2z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path fill="#CCCBCB" d="M36.6,14.6H10.1c-1.8,0-3-0.7-3,1.1v11.9c0,1.8,1.1,3.5,3,3.5h26.5c1.8,0,2.2-1.7,2.2-3.5V15.7\r\n\t\t\tC38.8,13.9,38.4,14.6,36.6,14.6z M23.4,26.3c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4c2.2,0,4,1.8,4,4C27.5,24.5,25.7,26.3,23.4,26.3z"/>\r\n\t</g>\r\n\t<g id="vector_3_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M34.1,35.6c-0.3,0-0.6,0-0.9,0c-0.3-2.5,0.4-5-0.6-7.4c-1-2.3-2.6-4.1-4.3-5.8c1.7-1.7,3.3-3.4,4.3-5.7\r\n\t\t\tc1-2.3,0.4-4.8,0.7-7.3c0.3,0,0.6,0,0.9,0c0.8-0.1,1.3-0.6,1.4-1.4c0-0.8-0.5-1.3-1.4-1.3c-0.1,0-22.1,0-22.3,0\r\n\t\t\tc-0.8,0.1-1.2,0.6-1.2,1.4c0,0.8,0.5,1.3,1.3,1.4c0.4,0,0.8,0,1.3,0c0,1.4,0,2.7,0,4.1c0,1.9,0.5,3.6,1.5,5.1c1,1.4,2.1,2.6,3.2,4\r\n\t\t\tc-1.6,1.6-3.2,3.4-4.1,5.6c-1,2.3-0.3,4.8-0.6,7.3c-0.5,0-0.9-0.1-1.4,0c-0.7,0.1-1.1,0.6-1.1,1.3c0,0.8,0.4,1.6,1.1,1.8\r\n\t\t\tc0.2,0,22.4,0,22.5,0c0.8-0.1,1.3-0.8,1.3-1.6C35.4,36.4,34.9,35.7,34.1,35.6z M17,10.4c4,0,7.9,0,11.9,0c0.2,0,0.1,3.7-0.5,4.5\r\n\t\t\tc-1.5,2.2-3.5,4.4-5.5,6.2c-2-1.7-3.9-4.2-5.3-6.4C16.9,13.8,16.8,10.4,17,10.4z M28.9,34.5c-4,0-7.9,0-11.9,0\r\n\t\t\tc-0.2,0-0.1-3.4,0.5-4.2c1.5-2.2,3.5-3.8,5.5-5.6c2,1.7,3.9,3.5,5.3,5.7C29,31.3,29.1,34.5,28.9,34.5z"/>\r\n\t</g>\r\n\t<g id="vector_1_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.5,44c-1,1-2.6,1-3.6,0L1.4,5.1c-1-1-1-2.6,0-3.6c1-1,2.6-1,3.6,0l39.4,38.8C45.5,41.4,45.5,43,44.5,44\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M16.5,34.5c-1,0-1.3-0.3-1.3-1.3c0-3.2,0-5.8,0-8.3L11.4,21c0,1.5,0,3,0,4.2c0,0-0.2,9.9-0.2,14.8\r\n\t\t\t\tc0,3,0.8,4.1,3.8,4.1c5.3,0,10.4,0.1,15.7,0.1c1.5,0,2.5-0.3,3-1l-8.8-8.7C22.1,34.5,19.3,34.5,16.5,34.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M28.7,11.7c1,0,1.3,0.3,1.3,1.3c0,2.4,0,4.8,0,7.2l4.4,4.4c0-4.4,0-8.8,0-13.2c0-3-1-3.9-4-3.9\r\n\t\t\t\tc-4.5,0-9,0-13.5,0l4.4,4.3C23.8,11.7,26.2,11.7,28.7,11.7z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="Layer_7" display="inline">\r\n\t</g>\r\n</g>\r\n<g id="Layer_2">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M28.5,25.6l0.1-2c0-5.9,4.2-7.6,8.7-7.6c1.1,0,2.2,0.2,3.2,0.5c-0.9-2.9-2.5-5.5-4.9-7.8c-3.9-3.9-8.5-5.8-14-5.8\r\n\t\t\t\tc-5.3,0-9.9,1.9-13.7,5.6c1.3,0.4,3,1,5.1,1.9c0.2,0.1-0.1,0.4-0.1,0.6c0,0.6,0.5,0.9,1.1,0.7c0.6-0.2,1.1-0.6,1.6-0.9\r\n\t\t\t\tc0.8-0.4,1.6-0.7,2.5-0.6c0.5,0.1,0.9,0.4,0.8,0.9c0,0.4-0.2,0.8-0.3,1.3c-0.2,0.5-0.4,0.9-0.5,1.3c-0.1,0.5,0.1,0.7,0.6,0.5\r\n\t\t\t\tc0.4-0.2,0.7-0.4,1.1-0.6c0.7-0.4,1.3-0.1,1.6,0.6c0.1,0.4,0.1,0.8-0.2,1.1c-0.3,0.4-0.6,0.8-0.9,1.2c-0.6,0.7-1.1,1.4-1.3,2.3\r\n\t\t\t\tc-0.1,0.5-0.3,1.3-0.5,1.7c-0.1,0.2-0.2,0.8-0.3,0.8c0,0-0.1,0-0.1,0c-0.1,0-0.2-0.9-0.3-1.2c-0.3-0.9-0.7-1.4-1.6-1.5\r\n\t\t\t\tc-0.3,0-0.6-0.1-0.8-0.1c-1,0.1-1.7,0.6-1.8,1.5c-0.2,1.3,0.8,2.8,2,3.1c0.7,0.1,1.3,0.1,2,0.1c0.6,0,1.3-0.1,1.9,0\r\n\t\t\t\tc1.3,0,2.3,0.6,2.9,1.8c0.6,1.1,0.8,2.3,0.7,3.5c-0.1,1.3-0.6,2.3-1.7,3c-0.4,0.2-0.7,0.5-1,0.8c-0.5,0.4-0.8,1-0.9,1.7\r\n\t\t\t\tc-0.2,1.3-0.9,2.4-1.8,3.4c0,0.1-0.1,0.1-0.2,0.1c-0.2,0.1-0.4,0.1-0.6-0.1c-0.1-0.1-0.3-0.3-0.4-0.4c-0.7-0.5-1.1-1.1-1.3-1.9\r\n\t\t\t\tc-0.2-1-0.4-2.1-0.5-3.2c-0.2-1.4-0.7-2.7-1.9-3.6c-0.2-0.1-0.3-0.3-0.5-0.4c-1-0.9-1-2.2-0.1-3.2c0.2-0.3,0.5-0.5,0.7-0.8\r\n\t\t\t\tc0.4-0.5,0.4-1.1,0-1.6c-0.3-0.4-0.7-0.8-1.1-1c-1.2-0.7-2.5-1.4-4-0.7c-0.3,0.1-0.5,0-0.6-0.3c-0.2-0.4-0.3-0.8-0.4-1.2\r\n\t\t\t\tc-0.1-0.7,0-1.4,0-2c0-0.9-0.1-1.8-0.5-2.7c-0.1-0.2-0.8-1-1.5-2c-1.9,3.1-2.9,6.5-2.9,10.4c0,5.5,1.9,10.1,5.8,14\r\n\t\t\t\tc3.9,3.9,8.5,6.4,14,6.4c4.8,0,9-0.9,12.6-3.9h-5.7c-1.2,0-1.7-2.2-1.7-3.4v-7.8C26.9,26.8,27.3,27.3,28.5,25.6z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path d="M37.2,19.6c-3.2,0-5.7,1.9-5.7,6.1v5.1c0,6.1,11.4,6.1,11.4,0v-5.1C42.9,21.5,40.4,19.6,37.2,19.6z M40.5,29.7\r\n\t\t\t\t\tc0,6.3-6.5,5.5-6.5,0v-2.9c0-2.7,1.4-4.8,3.3-4.8c1.8,0,3.2,2.2,3.2,4.8V29.7z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path d="M43.2,28.1H31.1c-0.8,0-1.3-0.2-1.3,0.7v5.4c0,0.8,0.5,1.9,1.3,1.9h12.1c0.8,0,0.6-1.1,0.6-1.9v-5.4\r\n\t\t\tC43.9,27.9,44.1,28.1,43.2,28.1z M37.3,33.6c-0.9,0-1.6-0.7-1.6-1.6c0-0.9,0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6\r\n\t\t\tS38.2,33.6,37.3,33.6z"/>\r\n\t</g>\r\n</g>\r\n</svg>',Ds={DEFAULT_ERROR:{UI:{title:"N&#227;o foi poss&#237;vel exibir o v&#237;deo.",message:'Ocorreu um problema ao tentar carregar o v&#237;deo. <a class="player-error__link"  href="" onclick="window.location.reload(); return false;">Atualize</a> a sua p&#225;gina para tentar novamente.',className:"default-error",icon:Ss},code:"default-error",description:"There was a problem trying to load the video.",reportAs:"ERROR",internalError:!0}},Os=Ds=Mi(Mi({},Ds),{},{AUTH_REQUIRED:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Faça seu login para assistir aos conteúdos exclusivos.",message:"Alguns vídeos podem ser restritos a assinantes.",className:"auth-required",icon:Rs},code:"auth-required",description:"Authentication required.",reportAs:"INFO"}),DEVICE_NOT_AUTHORIZED:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Dispositivo n&#227;o autorizado.",message:"Voc&#234; precisa cadastrar seu dispositivo para ter acesso ao conte&#250;do exclusivo.",className:"unsupported-device",icon:Cs},code:"DEV",description:"Device needs register to play content.",reportAs:"INFO"}),DEVICE_NOT_SUPPORTED:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:Cs},code:"DNS",description:"Device not supported",reportAs:"INFO"}),GEOFENCING:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:Mi(Mi({},Ds.DEFAULT_ERROR.UI),{},{title:"O vídeo não está disponível nesta localidade",icon:Is}),code:"geofencing",description:"This video cannot be played in the current location.",reportAs:"INFO"}),GEO_BLOCKED:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"V&#237;deo indispon&#237;vel nessa regi&#227;o",message:"Este v&#237;deo n&#227;o est&#225; dispon&#237;vel para ser exibido na sua regi&#227;o. Desculpe-nos pelo inconveniente.",className:"geoblocking",icon:Is},code:"GB",description:"This video cannot be played in the current region.",reportAs:"INFO"}),HASH_LOAD_ERROR:Mi(Mi({},Ds.DEFAULT_ERROR),{},{code:"security-load-error",description:"Error loading hash."}),PLAYER_NOT_RECOGNIZED:Mi(Mi({},Ds.DEFAULT_ERROR),{},{code:"PNR",description:"Player Not Recognized."}),RESOURCE_LOAD_ERROR:Mi(Mi({},Ds.DEFAULT_ERROR),{},{code:"resource-load-error",description:"Error loading resource."}),LOCATION_UNAVAILABLE:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:Mi(Mi({},Ds.DEFAULT_ERROR.UI),{},{title:"Conteúdo disponível apenas com informação de localização.",icon:Is}),code:"location-unavailable",description:"Could not play content. Location is unavailable.",reportAs:"INFO"}),NOT_ALLOWED_DOMAIN:Mi(Mi({},Ds.DEFAULT_ERROR),{},{code:"not-allowed-domain",description:"The video cannot be played on the current domain.",reportAs:"INFO"}),NOT_FOUND:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Conte&#250;do n&#227;o dispon&#237;vel.",message:"Infelizmente este v&#237;deo n&#227;o est&#225; mais dispon&#237;vel. Desculpe-nos pelo inconveniente.",className:"default-error",icon:Ss},code:"NF",description:"Content not available.",reportAs:"INFO"}),PLAYLIST_LOAD_ERROR:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:Mi(Mi({},Ds.DEFAULT_ERROR.UI),{},{title:"Erro ao carregar o recurso de v&#237;deo."}),code:"playlist-load-error",description:"Error loading video resources."}),RESTRICTED_CONTENT:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Conteúdo restrito.",message:"O vídeo não está autorizado a ser exibido.",className:"default-error",icon:Ss},code:"restricted-content-error",description:"Restricted content.",reportAs:"INFO"}),SIMULTANEOUS_ACCESS:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Acesso Simult&#226;neo.",message:"Existem muitas sess&#245;es ativas utilizando esta conta. Por favor, pare de assistir em algum dispositivo para continuar.",className:"simultaneous-access",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_">\r\n\t<path d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526c-1.026-1.021-1.026-2.685,0-3.707\r\n\t\tc1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g>\r\n\t\t<path d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013c1.215,0,1.561,0,4.561,0\r\n\t\t\tc0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'},code:"LCK",description:"There are too much sessions currently active on the same account.",reportAs:"INFO"}),STREAMING_PAUSE_TIME_EXPIRED:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Sess&#227;o expirada.",message:'O v&#237;deo ficou pausado por muito tempo. Para voltar a assistir, <a class="player-error__link" href="" onclick="window.location.reload(); return false;">atualize</a> a p&#225;gina.',className:"time-expired",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_">\r\n\t<path d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'},code:"streaming-pause-time-expired",description:"The video was paused for a long time.",reportAs:"INFO"}),SUBSCRIBERS_ONLY:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Conte&#250;do exclusivo para assinantes.",message:"Voc&#234; precisa ser assinante para ter acesso ao conte&#250;do.",className:"subscriber-only",icon:Rs},code:"AUT",description:"Exclusive content for subscribers.",reportAs:"INFO"}),UNSUPPORTED_BROWSER:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Seu navegador est&#225; velhinho.",message:"Para assistir aos nossos v&#237;deos, por favor, atualize-o para uma vers&#227;o mais nova.",className:"unsupported-browser",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.4, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="94.054px" height="58.925px" viewBox="0 0 94.054 58.925" enable-background="new 0 0 94.054 58.925" xml:space="preserve">\r\n<g>\r\n\t<path d="M89.057,0H13.051c-2.755,0-4.997,2.242-4.997,4.997v14.44C3.515,20.05,0,23.941,0,28.646v28.278c0,1.104,0.896,2,2,2\r\n\t\ts2-0.896,2-2V28.646c0-2.492,1.734-4.574,4.054-5.139v30.421c0,2.755,2.241,4.996,4.997,4.996h76.006\r\n\t\tc2.756,0,4.997-2.241,4.997-4.996V4.997C94.054,2.242,91.812,0,89.057,0z M23.054,3c1.105,0,2,0.896,2,2s-0.895,2-2,2\r\n\t\tc-1.104,0-2-0.896-2-2S21.95,3,23.054,3z M18.054,3c1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S16.95,3,18.054,3z M13.054,3\r\n\t\tc1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S11.95,3,13.054,3z M91.054,53.929c0,1.102-0.894,1.996-1.997,1.996H13.051\r\n\t\tc-1.103,0-1.997-0.895-1.997-1.996V23.663c2.062,0.728,3.552,2.676,3.552,4.983c0,1.104,0.896,2,2,2s2-0.896,2-2\r\n\t\tc0-4.531-3.257-8.311-7.552-9.133V10h80V53.929z M91.054,6c0,0.552-0.447,1-1,1h-61c-0.552,0-1-0.448-1-1V4c0-0.552,0.448-1,1-1h61\r\n\t\tc0.553,0,1,0.448,1,1V6z"/>\r\n\t<path d="M55.14,37.386c-0.828,0-1.5,0.672-1.5,1.5c0,1.379-1.121,2.5-2.5,2.5s-2.5-1.121-2.5-2.5c0-0.828-0.672-1.5-1.5-1.5\r\n\t\tc-0.829,0-1.5,0.672-1.5,1.5c0,3.032,2.468,5.5,5.5,5.5s5.5-2.468,5.5-5.5C56.64,38.058,55.968,37.386,55.14,37.386z"/>\r\n\t<path d="M21.921,23.039c3.199,0,5.802,2.604,5.802,5.804c0,4.854,3.951,8.805,8.808,8.805c4.854,0,8.803-3.95,8.803-8.805\r\n\t\tc0-3.2,2.604-5.804,5.805-5.804c3.199,0,5.803,2.604,5.803,5.804c0,4.854,3.949,8.805,8.804,8.805s8.804-3.95,8.804-8.805\r\n\t\tc0-3.2,2.604-5.804,5.804-5.804c0.828,0,1.5-0.671,1.5-1.5s-0.672-1.5-1.5-1.5c-3.038,0-5.721,1.547-7.304,3.894\r\n\t\tc-1.583-2.347-4.266-3.894-7.304-3.894s-5.721,1.547-7.304,3.894c-1.583-2.347-4.266-3.894-7.303-3.894\r\n\t\tc-3.038,0-5.722,1.547-7.305,3.894c-1.583-2.347-4.265-3.894-7.303-3.894c-3.039,0-5.724,1.547-7.307,3.895\r\n\t\tc-1.583-2.348-4.265-3.895-7.303-3.895c-0.829,0-1.5,0.671-1.5,1.5S21.093,23.039,21.921,23.039z M65.745,23.039\r\n\t\tc3.2,0,5.804,2.604,5.804,5.804c0,3.201-2.604,5.805-5.804,5.805s-5.804-2.604-5.804-5.805\r\n\t\tC59.941,25.643,62.545,23.039,65.745,23.039z M36.531,23.039c3.2,0,5.803,2.604,5.803,5.804c0,3.201-2.603,5.805-5.803,5.805\r\n\t\tc-3.202,0-5.808-2.604-5.808-5.805C30.724,25.643,33.329,23.039,36.531,23.039z"/>\r\n\t<path d="M21.921,30.343h2.937c0.829,0,1.5-0.672,1.5-1.5s-0.671-1.5-1.5-1.5h-2.937c-0.829,0-1.5,0.672-1.5,1.5\r\n\t\tS21.093,30.343,21.921,30.343z"/>\r\n\t<path d="M80.353,27.343h-2.938c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h2.938c0.828,0,1.5-0.672,1.5-1.5\r\n\t\tS81.181,27.343,80.353,27.343z"/>\r\n\t<path d="M78.476,31.036c-0.586-0.586-1.535-0.586-2.121,0s-0.586,1.535,0,2.121l1.492,1.492c0.293,0.293,0.677,0.439,1.061,0.439\r\n\t\ts0.768-0.146,1.061-0.439c0.586-0.586,0.586-1.535,0-2.121L78.476,31.036z"/>\r\n\t<path d="M23.797,31.037l-1.49,1.492c-0.585,0.586-0.584,1.535,0.001,2.121c0.293,0.292,0.676,0.438,1.06,0.438\r\n\t\tc0.384,0,0.769-0.146,1.062-0.44l1.49-1.492c0.585-0.586,0.584-1.535-0.001-2.121C25.333,30.45,24.383,30.449,23.797,31.037z"/>\r\n</g>\r\n</svg>'},code:"unsupported-browser",description:"Browser not supported.",reportAs:"INFO"}),UNSUPPORTED_MOBILE_DEVICE:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:Cs},code:"unsupported-mobile-device",description:"Mobile device not supported.",reportAs:"INFO"}),TIMESTAMP_ERROR:Mi(Mi({},Ds.DEFAULT_ERROR),{},{UI:{title:"Relógio adiantado.",message:"Para assistir, ajuste o horário do seu dispositivo conforme sua localização.",className:"unsupported-device",icon:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M11.99 2C17.52 2 22 6.48 22 12s-4.48 10-10.01 10C6.47 22 2 17.52 2 12S6.47 2 11.99 2zM12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8zm.5-13v5.25l4.5 2.67-.75 1.23L11 13V7h1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'},code:"TER",description:"Timestamp error.",reportAs:"INFO"})}),Ps=".clappr-player#wp3-player-0 .player-error {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  cursor: default;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 999;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%; }\n  .clappr-player#wp3-player-0 .player-error__background-overlay {\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7);\n    position: absolute;\n    top: 0; }\n  .clappr-player#wp3-player-0 .player-error__link, .clappr-player#wp3-player-0 .player-error__link:visited {\n    color: #CCCACA; }\n  .clappr-player#wp3-player-0 .player-error__content {\n    position: relative;\n    line-height: 1.4; }\n  .clappr-player#wp3-player-0 .player-error__title {\n    color: #CCCACA;\n    font-weight: bold;\n    font-size: 18px; }\n  .clappr-player#wp3-player-0 .player-error__description {\n    color: #CCCACA;\n    width: 90%;\n    margin: 0 auto;\n    font-size: 14px; }\n  .clappr-player#wp3-player-0 .player-error__icon svg {\n    width: 30px;\n    max-height: 30px;\n    fill: #ffffff; }\n  .clappr-player#wp3-player-0 .player-error__icon.unsupported-browser svg {\n    width: 40px; }\n  .clappr-player#wp3-player-0 .player-error--hide {\n    display: none; }\n";ur(Ps);var xs=kn.session,Ls=kn.checkRecoverableError,Ms=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).playerId=i.options.playerId,i.errorCount=0,i}return Pi(n,[{key:"name",get:function(){return"error_screen"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"template",get:function(){return $e('<div class="player-error__background-overlay"></div>\n<div class="player-error__content">\n  <span class="player-error__icon <%= className %>"><%= icon %></span>\n  <p class="player-error__title"><%= title %></p>\n  <p class="player-error__description"><%= message %></p>\n</div>\n')}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"posterImage",get:function(){return this.container&&(this.container.getPlugin("poster")||{}).posterImage}},{key:"attributes",get:function(){return{class:"player-error"}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.ERROR,this.onError),this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.clearErrors)}},{key:"clearErrors",value:function(){this.error=null,this.errorCount=0,this.$el.hide()}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ls(this.playback.innerPlaybackName,e);e.level===Ee.Levels.FATAL&&t&&this.playback.selectedResource&&this.playback.selectedResource.hasFallbackSource()||((e=Mi(Mi({},e),{},{videoSessionId:xs.getVideoSessionId(this.options.playerId)})).level===Ee.Levels.FATAL&&0===this.errorCount&&(this.errorCount+=1,this.error=e,this.showErrorScreen()),this.logError(e))}},{key:"showErrorScreen",value:function(){this.render(),this.$el.show()}},{key:"logError",value:function(e){switch(e.level){case Ee.Levels.INFO:ce.info("player_error","",e);break;case Ee.Levels.WARN:ce.warn("player_error","",e);break;case Ee.Levels.FATAL:default:ce.error("player_error","",e)}}},{key:"setPoster",value:function(){!(this.error.code===Os.RESTRICTED_CONTENT.code)&&this.posterImage&&this.$el.css({"background-image":"url("+this.posterImage+")"})}},{key:"getErrorUI",value:function(e){var t=Object.values(Os).find((function(t){return t.code===e}));return t&&t.UI||Os.DEFAULT_ERROR.UI}},{key:"render",value:function(){if(this.error){Object.assign(this.error.UI,this.getErrorUI(this.error.code));var e=An.getStyleFrom(Ps,{playerId:this.playerId});return this.$el.html(this.template(Mi({},this.error.UI))),this.setPoster(),this.$el.append(e[0]),this.core.$el.append(this.el),this}}}]),n}(Ae),Ns=".clappr-player#wp3-player-0 .container-overlay {\n  width: 100%;\n  z-index: 2; }\n  .clappr-player#wp3-player-0 .container-overlay--hidden {\n    visibility: hidden; }\n\n.clappr-player#wp3-player-0 .media-control::after {\n  height: 0; }\n";ur(Ns);var Us=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.core,ye.CORE_READY,this.initPlugins),this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.bindAdEvents()}},{key:"bindAdEvents",value:function(){this.listenTo(this.container,_n.DFP_AD_STARTED,this.disableVisibility),this.listenTo(this.container,_n.DFP_AD_COMPLETED,this.enableVisibility),this.listenTo(this.container,_n.DFP_AD_CLOSED,this.enableVisibility),this.listenTo(this.container,_n.DFP_AD_SKIPPED,this.enableVisibility)}},{key:"disableVisibility",value:function(){this.$el.addClass("".concat(this.internalName,"--hidden"))}},{key:"enableVisibility",value:function(){this.$el.removeClass("".concat(this.internalName,"--hidden"))}},{key:"filterItems",value:function(e){return e instanceof n&&e!==this}},{key:"initPlugins",value:function(){var e=this;this.corePlugins.filter((function(t){return e.filterItems(t)})).forEach((function(t){return e.renderPlugin(t)}))}},{key:"renderPlugin",value:function(e){var t=e.el;this.$el.append(t)}},{key:"render",value:function(){this.$el.empty();var e=An.getStyleFrom(Ns,{playerId:this.playerId});return this.$el.append(e[0]),this.core.$el.append(this.el),this.triggerDidShowOverlay(),this}},{key:"triggerDidShowOverlay",value:function(){this.core.trigger(_n.DID_SHOW_OVERLAY)}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"name",get:function(){return"overlay"}},{key:"internalName",get:function(){return"container-overlay"}},{key:"attributes",get:function(){return{class:"".concat(this.internalName)}}},{key:"playerId",get:function(){return this.options.playerId}},{key:"corePlugins",get:function(){return this.core.plugins}}]),n}(Ae),Bs=":root {\n  --player-drawer-hint-size: heightHint; }\n\n.clappr-player#wp3-player-0 .drawer--bottom {\n  display: flex;\n  width: 100%;\n  position: absolute;\n  bottom: calc(-100% + var(--player-drawer-hint-size));\n  height: 100%;\n  background: transparent;\n  z-index: 999;\n  will-change: transform, opacity;\n  transform: translateY(0);\n  transition-property: opacity, transform;\n  transition-duration: 0.3s; }\n  .clappr-player#wp3-player-0 .drawer--bottom * {\n    pointer-events: none; }\n  .clappr-player#wp3-player-0 .drawer--bottom:hover {\n    transform: translateY(-12px);\n    transition: transform 0.3s; }\n  .clappr-player#wp3-player-0 .drawer--bottom-expand {\n    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%);\n    transform: translateY(heightImmersion);\n    transition: transform 0.3s; }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand * {\n      pointer-events: auto; }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand:hover {\n      transform: translateY(heightImmersion); }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand:before {\n      content: '';\n      position: absolute;\n      top: -100%;\n      height: 100%;\n      width: 100%;\n      background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 32px); }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand__collapse {\n      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%); }\n      .clappr-player#wp3-player-0 .drawer--bottom-expand__collapse:hover {\n        background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%); }\n      .clappr-player#wp3-player-0 .drawer--bottom-expand__collapse:before {\n        content: '';\n        position: absolute;\n        top: -100%;\n        height: 100%;\n        width: 100%;\n        background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 32px); }\n  .clappr-player#wp3-player-0 .drawer--bottom-disabled {\n    display: none; }\n  .clappr-player#wp3-player-0 .drawer--bottom-hidden {\n    pointer-events: none;\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .drawer--bottom-hidden:hover {\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n\n.clappr-player#wp3-player-0.fullscreen .drawer--bottom-expand {\n  transform: translateY(immersionFullScreen); }\n  .clappr-player#wp3-player-0.fullscreen .drawer--bottom-expand:hover {\n    transform: translateY(immersionFullScreen); }\n";ur(Bs);var Fs="24px",js="40px",Hs=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"expandOffset",value:function(){return"max(".concat(this.specifiedExpandOffset(),", ").concat(this.maxExpandOffset(),") ")}},{key:"expandOffsetFullscreen",value:function(){return"px"==this.heightImmersionUnit?"max(-".concat(this.specifiedExpandOffset(),", ").concat(this.maxExpandOffset(),") "):"max(".concat(this.specifiedExpandOffsetPercentageFullscreen(),", ").concat(this.maxExpandOffset(),") ")}},{key:"maxExpandOffset",value:function(){return"".concat(this.effectiveHeightHint," + ").concat(this.headerSize())}},{key:"specifiedExpandOffset",value:function(){return"".concat(this.effectiveHeightHint," - ").concat(this.translateYValue())}},{key:"specifiedExpandOffsetPercentageFullscreen",value:function(){return"-".concat(this.translateYValue())}},{key:"headerSize",value:function(){return"".concat(this.headerHeight,"  - 100%")}},{key:"translateYValue",value:function(){return"".concat(parseInt(this.heightImmersion,10)).concat(this.heightImmersionUnit)}},{key:"toggle",value:function(e){e&&(this.isExpanded?this.clickAtHideArea(e)&&Vi(Ui(n.prototype),"hide",this).call(this):Vi(Ui(n.prototype),"show",this).call(this))}},{key:"clickAtHideArea",value:function(e){return e.clientY>=0&&e.clientY<=this.drawerYPosition()}},{key:"drawerYPosition",value:function(){return Math.round(this.$el[0].getBoundingClientRect().top)-1}},{key:"name",get:function(){return"drawer_bottom"}},{key:"internalName",get:function(){return"drawer--bottom"}},{key:"hasPlaceholder",get:function(){return!0}}]),n}(function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).lastChromelessValue=!!i.options.chromeless,i}return Pi(n,[{key:"name",get:function(){return"drawer"}},{key:"internalName",get:function(){return"drawer"}},{key:"isExpanded",get:function(){return this._isExpanded},set:function(e){this._isExpanded=e}},{key:"attributes",get:function(){return{class:"".concat(this.internalName," ").concat(this.internalName,"-hidden")}}}]),Pi(n,[{key:"bindEvents",value:function(){this.bindMouseEvents(),this.listenTo(this.core,ye.MEDIACONTROL_SHOW,this.showHint),this.listenTo(this.core,_n.WM_SHARE_HIDE,this.showHint),this.listenTo(this.core,_n.TAP_TO_UNMUTE_SHOW,this.showHint),this.listenTo(this.core,_n.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked),this.listenTo(this.core,_n.WM_SHARE_HIDE,this.bindMouseEvents),this.listenTo(this.core,ye.MEDIACONTROL_HIDE,this.hideHint),this.listenTo(this.core,_n.WM_SHARE_SHOW,this.unbindMouseEvents),this.listenTo(this.core,_n.WM_SHARE_SHOW,this.hideHint),this.listenTo(this.core,_n.HIDE_DRAWER_REQUESTED,this.hide),this.listenTo(this.core,_n.SYNC_DRAWER_STATE_REQUEST,this.currentState),this.listenTo(this.core,ye.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.core,ye.CORE_OPTIONS_CHANGE,this.onOptionsChange)}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"updateChromelessState",value:function(){this.disableDrawer(),!1===this.options.chromeless&&(this.hideHint(),this.enableDrawer()),this.lastChromelessValue=this.options.chromeless}},{key:"bindMouseEvents",value:function(){this.listenTo(this.core,ye.CORE_MOUSE_MOVE,this.enableVisibility),this.listenTo(this.core,ye.CORE_MOUSE_LEAVE,this.hideDelayed)}},{key:"unbindMouseEvents",value:function(){this.stopListening(this.core,ye.CORE_MOUSE_MOVE,this.enableVisibility),this.stopListening(this.core,ye.CORE_MOUSE_LEAVE,this.hideDelayed)}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,!this.lastChromelessValue&&this.updateResponsiveStyle())}},{key:"onTapToUnmuteClicked",value:function(){N.isMobile&&this.hideHint()}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?this.disableDrawer():this.enableDrawer()}},{key:"enableDrawer",value:function(){this.$el.removeClass("".concat(this.internalName,"-disabled"))}},{key:"disableDrawer",value:function(){this.$el.addClass("".concat(this.internalName,"-disabled"))}},{key:"showHint",value:function(){this.isVisible()||(this.$el.removeClass("".concat(this.internalName,"-hidden")),this.onDidShowDrawerHint())}},{key:"onDidShowDrawerHint",value:function(){this.core.trigger(_n.DID_SHOW_DRAWER_HINT)}},{key:"hideHint",value:function(){!this.isExpanded&&this.isVisible()&&(this.disableVisibility(),this.onDidHideDrawerHint())}},{key:"onDidHideDrawerHint",value:function(){this.core.trigger(_n.DID_HIDE_DRAWER_HINT)}},{key:"disableVisibility",value:function(){this.$el.addClass("".concat(this.internalName,"-hidden"))}},{key:"currentState",value:function(){this.core.trigger(_n.SYNC_DRAWER_STATE_RESPONSE,this.isExpanded)}},{key:"checkSizeToEnableHeader",value:function(e){e&&e.stopPropagation();var t=this.getTranformValues(e);this.isExpanded&&this.needsRequestHeader(t)&&this.triggerDrawerHasHeader()}},{key:"triggerDrawerHasHeader",value:function(){this.core.trigger(_n.SHOW_HEADER_REQUESTED)}},{key:"needsRequestHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=parseInt(this.headerHeight,10),n=parseInt(this.defaultExpandValues.drawerHintSize,10),i=e.length>=6&&parseInt(e[5],10);if(!i)return!1;var r=Math.abs(parseInt(i,10))+n,a=this.currentHeight-t;return r>=a}},{key:"getTranformValues",value:function(e){if(!e)return[];var t=window.getComputedStyle(e.target).transform;return(void 0===t?"":t).split(", ")||[]}},{key:"show",value:function(e){var t=this;this.isExpanded||(e&&e.stopPropagation(),this.isExpanded=!0,this.hideDelayed(),this.core.trigger(_n.WILL_SHOW_DRAWER),this.$el.addClass("".concat(this.internalName,"-expand")).on("transitionend",(function(e){t.$el.addClass("".concat(t.internalName,"-expand__collapse")).off("transitionend"),t.checkSizeToEnableHeader(e)})),this.onDidShowDrawer())}},{key:"onDidShowDrawer",value:function(){this.core.trigger(_n.DID_SHOW_DRAWER)}},{key:"hide",value:function(){var e=this;this.isExpanded&&(this.isExpanded=!1,this.core.trigger(_n.WILL_HIDE_DRAWER),this.$el.removeClass("".concat(this.internalName,"-expand")).on("transitionend",(function(){e.$el.removeClass("".concat(e.internalName,"-expand__collapse")).off("transitionend")})),this.onDidHideDrawer())}},{key:"onDidHideDrawer",value:function(){this.core.trigger(_n.DID_HIDE_DRAWER)}},{key:"enableVisibility",value:function(e){var t=this;N.isMobile&&e&&"mousemove"===e.type||(clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),this.inactivityTimeout),this.isExpanded&&this.isVisible()||this.showHint())}},{key:"isVisible",value:function(){return!this.$el.hasClass("".concat(this.internalName,"-hidden"))}},{key:"hideDelayed",value:function(e){var t=this;!this.isExpanded||this.inactivityTimeout<=0||!this.isVisible()||N.supportsTouchEvents||(clearTimeout(this.hideId),this.userKeepVisible||e&&"mouseout"===e.type?this.hideId=setTimeout((function(){return t.hideDelayed()}),this.inactivityTimeout):!this.userKeepVisible&&this.disableVisibility())}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1)}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0)}},{key:"parseStyle",value:function(){var e=Bs.toString();return e=(e=(e=e.replace(/heightImmersion/g,this.expandOffset())).replace(/immersionFullScreen/g,this.expandOffsetFullscreen())).replace(/heightHint/g,this.effectiveHeightHint)}},{key:"expandOffset",value:function(){}},{key:"expandOffsetFullscreen",value:function(){}},{key:"render",value:function(){var e=An.getStyleFrom(this.parseStyle(),{playerId:this.playerId});return this.$el.html(this.content),this.$el.append(e[0]),this.core.trigger(_n.SHOW_DRAWER_REQUESTED),this.hasPlaceholder&&this.core.trigger(_n.DRAWER_HAS_PLACEHOLDER,this.effectiveHeightHint),this.updateChromelessState(),this}},{key:"content",get:function(){return this._content||""},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._content=e}},{key:"height",get:function(){return this._height||"inherit"},set:function(e){this._height=e}},{key:"heightImmersion",get:function(){return"50%"}},{key:"heightImmersionUnit",get:function(){return this.heightImmersion.includes("%")?"%":"px"}},{key:"heightHint",get:function(){return parseInt(Fs,10)}},{key:"headerHeight",get:function(){return"57px"}},{key:"hasPlaceholder",get:function(){return!1}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"gradientHeadSize",get:function(){return parseInt("32px",10)}},{key:"defaultExpandValues",get:function(){return{drawerExpanded:"50%",drawerHintSize:this.effectiveHeightHint}}},{key:"effectiveHeightHint",get:function(){return this.heightHint>parseInt(js,10)?js:this.heightHint<parseInt(Fs,10)?Fs:this.heightHint}},{key:"container",get:function(){return this.core.activeContainer}},{key:"inactivityTimeout",get:function(){return 2e3}},{key:"events",get:function(){var e={click:"toggle"},t={mouseenter:"setUserKeepVisible",mouseleave:"resetUserKeepVisible",click:"toggle"},n=Mi(Mi(Mi({},e),t),{},{touchend:this.resetUserKeepVisible});return N.isHybridDevice?n:N.isMobile?e:t}}]),n}(Us)),Vs=".clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder {\n  position: relative;\n  width: 100%;\n  height: 24px; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.hidden {\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.disabled {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.media-control-element {\n    padding: 0; }\n\n.clappr-player#wp3-player-0 .media-control.ad .media-control-placeholder {\n  display: none; }\n";ur(Vs);var Ks=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,_n.DRAWER_HAS_PLACEHOLDER,this.onDrawerHasPlaceholder),this.listenTo(this.core,ye.CORE_RESIZE,this.onPlayerResize)}},{key:"onDrawerHasPlaceholder",value:function(){this.hasDrawer=!0,this.enablePlaceholder()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.updateResponsiveStyle())}},{key:"enablePlaceholder",value:function(e){e&&this.heightHint!==e&&this.$el.css({height:e}),this.$el.removeClass("disabled")}},{key:"disablePlaceholder",value:function(){this.$el.addClass("disabled")}},{key:"show",value:function(){this.$el.removeClass("hidden")}},{key:"updateResponsiveStyle",value:function(){this.hasDrawer&&(this.shouldDisable?this.disablePlaceholder():this.enablePlaceholder())}},{key:"render",value:function(){this.$el.empty();var e=An.getStyleFrom(Vs,{playerId:this.core.options.playerId});return this.$el.append(e[0]),this}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"name",get:function(){return"media_control_placeholder"}},{key:"panel",get:function(){return"front-layer"}},{key:"position",get:function(){return""}},{key:"heightHint",get:function(){return 0}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"attributes",get:function(){return{class:"media-control-placeholder disabled hidden"}}}]),n}(yr),zs=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),e.options.clapprStats=e.options.clapprStats||{runEach:1e3,onReport:function(e){return i.onMetricsReceived(e)}},i=t.call(this,e)}return Pi(n,[{key:"innerPlayback",get:function(){return this.container.playback&&this.container.playback.playback}},{key:"_playbackName",get:function(){return this.innerPlayback&&this.innerPlayback.name}}]),Pi(n,[{key:"_html5FetchFPS",value:function(){var e=this.container.playback.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"onMetricsReceived",value:function(e){this.container.trigger(_n.WM_STATS_REPORTED,e)}}]),n}(Oa(Pa((function(e,t){var n;window,n=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="latest/",n(n.s="./src/clappr-stats.js")}({"./node_modules/lodash.get/index.js":
/*!******************************************!*\
    !*** ./node_modules/lodash.get/index.js ***!
    \******************************************/
/*! no static exports found */function(e,t,n){(function(t){var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="__lodash_hash_undefined__",a="[object Function]",o="[object GeneratorFunction]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,u=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,p="object"==(void 0===t?"undefined":i(t))&&t&&t.Object===Object&&t,f="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,y=p||f||Function("return this")(),g=Array.prototype,v=Function.prototype,m=Object.prototype,b=y["__core-js_shared__"],E=(n=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",k=v.toString,A=m.hasOwnProperty,_=m.toString,T=RegExp("^"+k.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=y.Symbol,S=g.splice,C=B(y,"Map"),R=B(Object,"create"),I=w?w.prototype:void 0,D=I?I.toString:void 0;function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function L(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function M(e,t){for(var n,r=0,a=(t=function(e,t){if(V(e))return!1;var n=void 0===e?"undefined":i(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!z(e))||(l.test(e)||!s.test(e)||null!=t&&e in Object(t))}(t,e)?[t]:V(n=t)?n:F(n)).length;null!=e&&r<a;)e=e[j(t[r++])];return r&&r==a?e:void 0}function N(e){return!(!K(e)||function(e){return!!E&&E in e}(e))&&(function(e){var t=K(e)?_.call(e):"";return t==a||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?T:h).test(function(e){if(null!=e){try{return k.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function U(e,t){var n,r,a=e.__data__;return("string"==(r=void 0===(n=t)?"undefined":i(n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function B(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return N(n)?n:void 0}O.prototype.clear=function(){this.__data__=R?R(null):{}},O.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},O.prototype.get=function(e){var t=this.__data__;if(R){var n=t[e];return n===r?void 0:n}return A.call(t,e)?t[e]:void 0},O.prototype.has=function(e){var t=this.__data__;return R?void 0!==t[e]:A.call(t,e)},O.prototype.set=function(e,t){return this.__data__[e]=R&&void 0===t?r:t,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(e){var t=this.__data__,n=L(t,e);return!(n<0||(n==t.length-1?t.pop():S.call(t,n,1),0))},P.prototype.get=function(e){var t=this.__data__,n=L(t,e);return n<0?void 0:t[n][1]},P.prototype.has=function(e){return L(this.__data__,e)>-1},P.prototype.set=function(e,t){var n=this.__data__,i=L(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},x.prototype.clear=function(){this.__data__={hash:new O,map:new(C||P),string:new O}},x.prototype.delete=function(e){return U(this,e).delete(e)},x.prototype.get=function(e){return U(this,e).get(e)},x.prototype.has=function(e){return U(this,e).has(e)},x.prototype.set=function(e,t){return U(this,e).set(e,t),this};var F=H((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(z(e))return D?D.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(c,(function(e,t,i,r){n.push(i?r.replace(d,"$1"):t||e)})),n}));function j(e){if("string"==typeof e||z(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function H(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new(H.Cache||x),n}H.Cache=x;var V=Array.isArray;function K(e){var t=void 0===e?"undefined":i(e);return!!e&&("object"==t||"function"==t)}function z(e){return"symbol"==(void 0===e?"undefined":i(e))||function(e){return!!e&&"object"==(void 0===e?"undefined":i(e))}(e)&&"[object Symbol]"==_.call(e)}e.exports=function(e,t,n){var i=null==e?void 0:M(e,t);return void 0===i?n:i}}).call(this,n(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
    !*** (webpack)/buildin/global.js ***!
    \***********************************/
/*! no static exports found */function(e,t,n){var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}e.exports=i},"./src/clappr-stats.js":
/*!*****************************!*\
    !*** ./src/clappr-stats.js ***!
    \*****************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(/*! @clappr/core */"@clappr/core"),s=n(/*! lodash.get */"./node_modules/lodash.get/index.js"),l=(i=s)&&i.__esModule?i:{default:i},u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._runEach=(0,l.default)(e,"options.clapprStats.runEach",5e3),n._onReport=(0,l.default)(e,"options.clapprStats.onReport",n._defaultReport),n._uriToMeasureLatency=(0,l.default)(e,"options.clapprStats.uriToMeasureLatency"),n._urisToMeasureBandwidth=(0,l.default)(e,"options.clapprStats.urisToMeasureBandwidth"),n._runBandwidthTestEvery=(0,l.default)(e,"options.clapprStats.runBandwidthTestEvery",10),n._bwMeasureCount=0,n._completion={watch:(0,l.default)(e,"options.clapprStats.onCompletion",[]),calls:[]},n._newMetrics(),n.on(t.REPORT_EVENT,n._onReport),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"_now",value:function(){return window.performance&&"function"==typeof window.performance.now?window.performance.now():new Date}},{key:"_inc",value:function(e){this._metrics.counters[e]+=1}},{key:"_timerHasStarted",value:function(e){return void 0!==this["_start"+e]}},{key:"_start",value:function(e){this["_start"+e]=this._now()}},{key:"_stop",value:function(e){this._metrics.timers[e]+=this._now()-this["_start"+e]}},{key:"_defaultReport",value:function(e){console.log(e)}},{key:"name",get:function(){return"clappr_stats"}},{key:"supportedVersion",get:function(){return{min:"0.4.2"}}},{key:"_playbackName",get:function(){return this.container.playback.name}},{key:"_playbackType",get:function(){return this.container.getPlaybackType()}}]),a(t,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,o.Events.CONTAINER_BITRATE,this.onBitrate),this.listenTo(this.container,o.Events.CONTAINER_STOP,this.stopReporting),this.listenTo(this.container,o.Events.CONTAINER_ENDED,this.stopReporting),this.listenToOnce(this.container.playback,o.Events.PLAYBACK_PLAY_INTENT,this.startTimers),this.listenToOnce(this.container,o.Events.CONTAINER_PLAY,this.onFirstPlaying),this.listenTo(this.container,o.Events.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,o.Events.CONTAINER_PAUSE,this.onPause),this.listenToOnce(this.container,o.Events.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,o.Events.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,o.Events.CONTAINER_ERROR,(function(){return e._inc("error")})),this.listenTo(this.container,o.Events.CONTAINER_FULLSCREEN,(function(){return e._inc("fullscreen")})),this.listenTo(this.container,o.Events.CONTAINER_PLAYBACKDVRSTATECHANGED,(function(t){t&&e._inc("dvrUsage")})),this.listenTo(this.container.playback,o.Events.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.container.playback,o.Events.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"destroy",value:function(){this.stopReporting(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onBitrate",value:function(e){var t=parseInt((0,l.default)(e,"bitrate",0),10),n=this._now();if(this._metrics.extra.bitratesHistory.length>0){var i=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];i.end=n,i.time=n-i.start}this._metrics.extra.bitratesHistory.push({start:this._now(),bitrate:t}),this._inc("changeLevel")}},{key:"stopReporting",value:function(){this._buildReport(),clearInterval(this._intervalId),this._newMetrics(),this.stopListening(),this.bindEvents()}},{key:"startTimers",value:function(){this._intervalId=setInterval(this._buildReport.bind(this),this._runEach),this._start("session"),this._start("startup")}},{key:"onFirstPlaying",value:function(){this.listenTo(this.container,o.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._start("watch"),this._stop("startup")}},{key:"playAfterPause",value:function(){this.listenTo(this.container,o.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._stop("pause"),this._start("watch")}},{key:"onPlay",value:function(){this._inc("play")}},{key:"onPause",value:function(){this._stop("watch"),this._start("pause"),this._inc("pause"),this.listenToOnce(this.container,o.Events.CONTAINER_PLAY,this.playAfterPause),this.stopListening(this.container,o.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying)}},{key:"onSeek",value:function(e){this._inc("seek"),this._metrics.extra.watchHistory.push([1e3*e,1e3*e])}},{key:"onTimeUpdate",value:function(e){var t=1e3*e.current,n=1e3*e.total,i=this._metrics.extra.watchHistory.length;if(this._metrics.extra.duration=n,this._metrics.extra.currentTime=t,this._metrics.extra.watchedPercentage=t/n*100,0===i?this._metrics.extra.watchHistory.push([t,t]):this._metrics.extra.watchHistory[i-1][1]=t,this._metrics.extra.bitratesHistory.length>0){var r=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];r.end||(r.time=this._now()-r.start)}this._onCompletion()}},{key:"onContainerUpdateWhilePlaying",value:function(){this.container.playback.isPlaying()&&(this._stop("watch"),this._start("watch"))}},{key:"onBuffering",value:function(){this._inc("buffering"),this._start("buffering"),this.listenToOnce(this.container,o.Events.CONTAINER_STATE_BUFFERFULL,this.onBufferfull)}},{key:"onBufferfull",value:function(){this._stop("buffering"),this.listenToOnce(this.container,o.Events.CONTAINER_STATE_BUFFERING,this.onBuffering)}},{key:"onProgress",value:function(e){this._metrics.extra.buffersize=1e3*e.current}},{key:"_newMetrics",value:function(){this._metrics={counters:{play:0,pause:0,error:0,buffering:0,decodedFrames:0,droppedFrames:0,fps:0,changeLevel:0,seek:0,fullscreen:0,dvrUsage:0},timers:{startup:0,watch:0,pause:0,buffering:0,session:0,latency:0},extra:{playbackName:"",playbackType:"",bitratesHistory:[],bitrateWeightedMean:0,bitrateMostUsed:0,buffersize:0,watchHistory:[],watchedPercentage:0,bufferingPercentage:0,bandwidth:0,duration:0,currentTime:0}}}},{key:"_onCompletion",value:function(){var e=this._metrics.extra.watchedPercentage,n=this._completion.watch,i=-1!=this._completion.calls.indexOf(e);-1==n.indexOf(e)||i||(o.Log.info(this.name+" PERCENTAGE_EVENT: "+e),this._completion.calls.push(e),this.trigger(t.PERCENTAGE_EVENT,e))}},{key:"_buildReport",value:function(){this._stop("session"),this._start("session"),this._metrics.extra.playbackName=this._playbackName,this._metrics.extra.playbackType=this._playbackType,this._calculateBitrates(),this._calculatePercentages(),this._fetchFPS(),this._measureLatency(),this._measureBandwidth(),this.trigger(t.REPORT_EVENT,JSON.parse(JSON.stringify(this._metrics)))}},{key:"_fetchFPS",value:function(){var e={html5_video:this._html5FetchFPS,hls:this._html5FetchFPS,dash_shaka_playback:this._html5FetchFPS};e[this._playbackName]&&e[this._playbackName].call(this)}},{key:"_calculateBitrates",value:function(){var e=this._metrics.extra.bitratesHistory.map((function(e){return e.time})).reduce((function(e,t){return e+t}),0);this._metrics.extra.bitrateWeightedMean=this._metrics.extra.bitratesHistory.map((function(e){return e.bitrate*e.time})).reduce((function(e,t){return e+t}),0)/e,this._metrics.extra.bitratesHistory.length>0&&(this._metrics.extra.bitrateMostUsed=this._metrics.extra.bitratesHistory.slice().sort((function(e,t){return e.time<t.time}))[0].bitrate)}},{key:"_calculatePercentages",value:function(){this._metrics.extra.duration>0&&(this._metrics.extra.bufferingPercentage=this._metrics.timers.buffering/this._metrics.extra.duration*100)}},{key:"_html5FetchFPS",value:function(){var e=this.container.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"_measureLatency",value:function(){var e=this;if(this._uriToMeasureLatency){var t,n=[],i=function(){t=n[2]-n[1],e._metrics.timers.latency=t};!function t(){if(n.push(e._now()),n.length>2)i();else{var r=new Image;r.onload=t,r.src=e._uriToMeasureLatency+"?"+Math.random()+"="+e._now()}}()}}},{key:"_measureBandwidth",value:function(){var e=this;if(this._urisToMeasureBandwidth&&this._bwMeasureCount%this._runBandwidthTestEvery==0){var t=0,n=function(n){var i=(e._urisToMeasureBandwidth[t-1].end-e._urisToMeasureBandwidth[t-1].start)/1e3,r=8*n.loaded/i;e._metrics.extra.bandwidth=r,e._urisToMeasureBandwidth.forEach((function(e){e.start=0,e.end=0,e.expired=!1,clearTimeout(e.timer)}))};!function i(r){if(t>0&&(e._urisToMeasureBandwidth[t-1].end=e._now(),clearTimeout(e._urisToMeasureBandwidth[t-1].timer)),t>=e._urisToMeasureBandwidth.length||t>0&&e._urisToMeasureBandwidth[t-1].expired)n(r);else{var a=new XMLHttpRequest;a.open("GET",e._urisToMeasureBandwidth[t].url,!0),a.responseType="arraybuffer",a.onload=a.onabort=i,e._urisToMeasureBandwidth[t].start=e._now(),e._urisToMeasureBandwidth[t].timer=setTimeout((function(t){e._urisToMeasureBandwidth[t].expired=!0,a.abort()}),e._urisToMeasureBandwidth[t].timeout,t),a.send()}t++}()}this._bwMeasureCount++}}]),t}(o.ContainerPlugin);t.default=u,u.REPORT_EVENT="clappr:stats:report",u.PERCENTAGE_EVENT="clappr:stats:percentage",e.exports=t.default},"@clappr/core":
/*!*************************!*\
    !*** external "Clappr" ***!
    \*************************/
/*! no static exports found */function(t,n){t.exports=e}})},e.exports=n(st)})))),Gs=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.stopListening(),this.listenTo(this.container.playback,_n.WM_VIDEO_METADATA_LOADED,this._parseCuepoints)}},{key:"_bindPlaybackEvents",value:function(){this.listenTo(this.container.playback,ye.PLAYBACK_TIMEUPDATE,this._onPositionUpdate)}},{key:"_onPositionUpdate",value:function(e){var t=this,n=e.current;this._cuepoints.forEach((function(e){(t._previousPosition<e.time||n===e.time)&&(n===e.time||n>=e.time&&n-t._previousPosition<=1)&&(ce.debug(t.name,"cuepoint reached:",e),t.container.trigger(_n.DID_REACH_CUEPOINT,e))})),this._previousPosition=n}},{key:"_parseCuepoints",value:function(e){var t=this;this._cuepoints=(e.cuepoints||[]).map((function(e){var t=Mi({},e);return t.time/=1e3,t})).sort((function(e,t){return e.time-t.time})),ce.debug(this.name,"cuepoints loaded:",this._cuepoints),this._cuepoints.length>0&&(or((function(){return t.container.trigger(_n.DID_LOAD_CUEPOINTS,t._cuepoints)})),this._bindPlaybackEvents(),this._previousPosition=-.01)}},{key:"name",get:function(){return"cuepoints"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}}]),n}(Ue),Ws=/^https?:\/\/([a-z0-9\.\-]*)\.globoi?\.com/,Ys=/^https?:\/\/[w]*\.?(techtudo)\.com\.br/,$s=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).siteName=i.options.siteName,i.listenToOnce(i.container.playback,_n.WM_RESOURCE_READY,i.onResourceReady),i.embedPlugin(),i}return Pi(n,[{key:"name",get:function(){return"comscore"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"environment",get:function(){return this.container.options.env}},{key:"scorecardBeacon",get:function(){return"".concat(this.environment.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/beacon.js")}}]),Pi(n,[{key:"embedPlugin",value:function(){var e=this;if(!window.COMSCORE){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src=this.scorecardBeacon,t.onload=function(){return e.ready()},document.head.appendChild(t)}}},{key:"ready",value:function(){this.isReady=!0,this.trigger("comscore:ready")}},{key:"onResourceReady",value:function(e){var t=this;window.COMSCORE?(this.video=e,this.listenToOnce(this.container,ye.CONTAINER_PLAY,this.onPlay),this.listenToOnce(this.container,ye.CONTAINER_STOP,this.onStop),this.listenToOnce(this.container,ye.CONTAINER_ENDED,this.onStop)):this.listenToOnce(this,"comscore:ready",(function(){return t.onResourceReady(e)}))}},{key:"onPlay",value:function(){var e={c2:6035227,c3:this.getSiteName(),c4:this.video.channel,c5:this.getVideoType(),c6:null,c10:"1|1",rn:Math.random()};window.location.host.match(/globotv\.globo\.com$/)&&(e.c6="Globotv - "+this.video.channel),COMSCORE.beacon(e)}},{key:"onStop",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,_n.WM_RESOURCE_READY,this.onResourceReady)}},{key:"getSiteName",value:function(){return this.siteName?this.siteName:this.getSubdomain(window.location.href)}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(Ws)||e.match(Ys);return t?t[1]:null}return null}},{key:"getVideoType",value:function(){return{ad:"09",live:"03"}[this.video.kind]||"02"}}]),n}(Ue),qs=function(){function e(t){Di(this,e),this.channel=t.channel,this.channelId=t.channel_id,this.program=t.program,this.programId=t.program_id,this.startTime=t.start_time,this.endTime=t.end_time,this.rawData=t}return Pi(e,[{key:"contains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>=this.startTime-t&&e<this.endTime+t}},{key:"toString",value:function(){var e={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},t=new Date(1e3*this.startTime).toLocaleDateString(void 0,e),n=new Date(1e3*this.endTime).toLocaleDateString(void 0,e);return"Program [".concat(this.channel).concat(this.channelId?" (".concat(this.channelId,")"):""," - ").concat(this.program).concat(this.programId?" (".concat(this.programId,")"):"",": ").concat(t," - ").concat(n,"]")}}]),e}(),Xs=function(){function e(t){Di(this,e),this._programs=t.programs||[],this._programs=this._programs.map((function(e){return new qs(e)})).sort((function(e,t){return t.endTime-e.endTime})),this.rawData=t}return Pi(e,[{key:"programs",get:function(){return this._programs}},{key:"latestProgram",get:function(){return this.programs[0]}}]),Pi(e,[{key:"getProgramForTime",value:function(e,t){return this.programs&&this.programs.find((function(n){return n.contains(e,t)}))}}]),e}(),Qs=kn.truncateTimeSeconds,Zs=kn.getCurrentTime,Js=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e))._playback=e.playback,i._throttledPositionUpdate=qa((function(){var e;return(e=i)._onPositionUpdate.apply(e,arguments)}),5e3,{trailing:!1}),i._url=i.epgApiUrl,i}return Pi(n,[{key:"name",get:function(){return"epg"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"epgApiUrl",get:function(){return"".concat(this.options.env.protocol,"://epg-api.video.globo.com/v2/programs")}},{key:"playback",get:function(){return this._playback}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}}]),Pi(n,[{key:"bindEvents",value:function(){this.stopListening(),this.listenTo(this.container.playback,_n.WM_RESOURCE_READY,this._onResourceReady)}},{key:"parseEPG",value:function(e){this._updating=!1,this._epg=new Xs(e),this.container.trigger(_n.DID_LOAD_EPG,{programs:this._epg.programs}),this._onPositionUpdate()}},{key:"updateEPG",value:function(){if(!this._updating){this._updating=!0;var e=Zs(this.innerPlayback),t=Qs(e-this.playback.getDuration()),n=Qs(e+1800);this._loadEpgData(t,n)}}},{key:"updateProgramForTime",value:function(e){if(!this._currentProgram||!this._currentProgram.contains(e)){var t=this._epg&&this._epg.getProgramForTime(e,5);this._currentProgram!==t&&(this._currentProgram=t,this.container.trigger(_n.DID_CHANGE_CURRENT_PROGRAM,{program:this._currentProgram}))}}},{key:"_onResourceReady",value:function(e){var t=e.isLive,n=e.transmission&&e.transmission.id;t&&n?(this._video=e,this._transmissionId=n,this.listenTo(this.playback,ye.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate),this.listenTo(this.playback,ye.PLAYBACK_SEEKED,this._onPositionUpdate),this.listenToOnce(this.playback,ye.PLAYBACK_PLAY,this.updateEPG)):ce.info(this.name,"skipping EPG loading (isLive=".concat(t,", transmissionId=").concat(n,")"))}},{key:"_loadEpgData",value:function(e,t){var n=this,i="".concat(this._url,"?transmission_id=").concat(this._transmissionId,"&start_time=").concat(e,"&end_time=").concat(t);return x.ajax({url:i}).then((function(e){return n.parseEPG(e)}),(function(e,t,i){ce.error(n.name,"could not load EPG:",i||t),!n._epg&&n.stopListening(n.playback)}))}},{key:"_onPositionUpdate",value:function(){if(this.innerPlayback){var e=Zs(this.innerPlayback);this.updateProgramForTime(e);var t=this._epg&&this._epg.latestProgram;!this._updating&&t&&t.endTime-e<=300&&this.updateEPG()}}}]),n}(Ue),el=".clappr-player#wp3-player-0 .poster {\n  cursor: pointer;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  visibility: visible;\n  opacity: 1;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .poster--hidden {\n    visibility: hidden;\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .poster:hover .poster__play-wrapper {\n    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.5)); }\n  .clappr-player#wp3-player-0 .poster__background {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: 50% 50%; }\n  .clappr-player#wp3-player-0 .poster__background-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.5); }\n  .clappr-player#wp3-player-0 .poster__play-wrapper {\n    width: 100%;\n    height: 30%;\n    text-align: center;\n    opacity: 0.97;\n    transition: filter 0.3s; }\n    .clappr-player#wp3-player-0 .poster__play-wrapper svg {\n      height: 100%;\n      display: inline; }\n";ur(el);var tl=kn.autoplayManager,nl=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).options.disableControlsOnPoster||(i.options.disableControlsOnPoster=!0),i.options.disableControlsOnPoster&&i.container.disableMediaControl(),i._clicked=!1,i.playButtonVisible=!0,i.render(),i}return Pi(n,[{key:"name",get:function(){return"poster"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"template",get:function(){return $e('<div class="poster__background"></div>\n<div class="poster__background-overlay"></div>\n<div class="poster__play-wrapper"></div>\n')}},{key:"disableImage",get:function(){return this.options.poster&&this.options.poster.disableImage}},{key:"attributes",get:function(){return{class:"poster"}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"posterImage",get:function(){if(!this.options.src||!this.options.sources||!this.options.sources.length)return null;var e=this.video&&this.video.posterImageUrls||{},t=Object.keys(e),n=this.container.currentSize.height;return e[t.find((function(e){return e>=n}))||t[t.length-1]]}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.container.playback,_n.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenTo(this.container,ye.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,ye.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,ye.CONTAINER_STOP,this.onStop),this.listenTo(this.container,ye.CONTAINER_ENDED,this.onStop)}},{key:"onVideoMetadataLoaded",value:function(e){this.video=e,this.authorizePosterImage=!e.adult||this.options.allowRestrictedContent,this.authorizePosterImage&&!this.disableImage&&this.addPosterImage()}},{key:"onBuffering",value:function(){this._clicked=!0,this.hidePlayButton()}},{key:"onPlay",value:function(){this.$el.addClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.enableMediaControl()}},{key:"onStop",value:function(){this._clicked=!1,this.show()}},{key:"show",value:function(){this.$el.removeClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.disableMediaControl(),this.options.poster&&this.options.poster.disablePlayButton||N.isChromecast||this.showPlayButton()}},{key:"hidePlayButton",value:function(){this.$playButton.hide(),this.playButtonVisible=!1}},{key:"showPlayButton",value:function(){this.playButtonVisible=!0,this.$playButton.show()}},{key:"clicked",value:function(){if(!this._clicked&&this.playButtonVisible)return this.container.playback.trigger(_n.WM_PLAY_REQUESTED),this.hidePlayButton(),this._clicked=!0,!1}},{key:"render",value:function(){var e=this,t=An.getStyleFrom(el,{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(t[0]),this.container.$el.append(this.el),this.$playButton=this.$el.find(".poster__play-wrapper"),this.$playButton.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"/>\n    </g>\n</svg>'),this.options.autoPlay&&this.hidePlayButton(),tl.onAutoplayAvailable((function(){return e.hidePlayButton()}),this.options,(function(){tl.isAutoPlayMutedAllowed(e.options)||e._clicked||e.showPlayButton()})),this}},{key:"addPosterImage",value:function(){var e=this.posterImage;if(this.container.currentSize){if(e){this.container.options.poster=e,this.imgEl=this.$(".poster__background"),this.imgEl.css({"background-image":"url("+e+")"}),this.$el.prepend(this.imgEl[0]);var t=this.container.$el.find("video");t.length&&(t[0].poster=e)}}else this.listenToOnce(this.container,ye.CONTAINER_RESIZE,this.addPosterImage)}}]),n}(Fe),il=".clappr-player#wp3-player-0 .spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 998;\n  width: 48px;\n  height: 48px;\n  margin: -24px 0 0 -24px;\n  cursor: default; }\n  .clappr-player#wp3-player-0 .spinner__svg {\n    line-height: 100%;\n    height: 100%;\n    width: 100%; }\n    .clappr-player#wp3-player-0 .spinner__svg--animated {\n      -webkit-animation: rotate-spinner-player 0.5s linear infinite normal forwards;\n              animation: rotate-spinner-player 0.5s linear infinite normal forwards; }\n  .clappr-player#wp3-player-0 .spinner--hidden {\n    display: none; }\n\n@-webkit-keyframes rotate-spinner-player {\n  0% {\n    transform: rotate(0deg); }\n  100% {\n    transform: rotate(360deg); } }\n\n@keyframes rotate-spinner-player {\n  0% {\n    transform: rotate(0deg); }\n  100% {\n    transform: rotate(360deg); } }\n";ur(il);var rl=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).render(),i}return Pi(n,[{key:"name",get:function(){return"spinner"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"template",get:function(){return $e('<figure class="spinner__svg">\n  <%= spinnerIcon %>\n</figure>\n')}},{key:"playback",get:function(){return this.container.playback}},{key:"attributes",get:function(){return{class:"spinner spinner--hidden"}}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.playback,_n.WM_PLAY_REQUESTED,this.start),this.listenTo(this.container,ye.CONTAINER_STATE_BUFFERING,this.start),this.listenTo(this.container,ye.CONTAINER_STATE_BUFFERFULL,this.onBufferfull),this.listenTo(this.container,ye.CONTAINER_PLAY,this.stop),this.listenTo(this.container,ye.CONTAINER_STOP,this.stop),this.listenTo(this.container,ye.CONTAINER_ERROR,this.stop)}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.stop(),this.stopListening(),this.enabled=!1}},{key:"start",value:function(){var e=this;this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.timeoutId=setTimeout((function(){e.$el.removeClass("spinner--hidden"),e.$el.addClass("spinner__svg--animated"),e.isVisible=!0,e.container.trigger(_n.WM_SPINNER_START),e.timeoutId=null}),300)}},{key:"stop",value:function(){this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.isVisible&&(this.isVisible=!1,this.$el.removeClass("spinner__svg--animated"),this.$el.addClass("spinner--hidden"),this.container.trigger(_n.WM_SPINNER_STOP))}},{key:"resetTimeoutToStart",value:function(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null}},{key:"disableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop&&(this.waitingTimeUpdateToStop=!1,this.stopListening(this.container,ye.CONTAINER_TIMEUPDATE))}},{key:"enableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop=!0,this.listenToOnce(this.container,ye.CONTAINER_TIMEUPDATE,this.stop)}},{key:"onBufferfull",value:function(){var e=this.playback&&this.playback.videoEl;e&&e.currentTime>0?this.stop():this.enableTimeUpdateObserver()}},{key:"render",value:function(){var e=this;this.$el.html(this.template({spinnerIcon:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M2.4 12c0-5.302 4.298-9.6 9.6-9.6.663 0 1.2.537 1.2 1.2 0 .663-.537 1.2-1.2 1.2-3.976 0-7.2 3.224-7.2 7.2 0 .663-.537 1.2-1.2 1.2-.663 0-1.2-.537-1.2-1.2z" fill="#FFF"/>\n    </g>\n</svg>'}));var t=An.getStyleFrom(il,{playerId:this.options.playerId});return this.container.$el.append(t[0]),this.container.$el.append(this.el),this.options.autoPlay?this.start():this.stop(),kn.autoplayManager.onAutoplayAvailable((function(){return e.start()}),this.options,(function(){kn.autoplayManager.isAutoPlayMutedAllowed(e.options)||e.stop()})),this}}]),n}(Fe),al=/([a-z0-9\.\-]*)\.globoi?\.com/,ol=/[w]*\.?(techtudo)\.com\.br/,sl="*null",ll=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).options.daxExtras||(i.options.daxExtras=i.options.daxextras),i.adError=!1,i.isReady=!1,i.started=!1,i.currentTime=0,i.embedScript(),i}return Pi(n,[{key:"name",get:function(){return"streamsense"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"waitForDFP",get:function(){return!N.isChromecast&&!N.isMobile}},{key:"isAdPlayback",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"currentTimeInMiliSeconds",get:function(){return this.toMillis(this.currentTime)}},{key:"streamsenseScript",get:function(){return"".concat(this.options.env.protocol,"://p.glbimg.com/vendor/libs/comScore-JS-6.3.1.181004.min.js")}},{key:"scorecardMeasurement",get:function(){return"".concat(this.options.env.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/p?c1=2&c2=6035227&ns_site=globo")}},{key:"contentType",get:function(){var e="live"===this.video.kind,t=!e&&this.video.duration/1e3/60;return e?"vc13":!e&&t>=10?"vc12":"vc11"}}]),Pi(n,[{key:"bindEvents",value:function(){var e=this;this.waitForDFP&&(this.listenTo(this.container,_n.DFP_CONTENT_RESUME,(function(){return e.checkAd(!1)})),this.listenTo(this.container,_n.DFP_AD_ERROR,(function(){return e.checkAd(!0)})),this.listenTo(this.container,_n.DFP_CONTENT_ENDED,this.bindPlaybackEvents)),this.listenTo(this.container.playback,_n.WM_RESOURCE_READY,this.onResourceReady)}},{key:"bindPlaybackEvents",value:function(){var e,t=this,n=(xi(e={},ye.CONTAINER_TIMEUPDATE,this.timeUpdate),xi(e,ye.CONTAINER_PLAY,this.onPlay),xi(e,ye.CONTAINER_PAUSE,this.onPause),xi(e,ye.CONTAINER_ERROR,this.onError),xi(e,ye.CONTAINER_SEEK,this.onSeek),xi(e,ye.CONTAINER_STATE_BUFFERING,this.onBuffering),e),i=xi({},ye.PLAYBACK_ENDED,this.onEnded);Object.keys(n).forEach((function(e){var i=n[e];t.stopListening(t.container,e,i),t.listenTo(t.container,e,i)})),Object.keys(i).forEach((function(e){var n=i[e];t.stopListening(t.container.playback,e,n),t.listenTo(t.container.playback,e,n)}))}},{key:"setupStart",value:function(e,t){var n=this;this.video=e,this.user=t,!this.isReady&&!window.ns_||!this.dfpReady&&this.waitForDFP?this.listenToOnce(this,_n.STREAMSENSE_READY,(function(){return n.setupStart(e,t)})):(this.start(),this.waitForDFP||this.bindPlaybackEvents())}},{key:"checkAd",value:function(e){this.adError=e,this.dfpReady=!0,!this.started&&this.setupStart(this.video,this.user),this.bindPlaybackEvents()}},{key:"onResourceReady",value:function(e,t){var n=this,i=e&&e.selectedResource&&e.selectedResource.hashData;this.isReady||window.ns_?this.hashData=i:this.listenToOnce(this,_n.STREAMSENSE_READY,(function(){return n.onResourceReady(i)})),this.setupStart(e,t)}},{key:"ready",value:function(){window.ns_?(this.isReady=!0,this.trigger(_n.STREAMSENSE_READY)):this.disable()}},{key:"embedScript",value:function(){var e=this;if(!window.ns_||!window.ns_.StreamingAnalytics){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",this.streamsenseScript),t.onload=function(){return e.ready()},t.onerror=function(){return e.ready()},document.head.appendChild(t)}}},{key:"start",value:function(){this.video&&ns_.StreamingAnalytics&&(this.streamSense=new ns_.StreamingAnalytics({liveEndpointURL:this.scorecardMeasurement}),this.setStreamSenseInitData(),this.setClip(),this.started=!0)}},{key:"setStreamSenseInitData",value:function(){this.streamSense.setLabels&&this.streamSense.setLabels({ns_st_mp:"Player",ns_st_mv:"7.2.0"}),this.streamSense.createPlaybackSession&&this.streamSense.createPlaybackSession({ns_st_pl:this.video.program+"-"+this.video.title})}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(al)||e.match(ol);return t?t[1]:null}return null}},{key:"setClip",value:function(){var e={short:"vc11",full:"vc12",live:"vc13",collaborative:"vc21",ad:"va00"}[this.contentType],t=this.container.options.dax&&this.container.options.dax.url,n=this.container.options.dax&&this.container.options.dax;n||(n=this.container.options.domain);var i=n||t&&new URL(t).hostname||document.location.hostname,r={c3:this.getSubdomain(i),c4:this.video.channel,ns_st_ty:e,ns_st_ct:this.contentType,ns_st_pr:this.video.program,ns_st_ep:this.video.title,ns_st_st:this.video.channel,ns_st_pu:"Globo",ns_st_ge:this.video.category,ns_st_ci:""+this.video.id,ns_st_cu:t||document.location.href,ns_st_cl:this.video.duration||0,ns_st_cn:1,ns_st_pn:1,ns_st_tp:1,ns_st_ia:sl,ns_st_ce:sl,ns_st_ddt:sl,ns_st_tdt:sl};Object.assign(r,this.options.daxExtras),this.streamSense.getPlaybackSession&&this.streamSense.getPlaybackSession().setAsset(r)}},{key:"timeUpdate",value:function(e){this.currentTime=e.current}},{key:"onPlay",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPlay(this.currentTimeInMiliSeconds)}},{key:"onPause",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPause(this.currentTimeInMiliSeconds)}},{key:"onEnded",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyEnd(this.currentTimeInMiliSeconds)}},{key:"onBuffering",value:function(){this.started&&!this.isAdPlayback&&this.video&&"Live"===this.video.type&&this.streamSense.notifyBufferStart(this.currentTimeInMiliSeconds)}},{key:"onSeek",value:function(){this.onPause()}},{key:"onError",value:function(){}},{key:"toMillis",value:function(e){return 1e3*e>>0}},{key:"destroy",value:function(){this.started&&this.streamSense.notifyEnd(this.currentTimeInMiliSeconds),Vi(Ui(n.prototype),"destroy",this).call(this)}}]),n}(Ue),ul=kn.Ajax,cl=kn.loadUrlAsImage,dl=kn.hexGrf,hl=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).url=i.webmediaApiHit,i}return Pi(n,[{key:"name",get:function(){return"webmedia_api_hit"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"type",get:function(){return N.isMobile?"mobile_browser":"desktop"}},{key:"environment",get:function(){return this.container.options.env}},{key:"webmediaApiHit",get:function(){return"prod"===this.environment.name||"local"===this.environment.name?"".concat(this.environment.protocol,"://stats.video.globo.com"):"".concat(this.environment.protocol,"://stats.video.dev.globoi.com")}}]),Pi(n,[{key:"bindEvents",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,_n.WM_RESOURCE_READY,this.fillIds),this.listenToOnce(this.container.playback,ye.PLAYBACK_PLAY,this.seed),this.listenToOnce(this.container.playback,ye.PLAYBACK_ENDED,this.bindEvents),this.listenToOnce(this.container.playback,ye.PLAYBACK_STOP,this.bindEvents)}},{key:"fillIds",value:function(e){this.videoId=e.id,this.programId=e.programId}},{key:"seed",value:function(){var e=this;if(this.videoId&&this.programId){var t="hitStats_".concat(+new Date),n="/hits/".concat(this.videoId,"?type=").concat(this.type,"&callback=").concat(t),i="".concat(this.url).concat(n);ul.jsonp({url:i,callbackName:t,timeout:5e3}).then((function(t){return e.hit(t)}),this.logError)}else this.logError("no argument was passed")}},{key:"hit",value:function(e){var t=e.data,n="".concat(t).concat(dl(t+"w3bM3d!A")),i="hitIncStats_".concat(+new Date),r="/hits/".concat(this.videoId,"/").concat(this.programId,"/").concat(n,"?type=").concat(this.type,"&callback=").concat(i),a="".concat(this.url).concat(r);cl(a)}},{key:"logError",value:function(e){ce.error(this.name,"Webmedia api hit was not possible because ",e)}}]),n}(Ue),pl=/\n?(\r?\n){2}/,fl=/\r?\n/,yl=/([0-9]{2}):([0-9]{2}):([0-9]{2}),([0-9]*)?/,gl=/[0-9:,]+/g,vl=/[^\S\r\n]+$/gm,ml=function(){function e(t){var n=this;Di(this,e),this.subtitleItems=[];var i=t.replace(vl,"").split(pl).filter((function(e){return n.isValid(e)}));this.subtitleItems=i.map((function(e){return n.parseSubtitle(e)}))}return Pi(e,[{key:"isCurrentSubtitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t>=e.start&&t<=e.end}},{key:"subtitleAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.subtitleItems[e]}},{key:"subtitleBy",value:function(e){for(var t=0,n=this.subtitleItems.length-1,i=Math.floor((t+n)/2);!this.isCurrentSubtitle(this.subtitleItems[i],e)&&t<n;)e>this.subtitleItems[i].start?t=i+1:n=i-1,i=Math.floor((t+n)/2);return this.isCurrentSubtitle(this.subtitleItems[i],e)?{index:i,subtitle:this.subtitleItems[i]}:void 0}},{key:"isValid",value:function(e){return e&&""!==e.trim()}},{key:"millisFromTimestamp",value:function(e){e=e.match(yl);var t=60*parseInt(e[1],10)*60*1e3;return t+=60*parseInt(e[2],10)*1e3,t+=1e3*parseInt(e[3],10),e[4]&&(t+=parseInt(e[4],10)),t}},{key:"parseSubtitle",value:function(e){var t=-1,n=-1,i="",r=e.split(fl);if(r.length>=2){var a=r[1].match(gl);if(a[0]&&(t=this.millisFromTimestamp(a[0])),a[1]&&(n=this.millisFromTimestamp(a[1])),-1!==t&&-1!==n)i=r.slice(2).join("<br>");return{start:t,end:n,content:i}}}}]),e}(),bl='.clappr-player#wp3-player-0 .subtitle {\n  background-color: rgba(0, 0, 0, 0.7);\n  border-radius: 0.1429em;\n  position: relative;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  color: #f1f1f1;\n  line-height: 1.4;\n  padding: 0.0714em 0.4286em 0.1429em;\n  margin: 0 auto; }\n  .clappr-player#wp3-player-0 .subtitle--hidden {\n    visibility: hidden;\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .subtitle__wrapper {\n    display: flex;\n    bottom: 0;\n    position: absolute;\n    width: 100%;\n    z-index: 993;\n    will-change: transform;\n    transition: transform 0.3s ease-out; }\n\n.clappr-player#wp3-player-0 .cast-enabled .subtitle__wrapper, .clappr-player#wp3-player-0 .cast-connecting .subtitle__wrapper {\n  display: none; }\n';ur(bl);var El=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).render(),i.createCachedElements(),i}return Pi(n,[{key:"attributes",get:function(){return{class:"subtitle__wrapper","data-subtitle":""}}},{key:"name",get:function(){return"subtitle"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"template",get:function(){return $e('<p class="subtitle"></p>\n')}}]),Pi(n,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,ye.CONTAINER_TIMEUPDATE,this.updateSubtitle),this.listenTo(this.container,_n.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,_n.WM_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,ye.CONTAINER_MEDIACONTROL_SHOW,(function(){return e.onMediaControlShow()})),this.listenTo(this.container,ye.CONTAINER_MEDIACONTROL_HIDE,(function(){return e.onMediaControlHide()})),this.listenTo(this.container,_n.WM_MASTERTOPIP,(function(){return e.$el.hide()})),this.listenTo(this.container,_n.WM_PIPTOMASTER,(function(){return e.$el.show()})),this.listenTo(this.container,ye.CONTAINER_RESIZE,this.onPlayerResize),this.listenToOnce(this.container,ye.CONTAINER_PLAY,this.onPlay)}},{key:"onPlay",value:function(){this.createCachedElements(),this.updateCurrentSize(),this.updateResponsiveStyle()}},{key:"updateCurrentSize",value:function(){this.currentWidth=this.container.el.clientWidth,this.currentHeight=this.container.el.clientHeight}},{key:"onSubtitleAvailable",value:function(e,t){this.availableSubtitles=e,this.availableContents=t.map((function(e){return e&&new ml(e)})),this.setInitialSubtitle()}},{key:"onMediaControlShow",value:function(){this.isMediaControlVisible=!0,this.updateMediaControlOffset()}},{key:"onMediaControlHide",value:function(){this.isMediaControlVisible=!1,this.updateMediaControlOffset()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.updateSize(),this.updateStyle()}},{key:"setInitialSubtitle",value:function(){var e=this.availableSubtitles.find((function(e){return e.selected}));this.onSubtitleChanged(e)}},{key:"onSubtitleChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.availableContents[e.id];t?(this.srtParser=t,this.currentIndex=0,this.$el.show(),this.$subtitle.addClass("subtitle--hidden")):(delete this.srtParser,delete this.currentIndex,this.$subtitle.html(""),this.$el.hide())}},{key:"updateSize",value:function(){kn.applySizeClass(this.$el,this.container.$el.width())}},{key:"updateStyle",value:function(){this.updateFontSize(),this.updateVerticalPosition(),this.updateMediaControlOffset()}},{key:"updateMediaControlOffset",value:function(){this.$el.css({transform:"translateY(".concat(this.getMediaControlOffset(),"px)")})}},{key:"updateFontSize",value:function(){this.$subtitle.css({fontSize:this.getFontSize()})}},{key:"updateVerticalPosition",value:function(){this.$el.css({bottom:this.getVerticalPosition()})}},{key:"updateSubtitle",value:function(e){if(this.srtParser){var t=1e3*e.current,n=this.srtParser.subtitleAt(this.currentIndex),i=this.srtParser.isCurrentSubtitle(n,t);if(!i){var r=this.currentIndex+1,a=this.srtParser.subtitleAt(r);if(i=this.srtParser.isCurrentSubtitle(a,t))this.currentIndex=r,n=a;else if(a&&(t>a.end||t<n.start)){var o=this.srtParser.subtitleBy(t);n=o&&o.subtitle,o&&(this.currentIndex=o.index),i=!!o}}n&&this.$subtitle.html()!=n.content&&this.$subtitle.html(n.content),i?this.$subtitle.removeClass("subtitle--hidden"):this.$subtitle.addClass("subtitle--hidden")}}},{key:"getMediaControlLowerHeight",value:function(){return this.$mediaControlPanelLower&&this.$mediaControlPanelLower.getBoundingClientRect().height||80}},{key:"getMediaControlOffset",value:function(){if(!this.isMediaControlVisible)return 0;var e=this.getMediaControlLowerHeight()-this.$el.css("bottom").replace("px","");return e<0?0:-e}},{key:"getVerticalPosition",value:function(){return this.currentHeight/12}},{key:"getFontSize",value:function(){return this.currentWidth<560?14:2.5*this.currentWidth/100}},{key:"createCachedElements",value:function(){this.$subtitle=this.$el.find(".subtitle");var e=".clappr-player#wp3-player-".concat(this.options.playerId," .media-control-panel__lower");this.$mediaControlPanelLower=document.querySelector(e)}},{key:"render",value:function(){var e=An.getStyleFrom(bl,{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.container.$el.append(this.el),this}}]),n}(Fe),kl=function(){function e(){Di(this,e),this.youboraTimersStopped=!1,this.metrics={},this.youboraTimers={},this.initYouboraTimers()}return Pi(e,[{key:"YOUBORA_SERVICES",get:function(){return["init","adInit","adStart","adJoinTime","adStop","joinTime"]}}]),Pi(e,[{key:"initYouboraTimers",value:function(){var e=this;this.YOUBORA_SERVICES.forEach((function(t){return e.youboraTimers[t]=0}))}},{key:"delta",value:function(e,t){var n=this.youboraTimers[e]-this.youboraTimers[t];return n>0?n:0}},{key:"onTimemark",value:function(e){var t=e.time,n=e.service,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="init"!==n&&this.youboraTimersStopped;-1===this.YOUBORA_SERVICES.indexOf(n)||r||(this.youboraTimers[n]=t,this.setAdMetrics(),this.setDFPMetrics(),this.setContentMetrics(),this.willSendParams(n)&&(this.setParams(i),this.initYouboraTimers()))}},{key:"setAdMetrics",value:function(){this.metrics.adInitTime=this.delta("adInit","init"),this.metrics.adStartTime=this.delta("adStart","adInit"),this.metrics.adJoinTime=this.delta("adJoinTime","adStart")}},{key:"setDFPMetrics",value:function(){this.metrics.dfpSetupTime=this.metrics.adStartTime+this.metrics.adJoinTime,this.metrics.dfpRunTime=this.delta("adStop","adInit"),this.metrics.dfpTime=this.metrics.dfpSetupTime?this.metrics.dfpSetupTime:this.metrics.dfpRunTime;var e=this.youboraTimers.adStop&&this.youboraTimers.adJoinTime;this.metrics.dfpWatchedTime=e?this.youboraTimers.adStop-this.youboraTimers.adJoinTime:0}},{key:"setContentMetrics",value:function(){this.metrics.contentStartTime=this.youboraTimers.adStop?this.delta("joinTime","adStop"):0,this.metrics.joinTime=this.delta("joinTime","init")-this.metrics.dfpWatchedTime}},{key:"willSendParams",value:function(e){var t="joinTime"===e;return this.youboraTimersStopped=t,t}},{key:"setParams",value:function(e){e.youboraMetrics=this.metrics}}]),e}(),Al=Ri.Video,_l=kn.getExperimentsList,Tl=kn.API_VERSION,wl=kn.getPlatformName,Sl=kn.toQueryString,Cl=kn.secondsToMillis,Rl=kn.getCookie,Il=kn.session,Dl=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).initValues(),i.video={},i.setVideoSessionID(),i.browser="".concat(N.name).concat(N.version),i.playerId=Ot.playerId,i.url="".concat(i.horizonHost,"/auth-session/activity/webmedia/watch"),i.domain=window.location.hostname.replace("www.","").split(".")[0],i.experiments=_l(i.options),i.youboraTimemark=new kl,i.externalData={},i.onDFPInit(),i}return Pi(n,[{key:"shouldIgnoreVolumeUpdate",value:function(e,t){var n=!this.isReady&&!this.container.playback.isPlaying();return null===e||n||!t}},{key:"setYouboraParams",value:function(e){var t=this.externalData&&this.externalData.youboraMetrics||{};Object.keys(t).forEach((function(n){e[n]=t[n]}))}},{key:"setVideoSessionID",value:function(){this.params.video_session_id=Il.getVideoSessionId(this.options.playerId)}},{key:"setDeviceInfo",value:function(){var e=this;Object.keys(this.options.deviceInfo).forEach((function(t){e.params["device_".concat(t)]=e.options.deviceInfo[t]}))}},{key:"getPercentage",value:function(e){return 0===e?e:e/this.session.duration*100}},{key:"initValues",value:function(){this.params={},this.dfpInit=0,this.bufftime=0,this.playRequestTime=0,this.isBuffering=!1,this.hasStartedClip=!1,this.isPlaying=!1}},{key:"name",get:function(){return"horizon"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"isLive",get:function(){return"live"===this.container.getPlaybackType()}},{key:"isAdsDisabled",get:function(){return this.options.skipDFP||!1}},{key:"currentTime",get:function(){return this.currentTimeValue},set:function(e){this.currentTimeValue=e}},{key:"horizonHost",get:function(){return"".concat(this.options.env.protocol,"://horizon.globo.com")}},{key:"isEncrypted",get:function(){var e=this.video&&this.video.encrypted;return void 0!==e?e:"unknown"}},{key:"playbackName",get:function(){var e=this.container,t=e&&e.playback;return t?t.innerPlaybackName||t.name||"":null}},{key:"bufferingTime",get:function(){this.isBuffering&&(this.bufftime+=re.now()-this.buffstarttime,this.buffstarttime=re.now());var e=this.bufftime;return this.bufftime=0,Math.trunc(e)}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenToOnce(this.container,ye.CONTAINER_PLAY,this.onFirstPlaying),this.listenToOnce(this.container.playback,_n.WM_PLAY_REQUESTED_READY,this.onPlayRequested),this.listenToOnce(this.container.playback,_n.WM_WROOM_AUTHORIZED,this.onWRAuthorized),this.listenToOnce(this.container.playback,_n.WM_WROOM_WAITING,this.onWRWaiting),this.listenTo(this.container,ye.CONTAINER_PLAY,this.play),this.listenTo(this.container,ye.CONTAINER_PAUSE,this.pause),this.listenTo(this.container,ye.CONTAINER_SEEK,this.seek),this.listenTo(this.container,ye.CONTAINER_TIMEUPDATE,this.timeUpdate),this.listenTo(this.container,ye.CONTAINER_ENDED,this.end),this.listenTo(this.container,ye.CONTAINER_DESTROYED,this.end),this.listenTo(this.container,ye.CONTAINER_STOP,this.end),this.listenTo(this.container,ye.CONTAINER_STATS_REPORT,this.onOldStatsReport),this.listenTo(this.container,ye.CONTAINER_ERROR,this.onError),this.listenTo(this.container,_n.WM_STATS_REPORTED,this.onStatsReport),this.listenTo(this.container,_n.WM_MUTED,this.onVolumeMuted),this.listenTo(this.container,_n.WM_UNMUTED,this.onVolumeUnmuted),this.listenTo(this.container,_n.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,_n.WM_LOCATION_AVAILABLE,this.onLocationAvailable),this.listenTo(this.container,_n.DFP_AD_ERROR,this.onAdError),this.listenTo(this.container,_n.DFP_AD_NOTSERVED,this.onAdNotServed),this.listenTo(this.container,_n.WM_BITRATE_CAP,this.onBitrateCap),this.listenTo(this.container,_n.DID_CHANGE_CURRENT_PROGRAM,this.onCurrentProgramUpdated),this.listenTo(this.container,_n.WM_GA_UNTRACKED_EVENT,this.onGoogleAnalyticsEventUntracked),this.listenTo(this.container.playback,_n.WM_STREAMING_DATA_LOADED,this.onStreamingDataLoaded),this.listenTo(this.container.playback,_n.WM_WROOM_AUTHORIZED,this.onWaitingRoomAuthorized),this.listenTo(this.container.playback,_n.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container.playback,_n.WM_RESOURCE_READY,this.startSession),this.listenTo(this.container.playback,_n.WILL_SELECT_FALLBACK_SOURCE,this.onFallbackSource),this.listenTo(this.container.playback,_n.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected)}},{key:"onPlayRequested",value:function(){this.playRequestTime=re.now(),this.isReady=!0}},{key:"onWRAuthorized",value:function(){this.params.wroom=0,this.ping()}},{key:"onWRWaiting",value:function(){this.params.wroom=1,this.ping()}},{key:"onMetadataLoaded",value:function(e){e&&(this.video=e,this.params.playback_id=e.id,this.params.subscriber_only=e.isSubscriberOnly,this.params.title=e.title,this.params.program=e.program,this.params.channel=e.channel,this.params.kind=e.kind)}},{key:"onStreamingDataLoaded",value:function(e){var t=e.pop,n=e.host;this.params.host=n,this.params.pop=t}},{key:"onWaitingRoomAuthorized",value:function(e){var t=e.iid;this.params.iid=t}},{key:"onFallbackSource",value:function(e){this.notifyAction(Cl(this.currentTime),"will_fallback_source",e)}},{key:"onFallbackSourceSelected",value:function(e){this.notifyAction(Cl(this.currentTime),"fallback_source_selected",e)}},{key:"onBitrateCap",value:function(e){this.params.cap_bitrate=e}},{key:"onDFPInit",value:function(){this.dfpInit=re.now()}},{key:"onAdNotServed",value:function(){this.params.dfp_status="not served"}},{key:"onAdError",value:function(){this.params.dfp_status="error"}},{key:"onOldStatsReport",value:function(e){this.isLive&&(this.params.dvr=e.dvr?1:0)}},{key:"onStatsReport",value:function(e){e.extra.bitratesHistory.length>0&&(this.params.nominal_bitrate=e.extra.bitratesHistory[e.extra.bitratesHistory.length-1].bitrate),this.params.avg_bitrate=Math.trunc(e.extra.bitrateWeightedMean),this.params.session_time=Math.trunc(e.timers.session),this.params.watch_time=Math.trunc(e.timers.watch)}},{key:"onFirstPlaying",value:function(){if(this.listenToOnce(this.container,ye.CONTAINER_STATE_BUFFERING,this.buffering),this.isAd&&!this.dfp_startup_time)return this.params.dfp_status="delivered",void(this.params.dfp_startup_time=Math.trunc(re.now()-this.dfpInit));this.params.startup_time=Math.trunc(re.now()-this.playRequestTime)}},{key:"onVolumeMuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(Cl(this.currentTime),{mute_status:!0})}},{key:"onVolumeUnmuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(Cl(this.currentTime),{mute_status:!1})}},{key:"onSubtitleChanged",value:function(e){this.hasStartedClip&&this.notify(Cl(this.currentTime),{subtitle_status:"none"===e.language?"disabled":"enabled",subtitle_language:e.language})}},{key:"onLocationAvailable",value:function(e){this.params.lat=e.latitude,this.params.long=e.longitude}},{key:"onCurrentProgramUpdated",value:function(e){void 0!==e.program&&(this.params.program=e.program),void 0!==e.channel&&(this.params.channel=e.channel)}},{key:"onGoogleAnalyticsEventUntracked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;this.params.ga_untracked_event=n}},{key:"play",value:function(){var e=this;this.isAd||(this.notifyPlayOrSeek(Cl(this.currentTime)),this.isPlaying||(this.breakTimerId=setInterval((function(){e.isPlaying=!0,e.notifyRelevantPoint(Cl(e.currentTime))}),15e3),this.ping()),this.doingSeek=!1,this.paused=!1)}},{key:"pause",value:function(){var e=this;this.pauseTimerId=setTimeout((function(){e.notifyAction(Cl(e.currentTime),"pause")}),100)}},{key:"seek",value:function(e){this.pauseTimerId&&(clearTimeout(this.pauseTimerId),this.pauseTimerId=null),this.doingSeek=!0}},{key:"timeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.currentTime=e.current}},{key:"onBufferStart",value:function(){this.isBuffering=!0,this.buffstarttime=re.now()}},{key:"onBufferEnd",value:function(){this.isBuffering=!1,this.bufftime+=re.now()-this.buffstarttime}},{key:"buffering",value:function(){this.onBufferStart(),this.listenToOnce(this.container,ye.CONTAINER_STATE_BUFFERFULL,this.bufferfull)}},{key:"bufferfull",value:function(){this.onBufferEnd(),this.listenToOnce(this.container,ye.CONTAINER_STATE_BUFFERING,this.buffering)}},{key:"end",value:function(){this.notifyAction(Cl(this.currentTime),"stop"),this.cancelBreakTimer(),this.cancelPing(),this.initValues()}},{key:"clear",value:function(){this.params.dfp_startup_time=null,this.params.dfp_status=null}},{key:"cancelBreakTimer",value:function(){clearInterval(this.breakTimerId),clearInterval(this.playOrSeekTimerId),this.breakTimerId=null,this.isPlaying=!1}},{key:"cancelPing",value:function(){this.isLive&&(clearInterval(this.pingTimerId),this.pingTimerId=null)}},{key:"startSession",value:function(){var e=(new Date).getTime().toString();this.lastNotifiedPoint=-1,this.totalActions=0,this.isLive&&(this.params.signal=this.video.selectedResource.signal,this.params.started_at=e),this.video.providerId&&(this.params.gst=Rl("GST")),this.experiments.length>0&&this.experiments[0]&&(this.params.experiment_1=this.experiments[0]),this.experiments.length>1&&this.experiments[0]&&(this.params.experiment_2=this.experiments[1]),this.video.duration&&(this.session={duration:this.video.duration,started_at:e,play:0,seek:0,pause:0,stop:0,mute:0,unmute:0,subtitle_enable:0,subtitle_disable:0,will_fallback_source:0,fallback_source_selected:0},this.doingSeek=!1,this.hasStartedClip=!0)}},{key:"notifyRelevantPoint",value:function(e){if(this.hasStartedClip){var t=this.getPercentage(e),n=5*Math.floor(t/5);n>this.lastNotifiedPoint?(this.notify(e),this.lastNotifiedPoint=n):this.verbose&&ce.info(this.name,"do not notify: ".concat(n," !> ").concat(this.lastNotifiedPoint))}}},{key:"notifyPlayOrSeek",value:function(e){var t=this,n=this.doingSeek;this.playOrSeekTimerId=setTimeout((function(){n?t.notifyAction(e,"seek"):t.notifyAction(e,"play")}),100)}},{key:"notifyAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.hasStartedClip){var i=++this.session[t];n["".concat(t,"_total")]=i,n["".concat(t,"_id_").concat(i)]=e,this.notify(e,n)}}},{key:"notify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.hasStartedClip){this.setCommonParams();var n=++this.totalActions,i=Mi(Mi(Mi({},t),this.params),{},xi({duration:this.session.duration,started_at:this.session.started_at,last_at:(new Date).getTime().toString(),btime:this.bufferingTime},"time_".concat(n),e));1===n&&this.setYouboraParams(i),this.sendRequest("".concat(this.url,"?").concat(Sl(i))),this.clear()}}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.isLive?"watchlive":"watch";this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/").concat(t),this.params.started_at=(new Date).getTime().toString(),this.params.error=e.code||"unknown",this.params.errorDescription=e.description||"unknown",this.setCommonParams(),this.sendRequest("".concat(this.url,"?").concat(Sl(this.params)))}},{key:"ping",value:function(){var e=this;this.isLive&&(this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/watchlive"),this.params.dvr=this.params.dvr||0,this.setCommonParams(),this.pingTimerId||(this.sendPing(),this.pingTimerId=setInterval((function(){e.sendPing()}),6e4)))}},{key:"sendPing",value:function(){this.params.btime=this.bufferingTime,this.params.n=++this.totalActions;var e=Object.assign({},this.params);1===this.totalActions&&this.setYouboraParams(e),this.sendRequest("".concat(this.url,"?").concat(Sl(e)))}},{key:"sendRequest",value:function(e){(new Image).src=e}},{key:"setCommonParams",value:function(){var e=this.video&&this.video.id||this.options.sources,t=this.video&&this.video.playerType||Al.getPlayerType();this.setVideoSessionID(),this.options.deviceInfo&&this.setDeviceInfo(),this.params.player_id=this.playerId,this.params.browser=this.browser,this.params.object="video:".concat(e),this.params.playback_id=this.params.playback_id||e,this.params.playback=this.playbackName,this.params.player_type=t,this.params.platform=wl(t),this.params.ads_disabled=this.isAdsDisabled,this.params.encrypted=this.isEncrypted,this.params.url=document.location.href,this.params.domain=this.domain,this.params.cdn=this.video.cdn,this.params.player_version="7.2.0",this.params.api_version=Tl}}]),n}(Ue),Ol={ambient:"dimension1",provider:"dimension21",userId:"dimension22",platform:"dimension36",platform_manufacturer:"dimension37",platform_model:"dimension38",arc:"dimension100",signal:"dimension101",id:"dimension102",channel:"dimension103",program:"dimension104",episode:"dimension105",domain:"dimension106",type:"dimension107",kind:"dimension108",length_range:"dimension109",gsat_op:"dimension110",pisp:"dimension111",channel_id:"dimension112",program_id:"dimension113",keep_watching:"dimension114",pub_err:"dimension115",exb_date:"dimension116",creation_date:"dimension117",length:"dimension118",auto_play:"dimension119",quality:"dimension120",player_version:"dimension121",schema_version:"dimension122",affiliate_code:"dimension123",service_id:"dimension124",dvr_status:"dimension128",current_subtitle:"dimension130",current_audio:"dimension131",EPG_program_id:"dimension132",EPG_program:"dimension133",EPG_channel_id:"dimension134",EPG_channel:"dimension135",video_session_id:"dimension136"},Pl={start:"metric100",seconds_watched:"metric101",complete:"metric102",bucket10:"metric103",bucket25:"metric104",bucket50:"metric105",bucket75:"metric106",bucket90:"metric107",bucket100:"metric108",seek:"metric109",load:"metric110",load_time:"metric111",skip_recap_displayed:"metric112",skip_recap_clicked:"metric113",skip_intro_displayed:"metric114",skip_intro_clicked:"metric115",quick_seek:"metric116",start_over_clicked:"metric117",auto_skip_recap:"metric118",start_over_displayed:"metric119"},xl=kn.session,Ll=kn.embedScript,Ml=kn.registerGlobal,Nl=kn.LocalStorage,Ul=kn.now,Bl=kn.seekStringToSeconds,Fl=kn.toDurationString,jl=kn.toLowerCase,Hl=kn.User,Vl="object"===Ii(window.onbeforeunload)?"beforeunload":"unload",Kl=1,zl=2,Gl=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).videoUA="prod"===i.options.env.name?"UA-296593-59":"UA-296593-62",i.productUA=i.options.ga&&i.options.ga.productUA||i.options.gaProductua,i.gaClientId=i.options.ga&&i.options.ga.productClientId,i.gaExtras=i.options.ga&&i.options.ga.extras||{},i.isPaused=!1,i.seekCounter=0,i.checkpoint=0,i.trackedPlayTime=0,i.loadTimer=0,i.sentBuckets={},Ml("ga"),window.ga?(i.getGAClientId(),i.setupAnalytics()):Ll("https://www.google-analytics.com/analytics.js").then((function(){i.getGAClientId(),i.setupAnalytics()})),i}return Pi(n,[{key:"name",get:function(){return"google_analytics"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"playback",get:function(){return this.container.playback}},{key:"isLive",get:function(){return"live"===this.container.getPlaybackType()}},{key:"schemaVersion",get:function(){return"2.0"}},{key:"inflatedPlaytime",get:function(){return this.isLive?300:this.video.duration/1e3*3}},{key:"shouldResetPlaytime",get:function(){return this.trackedPlayTime>this.inflatedPlaytime||this.trackedPlayTime<0}},{key:"oneDayInMiliseconds",get:function(){return 864e5}},{key:"playerTracker",get:function(){return"playerTracker".concat(this.options.playerId)}},{key:"productTracker",get:function(){return"productTracker".concat(this.options.playerId)}}]),Pi(n,[{key:"getGAClientId",value:function(){if(!this.gaClientId)if(window.GoogleAnalyticsObject&&window[window.GoogleAnalyticsObject]&&window[window.GoogleAnalyticsObject].getAll){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Gi(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(window[window.GoogleAnalyticsObject].getAll());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.get("trackingId")===this.productUA&&(this.gaClientId=n.get("clientId"),ce.info(this.name,"Getting GA product client id via GoogleAnalyticsObject"))}}catch(e){t.e(e)}finally{t.f()}}else{var i=Nl.loadRaw("wm.player._videoGa");if(!i){var r=new Date;r.setFullYear(r.getFullYear()+2),Nl.store("_videoGa",Hl.uid,r)}this.gaClientId=i,ce.info(this.name,"Player has not found a valid client id. It`s been generated by the player.")}}},{key:"setupAnalytics",value:function(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,this.createGATrackers()}},{key:"createGATrackers",value:function(){var e=this.mountGAInitialParameters();ga("create",this.videoUA,"auto",this.playerTracker,e),ga("".concat(this.playerTracker,".set"),"location",window.location.href),this.productUA&&(ga("create",this.productUA,"auto",this.productTracker,e),ga("".concat(this.productTracker,".set"),"location",window.location.href))}},{key:"mountGAInitialParameters",value:function(){var e={};return this.gaExtras&&this.gaExtras.uid&&(e.userId=this.gaExtras.uid),this.productUA&&(e.clientId=this.gaClientId),e}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,_n.DFP_CONTENT_RESUME,(function(){e.DFPError="false"})),this.listenTo(this.container,_n.DFP_AD_ERROR,(function(){e.DFPError="true"})),this.listenTo(this.playback,_n.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.playback,_n.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.playback,ye.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.playback,ye.PLAYBACK_PAUSE,this.onPause),this.listenTo(this.container,ye.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,ye.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,_n.WM_SETTINGS_LEVEL_SELECTED,this.onQualitySelected),this.listenTo(this.playback,ye.PLAYBACK_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,ye.PLAYBACK_STOP,this.onEnd),this.listenTo(this.playback,ye.PLAYBACK_ENDED,(function(){e.onEnd("complete")})),this.listenTo(this.container,ye.CONTAINER_DESTROYED,this.onEnd),this.listenTo(this.container,_n.WM_STATS_REPORTED,(function(t){e.watchedTime=t.timers.watch})),this.listenTo(this.container,_n.SKIP_BUTTON_CLICKED,this.onSkipButtonClicked),this.listenTo(this.container,_n.SKIP_BUTTON_SHOW,this.onSkipButtonDisplayed),this.listenTo(this.playback,ye.PLAYBACK_DVR,this.onDVR),this.listenTo(this.container,_n.DID_CHANGE_CURRENT_PROGRAM,this.onCurrentProgramUpdated),this.listenTo(this.container,_n.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.container,_n.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,_n.WILL_QUICK_SEEK,this.onQuickSeek),this.listenTo(this.container,_n.WILL_AUTO_SKIP_RECAP,this.onAutoSkipRecap),this.bindCustomEvents()}},{key:"bindCustomEvents",value:function(){this.boundOnEnd=this.onEnd.bind(this),window.addEventListener(Vl,this.boundOnEnd)}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.defineBuckets(this.video.duration),this.setVideoLayer(),this.layer.schema_version=this.schemaVersion,this.layer.gaAccounts=[this.videoUA],this.productUA&&this.layer.gaAccounts.push(this.productUA)}},{key:"onResourceReady",value:function(e,t){this.layer.video_session_id=xl.getVideoSessionId(this.options.playerId),t&&t.product&&(this.layer.pisp=t.product),this.video.geofencing&&e.transmission&&e.transmission.affiliate&&(this.layer.affiliate_code=e.transmission.affiliate.code)}},{key:"setVideoLayer",value:function(){var e={excerpt:"short",segment:"short",episode:"full"}[this.video.kind]||this.video.kind,t=this.options.resumeAt||Bl(),n=this.container.options.domain;this.layer={arc:this.video.isArchived?"acervo":"grade",signal:this.video.isSubscriberOnly?"fechado":"aberto",id:"".concat(this.video.id),channel:this.video.channel,program:this.video.program,episode:this.video.title,domain:n||document.location.hostname,type:e,kind:jl(this.video.category),length_range:Fl(this.video.duration),channel_id:this.video.channelId,program_id:this.video.programId,keep_watching:t>0?"true":"false",exb_date:this.video.exhibitedAt,creation_date:this.video.createdAt,length:Math.trunc(this.video.duration/1e3),auto_play:this.options.autoPlay+"",player_version:"7.2.0",start:0,service_id:this.video.serviceId,ambient:"web",platform:N.isMobile?"mobile":"desktop"},this.video.providerId&&this.video.isSubscriberOnly&&(this.layer.gsat_op=jl(this.options.payTvServiceProvider))}},{key:"onQualitySelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var t=e.find((function(e){return e.selected}))||e[0];this.levelSelected=t&&t.name}}},{key:"onPlay",value:function(){this.isFirstPlay()?this.isPaused=!1:this.isPaused&&(this.initialTrackedPlayTime=Ul(),this.track("play"),this.isPaused=!1)}},{key:"isFirstPlay",value:function(){return 0===this.layer.start&&(this.isLive&&(this.layer.dvr_status=this.container.isDvrEnabled()?"em-simulcast":"nao-disponivel"),this.playback.currentAudio&&(this.layer.current_audio=this.playback.currentAudio.language),this.playback.currentSubtitle&&(this.layer.current_subtitle=this.playback.currentSubtitle.language),this.layer.start=1,this.initialTrackedPlayTime=Ul(),this.track("start"),!0)}},{key:"calculatePlayTime",value:function(){if(this.initialTrackedPlayTime){var e=Ul(),t=(e-this.initialTrackedPlayTime)/1e3;this.isBuffering&&(this.calculateBufferTime(),this.onBufferStart()),this.trackedPlayTime=t-this.loadTimer,this.hasSentBuffer(),this.shouldResetPlaytime&&(this.sendToSentry({type:"GA ERROR: Not possible to calculate trackedPlayTime",description:"initialTrackedPlayTime = ".concat(this.initialTrackedPlayTime," / finalTrackedPlayTime = ").concat(e)}),this.trackedPlayTime=null),this.initialTrackedPlayTime=0}}},{key:"milestone",value:function(e){!this.isPaused&&0!==e&&this.checkpoint!==e&&e%60<1&&(this.calculatePlayTime(),1===this.layer.start&&this.track("milestone"),this.initialTrackedPlayTime=Ul()),this.checkpoint=e}},{key:"onSkipButtonDisplayed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this["".concat(t,"_displayed")]!==zl&&(this["".concat(t,"_displayed")]=Kl)}},{key:"onSkipButtonClicked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this["".concat(t,"_clicked")]!==zl&&(this["".concat(t,"_clicked")]=Kl)}},{key:"onAutoSkipRecap",value:function(){this.auto_skip_recap!==zl&&(this.auto_skip_recap=Kl)}},{key:"onCurrentProgramUpdated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program;this.layer.EPG_program=t&&t.program||null,this.layer.EPG_channel=t&&t.channel||null,this.layer.EPG_program_id=t&&t.programId||null,this.layer.EPG_channel_id=t&&t.channelId||null}},{key:"onAudioChanged",value:function(e){this.layer.current_audio=e&&e.language||null}},{key:"onSubtitleChanged",value:function(e){this.layer.current_subtitle=e&&e.language||null}},{key:"onQuickSeek",value:function(){this.didQuickSeek=!0}},{key:"onPause",value:function(){this.calculatePlayTime(),this.track("pause"),this.isPaused=!0}},{key:"onBuffering",value:function(){this.isBuffering||(this.isBuffering=!0,this.listenToOnce(this.container,ye.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.onBufferStart())}},{key:"onBufferStart",value:function(){this.loadInitialTime=Ul()}},{key:"onBufferFull",value:function(){this.calculateBufferTime(),this.isBuffering=!1}},{key:"calculateBufferTime",value:function(){this.loadEndTime=Ul(),this.loadEndTime>0&&this.loadInitialTime>0&&this.loadEndTime>this.loadInitialTime&&(this.loadTimer+=(this.loadEndTime-this.loadInitialTime)/1e3),this.loadInitialTime=0,this.loadEndTime=0}},{key:"hasSentBuffer",value:function(){this.loadTimer=0,this.layer.load=0,this.layer.load_time=0}},{key:"onSeek",value:function(){this.hasSeeked=!0,this.seekCounter++}},{key:"onEnd",value:function(e){!this.layer||this.layer&&0===this.layer.start||(this.layer.start=0,this.hasVideoCompleted="complete"===e,this.calculatePlayTime(),this.track("end"))}},{key:"destroy",value:function(){window.removeEventListener(Vl,this.boundOnEnd),Vi(Ui(n.prototype),"destroy",this).call(this),this.stopListening(),window.ga&&ga.getByName&&ga.getByName(this.playerTracker)&&ga("".concat(this.playerTracker,".remove")),window.ga&&ga.getByName&&ga.getByName(this.productTracker)&&ga("".concat(this.productTracker,".remove"))}},{key:"onTimeUpdate",value:function(e){this.currentTime=this.isLive?Math.trunc(this.watchedTime/1e3):e.current,this.milestone(Math.trunc(this.currentTime))}},{key:"onDVR",value:function(e){this.layer.dvr_status=e?"em-dvr":"em-simulcast"}},{key:"track",value:function(e){window.ga?(this.layer.event=e,this.layer.quality=this.levelSelected,this.layer.pub_err=this.DFPError,this.setGACustomMetrics(this.layer.event),this.useGAtracker()):this.container.trigger(_n.WM_GA_UNTRACKED_EVENT,{eventName:e})}},{key:"setGACustomMetrics",value:function(e){for(var t in this.GACustomMetrics={},this.GACustomMetrics[Pl.start]="start"===e&&1,this.GACustomMetrics[Pl.seconds_watched]=this.shouldSendPlayTime()&&this.trackedPlayTime,this.trackedPlayTime=0,this.GACustomMetrics[Pl.load]=this.shouldSendLoadTime()&&1,this.GACustomMetrics[Pl.load_time]=this.shouldSendLoadTime()&&this.loadTimer,this.GACustomMetrics[Pl.complete]="end"===e&&this.hasVideoCompleted&&1,this.setSkipButtonsCustomMetric(),this.didQuickSeek&&(this.GACustomMetrics[Pl.quick_seek]=1,this.didQuickSeek=!1),"milestone"!==e&&this.hasSeeked&&(this.hasSeeked=!1,this.GACustomMetrics[Pl.seek]=this.seekCounter,this.seekCounter=0),!this.isLive&&this.watchedTime&&this.calculateBuckets(this.watchedTime),this.GACustomMetrics)!1===this.GACustomMetrics[t]&&delete this.GACustomMetrics[t]}},{key:"setSkipButtonsCustomMetric",value:function(){var e=this;["skip_recap_displayed","skip_recap_clicked","skip_intro_displayed","skip_intro_clicked","start_over_displayed","start_over_clicked","auto_skip_recap"].forEach((function(t){e[t]===Kl&&(e.GACustomMetrics[Pl[t]]=1,e[t]=zl)}))}},{key:"useGAtracker",value:function(){this.setGACustomDimensions(this.playerTracker),this.sendtoGA(this.playerTracker),this.productUA&&(this.setGACustomDimensions(this.productTracker),this.sendtoGA(this.productTracker))}},{key:"setGACustomDimensions",value:function(e){var t=this;for(var n in Ol)void 0!==this.layer[n]&&ga("".concat(e,".set"),Ol[n],this.layer[n]);this.gaExtras&&Object.keys(this.gaExtras).forEach((function(n){t.gaExtras[n]&&ga("".concat(e,".set"),Ol[n]||n,t.gaExtras[n])}))}},{key:"sendtoGA",value:function(e){this.isLive?this.milestoneTime=this.milliToMinutes(this.watchedTime):this.milestoneTime=Math.trunc(this.currentTime/60),this.gaEventLabel="milestone"===this.layer.event?"minute - ".concat(this.milestoneTime):this.layer.episode,ga("".concat(e,".send"),"event","video",this.layer.event,this.gaEventLabel,this.GACustomMetrics),this.shouldSendLoadTime()&&this.hasSentBuffer()}},{key:"shouldSendPlayTime",value:function(){return"milestone"===this.layer.event||"pause"===this.layer.event||"end"===this.layer.event}},{key:"shouldSendLoadTime",value:function(){return"start"===this.layer.event||"play"===this.layer.event}},{key:"defineBuckets",value:function(e){this.videobuckets={};for(var t=0,n=[10,25,50,75,90,100];t<n.length;t++){var i=n[t];this.videobuckets["bucket".concat(i)]=i/100*e}}},{key:"calculateBuckets",value:function(e){for(var t in this.videobuckets)e>=this.videobuckets[t]&&!this.sentBuckets[t]&&(this.GACustomMetrics[Pl[t]]=1,this.sentBuckets[t]=1)}},{key:"milliToMinutes",value:function(e){return Math.trunc(e/6e4)}},{key:"sendToSentry",value:function(e){this.container.trigger("wm:ga:error",e)}}]),n}(Ue),Wl='.clappr-player#wp3-player-0 .waiting-room {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  background-color: #202020;\n  background-size: cover;\n  z-index: 999;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0; }\n  .clappr-player#wp3-player-0 .waiting-room__aligner {\n    flex-grow: 1;\n    width: 100%; }\n  .clappr-player#wp3-player-0 .waiting-room__main-text {\n    color: #cccccc;\n    font-family: "opensans-bold", sans-serif;\n    font-size: 18px;\n    width: 100%;\n    left: 0; }\n  .clappr-player#wp3-player-0 .waiting-room__countdown {\n    color: #cccccc;\n    font-family: "opensans-bold", sans-serif;\n    font-size: 18px;\n    margin: 0 auto;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n    line-height: 50px;\n    display: inline-block;\n    text-align: center; }\n';ur(Wl);var Yl=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).host=i.waitingRoomHost,i.rendered=!1,i.queryString="",i.response={},i}return Pi(n,[{key:"name",get:function(){return"waiting_room"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"template",get:function(){return $e('<div class="waiting-room__aligner">\n<div class="waiting-room__main-text">Estamos lotados! Tentaremos carregar a transmissão novamente em </div>\n<p class="waiting-room__countdown"></p>\n</div>\n')}},{key:"environment",get:function(){return this.container.options.env}},{key:"attributes",get:function(){return{class:"waiting-room"}}},{key:"waitingRoomHost",get:function(){return"prod"===this.environment.name||"local"===this.environment.name?"".concat(this.environment.protocol,"://wroom.video.globo.com/try"):"".concat(this.environment.protocol,"://wroom.video.dev.globoi.com/try")}}]),Pi(n,[{key:"bindEvents",value:function(){this.idPlayback=this.container.playback,this.listenTo(this.idPlayback,_n.WM_WROOM_AUTHORIZE,this.authorize)}},{key:"authorizeCallback",value:function(){this.idPlayback.trigger(_n.WM_WROOM_AUTHORIZED,this.response),this.idPlayback.setupAuthorized()}},{key:"authorize",value:function(e){var t=this;this.data=e,x.ajax({url:this.host+this.queryString,cache:!0,dataType:"jsonp",timeout:5e3,success:function(e){return t.onResponse(e)},error:function(){return t.authorizeCallback()}})}},{key:"onResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.response=e,e.pass||void 0===e.pass?(this.rendered&&this.$el.hide(),this.authorizeCallback()):(this.queryString="?token="+e.token,this.setRetryInterval(),this.render(),this.retryID=setTimeout(this.retry.bind(this),this.retryInterval),this.countdownID=setInterval(this.updateCountdown.bind(this),1e3),this.countdownStart=Date.now(),this.container.playback.trigger(_n.WM_WROOM_WAITING))}},{key:"retry",value:function(){clearInterval(this.retryID),clearInterval(this.countdownID),this.authorize(this.data),this.countdownStart=Date.now()}},{key:"updateCountdown",value:function(){var e=this.retryInterval-(Date.now()-this.countdownStart);this.$el.find(".waiting-room__countdown").text(this.toSeconds(e))}},{key:"isPip",value:function(e){e?this.$el.find(".waiting-room__main-text").fadeOut("fast"):this.$el.find(".waiting-room__main-text").fadeIn(1e3)}},{key:"toSeconds",value:function(e){return Math.floor(e/1e3)}},{key:"setRetryInterval",value:function(){this.retryInterval=Math.round(-2e4*Math.random())+5e4}},{key:"render",value:function(){if(!this.rendered){this.$el.html(this.template());var e=An.getStyleFrom(Wl,{baseUrl:this.options.baseUrl,playerId:this.options.playerId});return this.$el.append(e[0]),this.container.$el.append(this.el),this.rendered=!0,this}}}]),n}(Fe),$l=function e(){Di(this,e),Object.assign(e.prototype,$YB.adnalyzers.Generic.prototype)},ql=function(e){Ni(n,e);var t=Hi(n);function n(e,i){var r;Di(this,n),r=t.call(this);try{r.pluginName="clappr",r.pluginVersion="6.0.0-clappr-5.5.4-lib",r.container=e,r.playback=r.container.playback,r.tag=r.playback.$el&&r.playback.$el.find("video")[0]||r.playback.el,r.startMonitoring(e,i)}catch(e){$YB.error(e)}return r}return Pi(n,[{key:"getPlayhead",value:function(){return this.viewManager.isShowingAds||(this.playhead=this.playback.getStartTimeOffset()+this.container.getCurrentTime()),this.playhead}},{key:"getMediaDuration",value:function(){return this.container.getDuration()}},{key:"getIsLive",value:function(){return"live"===this.container.getPlaybackType()}},{key:"getResource",value:function(){var e=this.playback.options.sources;return"object"===Ii(e)?e.source:e}},{key:"getPlayerVersion",value:function(){return"Clappr"+Clappr.version}},{key:"getBitrate",value:function(){return this.bitrate||-1}},{key:"getThroughput",value:function(){return this.throughput||-1}},{key:"getRendition",value:function(){return this.rendition||""}}]),n}((function e(){Di(this,e),Object.assign(e.prototype,$YB.plugins.Generic.prototype)})),Xl=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).insertYouboraScript(),i}return Pi(n,[{key:"name",get:function(){return"youbora_plugin"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"youboraUrl",get:function(){return""}},{key:"youboraOptions",get:function(){return{}}},{key:"youboraPlugin",get:function(){return ql}}]),Pi(n,[{key:"insertYouboraScript",value:function(){var e=this;if(window.$YB)this.createPlugin();else{var t=document.createElement("script");t.src=this.youboraUrl,t.onload=function(){e.createPlugin()},document.body.appendChild(t)}}},{key:"createPlugin",value:function(){$YB.plugins.Clappr=this.youboraPlugin,this.plugin=new $YB.plugins.Clappr(this.container,this.youboraOptions)}},{key:"bindEvents",value:function(){this.listenTo(this.container.playback,ye.PLAYBACK_PLAY_INTENT,this.onPlayIntent),this.listenTo(this.container,ye.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,ye.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,ye.CONTAINER_STOP,this.onStop),this.listenTo(this.container,ye.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,ye.CONTAINER_ERROR,this.onError),this.listenTo(this.container,ye.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,ye.CONTAINER_STATE_BUFFERFULL,this.onBufferfull),this.listenTo(this.container,ye.CONTAINER_BITRATE,this.onBitrate),this.listenTo(this.container,ye.CONTAINER_SEEKED,this.onContainerSeeked),this.listenTo(this.container,ye.CONTAINER_SEEK,this.onContainerSeek)}},{key:"destroy",value:function(){this.plugin&&this.plugin.endedHandler(),Vi(Ui(n.prototype),"destroy",this).call(this)}},{key:"onPlayIntent",value:function(){this.plugin.playHandler()}},{key:"onPlay",value:function(){this.plugin.playingHandler()}},{key:"onPause",value:function(){this.plugin.pauseHandler()}},{key:"onStop",value:function(){this.plugin&&this.plugin.endedHandler()}},{key:"onEnded",value:function(){this.plugin.endedHandler()}},{key:"onContainerSeeked",value:function(){this.plugin&&(this.plugin.seekedHandler(),this.plugin.currentTime=null)}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.plugin&&this.plugin.errorHandler(e.code,e.description)}},{key:"onBuffering",value:function(){this.plugin&&this.plugin.bufferingHandler()}},{key:"onBufferfull",value:function(){this.plugin&&this.plugin.bufferedHandler()}},{key:"onBitrate",value:function(e){var t=this.container.playback.levels;if(this.plugin.bitrate=e.bitrate,this.plugin.throughput=e.bandwidth,t&&t.length){var n=t.filter((function(t){return e.level===t.id}));this.plugin.rendition=n&&n[0].label}}},{key:"onContainerSeek",value:function(e){this.plugin&&(this.plugin.currentTime=e,this.plugin.seekingHandler())}}]),n}(Ue),Ql=function(e){Ni(n,e);var t=Hi(n);function n(e,i){var r;return Di(this,n),(r=t.call(this)).adnalyzerVersion="6.0.0-IMA",r.startMonitoring(e,i),r}return Pi(n,[{key:"ad",get:function(){return this.ads.ad},set:function(e){this.ads.ad=e}}]),Pi(n,[{key:"getAdPosition",value:function(){return this.ad&&0!==this.ad.getAdPodInfo().getPodIndex()?-1===this.ad.getAdPodInfo().getPodIndex()?"post":"mid":"pre"}},{key:"getAdResource",value:function(){return this.ad?this.ad.getMediaUrl():Vi(Ui(n.prototype),"getAdResource",this).call(this)}},{key:"getAdTitle",value:function(){return this.ad?this.ad.getTitle():Vi(Ui(n.prototype),"getAdTitle",this).call(this)}},{key:"getAdDuration",value:function(){return this.ad?this.ad.getDuration():Vi(Ui(n.prototype),"getAdDuration",this).call(this)}},{key:"getMediaPlayhead",value:function(){return this.plugin.getPlayhead()}},{key:"getAdPlayhead",value:function(){var e=this.plugin.container.playback;return(void 0!==e.getDuration?e.getDuration():0)-(void 0!==e.getRemainingTime?e.getRemainingTime():0)||this.plugin.container.getCurrentTime()}}]),n}($l),Zl=function(e){Ni(n,e);var t=Hi(n);function n(e,i){var r;return Di(this,n),(r=t.call(this,e,i)).options=i,r.container=e,r.setupAdnalyzer(),r}return Pi(n,[{key:"setupAdnalyzer",value:function(){this.adnalyzer=new Ql(this,{})}},{key:"getPlayerVersion",value:function(){return n.playerVersion()}},{key:"endedHandler",value:function(){this.stopMonitoring(),Vi(Ui(n.prototype),"endedHandler",this).call(this)}}],[{key:"playerVersion",value:function(){return"7.2.0"}}]),n}(ql),Jl=kn.getCookie,eu=kn.User,tu=kn.session,nu=kn.toLowerCase,iu=kn.getExperimentsList,ru=kn.API_VERSION,au=kn.getPlatformName,ou=1,su=2,lu=3,uu=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).requestState=ou,i}return Pi(n,[{key:"name",get:function(){return"globo_youbora_plugin"}},{key:"youboraPlugin",get:function(){return Zl}},{key:"youboraUrl",get:function(){return"".concat(this.options.env.protocol,"://p.glbimg.com/vendor/libs/youboralib-v5.5.4.min.js")}},{key:"youboraOptions",get:function(){return{accountCode:"prod"===this.dashboardAccount?"globo":"globodev",enableAnalytics:!0,username:this.options.globoId||void 0,transactionCode:tu.getVideoSessionId(this.options.playerId),httpSecure:!this.options.httpOnly,enableInit:!0,media:{title:this.video.title,duration:this.video.duration/1e3,isLive:"live"===this.container.getPlaybackType(),resource:this.video.selectedResource&&this.video.selectedResource.url||""},ads:{campaign:this.options.adUnit||this.video.adUnit},extraParams:{param1:this.video.id,param2:this.video.programId,param3:this.video.channelId,param4:this.youboraPlugin.playerVersion(),param5:ru,param6:nu(this.video.kind),param7:document.location.hostname,param8:au(this.video.playerType),param9:iu(this.options).toString(),param10:this.options.token||(eu.hasGlbId()?Jl("GLBID"):void 0)}}}}]),Pi(n,[{key:"bindEvents",value:function(){Vi(Ui(n.prototype),"bindEvents",this).call(this),this.listenTo(this.container.playback,_n.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenTo(this.container.playback,_n.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenTo(this.container.playback,_n.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container,_n.DFP_FINISHED,Vi(Ui(n.prototype),"onEnded",this)),this.listenTo(this.container,_n.DFP_AD_LOADED,this.onAdLoaded),this.listenTo(this.container,_n.DFP_AD_STARTED,this.onAdStarted),this.listenTo(this.container,_n.DFP_AD_PAUSE,this.onAdPause),this.listenTo(this.container,_n.DFP_AD_RESUME,this.onAdResume),this.listenTo(this.container,_n.DFP_AD_CLICKED,this.onAdClicked),this.listenTo(this.container,_n.DFP_AD_SKIPPED,this.onAdSkipped),this.listenTo(this.container,_n.DFP_ALL_ADS_COMPLETED,this.onAllAdsCompleted),this.listenTo(this.container,_n.DFP_CONTENT_RESUME,this.onContentResume),this.listenTo(this.container,_n.DFP_AD_ERROR,this.onAdError),this.listenTo(this.container,_n.DFP_AD_NOTSERVED,this.onAdNotServed)}},{key:"createPlugin",value:function(){this.hasYouboraScript=!0,this._startYouBora()}},{key:"destroy",value:function(){var e=this;Vi(Ui(n.prototype),"destroy",this).call(this),this.plugin&&or((function(){e.plugin.endedHandler()}))}},{key:"onPlayRequestedReady",value:function(){this.plugin&&(this.plugin.playhead=0,this.plugin.playHandler())}},{key:"onResourceReady",value:function(e){this.setupAdHandler(),this.setupInfoManager(e)}},{key:"setupInfoManager",value:function(e){if(this.plugin&&this.plugin.infoManager){var t={transactionCode:tu.getVideoSessionId(this.options.playerId),media:{cdn:(e.cdn||"").toUpperCase(),resource:e.selectedResource.url},extraParams:{param11:"live"==this.video.kind?this.video.transmission.signal:"",param15:this.video.selectedResource&&this.video.selectedResource.resourcePOP||""}};this.plugin.infoManager.setOptions(t)}}},{key:"onVideoMetadataLoaded",value:function(e){this.hasVideoMetadata=!0,this.video=e,this.dashboardAccount=this.options.youbora?this.options.youbora.account:this.options.env.name,this._startYouBora()}},{key:"onPlaybackEnded",value:function(){(!this.container.options.dfp||this.hasAdBlock)&&Vi(Ui(n.prototype),"onEnded",this).call(this)}},{key:"setupAdHandler",value:function(){this.hasAdBlock||this.options.skipDFP||(this.requestState=su,this.adnalyzer&&this.adnalyzer.initAdHandler())}},{key:"onAdLoaded",value:function(e){this.adnalyzer.ad=e,this.requestState!==su&&this.adnalyzer.playAdHandler()}},{key:"onAdStarted",value:function(){this.requestState===su?(this.requestState=lu,this.adnalyzer.playAdHandler()):this.adnalyzer.joinAdHandler()}},{key:"onAdPause",value:function(){this.adnalyzer.pauseAdHandler()}},{key:"onAdResume",value:function(){this.adnalyzer.resumeAdHandler()}},{key:"onAdClicked",value:function(){this.adnalyzer.clickAdHandler()}},{key:"onAdSkipped",value:function(){this.adnalyzer.skipAdHandler()}},{key:"onContentResume",value:function(){this.hasAdBlock||this.adnalyzer.endedAdHandler()}},{key:"onAdError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.requestState!==ou?(this.adnalyzer.errorAdHandler(e.type,e.message),this.adnalyzer.endedAdHandler()):this.hasAdBlock=!0}},{key:"onAdNotServed",value:function(){this.requestState=lu;this.adnalyzer.noServedAdHandler("AD_NOT_SERVED","Ad not served")}},{key:"_startYouBora",value:function(){if(this.hasVideoMetadata&&this.hasYouboraScript){var e=!!this.options.token||eu.hasGlbId();!this.hasVideoMetadata||!this.video.isSubscriberOnly||e||this.options.env.name.startsWith("internal")?(Vi(Ui(n.prototype),"createPlugin",this).call(this),this.adnalyzer=this.plugin.adnalyzer):this.disable()}}}]),n}(Xl),cu="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==cu&&cu,du="URLSearchParams"in cu,hu="Symbol"in cu&&"iterator"in Symbol,pu="FileReader"in cu&&"Blob"in cu&&function(){try{return new Blob,!0}catch(e){return!1}}(),fu="FormData"in cu,yu="ArrayBuffer"in cu;if(yu)var gu=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],vu=ArrayBuffer.isView||function(e){return e&&gu.indexOf(Object.prototype.toString.call(e))>-1};function mu(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function bu(e){return"string"!=typeof e&&(e=String(e)),e}function Eu(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return hu&&(t[Symbol.iterator]=function(){return t}),t}function ku(e){this.map={},e instanceof ku?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Au(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function _u(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function Tu(e){var t=new FileReader,n=_u(t);return t.readAsArrayBuffer(e),n}function wu(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function Su(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:pu&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:fu&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:du&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():yu&&pu&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=wu(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):yu&&(ArrayBuffer.prototype.isPrototypeOf(e)||vu(e))?this._bodyArrayBuffer=wu(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):du&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},pu&&(this.blob=function(){var e=Au(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=Au(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(Tu)}),this.text=function(){var e,t,n,i=Au(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=_u(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},fu&&(this.formData=function(){return this.text().then(Iu)}),this.json=function(){return this.text().then(JSON.parse)},this}ku.prototype.append=function(e,t){e=mu(e),t=bu(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},ku.prototype.delete=function(e){delete this.map[mu(e)]},ku.prototype.get=function(e){return e=mu(e),this.has(e)?this.map[e]:null},ku.prototype.has=function(e){return this.map.hasOwnProperty(mu(e))},ku.prototype.set=function(e,t){this.map[mu(e)]=bu(t)},ku.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},ku.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),Eu(e)},ku.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),Eu(e)},ku.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),Eu(e)},hu&&(ku.prototype[Symbol.iterator]=ku.prototype.entries);var Cu=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Ru(e,t){if(!(this instanceof Ru))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,r=(t=t||{}).body;if(e instanceof Ru){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new ku(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new ku(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),Cu.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function Iu(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function Du(e,t){if(!(this instanceof Du))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new ku(t.headers),this.url=t.url||"",this._initBody(e)}Ru.prototype.clone=function(){return new Ru(this,{body:this._bodyInit})},Su.call(Ru.prototype),Su.call(Du.prototype),Du.prototype.clone=function(){return new Du(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new ku(this.headers),url:this.url})},Du.error=function(){var e=new Du(null,{status:0,statusText:""});return e.type="error",e};var Ou=[301,302,303,307,308];Du.redirect=function(e,t){if(-1===Ou.indexOf(t))throw new RangeError("Invalid status code");return new Du(null,{status:t,headers:{location:e}})};var Pu=cu.DOMException;try{new Pu}catch(e){(Pu=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),Pu.prototype.constructor=Pu}function xu(e,t){return new Promise((function(n,i){var r=new Ru(e,t);if(r.signal&&r.signal.aborted)return i(new Pu("Aborted","AbortError"));var a=new XMLHttpRequest;function o(){a.abort()}a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new ku,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;setTimeout((function(){n(new Du(r,i))}),0)},a.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){i(new Pu("Aborted","AbortError"))}),0)},a.open(r.method,function(e){try{return""===e&&cu.location.href?cu.location.href:e}catch(t){return e}}(r.url),!0),"include"===r.credentials?a.withCredentials=!0:"omit"===r.credentials&&(a.withCredentials=!1),"responseType"in a&&(pu?a.responseType="blob":yu&&r.headers.get("Content-Type")&&-1!==r.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof ku?r.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,bu(t.headers[e]))})),r.signal&&(r.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&r.signal.removeEventListener("abort",o)}),a.send(void 0===r._bodyInit?null:r._bodyInit)}))}xu.polyfill=!0,cu.fetch||(cu.fetch=xu,cu.Headers=ku,cu.Request=Ru,cu.Response=Du);var Lu=window.WM&&window.WM.Settings||{},Mu=(Lu.bitrateCapping&&Lu.bitrateCapping||{}).poolingInterval||6e5,Nu=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t},Uu=function(e){return e.json()},Bu=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).options.bitrateCappingDisabled&&i.disable(),i}return Pi(n,[{key:"name",get:function(){return"bitrate_capping"}},{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"playback",get:function(){return this.container.playback}},{key:"host",get:function(){return"".concat(this.options.env.protocol,"://wroom.video.globo.com/limits")}},{key:"isHlsjsPlayback",get:function(){return"id_playback"===this.playback.name&&"hls"===this.playback.innerPlaybackName}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.playback,_n.WM_RESOURCE_READY,this._onResourceReady),this.listenTo(this.playback,_n.WM_RESOURCE_ERROR,this._onResourceError),this.listenTo(this.playback,_n.WM_RESOURCE_SELECTED,this._onResourceSelected)}},{key:"disable",value:function(){Vi(Ui(n.prototype),"disable",this).call(this),this._currentBitrate&&this._capBitrate(0),this._stopPolling()}},{key:"enable",value:function(){Vi(Ui(n.prototype),"enable",this).call(this),this._bindPlaybackEvents(),this.playback.isPlaying()&&this._startPolling()}},{key:"_bindPlaybackEvents",value:function(){this.listenTo(this.playback,ye.PLAYBACK_PLAY,this._startPolling),this.listenTo(this.playback,ye.PLAYBACK_PAUSE,this._stopPolling),this.listenTo(this.playback,ye.PLAYBACK_STOP,this._stopPolling),this.listenTo(this.playback,ye.PLAYBACK_ENDED,this._stopPolling),this.listenTo(this.playback,ye.PLAYBACK_ERROR,this._stopPolling)}},{key:"_buildLimitsUrl",value:function(){var e=new URL(this.host),t=this.resource.selectedResource,n=(void 0===t?{}:t).resourcePOP;return n&&(e.search=new URLSearchParams({pop:n})),e}},{key:"_fetchLimits",value:function(){var e=this;ce.info(this.name,"fetching bitrate capping"),fetch(this._buildLimitsUrl()).then(Nu).then(Uu).then((function(t){var n=t.b;return e._capBitrate(n)})).catch((function(t){return ce.warn(e.name,"error fetching bitrate capping:",t)}))}},{key:"_capBitrate",value:function(e){if(this._currentBitrate!==e){e?ce.warn(this.name,"capping bitrate to ".concat(e)):ce.warn(this.name,"reset bitrate to unlimited");var t=this._getLevelFromBitrate(e);t>=0&&ce.warn(this.name,"capping level to ".concat(t)),this._currentBitrate=e,this._capLevelIndex(t),this.container.trigger(_n.WM_BITRATE_CAP,e)}else ce.info(this.name,"no limit changes")}},{key:"_capLevelIndex",value:function(e){this.isHlsjsPlayback&&this._capHlsjsLevel(e)}},{key:"_capHlsjsLevel",value:function(e){this._destroyCapLevelController(),this._updateHlsjsConfig(e),this._createCapLevelController()}},{key:"_createCapLevelController",value:function(){if(!this._currentBitrate&&this.playback.options.playback.hlsjsConfig.capLevelToPlayerSize){var e=this.playback.playback._hls,t=new e.config.capLevelController(e);t.onMediaAttaching(e),t.onManifestParsed(e),this.playback.playback._hls.coreComponents.push(t)}}},{key:"_destroyCapLevelController",value:function(){var e=this;this.playback.playback._hls.coreComponents=this.playback.playback._hls.coreComponents.filter((function(t){var n=e._isHlsjsCapLevelController(t);return n&&(t.unregisterListeners(),t.destroy()),!n}))}},{key:"_updateHlsjsConfig",value:function(e){this.playback.playback._hls.autoLevelCapping=e}},{key:"_isHlsjsCapLevelController",value:function(e){return e.constructor===this.playback.playback._hls.config.capLevelController}},{key:"_getLevelFromBitrate",value:function(e){if(!e)return-1;var t,n=[];return this.isHlsjsPlayback&&(n=this.playback.playback._hls.levels),(t=n.reduce((function(t,n,i){return n.bitrate<=e?i:t}),0))>n.length&&(t=-1),ce.debug(this.name,"selected level:",n[t]),t}},{key:"_onResourceSelected",value:function(e){this.resource=e}},{key:"_onResourceError",value:function(){ce.info(this.name,"resource error: disabling"),this.disable()}},{key:"_onResourceReady",value:function(e){e.isLive&&"globo"===e.cdn?(ce.info(this.name,"live video loaded, waiting for start"),this._bindPlaybackEvents()):(ce.info(this.name,"video/cdn does not allow bitrate capping"),this.disable())}},{key:"_startPolling",value:function(){var e=this;this._pollTimerId||(ce.info(this.name,"video playing, configuring polling"),this._pollTimerId=setInterval((function(){return e._fetchLimits()}),Mu),this._fetchLimits())}},{key:"_stopPolling",value:function(){this._pollTimerId&&(ce.info(this.name,"polling canceled"),clearInterval(this._pollTimerId),delete this._pollTimerId)}}]),n}(Ue),Fu=Oa(Pa((function(e,t){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(10));function r(e){return e&&e.__esModule?e:{default:e}}var a={AVOID_COOKIE_USAGE:!1,EVENTS_BUFFER_SIZE:100,EVENTS_SENDER_INTERVAL:1e4,EVENTS_SENDER_MIN_INTERVAL:5e3,EVENTS_SENDER_MAX_INTERVAL:2e4,EVENTS_DISCARD_AFTER_MSECS:36e5,EVENTS_BULK_SIZE:10,HORIZON_CALLBACK_STACK_LIMIT:1e3,HORIZON_TRACK_IDENTIFICATION_RESOURCE:"id",HORIZON_TRACK_HOST:"horizon-track.globo.com",HORIZON_CLIENT_UUID:r(n(2)).default.getResource("clientInstanceUUID",(0,i.default)()),HORIZON_REQUEST_ENCODING:"base64",HORIZON_SCHEMAS_HOST:"horizon-schemas.globo.com",IDENTIFICATION_LOAD_RETRY_AFTER_MSECS:5e3,PACKAGE_VERSION:"1.6.0",SCHEMA_VALIDATOR_SCRIPT_URL:"s3.glbimg.com/cdn/libs/tv4/1.3.0/tv4.min.js",SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES:2,SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS:1e4,USE_HTTPS:!0},o={avoidCookieUsage:function(){a.AVOID_COOKIE_USAGE=!0},useHTTPOnly:function(){a.USE_HTTPS=!1},useQAConfiguration:function(){a.HORIZON_TRACK_HOST="horizon-track.qa.globoi.com",a.HORIZON_SCHEMAS_HOST="horizon-schemas.qa.globoi.com",a.HORIZON_REQUEST_ENCODING="json"}};t.default=Object.assign(a,o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i={COMPONENT_NOT_READY:"[Horizon] Component is not ready.",COMPONENT_UNAVAILABLE:"[Horizon] Class or function is required.",DUPLICATED_SCHEMA:"[Horizon] Duplicated schema.",ERROR_LOADING_RESOURCE:"[Horizon] Failed to load resource.",INVALID_AUTH_TOKEN:"[Horizon] Invalid authorization token.",INVALID_DATA:"[Horizon] Invalid data.",INVALID_DATE:"[Horizon] Invalid date-time RFC 3339 format.",INVALID_ENVIRONMENT:"[Horizon] Invalid environment value.",INVALID_FORMAT:"[Horizon] Invalid event format.",INVALID_REQUEST:"[Horizon] Invalid request.",INVALID_TIMESTAMP:"[Horizon] Invalid timestamp.",INVALID_VERSION_FORMAT:"[Horizon] Invalid version format.",LIMIT_EXCEEDED:"[Horizon] Resource limit exceeded.",MUST_BE_DEFINED:"[Horizon] Parameter or argument must be defined",SCHEMA_VALIDATOR_ERROR_LOADING:"[Horizon] Could not load SchemaValidator.",UNSUPPORTED_TYPE:"[Horizon] Unsupported type.",UNSUPPORTED_TENANT:"[Horizon] Unsupported tenant.",UNSUPPORTED_ENCODER:"[Horizon] Unsupported encoder.",USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE:"[Horizon] Can not set or remove a logged user when AVOID_COOKIE_USAGE is not enabled."},r={mustBeDefined:function(e){throw new Error(i.MUST_BE_DEFINED+": "+e+".")}};t.default=Object.assign(i,r)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return window.horizonResources=window.horizonResources||{},window.horizonResources};t.default={getContext:i,getResource:function(e,t){var n=i();return n[e]=n[e]||t,n[e]}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={execAsync:function(e,t){setTimeout((function(){return e(t)}),1)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={request:function(e,t,n,i){var r=new XMLHttpRequest;r.open(e,t,!0),r.onload=function(){return r.status<400?n(JSON.parse(r.response)):i(r.response)},r.onerror=i,r.send()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(3)),a=u(n(2)),o=u(n(1)),s=u(n(4)),l=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){return a.default.getResource("idManager",{clientIDs:{}})},d=["GLBID","GST"],h={STATE_READY:"statusReady",STATE_NOT_READY:"statusNotReady",STATE_LOADING:"statusLoading",STATE_SCHEDULED:"statusScheduled",STATE_ERROR:"statusError"},p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=n?h.STATE_READY:h.STATE_NOT_READY,this.url=t,this.bypass=n,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}return i(e,[{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===h.STATE_READY)return e(c().clientIDs);if(this.callbacks.onReady.length>l.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(o.default.LIMIT_EXCEEDED+" IDManager callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===h.STATE_ERROR?e():this.callbacks.onError.push(e)}},{key:"getAsKeyValue",value:function(){if(!this.isReady())throw new Error(""+o.default.COMPONENT_NOT_READY);if(this.bypass)return"";var e=c();return Object.keys(e.clientIDs).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e.clientIDs[t])})).join("&")}},{key:"isReady",value:function(){return this.state===h.STATE_READY}},{key:"retry",value:function(){var e=this;this.state=h.STATE_SCHEDULED,this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=h.STATE_NOT_READY,e.load()}),l.default.IDENTIFICATION_LOAD_RETRY_AFTER_MSECS)}},{key:"setLoggedUser",value:function(e,t){if(-1===d.indexOf(e))throw Error(o.default.INVALID_AUTH_TOKEN);c().clientIDs[e]=t}},{key:"removeLoggedUser",value:function(){var e=c();d.forEach((function(t){return delete e.clientIDs[t]}))}},{key:"load",value:function(){var e=this,t=c();if(this.state===h.STATE_NOT_READY){this.state=h.STATE_LOADING,this.callbacks.onLoad.forEach((function(e){return e()}));var n=l.default.USE_HTTPS?"https://":"http://";s.default.request("GET",""+n+this.url,(function(n){t.clientIDs=Object.assign(t.clientIDs||{},n),e.state=h.STATE_READY,e.callbacks.onReady.forEach((function(e){return r.default.execAsync(e,t.clientIDs)}))}),(function(t){e.state=h.STATE_ERROR,e.callbacks.onError.forEach((function(e){return r.default.execAsync(e,t)})),e.retry()}))}}}]),e}(),f=function(e){var t=c();if(!t.instance){var n=e||l.default.HORIZON_TRACK_HOST+"/"+l.default.HORIZON_TRACK_IDENTIFICATION_RESOURCE,i=!1===l.default.AVOID_COOKIE_USAGE;t.instance=new p(n,i)}return t.instance};t.default={getInstance:f,getContextManager:c,setLoggedUser:function(e,t){if(!l.default.AVOID_COOKIE_USAGE)throw Error(o.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);e&&0!==e.length||o.default.mustBeDefined("tokenName"),t&&0!==t.length||o.default.mustBeDefined("tokenValue"),f().setLoggedUser(e,t)},removeLoggedUser:function(){if(!l.default.AVOID_COOKIE_USAGE)throw Error(o.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);f().removeLoggedUser()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IDManager=t.Settings=t.HorizonClient=void 0,n(7);var i=o(n(9)),r=o(n(0)),a=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var s={setLoggedUser:a.default.setLoggedUser,removeLoggedUser:a.default.removeLoggedUser};t.HorizonClient=i.default,t.Settings=r.default,t.IDManager=s},function(e,t,n){n(8).polyfill()},function(e,t,n){function i(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a=Object.keys(Object(r)),o=0,s=a.length;o<s;o++){var l=a[o],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(n[l]=r[l])}}return n}e.exports={assign:i,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=d(n(0)),a=d(n(13)),o=d(n(1)),s=d(n(15)),l=d(n(26)),u=d(n(27)),c=d(n(5));function d(e){return e&&e.__esModule?e:{default:e}}var h={READY:"stateReady",UNLOADED:"stateNotReady",LOADING:"stateLoading"},p=["web","instant-article","app"],f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"web";if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tenant=t||u.default.getTenant()||o.default.mustBeDefined("tenant"),this.deviceGroup=n||u.default.getDeviceGroup()||o.default.mustBeDefined("deviceGroup"),this.defaultContentType=d,-1===p.indexOf(f))throw Error(o.default.INVALID_ENVIRONMENT);this.environment=f,this.validator=a.default,this.clientVersion=r.default.PACKAGE_VERSION,this.state=h.UNLOADED,this.referer=document.referrer;var y=null,g=null,v=null;this.setSchemasProvider=function(e){y=e},this.getSchemasProvider=function(){if(!y){var e=l.default.getInstance();i.setSchemasProvider(e)}return y},this.setEventBus=function(e){g=e},this.getEventBus=function(){if(!g){var e=s.default.getInstance(i.tenant,i.deviceGroup,i.environment,i.getIdManager());i.setEventBus(e)}return g},this.setIdManager=function(e){v=e},this.getIdManager=function(){if(!v){var e=c.default.getInstance();i.setIdManager(e)}return v},this.isReady=function(){return!!y&&!!v&&i.validator.isReady()&&y.isReady()&&v.isReady()},window.addEventListener("beforeunload",(function(){i.unload()}))}return i(e,[{key:"useDefaultContentType",value:function(e){this.defaultContentType=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"setReferer",value:function(e){this.referer=e||document.referrer}},{key:"unload",value:function(){this.flush()}},{key:"getScopeInfo",value:function(){return{url:document.location.href,actionTs:+Date.now(),horizonClientVersion:this.clientVersion,horizonClientReferer:this.referer}}},{key:"validateBeforeEnqueue",value:function(e){var t=this.getSchemasProvider().get(e.id,e.version);this.validator.validateFor(e,t)}},{key:"onReady",value:function(e){this.validator.isReady()?this.getSchemasProvider().isReady()?this.getIdManager().isReady()?(this.state=h.READY,e()):(this.state=h.LOADING,this.getIdManager().onReady(e),this.getIdManager().load()):(this.state=h.LOADING,this.getSchemasProvider().onReady(e),this.getSchemasProvider().load()):(this.state=h.LOADING,this.validator.onReady(e),this.validator.load())}},{key:"flush",value:function(){var e=this;this.isReady()?this.getEventBus().flush():this.onReady((function(){return e.flush()}))}},{key:"send",value:function(e){this.validator.validateArgs(e),this.sendWithInfo(e,this.getScopeInfo())}},{key:"sendWithInfo",value:function(e,t){var n=this;if(!this.isReady())return this.state===h.UNLOADED&&this.flush(),void this.onReady((function(){return n.sendWithInfo(e,t)}));this.validateBeforeEnqueue(e);var i=Object.assign({},e,t);i.contentType||(this.defaultContentType||o.default.mustBeDefined("contentType"),i.contentType=this.defaultContentType),this.getEventBus().enqueue(i)}}]),e}();t.default=f},function(e,t,n){var i=n(11),r=n(12);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||r(o)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=s(n(14)),a=s(n(1)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var l={ready:[]},u=["url"],c=function(){return!!window.tv4},d=function(e){return null===e||isNaN(e)&&!isNaN(Date.parse(e))?null:a.default.INVALID_DATE};t.default={validateFor:function(e,t){if(!c())throw new Error(a.default.ERROR_LOADING_RESOURCE+" Validator is not ready.");if(!t)throw new Error(a.default.INVALID_DATA+" Argument: schema.");if(!/\d+\.\d+/.test(e.version))throw new Error(a.default.INVALID_VERSION_FORMAT);if(!tv4.validate(e.properties,t))throw new Error(a.default.INVALID_DATA+" "+e.id+" "+e.version+". "+tv4.error)},validateArgs:function(e){var t=Object.prototype.hasOwnProperty;if(!(e&&t.call(e,"id")&&t.call(e,"version")&&t.call(e,"properties")))throw new Error(a.default.INVALID_FORMAT+" Missing properties: "+JSON.stringify(e));if("string"!=typeof e.id||"string"!=typeof e.version||"object"!==i(e.properties))throw new Error(a.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(e));if(u.filter((function(t){return e[t]&&"string"!=typeof e[t]})).length>0)throw new Error(a.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(e));if(e.id.length<2||e.version.length<3)throw new Error(a.default.INVALID_FORMAT+" Invalid property size: "+JSON.stringify(e));var n=Object.assign({},e);delete n.id,delete n.version,delete n.properties,delete n.contentType;var r=Object.keys(n);if(r.length>0&&!r.every((function(e){return-1!==u.indexOf(e)})))throw new Error(a.default.INVALID_FORMAT+" Extra keys aren't allowed: "+JSON.stringify(n))},tv4IsValidData:d,isReady:c,onReady:function(e){if(c())return e();if(l.ready.length>o.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(a.default.LIMIT_EXCEEDED+" Validator callback stack.");return l.ready.unshift(e)},load:function(){if(!r.default.isDefined("tv4")){var e=(o.default.USE_HTTPS?"https://":"http://")+o.default.SCHEMA_VALIDATOR_SCRIPT_URL;(0,r.default)([e],"tv4",{async:!0,numRetries:o.default.SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES,success:function(){tv4.addFormat("date-time",d),l.ready.forEach((function(e){return e()}))},error:function(e){throw new Error(a.default.SCHEMA_VALIDATOR_ERROR_LOADING+" "+e)}})}}}},function(e,t,n){var i,r,a,o;o=function(){var e=function(){},t={},n={},i={};function r(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function o(t,n,i,r){var a,s,l=document,u=i.async,c=(i.numRetries||0)+1,d=i.before||e,h=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(t)?((s=l.createElement("link")).rel="stylesheet",s.href=h,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(s=l.createElement("img")).src=h:((s=l.createElement("script")).src=t,s.async=void 0===u||u),s.onload=s.onerror=s.onbeforeload=function(e){var l=e.type[0];if(a)try{s.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<c)return o(t,n,i,r)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,l,e.defaultPrevented)},!1!==d(t,s)&&l.head.appendChild(s)}function s(e,n,i){var s,l;if(n&&n.trim&&(s=n),l=(s?i:n)||{},s){if(s in t)throw"LoadJS";t[s]=!0}function u(t,n){!function(e,t,n){var i,r,a=(e=e.push?e:[e]).length,s=a,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--a||t(l)},r=0;r<s;r++)o(e[r],i,n)}(e,(function(e){a(l,e),t&&a({success:t,error:n},e),r(s,e)}),l)}if(l.returnPromise)return new Promise(u);u()}return s.ready=function(e,t){return function(e,t){var r,a,o,s=[],l=(e=e.push?e:[e]).length,u=l;for(r=function(e,n){n.length&&s.push(e),--u||t(s)};l--;)a=e[l],(o=n[a])?r(a,o):(i[a]=i[a]||[]).push(r)}(e,(function(e){a(t,e)})),s},s.done=function(e){r(e,[])},s.reset=function(){t={},n={},i={}},s.isDefined=function(e){return e in t},s},r=[],void 0===(a="function"==typeof(i=o)?i.apply(t,r):i)||(e.exports=a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(16);var r=d(n(2)),a=d(n(17)),o=d(n(0)),s=d(n(1)),l=d(n(22)),u=d(n(24)),c=d(n(25));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){return r.default.getResource("bus",{})},p=function(){function e(t,n,i,r,a){var d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTenant=t||s.default.mustBeDefined("tenant"),this.instanceID=n||s.default.mustBeDefined("instanceID"),this.deviceGroup=i||s.default.mustBeDefined("deviceGroup"),this.environment=r||s.default.mustBeDefined("environment"),this.queue=new u.default(o.default.EVENTS_BUFFER_SIZE),this.idManager=a,this.dispatchNumber=1,this.actionCounter=0,(new c.default).every(o.default.EVENTS_SENDER_INTERVAL).call((function(){d.queue=d.filterQueue();var e=d.prepareRequest();d.dispatch(e,o.default.HORIZON_REQUEST_ENCODING)||e.actions.forEach((function(e){return d.enqueue(e)}))})).call(l.default.applyThrottlingPolicy).start()}return i(e,[{key:"setMaxQueueSize",value:function(e){this.queue=u.default.fromArray(this.queue.items,e)}},{key:"filterQueue",value:function(){var e=+Date.now()-o.default.EVENTS_DISCARD_AFTER_MSECS;return this.queue.filter((function(t){return t.actionTs>e}))}},{key:"prepareRequest",value:function(){var e=this.queue.splice(0,o.default.EVENTS_BULK_SIZE);return this.actionCounter+=e.length,{horizonClientUUID:this.instanceID,horizonClientTenant:this.currentTenant,horizonClientTs:Date.now(),horizonClientType:"js",horizonClientDeviceGroup:this.deviceGroup,horizonDispatchNumber:this.dispatchNumber,horizonActionCounter:this.actionCounter,horizonEnvironment:this.environment,actions:e}}},{key:"isValidRequest",value:function(e){if(!e||e&&!e.actions)throw new Error(s.default.INVALID_REQUEST);return e.actions.length>0}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",n=o.default.USE_HTTPS?"https://":"http://",i=this.idManager.getAsKeyValue(),r=i?"?"+i:"",s=""+n+l.default.applyDestinationPolicy()+"/event/"+this.currentTenant+r,u=a.default.get(t);if(!this.isValidRequest(e))return!1;this.dispatchNumber+=1;var c=u(e);return navigator.sendBeacon(s,c)}},{key:"enqueue",value:function(e){if(!e.actionTs)throw new Error(s.default.INVALID_TIMESTAMP);this.queue.push(e)}},{key:"flush",value:function(){for(;this.queue.length>0;){this.queue=this.filterQueue();var e=this.prepareRequest();this.dispatch(e,o.default.HORIZON_REQUEST_ENCODING)}}},{key:"length",get:function(){return this.queue.length}}]),e}();t.default={getInstance:function(e,t,n,i){var r=h(),a=e+"-"+t;return r[a]||(r[a]=new p(e,o.default.HORIZON_CLIENT_UUID,t,n,i)),r[a]},reset:function(e,t){e&&0!==e.length||s.default.mustBeDefined("tenant"),t&&0!==t.length||s.default.mustBeDefined("deviceGroup");var n=e+"-"+t;delete h()[n]},getContextBus:h}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){return"string"==typeof e},r=function(e){return e instanceof Blob};(function(){(function(){return"navigator"in this&&"sendBeacon"in this.navigator}).call(this)||("navigator"in this||(this.navigator={}),this.navigator.sendBeacon=function(e,t){var n=this.event&&this.event.type,a="unload"===n||"beforeunload"===n,o="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",e,!a),o.withCredentials=!0,o.setRequestHeader("Accept","*/*"),i(t)?(o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.responseType="text/plain"):r(t)&&t.type&&o.setRequestHeader("Content-Type",t.type);try{o.send(t)}catch(e){return!1}return!0}.bind(this))}).call("object"===("undefined"==typeof window?"undefined":n(window))?window:{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(18)),r=o(n(21)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var s={base64:function(e){var t=new FormData;return t.append("data",i.default.encode(r.default.encode(JSON.stringify(e)))),t.append("encoding","base64"),t},json:function(e){return JSON.stringify(e)}};t.default={get:function(e){if(!(e in s))throw new Error(a.default.UNSUPPORTED_ENCODER+" Invalid "+e+" encoder.");return s[e]}}},function(e,t,n){(function(e,i){var r;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(a){var o=("object"==typeof e&&e&&e.exports,"object"==typeof i&&i);o.global!==o&&o.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new s(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,d={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,i,r,a=e.length%3,o="",s=-1,c=e.length-a;++s<c;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,i=e.charCodeAt(++s),o+=u.charAt((r=t+n+i)>>18&63)+u.charAt(r>>12&63)+u.charAt(r>>6&63)+u.charAt(63&r);return 2==a?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),o+=u.charAt((r=t+n)>>10)+u.charAt(r>>4&63)+u.charAt(r<<2&63)+"="):1==a&&(r=e.charCodeAt(s),o+=u.charAt(r>>2)+u.charAt(r<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(c,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,a="",o=-1;++o<t;)i=u.indexOf(e.charAt(o)),n=r%4?64*n+i:i,r++%4&&(a+=String.fromCharCode(255&n>>(-2*r&6)));return a},version:"0.1.0"};void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}()}).call(t,n(19)(e),n(20))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){!function(e){var t,n,i,r=String.fromCharCode;function a(e){for(var t,n,i=[],r=0,a=e.length;r<a;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<a?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function o(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function s(e,t){return r(e>>t&63|128)}function l(e){if(0==(4294967168&e))return r(e);var t="";return 0==(4294965248&e)?t=r(e>>6&31|192):0==(4294901760&e)?(o(e),t=r(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=r(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+r(63&e|128)}function u(){if(i>=n)throw Error("Invalid byte index");var e=255&t[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,r;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(e=255&t[i],i++,0==(128&e))return e;if(192==(224&e)){if((r=(31&e)<<6|u())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if((r=(15&e)<<12|u()<<6|u())>=2048)return o(r),r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=a(e),n=t.length,i=-1,r="";++i<n;)r+=l(t[i]);return r},e.decode=function(e){t=a(e),n=t.length,i=0;for(var o,s=[];!1!==(o=c());)s.push(o);return function(e){for(var t,n=e.length,i=-1,a="";++i<n;)(t=e[i])>65535&&(a+=r((t-=65536)>>>10&1023|55296),t=56320|1023&t),a+=r(t);return a}(s)}}(t)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(23)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}t.default={applyThrottlingPolicy:function(e){var t=r.default.EVENTS_SENDER_MIN_INTERVAL,n=r.default.EVENTS_SENDER_MAX_INTERVAL,a=Number(i.default.get("_hzt.interval"))||r.default.EVENTS_SENDER_INTERVAL;a<=n&&a>=t&&e.interval!==a&&e.reschedule(a)},applyDestinationPolicy:function(){return i.default.get("_hzt.host")||r.default.HORIZON_TRACK_HOST}}},function(e,t,n){var i,r;
/*!
   * JavaScript Cookie v2.2.0
   * https://github.com/js-cookie/js-cookie
   *
   * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
   * Released under the MIT license
   */!function(a){void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r),e.exports=a()}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function t(n){function i(t,r,a){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},i.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{o=JSON.stringify(r),/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var u in a)a[u]&&(l+="; "+u,!0!==a[u]&&(l+="="+a[u]));return document.cookie=t+"="+r+l}t||(o={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<c.length;h++){var p=c[h].split("="),f=p.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var y=p[0].replace(d,decodeURIComponent);if(f=n.read?n.read(f,y):n(f,y)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===y){o=f;break}t||(o[y]=f)}catch(e){}}return o}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}((function(){}))}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._queue=[],this.maxSize=t}return i(e,[{key:"push",value:function(e){this._queue=[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.slice(0,this.maxSize-1)))}},{key:"forEach",value:function(e){return this._queue.forEach(e)}},{key:"slice",value:function(e,t){return this._queue.slice(e,t)}},{key:"splice",value:function(e,t){return this._queue.splice(e,t)}},{key:"clear",value:function(){this._queue=[]}},{key:"filter",value:function(t){return e.fromArray(this._queue.filter(t),this.maxSize)}},{key:"length",get:function(){return this._queue.length}},{key:"items",get:function(){return JSON.parse(JSON.stringify(this._queue))}}],[{key:"fromArray",value:function(t,n){var i=new e(n);return t.forEach((function(e){return i.push(e)})),i}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interval=0,this.tickIntervalId=0,this.callbacks=[]}return i(e,[{key:"tick",value:function(){var e=this;this.callbacks.forEach((function(t){return t(e)}))}},{key:"start",value:function(){return this.tickIntervalId=setInterval(this.tick.bind(this),this.interval),this}},{key:"stop",value:function(){return clearInterval(this.tickIntervalId),this.tickIntervalId=0,this}},{key:"reschedule",value:function(e){return this.stop().every(e).start()}},{key:"every",value:function(e){return this.interval=e,this}},{key:"call",value:function(e){return this.callbacks.push(e),this}},{key:"isRunning",get:function(){return!!this.tickIntervalId}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(3)),a=u(n(2)),o=u(n(1)),s=u(n(0)),l=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var c={STATE_READY:"statusReady",STATE_NOT_READY:"statusNotReady",STATE_LOADING:"statusLoading",STATE_SCHEDULED:"statusScheduled",STATE_ERROR:"statusError"},d=function(){return a.default.getResource("schemas",{data:{}})},h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.state=c.STATE_NOT_READY,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}return i(e,[{key:"get",value:function(e,t){var n=e+"-"+t;if(!this.isReady())throw new Error(""+o.default.COMPONENT_NOT_READY);var i=d().data[n];if(!i)throw new Error(o.default.UNSUPPORTED_TYPE+": "+n);return i}},{key:"isReady",value:function(){return this.state===c.STATE_READY}},{key:"retry",value:function(){var e=this;this.state=c.STATE_SCHEDULED,this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=c.STATE_NOT_READY,e.load()}),s.default.SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS)}},{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===c.STATE_READY)return e(d().data);if(this.callbacks.onReady.length>s.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(o.default.LIMIT_EXCEEDED+" Schemas callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===c.STATE_ERROR?e():this.callbacks.onError.push(e)}},{key:"load",value:function(){var e=this,t=d();if(this.state===c.STATE_NOT_READY){this.state=c.STATE_LOADING,this.callbacks.onLoad.forEach((function(e){return e()}));var n=s.default.USE_HTTPS?"https://":"http://";l.default.request("GET",""+n+this.url,(function(n){t.data=Object.assign(t.data||{},n),e.state=c.STATE_READY,e.callbacks.onReady.forEach((function(e){return r.default.execAsync(e,t.data)}))}),(function(t){e.state=c.STATE_ERROR,e.callbacks.onError.forEach((function(e){return r.default.execAsync(e,t)})),e.retry()}))}}}]),e}();t.default={getInstance:function(e){var t=d();return t.provider||(t.provider=new h(e||s.default.HORIZON_SCHEMAS_HOST+"/schemas")),t.provider},getContextSchemas:d}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return window.cdaaas&&window.cdaaas.SETTINGS?window.cdaaas.SETTINGS[e]:null},r=function(e){return window.utag_data?window.utag_data[e]:null};t.default={getTenant:function(){return i("SITE_ID")||r("ut.profile")||"unknown"},getDeviceGroup:function(){return i("MOBILE_GROUP")||r("platform")||"unknown"}}}])}))),ju=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(Di(this,e),e.instance)return e.instance;this.initHorizonClient(t,n,i)}return Pi(e,[{key:"initHorizonClient",value:function(e,t,n){var i=N.isSmartTvEnvironment?"tv":null;"prod"!==e&&Fu.Settings.useQAConfiguration(),t&&Fu.Settings.useHTTPOnly(),this.horizon=new Fu.HorizonClient(n,i),this.saveInstance()}},{key:"saveInstance",value:function(){e.instance=this}},{key:"send",value:function(e){this.horizon.send(e)}},{key:"unload",value:function(){this.horizon.unload()}}]),e}(),Hu=kn.session,Vu="object"===Ii(window.onbeforeunload)?"beforeunload":"unload",Ku=function(e){return function(e){Ni(n,e);var t=Hi(n);function n(e){var i;Di(this,n),(i=t.call(this,e))[e.type]=e;var r=i.options.env&&i.options.env.name||"",a=i.options.httpOnly,o=i.options.horizon&&i.options.horizon.tenant||(N.isSmartTvEnvironment?"player":null);return i.horizon=new ju(r,a,o),i.setupUnload(),i}return Pi(n,[{key:"supportedVersion",get:function(){return{min:"0.4.13"}}},{key:"playerId",get:function(){return Ot.playerId}},{key:"videoSessionId",get:function(){return Hu.getVideoSessionId(this.options.playerId)}},{key:"contentType",get:function(){return"monitoring"}},{key:"basicData",get:function(){return{id:this.id,version:this.version,contentType:this.contentType}}}]),Pi(n,[{key:"setupUnload",value:function(){this.boundOnEnd=this.onEnd.bind(this),window.addEventListener(Vu,this.boundOnEnd)}},{key:"bindEvents",value:function(){}},{key:"onUnload",value:function(){}},{key:"onEnd",value:function(){this.onUnload(),this.horizon.unload()}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{this.horizon.send(Mi(Mi({},this.basicData),{},{properties:e}))}catch(e){ce.error(this.name,"Error when trying to send data to Horizon",e)}}},{key:"destroy",value:function(){window.removeEventListener(Vu,this.boundOnEnd),this.stopListening(),Vi(Ui(n.prototype),"destroy",this).call(this)}}]),n}(e)};var zu=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Gu="object"==typeof Da&&Da&&Da.Object===Object&&Da,Wu="object"==typeof self&&self&&self.Object===Object&&self,Yu=Gu||Wu||Function("return this")(),$u=function(){return Yu.Date.now()},qu=Yu.Symbol,Xu=Object.prototype,Qu=Xu.hasOwnProperty,Zu=Xu.toString,Ju=qu?qu.toStringTag:void 0;var ec=function(e){var t=Qu.call(e,Ju),n=e[Ju];try{e[Ju]=void 0;var i=!0}catch(e){}var r=Zu.call(e);return i&&(t?e[Ju]=n:delete e[Ju]),r},tc=Object.prototype.toString;var nc=function(e){return tc.call(e)},ic=qu?qu.toStringTag:void 0;var rc=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ic&&ic in Object(e)?ec(e):nc(e)};var ac=function(e){return null!=e&&"object"==typeof e};var oc=function(e){return"symbol"==typeof e||ac(e)&&"[object Symbol]"==rc(e)},sc=/^\s+|\s+$/g,lc=/^[-+]0x[0-9a-f]+$/i,uc=/^0b[01]+$/i,cc=/^0o[0-7]+$/i,dc=parseInt;var hc=function(e){if("number"==typeof e)return e;if(oc(e))return NaN;if(zu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=zu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(sc,"");var n=uc.test(e);return n||cc.test(e)?dc(e.slice(2),n?2:8):lc.test(e)?NaN:+e},pc=Math.max,fc=Math.min;var yc=function(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function f(e){return u=e,s=setTimeout(g,t),c?p(e):o}function y(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function g(){var e=$u();if(y(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?fc(n,a-(e-u)):n}(e))}function v(e){return s=void 0,h&&i?p(e):(i=r=void 0,o)}function m(){var e=$u(),n=y(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return f(l);if(d)return clearTimeout(s),s=setTimeout(g,t),p(l)}return void 0===s&&(s=setTimeout(g,t)),o}return t=hc(t)||0,zu(n)&&(c=!!n.leading,a=(d="maxWait"in n)?pc(hc(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},m.flush=function(){return void 0===s?o:v($u())},m},gc=function(){return{}},vc=function(e){return{subject:e}},mc=function(e,t){return{subject:t,value:e}},bc=function(e,t){return{subject:t}},Ec=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).counter=0,i}return Pi(n,[{key:"name",get:function(){return"events-schema"}},{key:"id",get:function(){return"player-events"}},{key:"version",get:function(){return"2.0"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}},{key:"coreEvents",get:function(){var e;return xi(e={},ye.CORE_FULLSCREEN,(function(e,t){return{subject:t,value:e}})),xi(e,ye.CORE_RESIZE,(function(e,t){var n=e.width,i=e.height;return{value:"".concat(n,"x").concat(i),subject:t}})),xi(e,ye.CORE_SCREEN_ORIENTATION_CHANGED,(function(e,t){return{subject:t,value:e.orientation}})),xi(e,_n.WM_PIP_ADDED,gc),xi(e,_n.WM_PIP_DISCARDED,gc),xi(e,_n.WM_MASTER_ADDED,gc),xi(e,_n.WM_MASTER_CHANGED,gc),xi(e,_n.WM_PIPTOMASTER,gc),xi(e,_n.WM_MASTERTOPIP,gc),xi(e,_n.MEDIACONTROL_DOUBLE_TAP,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide,n=void 0===t?"":t;return{value:n}})),xi(e,_n.WILL_SHOW_QUICK_SEEK_HINT,gc),xi(e,_n.WILL_HIDE_QUICK_SEEK_HINT,gc),xi(e,_n.START_DRAGGING_SEEKBAR,gc),xi(e,_n.STOP_DRAGGING_SEEKBAR,gc),e}},{key:"mediaControlEvents",get:function(){var e;return xi(e={},_n.MEDIACONTROL_MODAL_SHOW,gc),xi(e,_n.MEDIACONTROL_MODAL_HIDE,gc),xi(e,_n.MEDIACONTROL_ITEMCLICKED,vc),xi(e,ye.MEDIACONTROL_RENDERED,vc),xi(e,_n.WM_VOLUME_SHOW,vc),xi(e,_n.WM_VOLUME_HIDE,vc),xi(e,_n.WM_SHARE_SHOW,vc),xi(e,_n.WM_SHARE_HIDE,vc),e}},{key:"containerEvents",get:function(){var e;return xi(e={},ye.CONTAINER_CLICK,bc),xi(e,ye.CONTAINER_DESTROYED,bc),xi(e,ye.CONTAINER_DBLCLICK,bc),xi(e,ye.CONTAINER_VOLUME,(function(e,t){return{value:Math.round(e),subject:t}})),xi(e,_n.WM_BITRATE_CAP,(function(e,t){e.toFixed(2)})),xi(e,_n.DFP_AD_LOADED,gc),xi(e,_n.DFP_AD_CLOSED,gc),xi(e,_n.DFP_AD_STARTED,gc),xi(e,_n.DFP_AD_RESUME,gc),xi(e,_n.DFP_AD_PAUSE,gc),xi(e,_n.DFP_AD_CLICKED,gc),xi(e,_n.DFP_AD_COMPLETED,gc),xi(e,_n.DFP_AD_SKIPPED,gc),xi(e,_n.DFP_AD_NOTSERVED,gc),xi(e,_n.DFP_AD_METADATA,gc),xi(e,_n.DFP_ALL_ADS_COMPLETED,gc),xi(e,_n.DFP_CONTENT_PAUSE,gc),xi(e,_n.DFP_CONTENT_RESUME,gc),xi(e,_n.DFP_CONTENT_STARTED,gc),xi(e,_n.DFP_CONTENT_ENDED,gc),xi(e,_n.DFP_FINISHED,gc),xi(e,_n.WM_MUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),xi(e,_n.WM_UNMUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),xi(e,_n.WM_SETTINGS_LEVEL_SELECTED,(function(e,t){return{value:JSON.stringify(e),subject:t}})),xi(e,_n.WM_AUDIO_CHANGED,(function(e,t){return{subject:t,value:e.language}})),xi(e,_n.WM_AUDIO_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,_n.WM_LOCATION_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,_n.WM_SUBTITLE_CHANGED,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,_n.SKIP_BUTTON_CLICKED,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),xi(e,_n.SKIP_BUTTON_SHOW,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),xi(e,_n.DID_CHANGE_CURRENT_PROGRAM,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,_n.WILL_QUICK_SEEK,gc),xi(e,_n.WILL_AUTO_SKIP_RECAP,gc),xi(e,_n.WM_GA_UNTRACKED_EVENT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;return{value:n}})),e}},{key:"playbackEvents",get:function(){var e;return xi(e={},ye.PLAYBACK_READY,mc),xi(e,ye.PLAYBACK_BUFFERING,mc),xi(e,ye.PLAYBACK_BUFFERFULL,mc),xi(e,ye.PLAYBACK_LOADEDMETADATA,(function(e,t){var n=e.duration;return{subject:t,value:Math.round(n)}})),xi(e,ye.PLAYBACK_HIGHDEFINITIONUPDATE,mc),xi(e,ye.PLAYBACK_BITRATE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,ye.PLAYBACK_DVR,mc),xi(e,ye.PLAYBACK_ENDED,vc),xi(e,ye.PLAYBACK_PLAY_INTENT,vc),xi(e,ye.PLAYBACK_PLAY,vc),xi(e,ye.PLAYBACK_PAUSE,vc),xi(e,ye.PLAYBACK_SEEK,vc),xi(e,ye.PLAYBACK_SEEKED,vc),xi(e,ye.PLAYBACK_STOP,vc),xi(e,ye.PLAYBACK_LEVEL_SWITCH,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),xi(e,ye.PLAYBACK_SUBTITLE_AVAILABLE,vc),xi(e,_n.WM_WROOM_AUTHORIZE,bc),xi(e,_n.WM_WROOM_AUTHORIZED,bc),xi(e,_n.WM_WROOM_WAITING,bc),xi(e,_n.WM_HASH_EXPIRED,bc),xi(e,_n.WM_PLAY_REQUESTED_READY,bc),xi(e,_n.WILL_SELECT_FALLBACK_SOURCE,(function(e){return{value:JSON.stringify(e)}})),xi(e,_n.FALLBACK_SOURCE_SELECTED,(function(e){return{value:JSON.stringify(e)}})),e}}]),Pi(n,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,ye.CORE_READY,this.bindContainerEvents),Object.entries(this.coreEvents).forEach((function(t){var n=Ki(t,2),i=n[0],r=n[1];e.subscribeEvent(e.core,i,r)})),Object.entries(this.mediaControlEvents).forEach((function(t){var n=Ki(t,2),i=n[0],r=n[1];e.subscribeEvent(e.mediaControl,i,r)}))}},{key:"onUnload",value:function(){this.sendEvent("user","DID_LEAVE")}},{key:"playheadTime",value:function(){return this.container&&parseInt(1e3*this.container.getCurrentTime(),10)||-1}},{key:"handleEventArgs",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=t.apply(void 0,i),o=a.subject,s=a.value;this.sendEvent(o,e,s)}},{key:"subscribeEvent",value:function(e,t,n){this.listenTo(e,t,yc(this.handleEventArgs.bind(this,t,n),500,{leading:!0,trailing:!0}))}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.bindPlaybackEvents(),Object.entries(this.containerEvents).forEach((function(t){var n=Ki(t,2),i=n[0],r=n[1];e.subscribeEvent(e.container,i,r)})))}},{key:"bindPlaybackEvents",value:function(){var e=this;this.playback&&this.stopListening(this.playback),this.playback=this.core.activePlayback,this.playback&&Object.entries(this.playbackEvents).forEach((function(t){var n=Ki(t,2),i=n[0],r=n[1];e.subscribeEvent(e.playback,i,r)}))}},{key:"sendEvent",value:function(e,t,n){this.send(Object.assign({},this.baseProperties,{subject:e||"unknown"},t&&{event:t.toString()},n&&{value:n.toString()},{playheadTime:this.playheadTime()},{counter:parseInt(this.counter,10)})),this.counter+=1}}]),n}(Ku(Be)),kc=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.container.playback,_n.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onResourceReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.send(Mi(Mi(Mi({},this.baseProperties),this.containerProperties()),this.videoProperties(e)))}},{key:"containerProperties",value:function(){return{playback:this.innerPlayback.name,muted:!this.container.playback.getVolume()}}},{key:"liveProps",value:function(e){return{duration:-1,dvr:this.container.isDvrEnabled(),signal:e.transmission.signal}}},{key:"videoProperties",value:function(e){var t={videoId:e.id,programId:e.programId,channelId:e.channelId,kind:e.kind,encrypted:e.encrypted,subscriberOnly:e.isSubscriberOnly,adult:e.adult,cdn:e.cdn,duration:e.duration,downloadedSession:!1};return e.encrypted&&(t.drmProtocol=e.drm),"live"==e.kind&&(t=Mi(Mi({},t),this.liveProps(e))),t}},{key:"name",get:function(){return"session-info-schema"}},{key:"id",get:function(){return"player-session-info"}},{key:"version",get:function(){return"2.1"}},{key:"innerPlayback",get:function(){return this.container.playback.playback}},{key:"startAt",get:function(){return"live"===this.container.getPlaybackType()?this.options.liveStartTime:this.options.resumeAt}},{key:"baseProperties",get:function(){var e={playerId:this.playerId,videoSessionId:this.videoSessionId,autoPlay:!!this.options.autoPlay};return this.startAt&&(e.startAt=this.startAt),e}}]),n}(Ku(Ue)),Ac=kn.API_VERSION,_c=function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).chromecastStatus=i.getChromecastStatus(),i}return Pi(n,[{key:"name",get:function(){return"environment-web-info-schema"}},{key:"id",get:function(){return"player-environment-web"}},{key:"version",get:function(){return"2.0"}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_READY,this.sendEvents)}},{key:"getChromecastStatus",value:function(){return Promise.race([this.subscribe(this.listenTo.bind(this,this.core,_n.CHROMECAST_SCRIPT_ERROR)).then((function(){return"script-load-error"})),this.subscribe(this.listenTo.bind(this,this.core,_n.CHROMECAST_API_ERROR)).then((function(){return"api-error"})),this.subscribe(this.listenTo.bind(this,this.core,_n.CHROMECAST_INITIALIZE_ERROR)).then((function(){return"initialize-error"})),this.subscribe(this.listenTo.bind(this,this.core,_n.CHROMECAST_AVAILABLE)).then((function(){return"available"})),this.subscribe(this.listenTo.bind(this,this.core,_n.CHROMECAST_UNAVAILABLE)).then((function(){return"unavailable"}))]).then((function(e){return{castStatus:e}})).catch((function(){return{castStatus:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,apiVersion:Ac,browserVersion:N.data.fullVersion,browser:N.name,location:this.core.options.domain||document.location.hostname}),this.chromecastStatus]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(zi(t))))}))}}]),n}(Ku(Be)),Tc=Ri.Video,wc=kn.getDeviceType,Sc=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_READY,this.sendEvents)}},{key:"initialSize",value:function(){return this.subscribe(this.listenTo.bind(this,this.core,ye.CORE_RESIZE)).then((function(e){var t=e.width,n=e.height;return{initialSize:"".concat(t,"x").concat(n)}})).catch((function(){return{initialSize:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,os:N.os.name,osVersion:N.os.fullVersion||"other",playerVersion:"7.2.0",playerType:Tc.getPlayerType(),application:this.core.options.domain||document.location.hostname,deviceType:wc(),applicationVersion:this.core.options.applicationVersion||"not-informed",networkType:"None/web",deviceModel:"not-informed"}),this.initialSize()]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(zi(t))))}))}},{key:"name",get:function(){return"environment-info-schema"}},{key:"id",get:function(){return"player-environment-data"}},{key:"version",get:function(){return"3.0"}}]),n}(Ku(Be)),Cc=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.core,ye.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,ye.CORE_READY,this.bindContainerEvents),this.listenToCoreErrors()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.listenToContainerErrors()}},{key:"listenToContainerErrors",value:function(){var e=this;this.listenTo(this.container,ye.CONTAINER_ERROR,this.sendEvents),this.listenTo(this.container,_n.DFP_AD_ERROR,(function(t){var n=e.formatAdErrors(t);e.sendEvents(n)})),this.listenTo(this.container,_n.WM_VIDEO_METADATA_ERROR,this.sendEvents),this.listenTo(this.container,_n.WM_RESOURCE_ERROR,this.sendEvents)}},{key:"listenToCoreErrors",value:function(){this.listenTo(this.core,_n.CHROMECAST_API_ERROR,this.sendEvents),this.listenTo(this.core,_n.CHROMECAST_SCRIPT_ERROR,this.sendEvents),this.listenTo(this.core,_n.CHROMECAST_INITIALIZE_ERROR,this.sendEvents),this.listenTo(this.core,_n.CHROMECAST_LAUNCH_ERROR,this.sendEvents),this.listenTo(this.core,_n.CHROMECAST_MEDIA_LOAD_ERROR,this.sendEvents)}},{key:"formatAdErrors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"===Ii(e.message)?{code:e.message&&e.message.getType&&e.message.getType()||"",message:e.message&&e.message.getMessage&&e.message.getMessage(),level:"unknown"}:e}},{key:"errorProperties",value:function(e){return{code:e.code||e.type||"unknown",message:e.description||e.message||"unknown",level:e.level||"unknown"}}},{key:"sendEvents",value:function(e){this.send(Mi(Mi({},this.baseProperties),this.errorProperties(e)))}},{key:"name",get:function(){return"errors-schema"}},{key:"id",get:function(){return"player-errors"}},{key:"version",get:function(){return"1.1"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"baseProperties",get:function(){return{playerId:this.playerId,videoSessionId:this.videoSessionId}}}]),n}(Ku(Be)),Rc=function(e){Ni(n,e);var t=Hi(n);function n(){return Di(this,n),t.apply(this,arguments)}return Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.container,_n.DFP_AD_LOADED,this.sendEvents)}},{key:"adConfigProperties",value:function(e){return Mi(Mi({},this.adProperties(e)),this.dfpProperties())}},{key:"adProperties",value:function(e){return{adId:e.getAdId(),linear:e.isLinear(),position:this.getAdPosition(e),skippable:e.isSkippable(),duration:parseInt(e.getDuration(),10),timeOffset:parseInt(e.getAdPodInfo().getTimeOffset(),10)}}},{key:"dfpProperties",value:function(){return{adUnit:this.dfp.adUnit,adCustomData:this.dfp.adCustomData,accountId:this.dfp.adAccountId,cmsId:this.dfp.adCmsId}}},{key:"getAdPosition",value:function(e){if(!e.isLinear())return"overlay";switch(e.getAdPodInfo().getPodIndex()){case 0:return"pre-roll";case-1:return"pos-roll";default:return"mid-roll"}}},{key:"sendEvents",value:function(e){this.send(Mi(Mi({},this.baseProperties),this.adConfigProperties(e)))}},{key:"name",get:function(){return"ad-config-schema"}},{key:"id",get:function(){return"player-ad-config"}},{key:"version",get:function(){return"2.0"}},{key:"dfp",get:function(){return this.container.options.dfp}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}}]),n}(Ku(Ue)),Ic=6e4,Dc=15e3,Oc=.05,Pc=[Sc,_c,kc,Cc,Ec,Rc,function(e){Ni(n,e);var t=Hi(n);function n(e){var i;return Di(this,n),(i=t.call(this,e)).measurements=[],i.counter=0,i.bufferingTime=0,i.decodedFrames=0,i.droppedFrames=0,i.lastBufferType=null,i.updateMeasurements({}),i}return Pi(n,[{key:"name",get:function(){return"network-monitoring-schema"}},{key:"id",get:function(){return"player-network-monitoring"}},{key:"version",get:function(){return"5.1"}},{key:"currentTime",get:function(){return(new Date).getTime()}},{key:"isBuffering",get:function(){return this.lastBufferType===ye.PLAYBACK_BUFFERING}},{key:"bandwidthEstimate",get:function(){var e=this.container.playback.bandwidthEstimate;return"number"==typeof e&&e>=0?e:-1}}]),Pi(n,[{key:"bindEvents",value:function(){this.listenTo(this.container,_n.WM_STATS_REPORTED,this.onStatsReported),this.listenTo(this.container.playback,_n.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenTo(this.container.playback,_n.WM_STREAMING_DATA_LOADED,this.onStreamingDataLoaded),this.listenTo(this.container.playback,_n.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,ye.PLAYBACK_BITRATE,this.updateMeasurements),this.listenTo(this.container.playback,ye.PLAYBACK_STOP,this.stopHeartbeat),this.listenTo(this.container.playback,ye.PLAYBACK_ERROR,this.stopHeartbeat),this.listenTo(this.container.playback,ye.PLAYBACK_ENDED,this.stopHeartbeat),this.listenTo(this.container.playback,ye.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.container.playback,ye.PLAYBACK_BUFFERFULL,this.onBufferFull)}},{key:"onStatsReported",value:function(e){this.decodedFrames=e.counters.decodedFrames,this.droppedFrames=e.counters.droppedFrames}},{key:"onFallbackSourceSelected",value:function(e){var t=e.currentSrc;this.domainHost=this.getDomainFromURL(t)}},{key:"onStreamingDataLoaded",value:function(e){var t=e.host;this.domainHost=t}},{key:"pingInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"live"==e.kind?Ic:Math.max(Dc,Oc*e.duration)}},{key:"onResourceReady",value:function(e){this.setCDNHost(e),this.setPoP(e),this.heartbeat=setInterval(this.onHeartbeatTick.bind(this),this.pingInterval(e)),this.onHeartbeatTick()}},{key:"setCDNHost",value:function(e){var t=e.selectedResource.url;this.domainHost=this.getDomainFromURL(t)}},{key:"setPoP",value:function(e){var t=e.selectedResource.resourcePOP;this.pop=t}},{key:"getDomainFromURL",value:function(e){return e&&/:\/\/(?:www\.)?(.[^/]+)(.*)/.exec(e)[1]}},{key:"updateMeasurements",value:function(e){var t=e.bitrate,n=void 0===t?0:t;this.lastMeasurement={nominalBitrate:parseInt(n,10),bandwidth:this.bandwidthEstimate,timestamp:this.currentTime},this.measurements.push(this.lastMeasurement)}},{key:"increaseTotalBuffering",value:function(){this.isBuffering&&this.bufferStartTime>0&&(this.bufferingTime+=this.currentTime-this.bufferStartTime,this.bufferStartTime=this.currentTime)}},{key:"onBuffering",value:function(){this.bufferStartTime=this.currentTime,this.increaseTotalBuffering(),this.lastBufferType=ye.PLAYBACK_BUFFERING}},{key:"onBufferFull",value:function(){this.increaseTotalBuffering(),this.bufferStartTime=0,this.lastBufferType=ye.PLAYBACK_BUFFERFULL}},{key:"onHeartbeatTick",value:function(){0==this.measurements.length&&this.measurements.push(this.lastMeasurement),this.increaseTotalBuffering(),this.sendEvent(),this.resetStateTimmingInfo(),this.eraseMeasurements(),this.updateCounter()}},{key:"updateCounter",value:function(){this.counter+=1}},{key:"resetStateTimmingInfo",value:function(){this.bufferingTime=0}},{key:"eraseMeasurements",value:function(){this.measurements=[]}},{key:"onUnload",value:function(){this.sendEvent()}},{key:"sendEvent",value:function(){this.send({videoSessionId:this.videoSessionId,measurements:this.measurements,counter:this.counter,domainHost:this.domainHost||"unknown",pop:this.pop||"unknown",bufferingTime:this.bufferingTime,decodedFrames:this.decodedFrames,droppedFrames:this.droppedFrames})}},{key:"stopHeartbeat",value:function(){this.heartbeat&&clearInterval(this.heartbeat)}},{key:"destroy",value:function(){this.stopHeartbeat(),Vi(Ui(n.prototype),"destroy",this).call(this)}}]),n}(Ku(Ue))].reduce((function(e,t){return e[t.type]=(e[t.type]||[]).concat(t),e}),{}),xc=Pc.core,Lc=Pc.container,Mc=function(e){return(t=e,String.fromCharCode.apply(null,new Uint16Array(t.buffer))).match(/skd\:\/\/(.*)$/)[1];var t},Nc=function(e,t,n){var i="string"==typeof t?function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return n}(t):t,r=0,a=new ArrayBuffer(e.byteLength+4+i.byteLength+4+n.byteLength),o=new DataView(a);new Uint8Array(a,r,e.byteLength).set(e),r+=e.byteLength,o.setUint32(r,i.byteLength,!0),r+=4;var s=new Uint16Array(a,r,i.length);return s.set(i),r+=s.byteLength,o.setUint32(r,n.byteLength,!0),r+=4,new Uint8Array(a,r,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)},Uc=function(e){Ni(n,e);var t=Hi(n);function n(){var e;Di(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._isReadyState=!1,e.certificate=null,e.setupDRM(e.options.fairplay||{}),e}return Pi(n,[{key:"name",get:function(){return"hls_fairplay_playback"}},{key:"events",get:function(){return Mi(Mi({},Vi(Ui(n.prototype),"events",this)),{},{webkitneedkey:this.onNeedKey})}}]),Pi(n,[{key:"_setup",value:function(){this.setupDRM(this.options.fairplay||{})}},{key:"setupDRM",value:function(e){this.certificateUrl=e.certificate,this.serverUrl=e.server,this.certificateUrl&&this.loadCertificate()}},{key:"loadCertificate",value:function(){var e=this,t=new XMLHttpRequest;t.responseType="arraybuffer",t.addEventListener("load",(function(t){return e.onCertificateLoaded(t)}),!1),t.addEventListener("error",(function(t){return e.onCertificateError(t)}),!1),t.open("GET",this.certificateUrl,!0),t.send()}},{key:"onCertificateLoaded",value:function(e){var t=e.target;this.certificate=new Uint8Array(t.response),Vi(Ui(n.prototype),"_ready",this).call(this),ce.info(this.name,"Certificate loaded successfully")}},{key:"onCertificateError",value:function(e){var t=this.createError({code:"certificateError",description:"Failed to retrieve the server certificate",raw:e});this.trigger(ye.PLAYBACK_ERROR,t),ce.error(this.name,"Failed to retrieve the server certificate",t)}},{key:"onNeedKey",value:function(e){var t=e.target,n=e.initData,i=Mc(n);n=Nc(n,i,this.certificate),this.createMediaKeys(t),this.createKeySession(t,n,i)}},{key:"createMediaKeys",value:function(e){if(!e.webkitKeys){var t=WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")?"com.apple.fps.1_0":null;if(t)e.webkitSetMediaKeys(new WebKitMediaKeys(t));else{var n=this.createError({code:"unsupportedKeySystem",description:"Could not create MediaKeys. Key System not supported"});this.trigger(ye.PLAYBACK_ERROR,n),ce.error(this.name,"Could not create MediaKeys. Key System not supported",n)}}}},{key:"createKeySession",value:function(e,t,n){if(e.webkitKeys){var i=e.webkitKeys.createSession("video/mp4",t);if(i)i.contentId=n,this.bindKeySessionEvents(i);else{var r=this.createError({code:"mediaKeysError",description:"Could not create key session"});this.trigger(ye.PLAYBACK_ERROR,r),ce.error(this.name,"Could not create key session",r)}}}},{key:"bindKeySessionEvents",value:function(e){var t=this;e.addEventListener("webkitkeymessage",(function(e){return t.licenseRequestReady(e)}),!1),e.addEventListener("webkitkeyadded",(function(e){return t.onKeyAdded(e)}),!1),e.addEventListener("webkitkeyerror",(function(e){return t.onKeyError(e)}),!1)}},{key:"onKeyAdded",value:function(e){ce.info(this.name,"Decryption key was added to session",e)}},{key:"onKeyError",value:function(e){var t=this.createError({code:"decryptionKeyError",description:"A decryption key error was encountered",level:"WARN",raw:e});ce.warn(this.name,"A decryption key error was encountered",t)}},{key:"licenseRequestReady",value:function(e){var t=this,n=e.target,i=e.message,r=new XMLHttpRequest,a="spc=".concat(encodeURIComponent(function(e){for(var t,n,i,r,a,o,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;c<e.length;)r=(t=e[c++])>>2,a=(3&t)<<4|(n=c<e.length?e[c++]:Number.NaN)>>4,o=(15&n)<<2|(i=c<e.length?e[c++]:Number.NaN)>>6,s=63&i,isNaN(n)?(o=64,s=64):isNaN(i)&&(s=64),u+=l.charAt(r)+l.charAt(a)+l.charAt(o)+l.charAt(s);return u}(i)));r.responseType="text",r.session=n,r.addEventListener("load",(function(e){return t.onLicenseRequestLoaded(e)}),!1),r.addEventListener("error",(function(e){return t.onLicenseRequestError(e)}),!1),r.open("POST",this.serverUrl,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a),ce.info(this.name,"License request ready")}},{key:"onLicenseRequestLoaded",value:function(e){var t=e.target,n=t.session,i=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(new ArrayBuffer(n)),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i}(JSON.parse(t.responseText.trim()).ckc);n.update(i),ce.info(this.name,"License loaded successfully")}},{key:"onLicenseRequestError",value:function(e){var t=this.createError({code:"licenseRequestError",description:"The license request failed",raw:e});this.trigger(ye.PLAYBACK_ERROR,t),ce.error(this.name,"The license request failed",t)}}]),n}(Je);Uc.canPlay=function(e,t,n){var i=e.split("?")[0].match(/.*\.(.*)$/)||[],r=i.length>1&&"m3u8"===i[1].toLowerCase()||"application/x-mpegURL"===t||"application/vnd.apple.mpegurl"===t;return!(!N.isSafari&&!N.isiOS||!r||!n)};var Bc=Pa((function(e,t){e.exports=function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function f(e){var t=d();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=y(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function v(e){return m(e)||b(e)||E(e)||A()}function m(e){if(Array.isArray(e))return k(e)}function b(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function E(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function A(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var _=e.Utils.now,T=e.Utils.assign,w=e.Utils.listContainsIgnoreCase,S=-1,C=function(i){l(o,i);var a=f(o);function o(){var t;n(this,o);for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return(t=a.call.apply(a,[this].concat(r))).options.playback=s(s({},t.options),t.options.playback),t._minDvrSize=void 0===t.options.hlsMinimumDvrSize?60:t.options.hlsMinimumDvrSize,t._extrapolatedWindowNumSegments=t.options.playback&&void 0!==t.options.playback.extrapolatedWindowNumSegments?t.options.playback.extrapolatedWindowNumSegments:2,t._playbackType=e.Playback.VOD,t._lastTimeUpdate={current:0,total:0},t._lastDuration=null,t._playableRegionStartTime=0,t._localStartTimeCorrelation=null,t._localEndTimeCorrelation=null,t._playableRegionDuration=0,t._programDateTime=0,t._durationExcludesAfterLiveSyncPoint=!1,t._segmentTargetDuration=null,t._playlistType=null,t._recoverAttemptsRemaining=t.options.hlsRecoverAttempts||16,t}return r(o,[{key:"name",get:function(){return"hls"}},{key:"supportedVersion",get:function(){return{min:"0.4.11"}}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?S:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===e.Playback.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return _()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var e=this._localStartTimeCorrelation,t=this._now-e.local,n=(e.remote+t)/1e3;return Math.min(n,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;var t=this._localEndTimeCorrelation,n=this._now-t.local,i=(t.remote+n)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(i,e))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}}],[{key:"HLSJS",get:function(){return t}}]),r(o,[{key:"_setup",value:function(){var e=this;this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls=new t(T({},this.options.playback.hlsjsConfig)),this._hls.once(t.Events.MEDIA_ATTACHED,(function(){return e._hls.loadSource(e.options.src)})),this._hls.on(t.Events.LEVEL_LOADED,(function(t,n){return e._updatePlaybackType(t,n)})),this._hls.on(t.Events.LEVEL_UPDATED,(function(t,n){return e._onLevelUpdated(t,n)})),this._hls.on(t.Events.LEVEL_SWITCHING,(function(t,n){return e._onLevelSwitch(t,n)})),this._hls.on(t.Events.FRAG_LOADED,(function(t,n){return e._onFragmentLoaded(t,n)})),this._hls.on(t.Events.ERROR,(function(t,n){return e._onHLSJSError(t,n)})),this._hls.on(t.Events.SUBTITLE_TRACK_LOADED,(function(t,n){return e._onSubtitleLoaded(t,n)})),this._hls.on(t.Events.SUBTITLE_TRACKS_UPDATED,(function(){return e._ccTracksUpdated=!0})),this._hls.attachMedia(this.el)}},{key:"render",value:function(){return this._ready(),g(u(o.prototype),"render",this).call(this)}},{key:"_ready",value:function(){this._isReadyState=!0,this.trigger(e.Events.PLAYBACK_READY,this.name)}},{key:"_recover",value:function(t,n,i){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){e.Log.error("hlsjs: failed to recover",{evt:t,data:n}),i.level=e.PlayerError.Levels.FATAL;var r=this.createError(i);this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()}},{key:"_setupSrc",value:function(e){}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){e._onDurationChange(),e._onTimeUpdate()}),100))}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function(){return this._programDateTime}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function(){return this._startTime}},{key:"seekPercentage",value:function(e){var t=this._duration;e>0&&(t=this._duration*(e/100)),this.seek(t)}},{key:"seek",value:function(t){t<0&&(e.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(t<this.getDuration()-3),t+=this._startTime,g(u(o.prototype),"seek",this).call(this,t)}},{key:"seekToLivePoint",value:function(){this.seek(this.getDuration())}},{key:"_updateDvr",value:function(t){this.trigger(e.Events.PLAYBACK_DVR,t),this.trigger(e.Events.PLAYBACK_STATS_ADD,{dvr:t})}},{key:"_updateSettings",value:function(){this._playbackType===e.Playback.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(e.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function(n,i){var r,a={code:"".concat(i.type,"_").concat(i.details),description:"".concat(this.name," error: type: ").concat(i.type,", details: ").concat(i.details),raw:i};if(i.response&&(a.description+=", response: ".concat(JSON.stringify(i.response))),i.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,i.type){case t.ErrorTypes.NETWORK_ERROR:switch(i.details){case t.ErrorDetails.MANIFEST_LOAD_ERROR:case t.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case t.ErrorDetails.MANIFEST_PARSING_ERROR:case t.ErrorDetails.LEVEL_LOAD_ERROR:case t.ErrorDetails.LEVEL_LOAD_TIMEOUT:e.Log.error("hlsjs: unrecoverable network fatal error.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();break;default:e.Log.warn("hlsjs: trying to recover from network error.",{evt:n,data:i}),a.level=e.PlayerError.Levels.WARN,this._hls.startLoad()}break;case t.ErrorTypes.MEDIA_ERROR:e.Log.warn("hlsjs: trying to recover from media error.",{evt:n,data:i}),a.level=e.PlayerError.Levels.WARN,this._recover(n,i,a);break;default:e.Log.error("hlsjs: could not recover from error.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else e.Log.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(i))return e.Log.error("hlsjs: could not load decrypt key.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),void this.stop();a.level=e.PlayerError.Levels.WARN,e.Log.warn("hlsjs: non-fatal error occurred",{evt:n,data:i})}}},{key:"_keyIsDenied",value:function(e){return e.type===t.ErrorTypes.NETWORK_ERROR&&e.details===t.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400}},{key:"_onTimeUpdate",value:function(){var t={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&t.current===this._lastTimeUpdate.current&&t.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=t,this.trigger(e.Events.PLAYBACK_TIMEUPDATE,t,this.name))}},{key:"_onDurationChange",value:function(){var e=this.getDuration();this._lastDuration!==e&&(this._lastDuration=e,g(u(o.prototype),"_onDurationChange",this).call(this))}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var t=[],n=0,i=0;i<this.el.buffered.length;i++)t=[].concat(v(t),[{start:Math.max(0,this.el.buffered.start(i)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(i)-this._playableRegionStartTime)}]),this.el.currentTime>=t[i].start&&this.el.currentTime<=t[i].end&&(n=i);var r={start:t[n].start,current:t[n].end,total:this.getDuration()};this.trigger(e.Events.PLAYBACK_PROGRESS,r,t)}}},{key:"play",value:function(){this._hls||this._setup(),g(u(o.prototype),"play",this).call(this),this._startTimeUpdateTimer()}},{key:"pause",value:function(){this._hls&&(g(u(o.prototype),"pause",this).call(this),this.dvrEnabled&&this._updateDvr(!0))}},{key:"stop",value:function(){this._stopTimeUpdateTimer(),this._hls&&(g(u(o.prototype),"stop",this).call(this),this._hls.destroy(),delete this._hls)}},{key:"destroy",value:function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),g(u(o.prototype),"destroy",this).call(this)}},{key:"_updatePlaybackType",value:function(t,n){this._playbackType=n.details.live?e.Playback.LIVE:e.Playback.VOD,this._onLevelUpdated(t,n),this._ccTracksUpdated&&this._playbackType===e.Playback.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function(){this._levels=this._hls.levels.map((function(e,t){return{id:t,level:e,label:"".concat(e.bitrate/1e3,"Kbps")}})),this.trigger(e.Events.PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function(n,i){this._segmentTargetDuration=i.details.targetduration,this._playlistType=i.details.type||null;var r=!1,a=!1,o=i.details.fragments,s=this._playableRegionStartTime,l=this._playableRegionDuration;if(0!==o.length){if(o[0].rawProgramDateTime&&(this._programDateTime=o[0].rawProgramDateTime),this._playableRegionStartTime!==o[0].start&&(r=!0,this._playableRegionStartTime=o[0].start),r)if(this._localStartTimeCorrelation){var u=this._localStartTimeCorrelation,c=this._now-u.local,d=(u.remote+c)/1e3;d<o[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*o[0].start}:d>s+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(o[0].start,s+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(o[0].start+this._extrapolatedWindowDuration/2)};var h=i.details.totalduration;if(this._playbackType===e.Playback.LIVE){var p=i.details.targetduration*((this.options.playback.hlsjsConfig||{}).liveSyncDurationCount||t.DefaultConfig.liveSyncDurationCount);p<=h?(h-=p,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}h!==this._playableRegionDuration&&(a=!0,this._playableRegionDuration=h);var f=o[0].start+h,y=s+l;if(f!==y)if(this._localEndTimeCorrelation){var g=this._localEndTimeCorrelation,v=this._now-g.local,m=(g.remote+v)/1e3;m>f?this._localEndTimeCorrelation={local:this._now,remote:1e3*f}:m<f-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(f-this._extrapolatedWindowDuration)}:m>y&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*y})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*f};a&&this._onDurationChange(),r&&this._onProgress()}}},{key:"_onFragmentLoaded",value:function(t,n){this.trigger(e.Events.PLAYBACK_FRAGMENT_LOADED,n)}},{key:"_onSubtitleLoaded",value:function(){if(!this._ccIsSetup){this.trigger(e.Events.PLAYBACK_SUBTITLE_AVAILABLE);var t=this._playbackType===e.Playback.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function(t,n){this.levels.length||this._fillLevels(),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_END),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH,n);var i=this._hls.levels[n.level];i&&(this.highDefinition=i.height>=720||i.bitrate/1e3>=2e3,this.trigger(e.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(e.Events.PLAYBACK_BITRATE,{height:i.height,width:i.width,bandwidth:i.bitrate,bitrate:i.bitrate,level:n.level}))}},{key:"getPlaybackType",value:function(){return this._playbackType}},{key:"isSeekEnabled",value:function(){return this._playbackType===e.Playback.VOD||this.dvrEnabled}},{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===e.Playback.LIVE}}]),o}(e.HTML5Video);return C.canPlay=function(e,n){var i=e.split("?")[0].match(/.*\.(.*)$/)||[],r=i.length>1&&"m3u8"===i[1].toLowerCase()||w(n,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!t.isSupported()||!r)},C}(st,dt)})),Fc=Oa(Pa((function(e,t){var n;window,n=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s="./src/clappr-dash-shaka-playback.js")}({"./node_modules/shaka-player/dist/shaka-player.compiled.js":
/*!*****************************************************************!*\
    !*** ./node_modules/shaka-player/dist/shaka-player.compiled.js ***!
    \*****************************************************************/
/*! no static exports found */function(e,t,n){(function(e){!function(){var n="undefined"!=typeof window?window:e,i={};for(var r in function(e,t){var n,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},r=void 0!==e&&e===this?this:void 0!==t&&null!=t?t:this;function a(){a=function(){},r.Symbol||(r.Symbol=s)}var o,s=(o=0,function(e){return"jscomp_symbol_"+(e||"")+o++});function l(){a();var e=r.Symbol.iterator;e||(e=r.Symbol.iterator=r.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&i(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return u(this)}}),l=function(){}}function u(e){var t=0;return c((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function c(e){return l(),(e={next:e})[r.Symbol.iterator]=function(){return this},e}function d(e){l();var t=e[Symbol.iterator];return t?t.call(e):u(e)}function h(e,t){if(t){for(var n=r,a=e.split("."),o=0;o<a.length-1;o++){var s=a[o];s in n||(n[s]={}),n=n[s]}(s=t(o=n[a=a[a.length-1]]))!=o&&null!=s&&i(n,a,{configurable:!0,writable:!0,value:s})}}function p(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(e())}h("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},n.prototype.f=function(){var e=this;this.c((function(){e.h()}))};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.g(e)}}}this.a=null},n.prototype.g=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.s),reject:e(this.f)}},t.prototype.s=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.v(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.m(e):this.h(e)}},t.prototype.m=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.C(t,e):this.h(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new n;return t.prototype.v=function(e){var t=this.c();e.Yb(t.resolve,t.reject)},t.prototype.C=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.Yb(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Yb=function(e,t){function n(){switch(i.b){case 1:e(i.g);break;case 2:t(i.g);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?o.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=d(e),a=r.next();!a.done;a=r.next())i(a.value).Yb(t,n)}))},t.all=function(e){var n=d(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).Yb(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),h("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));var f,y="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)f=Object.setPrototypeOf;else{var g;e:{var v={};try{v.__proto__={ne:!0},g=v.ne;break e}catch(o){}g=!1}f=g?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var m=f;function b(){this.g=!1,this.c=null,this.o=void 0,this.j=1,this.b=this.f=0,this.i=this.a=null}function E(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function k(e,t){e.a={yd:t,Gd:!0},e.j=e.f||e.b}function A(e,t,n){return e.j=n,{value:t}}function _(e){e.j=0}function T(e,t,n){e.f=t,null!=n&&(e.b=n)}function w(e,t){e.f=0,e.b=t||0}function S(e,t){e.j=t,e.f=0}function C(e){e.f=0;var t=e.a.yd;return e.a=null,t}function R(e){e.i=[e.a],e.f=0,e.b=0}function I(e,t){var n=e.i.splice(0)[0];(n=e.a=e.a||n)?n.Gd?e.j=e.f||e.b:null!=n.A&&e.b<n.A?(e.j=n.A,e.a=null):e.j=e.b:e.j=t}function D(e){this.a=new b,this.b=e}function O(e,t,n,i){try{var r=t.call(e.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.a.g=!1,r;var a=r.value}catch(t){return e.a.c=null,k(e.a,t),P(e)}return e.a.c=null,i.call(e.a,a),P(e)}function P(e){for(;e.a.j;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(t){e.a.o=void 0,k(e.a,t)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.Gd)throw t.yd;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function x(e){this.next=function(t){return E(e.a),e.a.c?t=O(e,e.a.c.next,t,e.a.h):(e.a.h(t),t=P(e)),t},this.throw=function(t){return E(e.a),e.a.c?t=O(e,e.a.c.throw,t,e.a.h):(k(e.a,t),t=P(e)),t},this.return=function(t){return function(e,t){E(e.a);var n=e.a.c;return n?O(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),P(e))}(e,t)},l(),this[Symbol.iterator]=function(){return this}}function L(e,t){return x.prototype=e.prototype,new x(new D(t))}function M(e){if(!(e instanceof Array)){e=d(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Cd:r,ie:a}}return{Cd:-1,ie:void 0}}function B(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}b.prototype.h=function(e){this.o=e},b.prototype.return=function(e){this.a={return:e},this.j=this.b},b.prototype.A=function(e){this.j=e},h("WeakMap",(function(e){function t(e){if(this.a=(s+=Math.random()+1).toString(),e){a(),l(),e=d(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){N(e,o)||i(e,o,{value:{}})}function r(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();r("freeze"),r("preventExtensions"),r("seal");var s=0;return t.prototype.set=function(e,t){if(n(e),!N(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.a]=t,this},t.prototype.get=function(e){return N(e,o)?e[o][this.a]:void 0},t.prototype.has=function(e){return N(e,o)&&N(e[o],this.a)},t.prototype.delete=function(e){return!(!N(e,o)||!N(e[o],this.a))&&delete e[o][this.a]},t})),h("Map",(function(e){function t(){var e={};return e.Ca=e.next=e.head=e}function n(e,t){var n=e.a;return c((function(){if(n){for(;n.head!=e.a;)n=n.Ca;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t;var i=e.b[n];if(i&&N(e.b,n))for(var r=0;r<i.length;r++){var a=i[r];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:i,index:r,X:a}}return{id:n,list:i,index:-1,X:void 0}}function r(e){if(this.b={},this.a=t(),this.size=0,e){e=d(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;a(),l();var o=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Ca:this.a.Ca,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Ca.next=n.X,this.a.Ca=n.X,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).X||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Ca.next=e.X.next,e.X.next.Ca=e.X.Ca,e.X.head=null,this.size--,0))},r.prototype.clear=function(){this.b={},this.a=this.a.Ca=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).X},r.prototype.get=function(e){return(e=i(this,e).X)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r})),h("Set",(function(e){function t(e){if(this.a=new Map,e){e=d(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done}catch(e){return!1}}()?e:(a(),l(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(i){return e.call(t,i,i,n)}))},t)})),h("Array.prototype.findIndex",(function(e){return e||function(e,t){return U(this,e,t).Cd}})),h("Array.prototype.keys",(function(e){return e||function(){return function(e,t){l(),e instanceof String&&(e+="");var n=0,i={next:function(){if(n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e){return e}))}})),h("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),h("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}})),h("String.prototype.includes",(function(e){return e||function(e,t){return-1!==B(this,e,"includes").indexOf(e,t||0)}})),h("Array.from",(function(e){return e||function(e,t,n){l(),t=null!=t?t:function(e){return e};var i=[],r=e[Symbol.iterator];if("function"==typeof r)for(e=r.call(e);!(r=e.next()).done;)i.push(t.call(n,r.value));else{r=e.length;for(var a=0;a<r;a++)i.push(t.call(n,e[a]))}return i}})),h("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=B(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return o>=r}})),h("Array.prototype.find",(function(e){return e||function(e,t){return U(this,e,t).ie}}));var F=this;function j(e,t){var n,i=e.split("."),r=F;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]?r[n]:r[n]={}:r[n]=t}function H(e,t){function n(){}n.prototype=t.prototype,e.ag=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.og=function(e,n,i){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function V(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function K(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function z(e){return e.a/(1-Math.pow(e.c,e.b))}function G(){this.b=new V(2),this.c=new V(5),this.a=0}function W(){}function Y(){}function $(){}F.a=!0,G.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(z(this.b),z(this.c))},e.console&&e.console.log.bind&&(Y=console.warn.bind(console),W=console.error.bind(console));var q=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function X(e){var t;e instanceof X?(Q(this,e.va),this.$a=e.$a,this.ra=e.ra,Z(this,e.xb),this.ia=e.ia,J(this,e.a.clone()),this.Qa=e.Qa):e&&(t=String(e).match(q))?(Q(this,t[1]||"",!0),this.$a=ee(t[2]||""),this.ra=ee(t[3]||"",!0),Z(this,t[4]),this.ia=ee(t[5]||"",!0),J(this,t[6]||"",!0),this.Qa=ee(t[7]||"")):this.a=new le(null)}function Q(e,t,n){e.va=n?ee(t,!0):t,e.va&&(e.va=e.va.replace(/:$/,""))}function Z(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.xb=t}else e.xb=null}function J(e,t,n){t instanceof le?e.a=t:(n||(t=te(t,oe)),e.a=new le(t))}function ee(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function te(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ne),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ne(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(n=X.prototype).va="",n.$a="",n.ra="",n.xb=null,n.ia="",n.Qa="",n.toString=function(){var e=[],t=this.va;if(t&&e.push(te(t,ie,!0),":"),t=this.ra){e.push("//");var n=this.$a;n&&e.push(te(n,ie,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.xb)&&e.push(":",String(t))}return(t=this.ia)&&(this.ra&&"/"!=t.charAt(0)&&e.push("/"),e.push(te(t,"/"==t.charAt(0)?ae:re,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Qa)&&e.push("#",te(t,se)),e.join("")},n.resolve=function(e){var t=this.clone();"data"===t.va&&(t=new X);var n=!!e.va;n?Q(t,e.va):n=!!e.$a,n?t.$a=e.$a:n=!!e.ra,n?t.ra=e.ra:n=null!=e.xb;var i=e.ia;if(n)Z(t,e.xb);else if(n=!!e.ia){if("/"!=i.charAt(0))if(this.ra&&!this.ia)i="/"+i;else{var r=t.ia.lastIndexOf("/");-1!=r&&(i=t.ia.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.ia=i:n=""!==e.a.toString(),n?J(t,e.a.clone()):n=!!e.Qa,n&&(t.Qa=e.Qa),t},n.clone=function(){return new X(this)};var ie=/[#\/\?@]/g,re=/[#\?:]/g,ae=/[#\?]/g,oe=/[#\?@]/g,se=/#/g;function le(e){this.a=e||null}function ue(e){this.b=e,this.a=null}function ce(e){this.b=e,this.a=null}function de(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.i=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function he(e){return p((function t(){var n,i;return L(t,(function(t){switch(t.j){case 1:if(e.a>=e.i){if(!e.c)return t.return(Promise.reject());e.a=1,e.b=e.f}return n=e.a,e.a++,0==n?t.return():(i=e.b*(1+(2*Math.random()-1)*e.h),A(t,new Promise((function(e){new ce(e).O(i/1e3)})),2));case 2:e.b*=e.g,_(t)}}))}))}function pe(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}function fe(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function ye(e,t){this.promise=e,this.Jd=t,this.a=!1}function ge(e){return new ye(Promise.reject(e),(function(){return Promise.resolve()}))}function ve(){var e=Promise.reject(new pe(2,7,7001));return e.catch((function(){})),new ye(e,(function(){return Promise.resolve()}))}function me(e){return new ye(Promise.resolve(e),(function(){return Promise.resolve()}))}function be(e){return new ye(e,(function(){return e.catch((function(){}))}))}function Ee(e){return new ye(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function ke(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){})).catch((function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}function Ae(t,n){for(var i in n=void 0===n?{}:n)this[i]=n[i];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function _e(){this.a={}}function Te(){this.Bc=new _e,this.Vb=this}function we(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function Se(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ce(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Re(e,t,n){if(n||(n=Se),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=d(e)).next();!r.done;i={item:i.item},r=e.next()){if(i.item=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.item,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function Ie(){this.a=[]}function De(e,t){e.a.push(t.finally((function(){Ce(e.a,t)})))}function Oe(e){Te.call(this),this.f=!1,this.g=new Ie,this.a=new Set,this.b=new Set,this.c=e||null}(n=le.prototype).ha=null,n.$b=null,n.add=function(e,t){if(!this.ha&&(this.ha={},this.$b=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),a=null;if(0<=r){var o=n[i].substring(0,r);a=n[i].substring(r+1)}else o=n[i];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(n=this.ha.hasOwnProperty(e)&&this.ha[e])||(this.ha[e]=n=[]),n.push(t),this.$b++,this},n.toString=function(){if(this.a)return this.a;if(!this.ha)return"";var e,t=[];for(e in this.ha)for(var n=encodeURIComponent(e),i=this.ha[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.a=t.join("&")},n.clone=function(){var e=new le;if(e.a=this.a,this.ha){var t,n={};for(t in this.ha)n[t]=this.ha[t].concat();e.ha=n,e.$b=this.$b}return e},ue.prototype.O=function(t){var n=this;this.stop();var i=!0,r=null;return this.a=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.b()}),1e3*t),this},ue.prototype.stop=function(){this.a&&(this.a(),this.a=null)},j("shaka.util.Timer",ce),ce.prototype.sc=function(){return this.stop(),this.b(),this},ce.prototype.tickNow=ce.prototype.sc,ce.prototype.O=function(e){var t=this;return this.stop(),this.a=new ue((function(){t.b()})).O(e),this},ce.prototype.tickAfter=ce.prototype.O,ce.prototype.La=function(e){var t=this;return this.stop(),this.a=new ue((function(){t.a.O(e),t.b()})).O(e),this},ce.prototype.tickEvery=ce.prototype.La,ce.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},ce.prototype.stop=ce.prototype.stop,j("shaka.util.Error",pe),pe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},pe.Severity={RECOVERABLE:1,CRITICAL:2},pe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},pe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,CAST_RECEIVER_APP_ID_MISSING:8007,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},fe.prototype.resolve=function(){},fe.prototype.reject=function(){},j("shaka.util.AbortableOperation",ye),ye.failed=ge,ye.aborted=ve,ye.completed=me,ye.notAbortable=be,ye.prototype.abort=function(){return this.a=!0,this.Jd()},ye.prototype.abort=ye.prototype.abort,ye.all=Ee,ye.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ye.prototype.finally=ye.prototype.finally,ye.prototype.U=function(e,t){function n(){return r.reject(new pe(2,7,7001)),i.abort()}var i=this,r=new fe;return this.promise.then((function(t){i.a?r.reject(new pe(2,7,7001)):e?n=ke(e,t,r):r.resolve(t)}),(function(e){t?n=ke(t,e,r):r.reject(e)})),new ye(r,(function(){return n()}))},ye.prototype.chain=ye.prototype.U,Ae.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Ae.prototype.stopImmediatePropagation=function(){this.a=!0},Ae.prototype.stopPropagation=function(){},(n=_e.prototype).push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},n.get=function(e){return(e=this.a[e])?e.slice():null},n.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},n.remove=function(e,t){var n=this.a[e];if(n)for(var i=0;i<n.length;++i)n[i]==t&&(n.splice(i,1),--i)},n.forEach=function(e){for(var t in this.a)e(t,this.a[t])},Te.prototype.addEventListener=function(e,t){this.Bc.push(e,t)},Te.prototype.removeEventListener=function(e,t){this.Bc.remove(e,t)},Te.prototype.dispatchEvent=function(e){for(var t=this.Bc.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Vb,e.currentTarget=this.Vb;var i=t[n];try{i.handleEvent?i.handleEvent(e):i.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},Ie.prototype.destroy=function(){var e=[];return this.a.forEach((function(t){t.promise.catch((function(){})),e.push(t.abort())})),this.a=[],Promise.all(e)},H(Oe,Te),j("shaka.net.NetworkingEngine",Oe);var Pe={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4};Oe.RequestType=Pe,Oe.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var xe={};function Le(e,t,n){n=n||3;var i=xe[e];(!i||n>=i.priority)&&(xe[e]={priority:n,zf:t})}function Me(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function Ne(e,t,n,i,r,a,o){var s=new X(n.uris[r]),l=s.va,u=!1;l||(Q(s,l=(l=location.protocol).slice(0,-1)),n.uris[r]=s.toString());var c,d=(l=xe[l])?l.zf:null;return d?be(he(i)).U((function(){return e.f?ve():(c=Date.now(),d(n.uris[r],n,t,(function(n,i,r){e.c&&1==t&&(e.c(n,i),u=!0,o.a=r)})))})).U((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-c),{response:e,Ze:u}}),(function(s){if(s&&7001==s.code)throw s;if(e.f)return ve();if(s&&1==s.severity)return e.dispatchEvent(new Ae("retry",{error:s instanceof pe?s:null})),r=(r+1)%n.uris.length,Ne(e,t,n,i,r,s,o);throw s||a})):ge(new pe(2,1,1e3,s))}function Ue(){this.a=0}function Be(e,t,n){ye.call(this,e,t),this.b=n}Oe.registerScheme=Le,Oe.unregisterScheme=function(e){delete xe[e]},Oe.prototype.Bf=function(e){this.a.add(e)},Oe.prototype.registerRequestFilter=Oe.prototype.Bf,Oe.prototype.cg=function(e){this.a.delete(e)},Oe.prototype.unregisterRequestFilter=Oe.prototype.cg,Oe.prototype.we=function(){this.a.clear()},Oe.prototype.clearAllRequestFilters=Oe.prototype.we,Oe.prototype.Cf=function(e){this.b.add(e)},Oe.prototype.registerResponseFilter=Oe.prototype.Cf,Oe.prototype.dg=function(e){this.b.delete(e)},Oe.prototype.unregisterResponseFilter=Oe.prototype.dg,Oe.prototype.xe=function(){this.b.clear()},Oe.prototype.clearAllResponseFilters=Oe.prototype.xe,Oe.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},Oe.prototype.destroy=Oe.prototype.destroy,Oe.prototype.request=function(e,t){var n=this,i=new Ue;if(this.f){var r=Promise.reject(new pe(2,7,7001));return r.catch((function(){})),new Be(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?we(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=we(t.uris);var a=(r=function(e,t,n){for(var i=me(void 0),r={},a=(e=d(e.a)).next();!a.done;r={fd:r.fd},a=e.next())r.fd=a.value,i=i.U(function(e){return function(){return e.fd(t,n)}}(r));return i.U(void 0,(function(e){if(e&&7001==e.code)throw e;throw new pe(2,1,1006,e)}))}(this,e,t)).U((function(){return Ne(n,e,t,new de(t.retryParameters,!1),0,null,i)})),o=a.U((function(t){return function(e,t,n){for(var i=me(void 0),r=(e=d(e.b)).next();!r.done;r=e.next())i=i.U(r.value.bind(null,t,n.response));return i.U((function(){return n}),(function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof pe&&(t=e.severity),new pe(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),l=0;r.promise.then((function(){l=Date.now()-s}),(function(){}));var u=0;return a.promise.then((function(){u=Date.now()}),(function(){})),r=new Be((r=o.U((function(t){var i=Date.now()-u,r=t.response;return r.timeMs+=l,r.timeMs+=i,t.Ze||!n.c||r.fromCache||1!=e||n.c(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}))).promise,r.Jd,i),De(this.g,r),r},Oe.prototype.request=Oe.prototype.request,Oe.NumBytesRemainingClass=Ue;var Fe=Be;if(Fe.prototype=y(ye.prototype),Fe.prototype.constructor=Fe,m)m(Fe,ye);else for(var je in ye)if("prototype"!=je)if(Object.defineProperties){var He=Object.getOwnPropertyDescriptor(ye,je);He&&Object.defineProperty(Fe,je,He)}else Fe[je]=ye[je];function Ve(){}function Ke(){this.a=new _e}function ze(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Ge;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Ge=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.a)}Fe.ag=ye.prototype,Oe.PendingRequest=Be,Be.all=Ee,Be.notAbortable=be,Be.completed=me,Be.aborted=ve,Be.failed=ge,j("shaka.util.IReleasable",Ve),Ve.prototype.release=function(){},j("shaka.util.EventManager",Ke),Ke.prototype.release=function(){this.Ya(),this.a=null},Ke.prototype.release=Ke.prototype.release,Ke.prototype.w=function(e,t,n,i){this.a&&(e=new ze(e,t,n,i),this.a.push(t,e))},Ke.prototype.listen=Ke.prototype.w,Ke.prototype.da=function(e,t,n,i){var r=this;this.w(e,t,(function i(a){r.ea(e,t,i),n(a)}),i)},Ke.prototype.listenOnce=Ke.prototype.da,Ke.prototype.ea=function(e,t,n){if(this.a)for(var i=this.a.get(t)||[],r=(i=d(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.ea(),this.a.remove(t,r))},Ke.prototype.unlisten=Ke.prototype.ea,Ke.prototype.Ya=function(){if(this.a){for(var e=this.a.getAll(),t=(e=d(e)).next();!t.done;t=e.next())t.value.ea();this.a.a={}}},Ke.prototype.removeAll=Ke.prototype.Ya,ze.prototype.ea=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},ze.prototype.unlisten=ze.prototype.ea;var Ge=void 0;function We(e){if(e=new Uint8Array(e),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");return new X(e=ot(e.subarray(4),!0)).ra}function Ye(e,t,n){function i(e){new DataView(a.buffer).setUint32(o,e.byteLength,!0),o+=4,r(e)}function r(e){a.set(e,o),o+=e.byteLength}if(!n||!n.byteLength)throw new pe(2,6,6015);t="string"==typeof t?new Uint8Array(ut(t,!0)):new Uint8Array(t);var a=new Uint8Array(8+e.byteLength+t.byteLength+n.byteLength),o=0;return r(new Uint8Array(e)),i(t),i(new Uint8Array(n)),a}function $e(e,t){for(var n=d(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}function qe(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t}function Xe(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Qe(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Ze(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}j("shaka.util.FairPlayUtils.defaultGetContentId",We),j("shaka.util.FairPlayUtils.initDataTransform",Ye);var Je=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function et(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function tt(e){return""!=(rt||(it||(it=new ce((function(){rt=null}))),(rt=document.querySelector("video")||document.querySelector("audio"))||(rt=document.createElement("video")),it.O(1),rt)).canPlayType(e)}function nt(e){return(navigator.userAgent||"").includes(e)}var it=null,rt=null;function at(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=ct(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new pe(2,2,2004)}}function ot(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new pe(2,2,2004);if(e instanceof ArrayBuffer)var i=e;else(n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),i=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),i=new DataView(i);for(var r=0;r<e;r++)n[r]=i.getUint16(2*r,t);return ct(n)}function st(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return at(t);if(254==t[0]&&255==t[1])return ot(t.subarray(2),!1);if(255==t[0]&&254==t[1])return ot(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(0==t[0]&&0==t[2])return ot(e,!1);if(0==t[1]&&0==t[3])return ot(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return at(e);throw new pe(2,2,2003)}function lt(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function ut(e,t){for(var n=new Uint8Array(2*e.length),i=new DataView(n.buffer),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n.buffer}function ct(e){if(!dt)for(var t=function(e){try{return M(new Uint8Array(e)),!0}catch(e){return!1}},n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(t(n.size)){dt=function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.size)n+=String.fromCharCode.apply(String,M(t.subarray(i,i+e.size)));return n}}(n);break}return dt(e)}j("shaka.util.StringUtils.fromUTF8",at),j("shaka.util.StringUtils.fromUTF16",ot),j("shaka.util.StringUtils.fromBytesAutoDetect",st),j("shaka.util.StringUtils.toUTF8",lt),j("shaka.util.StringUtils.toUTF16",ut);var dt=null;function ht(t,n){var i=ct(t);return n=null==n||n,i=e.btoa(i).replace(/\+/g,"-").replace(/\//g,"_"),n?i:i.replace(/=*$/,"")}function pt(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function ft(t){for(var n=new Uint8Array(t.length/2),i=0;i<t.length;i+=2)n[i/2]=e.parseInt(t.substr(i,2),16);return n}function yt(e){for(var t="",n=0;n<e.length;++n){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t}function gt(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}function vt(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var i=n=0;i<t.length;++i)n+=t[i].length;n=new Uint8Array(n);for(var r=i=0;r<t.length;++r)n.set(t[r],i),i+=t[r].length;return n}function mt(e){var t=this;this.C=e,this.v=new Set,this.m=this.h=null,this.P=!1,this.a=null,this.i=new Ke,this.b=new Map,this.s=[],this.l=new fe,this.c=null,this.g=function(n){t.l.reject(n),e.onError(n)},this.na=new Map,this.T=new Map,this.M=new ce((function(){return function(e){var t=e.na,n=e.T;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new pe(2,6,6014)),e.C.kc(Xe(n))}(t)})),this.f=!1,this.$=new fe,this.D=!1,this.G=[],this.ma=!1,this.W=new ce((function(){!function(e){e.b.forEach((function(t,n){var i=t.Yc,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.C.onExpirationUpdated(n.sessionId,r),t.Yc=r)}))}(t)})).La(1),this.l.catch((function(){}))}function bt(e,t,n){return e.s=n,e.D=0<n.length,Et(e,t)}function Et(t,n){var i=n.some((function(e){return 0<e.drmInfos.length}));if(!i){var r=qe(t.c.servers);!function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var i=d(e),r=i.next();!r.done;r=i.next())r.value.drmInfos=n}(n,r)}var a=function(t){if(0==(t=qe(t.c.clearKeys)).size)return null;var n=[],i=[];t.forEach((function(e,t){var r=ft(t),a=ft(e);r={kty:"oct",kid:ht(r,!1),k:ht(a,!1)},n.push(r),i.push(r.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:new Uint8Array(lt(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}(t);if(a){var o=d(n);for(r=o.next();!r.done;r=o.next())r.value.drmInfos=[a]}for(r=(a=d(n)).next();!r.done;r=a.next())for(o=(r=d(r.value.drmInfos)).next();!o.done;o=r.next())Lt(o.value,qe(t.c.servers),qe(t.c.advanced||{}));return(r=function(e,t){for(var n=new Set,i=d(t),r=i.next();!r.done;r=i.next()){var a=d(r.value.drmInfos);for(r=a.next();!r.done;r=a.next())n.add(r.value)}for(i=d(n),r=i.next();!r.done;r=i.next())Lt(r.value,qe(e.c.servers),qe(e.c.advanced||{}));a=e.D?"required":"optional";var o=e.D?["persistent-license"]:["temporary"];for(i=new Map,n=d(n),r=n.next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:r.keySystem,drmInfos:[]});for(n=d(t),r=n.next();!r.done;r=n.next()){a=(r=r.value).audio,o=r.video;var s=a?Qe(a.mimeType,a.codecs):"",l=o?Qe(o.mimeType,o.codecs):"",u=d(r.drmInfos);for(r=u.next();!r.done;r=u.next()){r=r.value;var c=i.get(r.keySystem);c.drmInfos.push(r),r.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),r.persistentStateRequired&&(c.persistentState="required"),a&&c.audioCapabilities.push({robustness:r.audioRobustness||"",contentType:s}),o&&c.videoCapabilities.push({robustness:r.videoRobustness||"",contentType:l})}}return i}(t,n)).size?(r=St(t,r),i?r:r.catch((function(){}))):(t.P=!0,Promise.resolve())}function kt(e){return p((function t(){var n;return L(t,(function(t){switch(t.j){case 1:if(!(e.h&&e.a&&e.a.serverCertificate&&e.a.serverCertificate.length)){t.A(0);break}return T(t,3),A(t,e.h.setServerCertificate(e.a.serverCertificate),5);case 5:S(t,0);break;case 3:return n=C(t),t.return(Promise.reject(new pe(2,6,6004,n.message)))}}))}))}function At(e){var t=e.a?e.a.initData:[];return t.forEach((function(t){return Rt(e,t.initDataType,t.initData)})),e.s.forEach((function(t){return Ct(e,t)})),t.length||e.s.length||e.l.resolve(),e.l}function _t(e,t,n){for(var i=e.b.values(),r=(i=d(i)).next();!r.done;r=i.next())if(gt(n,r.value.initData))return;Rt(e,t,n)}function Tt(e,t){return!!nt("Edge/")||e.v.has(t)}function wt(e){return e=function(e,t){for(var n=[],i=d(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}(e=e.b.keys(),(function(e){return e.sessionId})),Array.from(e)}function St(e,t){if(1==t.size&&t.has(""))return Promise.reject(new pe(2,6,6e3));for(var n=d(t.values()),i=n.next();!i.done;i=n.next())0==(i=i.value).audioCapabilities.length&&delete i.audioCapabilities,0==i.videoCapabilities.length&&delete i.videoCapabilities;var r=n=new fe;return[!0,!1].forEach(function(e){var n=this;t.forEach((function(t,i){t.drmInfos.some((function(e){return!!e.licenseServerUri}))==e&&(r=r.catch(function(){if(!this.f)return navigator.requestMediaKeySystemAccess(i,[t])}.bind(n)))}))}.bind(e)),r=(r=r.catch((function(){return Promise.reject(new pe(2,6,6001))}))).then(function(e){if(this.f)return Promise.reject();this.v.clear();var n=e.getConfiguration(),i=n.videoCapabilities||[],r=d(n.audioCapabilities||[]);for(n=r.next();!n.done;n=r.next())this.v.add(n.value.contentType);for(n=(i=d(i)).next();!n.done;n=i.next())this.v.add(n.value.contentType);i=e.keySystem,r=[];var a=[],o=[],s=[];return function(e,t,n,i,r){e.forEach((function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some((function(t){return gt(t,e.serverCertificate)}))||n.push(e.serverCertificate)),e.initData&&e.initData.forEach((function(e){i.some((function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&gt(t.initData,e.initData)}))||i.push(e)})),e.keyIds)for(var a=0;a<e.keyIds.length;++a)r.includes(e.keyIds[a])||r.push(e.keyIds[a])}))}((n=t.get(e.keySystem)).drmInfos,r,a,o,s),this.a={keySystem:i,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:o,keyIds:s},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new pe(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.f)return Promise.reject();this.h=e,this.P=!0}.bind(e)).catch(function(e){if(!this.f)return this.a=null,this.v.clear(),e instanceof pe?Promise.reject(e):Promise.reject(new pe(2,6,6002,e.message))}.bind(e)),n.reject(),r}function Ct(e,t){try{var n=e.h.createSession("persistent-license")}catch(t){var i=new pe(2,6,6005,t.message);return e.g(i),Promise.reject(i)}e.i.w(n,"message",e.Rd.bind(e)),e.i.w(n,"keystatuseschange",e.Pd.bind(e));var r={initData:null,loaded:!1,Yc:1/0,xa:null};return e.b.set(n,r),n.load(t).then(function(e){return this.f?Promise.reject():e?(r.loaded=!0,xt(this)&&this.l.resolve(),n):(this.b.delete(n),void this.g(new pe(2,6,6013)))}.bind(e),function(e){this.f||(this.b.delete(n),this.g(new pe(2,6,6005,e.message)))}.bind(e))}function Rt(e,t,n){try{var i=e.D?e.h.createSession("persistent-license"):e.h.createSession()}catch(t){return void e.g(new pe(2,6,6005,t.message))}e.i.w(i,"message",e.Rd.bind(e)),e.i.w(i,"keystatuseschange",e.Pd.bind(e)),e.b.set(i,{initData:n,loaded:!1,Yc:1/0,xa:null});try{if(e.c.initDataTransform)n=e.c.initDataTransform(n);else if(e.keySystem().startsWith("com.apple.fps")){var r=e.a.serverCertificate;n=Ye(n,We(n),r)}}catch(n){return t=n,n instanceof pe||(t=new pe(2,6,6016,n)),void e.g(t)}i.generateRequest(t,n.buffer).catch((function(t){if(!e.f){if(e.b.delete(i),t.errorCode&&t.errorCode.systemCode){var n=t.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}e.g(new pe(2,6,6006,t.message,t,n))}}))}function It(e,t){var n=t.target,i=e.b.get(n),r=e.a.licenseServerUri,a=e.c.advanced[e.a.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(r=Me([r],e.c.retryParameters)).body=t.message,r.method="POST",r.licenseRequestType=t.messageType,r.sessionId=n.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||function(e){var t=ot(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),i=0;i<n.length;++i)e.headers[n[i].querySelector("name").textContent]=n[i].querySelector("value").textContent;e.body=pt(t.querySelector("Challenge").textContent).buffer}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(r),e.a.keySystem.startsWith("com.apple.fps")&&e.c.fairPlayTransform&&function(e){var t=new Uint8Array(e.body);t="spc="+ht(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=lt(t)}(r),e.C.rb.request(2,r).promise.then(function(e){return this.f?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.c.fairPlayTransform&&function(e){try{var t=at(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=pt(t).buffer}(e),n.update(e.data).then(function(){var e=this;this.C.onEvent(new Ae("drmsessionupdate")),i&&(i.xa&&i.xa.resolve(),new ce((function(){i.loaded=!0,xt(e)&&e.l.resolve()})).O(Nt))}.bind(this)))}.bind(e),function(e){this.f||(e=new pe(2,6,6007,e),this.g(e),i&&i.xa&&i.xa.reject(e))}.bind(e)).catch(function(e){this.f||(e=new pe(2,6,6008,e.message),this.g(e),i&&i.xa&&i.xa.reject(e))}.bind(e))}function Dt(){var e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n=new Map;return e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(e){return function(e){return p((function i(){var r,a,o;return L(i,(function(i){switch(i.j){case 1:return T(i,2),A(i,navigator.requestMediaKeySystemAccess(e,t),4);case 4:return r=i.o,o=!!(a=r.getConfiguration().sessionTypes)&&a.includes("persistent-license"),nt("Tizen 3")&&(o=!1),n.set(e,{persistentState:o}),A(i,r.createMediaKeys(),5);case 5:S(i,0);break;case 2:C(i),n.set(e,null),_(i)}}))}))}(e)})),Promise.all(e).then((function(){return Xe(n)}))}function Ot(e,t){var n=t.audio,i=t.video;if(n&&n.encrypted&&!Tt(e,Qe(n.mimeType,n.codecs))||i&&i.encrypted&&!Tt(e,Qe(i.mimeType,i.codecs)))return!1;var r=e.keySystem();return 0==t.drmInfos.length||t.drmInfos.some((function(e){return e.keySystem==r}))}function Pt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)if(e[i].keySystem==t[r].keySystem){var a=e[i];r=t[r];var o=[];o=(o=o.concat(a.initData||[])).concat(r.initData||[]);var s=[];s=(s=s.concat(a.keyIds)).concat(r.keyIds),n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||r.persistentStateRequired,videoRobustness:a.videoRobustness||r.videoRobustness,audioRobustness:a.audioRobustness||r.audioRobustness,serverCertificate:a.serverCertificate||r.serverCertificate,initData:o,keyIds:s});break}return n}function xt(e){return $e(e=e.b.values(),(function(e){return e.loaded}))}function Lt(t,n,i){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=[]),(i=i.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}j("shaka.util.Uint8ArrayUtils.toBase64",ht),j("shaka.util.Uint8ArrayUtils.fromBase64",pt),j("shaka.util.Uint8ArrayUtils.fromHex",ft),j("shaka.util.Uint8ArrayUtils.toHex",yt),j("shaka.util.Uint8ArrayUtils.equal",gt),j("shaka.util.Uint8ArrayUtils.concat",vt),(n=mt.prototype).destroy=function(){var e=this;return p((function t(){return L(t,(function(t){switch(t.j){case 1:return e.f?A(t,e.$,0):(e.f=!0,A(t,function(e){return p((function t(){var n;return L(t,(function(t){switch(t.j){case 1:return e.i.release(),e.i=null,e.l.reject(),e.W.stop(),e.W=null,e.M.stop(),e.M=null,n=Array.from(e.b.keys()),e.b.clear(),A(t,Promise.all(n.map((function(e){return Promise.resolve().then((function(){return p((function t(){return L(t,(function(t){switch(t.j){case 1:return T(t,2),A(t,function(e){return p((function t(){var n;return L(t,(function(t){switch(t.j){case 1:return n=new Promise((function(e){new ce(e).O(Mt)})),A(t,Promise.race([e.close().then((function(){return!0})),n.then((function(){return!1}))]),2);case 2:_(t)}}))}))}(e),4);case 4:S(t,0);break;case 2:C(t),_(t)}}))}))}))}))),2);case 2:if(!e.m){t.A(3);break}return T(t,4),A(t,e.m.setMediaKeys(null),6);case 6:S(t,5);break;case 4:C(t);case 5:e.m=null;case 3:e.a=null,e.v.clear(),e.h=null,e.s=[],e.c=null,e.g=null,e.C=null,_(t)}}))}))}(e),4));case 4:e.$.resolve(),t.A(0)}}))}))},n.configure=function(e){this.c=e},n.Cb=function(e){var t=this;if(!this.h)return this.i.da(e,"encrypted",(function(){t.g(new pe(2,6,6010))})),Promise.resolve();this.m=e,this.i.da(this.m,"play",(function(){for(var e=0;e<t.G.length;e++)It(t,t.G[e]);t.ma=!0,t.G=[]})),e=(e=this.m.setMediaKeys(this.h)).catch((function(e){return Promise.reject(new pe(2,6,6003,e.message))}));var n=kt(this);return Promise.all([e,n]).then((function(){if(t.f)return Promise.reject();At(t),t.a.initData.length||t.s.length||t.i.w(t.m,"encrypted",(function(e){return _t(t,e.initDataType,new Uint8Array(e.initData))}))})).catch((function(e){if(!t.f)return Promise.reject(e)}))},n.keySystem=function(){return this.a?this.a.keySystem:""},n.dc=function(){for(var e=1/0,t=this.b.keys(),n=(t=d(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},n.Rd=function(e){this.c.delayLicenseRequestUntilPlayed&&this.m.paused&&!this.ma?this.G.push(e):It(this,e)},n.Pd=function(e){e=e.target;var t=this.b.get(e),n=!1;e.keyStatuses.forEach(function(e,i){if("string"==typeof i){var r=i;i=e,e=r}if("com.microsoft.playready"==this.a.keySystem&&16==i.byteLength&&!nt("Tizen")){var a=(r=new DataView(i)).getUint32(0,!0),o=r.getUint16(4,!0),s=r.getUint16(6,!0);r.setUint32(0,a,!1),r.setUint16(4,o,!1),r.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(n=!0),r=yt(new Uint8Array(i)),this.na.set(r,e)}.bind(this));var i=e.expiration-Date.now();(0>i||n&&1e3>i)&&t&&!t.xa&&(this.b.delete(e),e.close().catch((function(){}))),xt(this)&&(this.l.resolve(),this.M.O(Ut))};var Mt=1,Nt=5,Ut=.5;function Bt(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Ft(){}function jt(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ht(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Vt(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=e.length-1;0<=i&&e.end(i)>t;--i)n+=e.end(i)-Math.max(e.start(i),t);return n}function Kt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}Bt.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},Bt.prototype.b=function(e,t){var n=new Uint8Array(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},Bt.prototype.c=function(){this.a.resetCaptionStream()},Ft.prototype.init=function(){},Ft.prototype.b=function(){},Ft.prototype.c=function(){};var zt={ye:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},yc:function(e,t){return e.concat(t)},ic:function(){},Ga:function(e){return null!=e}};function Gt(e,t){if(0==t.length)return e;var n=t.map((function(e){return new X(e)}));return e.map((function(e){return new X(e)})).map((function(e){return n.map(e.resolve.bind(e))})).reduce(zt.yc,[]).map((function(e){return e.toString()}))}function Wt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var Yt={Na:"video",Ab:"audio",qa:"text",kg:"application"};function $t(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function qt(t,n){return!(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported(Xt(n,t)):MediaSource.isTypeSupported(Xt("audio",t))||MediaSource.isTypeSupported(Xt("video",t)))}function Xt(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",a=i[1],o=Number(i[2]);r=("66"==a?r+"4200":"77"==a?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),n=n.replace(i[0],r)}return n}function Qt(e,t,n){this.startTime=e,this.direction=rn,this.endTime=t,this.payload=n,this.region=new hn,this.position=null,this.positionAlign=Zt,this.size=100,this.textAlign=Jt,this.writingMode=an,this.lineInterpretation=on,this.line=null,this.lineHeight="",this.lineAlign=sn,this.displayAlign=tn,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=un,this.fontStyle=cn,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}$t.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},$t.prototype.i=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},$t.prototype.h=function(){var e={data:vt.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},j("shaka.text.Cue",Qt);var Zt="auto";Qt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Zt};var Jt="center",en={LEFT:"left",RIGHT:"right",CENTER:Jt,START:"start",END:"end"};Qt.textAlign=en;var tn="after",nn={BEFORE:"before",CENTER:"center",AFTER:tn};Qt.displayAlign=nn;var rn="ltr";Qt.direction={HORIZONTAL_LEFT_TO_RIGHT:rn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var an="horizontal-tb";Qt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:an,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var on=0;Qt.lineInterpretation={LINE_NUMBER:on,PERCENTAGE:1};var sn="start",ln={CENTER:"center",START:sn,END:"end"};Qt.lineAlign=ln;var un=400;Qt.fontWeight={NORMAL:un,BOLD:700};var cn="normal",dn={NORMAL:cn,ITALIC:"italic",OBLIQUE:"oblique"};function hn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=pn,this.scroll=fn}Qt.fontStyle=dn,Qt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},j("shaka.text.CueRegion",hn);var pn=1;hn.units={PX:0,PERCENTAGE:pn,LINES:2};var fn="";function yn(e){this.g=null,this.c=e,this.f=this.m=0,this.h=1/0,this.b=this.a=null,this.l="",this.i=new Map}hn.scrollMode={NONE:fn,UP:"up"};var gn={};function vn(t){return!!(gn[t]||e.muxjs&&"application/cea-608"==t)}function mn(e,t){"application/cea-608"!=t&&(e.g=new gn[t])}function bn(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=d(t)).next();!s.done;s=t.next()){var l=s.value;s=l.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),l.startTime+=r,l.endTime+=r,l.startTime>=e.f&&l.startTime<e.h&&(l=new Qt(l.startTime,l.endTime,l.text),o.get(s).get(a).push(l),s==e.l&&e.c.append([l]))}for(a=(r=d(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.i.has(a)||e.i.set(a,new Map),s=(t=d(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,l=o.get(a).get(s),e.i.get(a).set(s,l);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(i,e.h))}function En(e,t,n){this.f=e,this.g=n,this.b={},this.a=null,this.c={},this.i=new Ke,this.v=!1,this.l={},this.m=t,e=this.s=new fe,t=new MediaSource,this.i.da(t,"sourceopen",e.resolve),this.f.src=kn(t),this.h=t}j("shaka.text.TextEngine.registerParser",(function(e,t){gn[e]=t})),j("shaka.text.TextEngine.unregisterParser",(function(e){delete gn[e]})),yn.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},yn.prototype.Mc=function(e){try{return this.g.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new pe(2,2,2009,e)}},yn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))},yn.prototype.qe=function(e){this.c.append(e)},yn.prototype.appendCues=yn.prototype.qe,yn.prototype.rc=function(e,t){this.l=e;var n=this.i.get(e);if(n)for(var i=d(n.keys()),r=i.next();!r.done;r=i.next())(r=n.get(r.value))&&(r=r.filter((function(e){return e.endTime<=t})),this.c.append(r))},yn.prototype.setSelectedClosedCaptionId=yn.prototype.rc;var kn=e.URL.createObjectURL;function An(e){var t=Qe(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return Je.forEach((function(n,i){var r=e[i];r&&t.push(n+'="'+r+'"')})),t.join(";")}(e);return vn(t)||MediaSource.isTypeSupported(n)||qt(t,e.type)}function _n(e,t){e.a||(e.a=new yn(e.g)),mn(e.a,t)}function Tn(e){return!e.h||"ended"==e.h.readyState}function wn(e,t){if("text"==t)var n=e.a.a;else n=!(n=Cn(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function Sn(e,t){return"text"==t?e.a.b:jt(Cn(e,t))}function Cn(e,t){try{return e.b[t].buffered}catch(e){return null}}function Rn(t,n,i,r,a,o){return"text"==n?function(e,t,n,i){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==i)this.g.parseInit(new Uint8Array(t));else{var e={periodStart:this.m,segmentStart:n,segmentEnd:i};e=this.g.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.h}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(i,this.h)}}.bind(e))}(t.a,i,r,a):t.l[n]?function(e,t){e.f=!0,e.b=new fe,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new pe(2,3,3018)),e.b}(t.l[n],i).then(function(e){return this.a||_n(this,"text/vtt"),e.captions&&bn(this.a,e.captions,r,a,this.b.video.timestampOffset),Dn(this,n,this.ee.bind(this,n,e.data.buffer))}.bind(t)):(o&&e.muxjs&&(t.a||_n(t,"text/vtt"),null==r&&null==a?t.m.init(i):t.m.b(i,(function(e){e.length&&bn(t.a,e,r,a,t.b.video.timestampOffset)}))),Dn(t,n,t.ee.bind(t,n,i)))}function In(e,t){return"text"==t?e.a?(e.m.c(),e.a.remove(0,1/0)):Promise.resolve():Dn(e,t,e.fe.bind(e,t,0,e.h.duration))}function Dn(e,t,n){if(e.v)return Promise.reject();if(n={start:n,p:new fe},e.c[t].push(n),1==e.c[t].length)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new pe(2,3,3017,t)):n.p.reject(new pe(2,3,3015,i)),Pn(e,t)}return n.p}function On(e,t){if(e.v)return Promise.reject();var n,i=[];for(n in e.b){var r=new fe,a={start:function(e){e.resolve()}.bind(null,r),p:r};e.c[n].push(a),i.push(r),1==e.c[n].length&&a.start()}return Promise.all(i).then(function(){try{t()}catch(t){var e=Promise.reject(new pe(2,3,3015,t))}for(var n in this.b)Pn(this,n);return e}.bind(e),function(e){throw e}.bind(e))}function Pn(e,t){e.c[t].shift();var n=e.c[t][0];if(n)try{n.start()}catch(i){n.p.reject(new pe(2,3,3015,i)),Pn(e,t)}}function xn(e,t){return e=Mn(e),t=Mn(t),e.split("-")[0]==t.split("-")[0]}function Ln(e,t){e=Mn(e),t=Mn(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function Mn(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=Bn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Nn(e){return e.language?Mn(e.language):e.audio&&e.audio.language?Mn(e.audio.language):e.video&&e.video.language?Mn(e.video.language):"und"}function Un(e,t){for(var n=Mn(e),i=new Set,r=d(t),a=r.next();!a.done;a=r.next())i.add(Mn(a.value));for(a=(r=d(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=d(i)).next();!a.done;a=r.next())if(Ln(a=a.value,n))return a;for(a=(r=d(i)).next();!a.done;a=r.next()){var o=a=a.value,s=n;if(o=Mn(o),s=Mn(s),o=o.split("-"),s=s.split("-"),2==o.length&&2==s.length&&o[0]==s[0])return a}for(a=(i=d(i)).next();!a.done;a=i.next())if(Ln(n,r=a.value))return r;return null}(n=En.prototype).destroy=function(){var e=this;this.v=!0;var t,n=[];for(t in this.c){var i=this.c[t],r=i[0];for(this.c[t]=i.slice(0,1),r&&n.push(r.p.catch(zt.ic)),r=1;r<i.length;++r)i[r].p.reject()}for(var a in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.l)n.push(this.l[a].destroy());return Promise.all(n).then((function(){e.i&&(e.i.release(),e.i=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.h=null,e.a=null,e.g=null,e.b={},e.l={},e.m=null,e.c={}}))},n.init=function(e,t){var n=this;return p((function i(){var r;return L(i,(function(i){switch(i.j){case 1:return r=Yt,A(i,n.s,2);case 2:e.forEach((function(e,i){var a=Qe(e.mimeType,e.codecs);i==r.qa?_n(n,a):(!t&&MediaSource.isTypeSupported(a)||!qt(a,i)||(n.l[i]=new $t,a=Xt(i,a)),a=n.h.addSourceBuffer(a),n.i.w(a,"error",n.Tf.bind(n,i)),n.i.w(a,"updateend",n.ub.bind(n,i)),n.b[i]=a,n.c[i]=[])})),_(i)}}))}))},n.Jc=function(e){if(e.total=Kt(this.f.buffered),e.audio=Kt(Cn(this,"audio")),e.video=Kt(Cn(this,"video")),e.text=[],this.a){var t=this.a.a,n=this.a.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}},n.rc=function(e){var t=Sn(this,"video")||0;this.a.rc(e,t)},n.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):Dn(this,e,this.fe.bind(this,e,t,n))},n.flush=function(e){return"text"==e?Promise.resolve():Dn(this,e,this.Ce.bind(this,e))},n.endOfStream=function(e){return On(this,function(){Tn(this)||(e?this.h.endOfStream(e):this.h.endOfStream())}.bind(this))},n.wa=function(e){return On(this,function(){this.h.duration=e}.bind(this))},n.Y=function(){return this.h.duration},n.ee=function(e,t){this.b[e].appendBuffer(t)},n.fe=function(e,t,n){n<=t?this.ub(e):this.b[e].remove(t,n)},n.oe=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.ub(e)},n.Ce=function(e){this.f.currentTime-=.001,this.ub(e)},n.Sf=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.ub(e)},n.Pf=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.ub(e)},n.Tf=function(e){this.c[e][0].p.reject(new pe(2,3,3014,this.f.error?this.f.error.code:0))},n.ub=function(e){var t=this.c[e][0];t&&(t.p.resolve(),Pn(this,e))};var Bn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Fn(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&!(i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))&&i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))&&i(r.width*r.height,t.minPixels,t.maxPixels))||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function jn(e,t,n){var i=!1;return e.forEach((function(e){var r=e.allowedByApplication;e.allowedByApplication=Fn(e,t,n),r!=e.allowedByApplication&&(i=!0)})),i}function Hn(e,t,n,i){i.variants=i.variants.filter((function(i){if(e&&e.P&&!Ot(e,i))return!1;var r=i.audio;return i=i.video,!(r&&!An(r)||i&&!An(i)||r&&t&&!Vn(r,t)||i&&n&&!Vn(i,n))})),i.textStreams=i.textStreams.filter((function(e){return vn(Qe(e.mimeType,e.codecs))}))}function Vn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Kn(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var l=new Set;return t&&t.roles.forEach((function(e){return l.add(e)})),n&&n.roles.forEach((function(e){return l.add(e)})),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(l),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function zn(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function Gn(e){return e.__shaka_id||(e.__shaka_id=Wn++),e.__shaka_id}var Wn=0;function Yn(e){return{id:Gn(e),active:!1,type:"",bandwidth:0,language:Mn(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function $n(e){return e.allowedByApplication&&e.allowedByKeySystem}function qn(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=d(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(null,r)):i.get(Math.min.apply(null,n))}function Xn(e,t,n){var i=e,r=e.filter((function(e){return e.primary}));r.length&&(i=r);var a=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==a})),t){var o=Un(Mn(t),e.map((function(e){return e.language})));o&&(i=e.filter((function(e){return Mn(e.language)==o})))}if(n){if((e=Qn(i,n)).length)return e}else if((e=i.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=i.map((function(e){return e.roles})).reduce(zt.yc,[])).length?Qn(i,e[0]):i}function Qn(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function Zn(e,t,n){for(var i=0;i<n.length;i++)if(n[i].audio==e&&n[i].video==t)return n[i];return null}function Jn(){this.h=null,this.f=!1,this.b=new G,this.c=[],this.i=!1,this.a=this.g=null}function ei(e,t){return e&&(t=t.filter((function(t){return Fn(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function ti(e,t){this.a=e,this.b=t}function ni(e,t){var n=new ti(2,6),i=ai,r=i.a,a=n.b-r.b;(0<(n.a-r.a||a)?i.c:i.b)(i.a,n,e,t)}function ii(e,t,n,i){Y([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function ri(e,t,n,i){W([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}j("shaka.abr.SimpleAbrManager",Jn),Jn.prototype.stop=function(){this.h=null,this.f=!1,this.c=[],this.g=null},Jn.prototype.stop=Jn.prototype.stop,Jn.prototype.init=function(e){this.h=e},Jn.prototype.init=Jn.prototype.init,Jn.prototype.chooseVariant=function(){var e=ei(this.a.restrictions,this.c),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!e.length&&(e=[(e=ei(null,this.c))[0]]);for(var n=e[0]||null,i=0;i<e.length;++i){var r=e[i],a=(e[i+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;t>=r.bandwidth/this.a.bandwidthDowngradeTarget&&t<=a&&(n=r)}return this.g=Date.now(),n},Jn.prototype.chooseVariant=Jn.prototype.chooseVariant,Jn.prototype.enable=function(){this.f=!0},Jn.prototype.enable=Jn.prototype.enable,Jn.prototype.disable=function(){this.f=!1},Jn.prototype.disable=Jn.prototype.disable,Jn.prototype.segmentDownloaded=function(e,t){var n=this.b;if(!(16e3>t)){var i=8e3*t/e,r=e/1e3;n.a+=t,K(n.b,r,i),K(n.c,r,i)}if(null!=this.g&&this.f)e:{if(this.i){if(Date.now()-this.g<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}n=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(n)}},Jn.prototype.segmentDownloaded=Jn.prototype.segmentDownloaded,Jn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},Jn.prototype.getBandwidthEstimate=Jn.prototype.getBandwidthEstimate,Jn.prototype.setVariants=function(e){this.c=e},Jn.prototype.setVariants=Jn.prototype.setVariants,Jn.prototype.configure=function(e){this.a=e},Jn.prototype.configure=Jn.prototype.configure,ti.prototype.toString=function(){return"v"+this.a+"."+this.b};var ai=null,oi="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),si="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),li=["loop","playbackRate"],ui=["pause","play"],ci="abrstatuschanged adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged textchanged".split(" "),di={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},hi={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},pi=[["getConfiguration","configure"]],fi=[["isTextTrackVisible","setTextTrackVisibility"]],yi="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),gi=["attach","detach","load","unload"];function vi(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Ae){var n,i={};for(n in t){var r=t[n];r&&"object"==typeof r?"detail"==n&&(i[n]=r):n in Event||(i[n]=r)}return i}if(t instanceof TimeRanges)for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)i.start.push(t.start(n)),i.end.push(t.end(n));else i=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return i}}))}function mi(e){return JSON.parse(e,(function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t):t&&"object"==typeof t&&"Uint8Array"==t.__type__?new Uint8Array(t.entries):t}))}function bi(e,t,n,i,r,a){this.T=e,this.f=new ce(t),this.P=n,this.l=!1,this.G=i,this.M=r,this.C=a,this.b=this.h=!1,this.D="",this.i=null,this.m=this.Nd.bind(this),this.s=this.kf.bind(this),this.a={video:{},player:{}},this.v=0,this.c={},this.g=null}var Ei=!1,ki=null;function Ai(e){var t=ki;t.removeUpdateListener(e.m),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.s)}function _i(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new pe(1,7,7e3))}}function Ti(e){e=vi(e),ki.sendMessage("urn:x-cast:com.google.shaka.v2",e,(function(){}),$)}function wi(e,t,n){var i=this;Te.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.l=this.h=null,(this.m=n)&&(this.a=new bi(n,(function(){return Ci(i)}),(function(){return Ri(i)}),(function(e,t){return Di(i,e,t)}),(function(){return Ii(i)}),(function(){return Si(i)}))),function(e){for(var t in e.a&&e.a.init(),e.i=new Ke,oi.forEach(function(e){this.i.w(this.c,e,this.ig.bind(this))}.bind(e)),ci.forEach(function(e){this.i.w(this.b,e,this.yf.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.hg.bind(e,t),set:e.jg.bind(e,t)});for(var n in e.l={},e.b)Object.defineProperty(e.l,n,{configurable:!1,enumerable:!0,get:e.Ud.bind(e,n)});e.f=new Te,e.f.Vb=e.h,e.g=new Te,e.g.Vb=e.l}(this)}function Si(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.b.bc(),startTime:null};return e.c.pause(),li.forEach(function(e){t.video[e]=this.c[e]}.bind(e)),e.c.ended||(t.startTime=e.c.currentTime),pi.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.player[n]=e}.bind(e)),fi.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.playerAfterLoad[n]=e}.bind(e)),t}function Ci(e){e.dispatchEvent(new Ae("caststatuschanged"))}function Ri(e){e.f.dispatchEvent(new Ae(e.h.paused?"pause":"play"))}function Ii(e){pi.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e));var t=e.a.get("player","getAssetUri")(),n=e.a.get("video","ended"),i=Promise.resolve(),r=e.c.autoplay,a=null;n||(a=e.a.get("video","currentTime")),t&&(e.c.autoplay=!1,i=e.b.load(t,a));var o={};li.forEach(function(e){o[e]=this.a.get("video",e)}.bind(e)),i.then((function(){e.c&&(li.forEach(function(e){this.c[e]=o[e]}.bind(e)),fi.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=r,t&&e.c.play())}),(function(t){e.b.dispatchEvent(new Ae("error",{detail:t}))}))}function Di(e,t,n){e.a.ga()&&("video"==t?e.f.dispatchEvent(n):"player"==t&&e.g.dispatchEvent(n))}function Oi(e,t,n,i){var r=this;Te.call(this),this.a=e,this.b=t,this.c=new Ke,this.D={video:e,player:t},this.s=n||function(){},this.G=i||function(e){return e},this.v=!1,this.h=!0,this.g=0,this.m=!1,this.l=!0,this.i=this.f=null,this.C=new ce((function(){xi(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.Qd.bind(e),t.onSenderDisconnected=e.Qd.bind(e),t.onSystemVolumeChanged=e.Be.bind(e),e.i=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.i.onMessage=e.ef.bind(e),e.f=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.f.onMessage=e.rf.bind(e),t.start(),oi.forEach(function(e){this.c.w(this.a,e,this.Wd.bind(this,"video"))}.bind(e)),ci.forEach(function(e){this.c.w(this.b,e,this.Wd.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.kd(3840,2160):e.b.kd(1920,1080),e.c.w(e.a,"loadeddata",function(){this.m=!0}.bind(e)),e.c.w(e.b,"loading",function(){this.h=!1,Pi(this)}.bind(e)),e.c.w(e.a,"playing",function(){this.h=!1,Pi(this)}.bind(e)),e.c.w(e.a,"pause",function(){Pi(this)}.bind(e)),e.c.w(e.b,"unloading",function(){this.h=!0,Pi(this)}.bind(e)),e.c.w(e.a,"ended",function(){var e=this;new ce((function(){e.a&&e.a.ended&&(e.h=!0,Pi(e))})).O(5)}.bind(e))}(this)}function Pi(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new Ae("caststatuschanged")),Li(this)||Ui(this,0))}.bind(e))}function xi(e){e.C.O(.5);var t={video:{},player:{}};if(si.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.V())for(var n in hi)0==e.g%hi[n]&&(t.player[n]=e.b[n]());for(var i in di)0==e.g%di[i]&&(t.player[i]=e.b[i]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.m&&(e.g+=1),Ni(e,{type:"update",update:t},e.f),Li(e)}function Li(e){return!(!e.l||!e.a.duration&&!e.b.V()||(Mi(e),e.l=!1,0))}function Mi(e){var t={contentId:e.b.bc(),streamType:e.b.V()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""};Ui(e,0,t)}function Ni(e,t,n,i){e.v&&(e=vi(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ui(e,t,n){var i=e.a.playbackRate,r=Bi;i={mediaSessionId:0,playbackRate:i,playerState:r=e.h?r.IDLE:e.b.Oc()?r.je:e.a.paused?r.le:r.me,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},n&&(i.media=n),Ni(e,{requestId:t,type:"MEDIA_STATUS",status:[i]},e.i)}(n=bi.prototype).destroy=function(){return _i(this),ki&&Ai(this),this.f&&(this.f.stop(),this.f=null),this.M=this.G=null,this.b=this.h=!1,this.s=this.m=this.g=this.c=this.a=this.i=null,Promise.resolve()},n.ga=function(){return this.b},n.cd=function(){return this.D},n.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.f.sc();var t=new chrome.cast.SessionRequest(this.T);t=new chrome.cast.ApiConfig(t,this.Od.bind(this),this.pf.bind(this),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),Ei&&this.f.O(.02),(t=ki)&&t.status!=chrome.cast.SessionStatus.STOPPED?this.Od(t):ki=null}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},n.jd=function(e){this.i=e,this.b&&Ti({type:"appData",appData:this.i})},n.cast=function(e){return this.h?Ei?this.b?Promise.reject(new pe(1,8,8002)):(this.g=new fe,chrome.cast.requestSession(this.$c.bind(this,e),this.Md.bind(this)),this.g):Promise.reject(new pe(1,8,8001)):Promise.reject(new pe(1,8,8e3))},n.Eb=function(){this.b&&(_i(this),ki&&(Ai(this),ki.stop((function(){}),(function(){})),ki=null))},n.get=function(e,t){if("video"==e){if(ui.includes(t))return this.Yd.bind(this,e,t)}else if("player"==e){if(hi[t]&&!this.get("player","isLive")())return function(){};if(yi.includes(t))return this.Yd.bind(this,e,t);if(gi.includes(t))return this.Ef.bind(this,e,t);if(di[t])return this.Vd.bind(this,e,t)}return this.Vd(e,t)},n.set=function(e,t,n){this.a[e][t]=n,Ti({type:"set",targetName:e,property:t,value:n})},n.$c=function(e,t){ki=t,t.addUpdateListener(this.m),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.s),this.Nd(),Ti({type:"init",initState:e,appData:this.i}),this.g.resolve()},n.Md=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new pe(2,8,t,e))},n.Vd=function(e,t){return this.a[e][t]},n.Yd=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];Ti({type:"call",targetName:e,methodName:t,args:i})},n.Ef=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new fe;var a=this.v.toString();return this.v++,this.c[a]=r,Ti({type:"asyncCall",targetName:e,methodName:t,args:i,id:a}),r},n.Od=function(e){var t=this.C();this.g=new fe,this.l=!0,this.$c(t,e)},n.pf=function(e){Ei="available"==e,this.f.sc()},n.Nd=function(){var e=!!ki&&"connected"==ki.status;if(this.b&&!e){for(var t in this.M(),this.a)this.a[t]={};_i(this)}this.D=(this.b=e)?ki.receiver.friendlyName:"",this.f.sc()},n.kf=function(e,t){var n=mi(t);switch(n.type){case"event":var i=n.event;this.G(n.targetName,new Ae(i.type,i));break;case"update":for(var r in i=n.update)for(var a in n=this.a[r]||{},i[r])n[a]=i[r][a];this.l&&(this.P(),this.l=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=this.c[r],delete this.c[r],a)if(n){for(i in r=new pe(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}},H(wi,Te),j("shaka.cast.CastProxy",wi),wi.prototype.destroy=function(e){return e&&this.a&&this.a.Eb(),this.i&&(this.i.release(),this.i=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.l=this.h=this.c=null,Promise.all(e)},wi.prototype.destroy=wi.prototype.destroy,wi.prototype.Ye=function(){return this.h},wi.prototype.getVideo=wi.prototype.Ye,wi.prototype.Re=function(){return this.l},wi.prototype.getPlayer=wi.prototype.Re,wi.prototype.se=function(){return!!this.a&&this.a.h&&Ei},wi.prototype.canCast=wi.prototype.se,wi.prototype.ga=function(){return!!this.a&&this.a.ga()},wi.prototype.isCasting=wi.prototype.ga,wi.prototype.cd=function(){return this.a?this.a.cd():""},wi.prototype.receiverName=wi.prototype.cd,wi.prototype.cast=function(){if(!this.a)throw new pe(1,8,8007);var e=Si(this);return this.a.cast(e).then(function(){if(this.b)return this.b.rd()}.bind(this))},wi.prototype.cast=wi.prototype.cast,wi.prototype.jd=function(e){this.a&&this.a.jd(e)},wi.prototype.setAppData=wi.prototype.jd,wi.prototype.$f=function(){if(this.a){var e=this.a;if(e.b){var t=e.C();chrome.cast.requestSession(e.$c.bind(e,t),e.Md.bind(e))}}},wi.prototype.suggestDisconnect=wi.prototype.$f,wi.prototype.ve=function(e){var t=this;return p((function n(){return L(n,(function(n){switch(n.j){case 1:if(e==t.m)return n.return();if(t.m=e,!t.a){n.A(2);break}return t.a.Eb(),A(n,t.a.destroy(),3);case 3:t.a=null;case 2:t.a=new bi(e,(function(){return Ci(t)}),(function(){return Ri(t)}),(function(e,n){return Di(t,e,n)}),(function(){return Ii(t)}),(function(){return Si(t)})),t.a.init(),_(n)}}))}))},wi.prototype.changeReceiverId=wi.prototype.ve,wi.prototype.Eb=function(){this.a&&this.a.Eb()},wi.prototype.forceDisconnect=wi.prototype.Eb,(n=wi.prototype).hg=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a&&this.a.ga()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},n.jg=function(e,t){this.a&&this.a.ga()?this.a.set("video",e,t):this.c[e]=t},n.ig=function(e){this.a&&this.a.ga()||this.f.dispatchEvent(new Ae(e.type,e))},n.Ud=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==e)return function(){return this.h}.bind(this);if("getSharedConfiguration"==e)return this.a?this.a.get("player","getConfiguration"):this.b.getConfiguration();if("getNetworkingEngine"==e)return this.b.Fb.bind(this.b);if(this.a&&this.a.ga()){if("getManifest"==e||"drmInfo"==e)return function(){return Y(e+"() does not work while casting!"),null};if("getManifestUri"==e)return ni("getManifestUri",'Please use "getAssetUri" instead.'),this.Ud("getAssetUri");if("attach"==e||"detach"==e)return function(){return Y(e+"() does not work while casting!"),Promise.resolve()}}return this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length&&di[e]||!this.a||!this.a.ga()?this.b[e].bind(this.b):this.a.get("player",e)},n.yf=function(e){this.a&&this.a.ga()||this.g.dispatchEvent(e)},H(Oi,Te),j("shaka.cast.CastReceiver",Oi),Oi.prototype.isConnected=function(){return this.v},Oi.prototype.isConnected=Oi.prototype.isConnected,Oi.prototype.bf=function(){return this.h},Oi.prototype.isIdle=Oi.prototype.bf,Oi.prototype.destroy=function(){var e=this;return p((function t(){var n;return L(t,(function(t){switch(t.j){case 1:return e.c&&(e.c.release(),e.c=null),n=[],e.b&&(n.push(e.b.destroy()),e.b=null),e.C&&(e.C.stop(),e.C=null),e.a=null,e.D=null,e.s=null,e.v=!1,e.h=!0,e.f=null,e.i=null,A(t,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),_(t)}}))}))},Oi.prototype.destroy=Oi.prototype.destroy,(n=Oi.prototype).Qd=function(){this.g=0,this.l=!0,this.v=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Pi(this)},n.Wd=function(e,t){this.b&&(xi(this),Ni(this,{type:"event",targetName:e,event:t},this.f))},n.Be=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Ni(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Ni(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},n.rf=function(e){var t=mi(e.data);switch(t.type){case"init":this.g=0,this.m=!1,this.l=!0,function(e,t,n){for(var i in t.player)e.b[i](t.player[i]);e.s(n),n=Promise.resolve();var r=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime)),n.then((function(){if(e.b){for(var n in t.video)e.a[n]=t.video[n];for(var i in t.playerAfterLoad)e.b[i](t.playerAfterLoad[i]);e.a.autoplay=r,t.manifest&&(e.a.play(),Ui(e,0))}}),(function(t){e.b.dispatchEvent(new Ae("error",{detail:t}))}))}(this,t.initState,t.appData),xi(this);break;case"appData":this.s(t.appData);break;case"set":var n=t.targetName,i=t.property;if(t=t.value,"video"==n){var r=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){r.setSystemVolumeLevel(t);break}if("muted"==i){r.setSystemVolumeMuted(t);break}}this.D[n][i]=t;break;case"call":(n=this.D[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,i=t.methodName,"player"==n&&"load"==i&&(this.g=0,this.m=!1),r=t.id,e=e.senderId;var a=this.D[n];t=a[i].apply(a,t.args),"player"==n&&"load"==i&&(t=t.then(function(){this.l=!0}.bind(this))),t.then(this.be.bind(this,e,r,null),this.be.bind(this,e,r))}},n.ef=function(e){var t=mi(e.data);switch(t.type){case"PLAY":this.a.play(),Ui(this,0);break;case"PAUSE":this.a.pause(),Ui(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Ui(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Ui(this,0));break;case"STOP":this.b.rd().then(function(){this.b&&Ui(this,0)}.bind(this));break;case"GET_STATUS":Ui(this,Number(t.requestId));break;case"VOLUME":e=(n=t.volume).level,n=n.muted;var i=this.a.volume,r=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),i==this.a.volume&&r==this.a.muted||Ui(this,0);break;case"LOAD":this.g=0,this.l=this.m=!1,e=t.media,n=t.currentTime,i=this.G(e.contentId),r=t.autoplay||!0,this.s(e.customData),r&&(this.a.autoplay=!0),this.b.load(i,n).then(function(){this.b&&Mi(this)}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),Ni(this,{requestId:Number(t.requestId),type:n},this.i)}.bind(this));break;default:Ni(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},n.be=function(e,t,n){this.b&&Ni(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var Bi={IDLE:"IDLE",me:"PLAYING",je:"BUFFERING",le:"PAUSED"};function Fi(e,t){this.K=e,this.b=t==ji,this.a=0}j("shaka.util.DataViewReader",Fi);var ji=1;function Hi(){throw new pe(2,3,3e3)}function Vi(){this.c=[],this.b=[],this.a=!1}function Ki(e){for(;e.reader.sa()&&!e.parser.a;)e.parser.mc(e.start,e.reader,e.partialOkay)}function zi(e){for(var t=e.reader.F();0<t&&!e.parser.a;--t)e.parser.mc(e.start,e.reader,e.partialOkay)}function Gi(e){return function(t){e(t.reader.Xa(t.reader.K.byteLength-t.reader.ba()))}}function Wi(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function Yi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function $i(e){this.f=[],this.b=[],this.a=[],(new Vi).fa("pssh",this.c.bind(this)).parse(e.buffer)}Fi.Endianness={lg:0,mg:ji},Fi.prototype.sa=function(){return this.a<this.K.byteLength},Fi.prototype.hasMoreData=Fi.prototype.sa,Fi.prototype.ba=function(){return this.a},Fi.prototype.getPosition=Fi.prototype.ba,Fi.prototype.Ie=function(){return this.K.byteLength},Fi.prototype.getLength=Fi.prototype.Ie,Fi.prototype.ka=function(){try{var e=this.K.getUint8(this.a);return this.a+=1,e}catch(e){Hi()}},Fi.prototype.readUint8=Fi.prototype.ka,Fi.prototype.Mb=function(){try{var e=this.K.getUint16(this.a,this.b);return this.a+=2,e}catch(e){Hi()}},Fi.prototype.readUint16=Fi.prototype.Mb,Fi.prototype.F=function(){try{var e=this.K.getUint32(this.a,this.b);return this.a+=4,e}catch(e){Hi()}},Fi.prototype.readUint32=Fi.prototype.F,Fi.prototype.Xd=function(){try{var e=this.K.getInt32(this.a,this.b);return this.a+=4,e}catch(e){Hi()}},Fi.prototype.readInt32=Fi.prototype.Xd,Fi.prototype.yb=function(){try{if(this.b)var e=this.K.getUint32(this.a,!0),t=this.K.getUint32(this.a+4,!0);else t=this.K.getUint32(this.a,!1),e=this.K.getUint32(this.a+4,!1)}catch(e){Hi()}if(2097151<t)throw new pe(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Fi.prototype.readUint64=Fi.prototype.yb,Fi.prototype.Xa=function(e){this.a+e>this.K.byteLength&&Hi();var t=new Uint8Array(this.K.buffer,this.K.byteOffset+this.a,e);return this.a+=e,new Uint8Array(t)},Fi.prototype.readBytes=Fi.prototype.Xa,Fi.prototype.L=function(e){this.a+e>this.K.byteLength&&Hi(),this.a+=e},Fi.prototype.skip=Fi.prototype.L,Fi.prototype.$d=function(e){this.a<e&&Hi(),this.a-=e},Fi.prototype.rewind=Fi.prototype.$d,Fi.prototype.seek=function(e){(0>e||e>this.K.byteLength)&&Hi(),this.a=e},Fi.prototype.seek=Fi.prototype.seek,Fi.prototype.bd=function(){for(var e=this.a;this.sa()&&0!=this.K.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.K.buffer,this.K.byteOffset+e,this.a-e),this.a+=1,at(e)},Fi.prototype.readTerminatedString=Fi.prototype.bd,j("shaka.util.Mp4Parser",Vi),Vi.prototype.H=function(e,t){var n=Wi(e);return this.c[n]=0,this.b[n]=t,this},Vi.prototype.box=Vi.prototype.H,Vi.prototype.fa=function(e,t){var n=Wi(e);return this.c[n]=1,this.b[n]=t,this},Vi.prototype.fullBox=Vi.prototype.fa,Vi.prototype.stop=function(){this.a=!0},Vi.prototype.stop=Vi.prototype.stop,Vi.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new Fi(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.sa()&&!this.a;)this.mc(0,n,t)},Vi.prototype.parse=Vi.prototype.parse,Vi.prototype.mc=function(e,t,n){var i=t.ba(),r=t.F(),a=t.F();switch(r){case 0:r=t.K.byteLength-i;break;case 1:r=t.yb()}var o=this.b[a];if(o){var s=null,l=null;1==this.c[a]&&(s=(l=t.F())>>>24,l&=16777215),a=i+r,n&&a>t.K.byteLength&&(a=t.K.byteLength),a-=t.ba(),t=0<a?t.Xa(a):new Uint8Array(0),o({parser:this,partialOkay:n||!1,version:s,flags:l,reader:t=new Fi(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:r,start:i+e})}else t.L(Math.min(i+r-t.ba(),t.K.byteLength-t.ba()))},Vi.prototype.parseNext=Vi.prototype.mc,Vi.children=Ki,Vi.sampleDescription=zi,Vi.allData=Gi,Vi.typeToString=Yi,$i.prototype.c=function(e){if(!(1<e.version)){var t=yt(e.reader.Xa(16)),n=[];if(0<e.version)for(var i=e.reader.F(),r=0;r<i;++r){var a=yt(e.reader.Xa(16));n.push(a)}i=e.reader.F(),e.reader.L(i),this.b.push.apply(this.b,n),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}};var qi={ac:function(e,t){var n=qi.R(e,t);return 1!=n.length?null:n[0]},Gc:function(e,t,n){return 1!=(e=qi.zd(e,t,n)).length?null:e[0]},R:function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.tagName==t}))},zd:function(e,t,n){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},cc:function(e){return Array.prototype.every.call(e.childNodes,(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null},J:function(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r},vf:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},Ba:function(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null},oc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},nc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},vb:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Ae:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},Td:function(e,t){var n=new DOMParser;try{var i=n.parseFromString(e,"text/xml")}catch(e){}if(i&&i.documentElement.tagName==t)var r=i.documentElement;return r&&0<r.getElementsByTagName("parsererror").length?null:r},Sd:function(e,t){try{var n=at(e);return qi.Td(n,t)}catch(e){}}},Xi=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Qi(e,t,n){var i=function(e){for(var t=[],n=(e=d(e)).next();!n.done;n=e.next())(n=er(n.value))&&t.push(n);return t}(e),r=null;e=[];var a=[],o=new Set(i.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new pe(2,4,4010);if(n||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.ae||(r=e.init||r,!1)}))).length&&0==(e=function(e,t,n){for(var i=[],r=(n=d(n)).next();!r.done;r=n.next()){r=r.value;var a=Xi.get(r.ae);if(a){var o;if(o=qi.Gc(r.node,"urn:microsoft:playready","pro")){o=pt(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=o.length,u=s.length+16+l,c=new ArrayBuffer(u),h=new Uint8Array(c),p=0;(c=new DataView(c)).setUint32(p,u),p+=4,c.setUint32(p,1886614376),p+=4,c.setUint32(p,0),p+=4,h.set(s,p),p+=s.length,c.setUint32(p,l),p+=4,h.set(o,p),o=[{initData:h,initDataType:"cenc",keyId:r.keyId}]}else o=null;o=Wt(a,r.init||e||o),(a=Ji.get(a))&&(o.licenseServerUri=a(r)),i.push(o)}else for(a=(r=d(r=t(r.node)||[])).next();!a.done;a=r.next())i.push(a.value)}return i}(r,t,a)).length&&(e=[Wt("",r)]),i.length&&(n||!a.length))for(e=[],n=(t=d(Xi.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Wt(n,r));if(o=Array.from(o)[0]||null)for(n=(t=d(e)).next();!n.done;n=t.next())for(i=(n=d(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=o;return{wd:o,pg:r,drmInfos:e,Ad:!0}}var Zi,Ji=(new Map).set("com.widevine.alpha",(function(e){return(e=qi.Gc(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=qi.Gc(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(n!==e.byteLength)return[];t+=6,n=[];for(var i=new DataView(e);t<e.byteLength-1;){var r=i.getUint16(t,!0);t+=2;var a=i.getUint16(t,!0);t+=2;var o=new Uint8Array(e,t,a);n.push({type:r,value:o}),t+=a}return n}((e=pt(e.textContent)).buffer).filter((function(e){return 1===e.type}))[0])?(e=ot(e.value,!0),(e=qi.Td(e,"WRMHEADER"))?function(e){return(e=e.querySelector("DATA > LA_URL"))?e.textContent:""}(e):""):""}));function er(e){var t=e.getAttribute("schemeIdUri"),n=qi.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),i=qi.zd(e,"urn:mpeg:cenc:2013","pssh").map(qi.cc);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new pe(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:pt(e),keyId:null}}))}catch(e){throw new pe(2,4,4007)}return{node:e,ae:t,keyId:n,init:0<r.length?r:null}}function tr(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function nr(e,t){var n=ir(e,t,"timescale"),i=1;n&&(i=qi.nc(n)||1),n=ir(e,t,"duration"),(n=qi.nc(n||""))&&(n/=i);var r=ir(e,t,"startNumber"),a=Number(ir(e,t,"presentationTimeOffset"))||0,o=qi.vb(r||"");null!=r&&null!=o||(o=1);var s=rr(e,t,"SegmentTimeline");if(r=null,s){r=i;var l=e.S.duration||1/0;s=qi.R(s,"S");for(var u=[],c=0,d=0;d<s.length;++d){var h=s[d],p=qi.J(h,"t",qi.vb),f=qi.J(h,"d",qi.vb);if(h=qi.J(h,"r",qi.parseInt),null!=p&&(p-=a),!f)break;if(p=null!=p?p:c,0>(h=h||0))if(d+1<s.length){if(null==(h=qi.J(s[d+1],"t",qi.vb)))break;if(p>=h)break;h=Math.ceil((h-p)/f)-1}else{if(1/0==l)break;if(p/r>=l)break;h=Math.ceil((l*r-p)/f)-1}0<u.length&&p!=c&&(u[u.length-1].end=p/r);for(var y=0;y<=h;++y)c=p+f,u.push({start:p/r,end:c/r,eg:p}),p=c}r=u}return{timescale:i,Z:n,Za:o,la:a/i||0,sd:a,N:r}}function ir(e,t,n){return[t(e.B),t(e.ca),t(e.ja)].filter(zt.Ga).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function rr(e,t,n){return[t(e.B),t(e.ca),t(e.ja)].filter(zt.Ga).map((function(e){return qi.ac(e,n)})).reduce((function(e,t){return e||t}))}function ar(e,t,n,i,r,a){if(a=void 0===a?0:a,qi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=qi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),s=qi.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=0;l<e.attributes.length;l++){var u=e.attributes[l];"http://www.w3.org/1999/xlink"==u.namespaceURI&&(e.removeAttributeNS(u.namespaceURI,u.localName),--l)}if(5<=a)return ge(new pe(2,4,4028));if("onLoad"!=s)return ge(new pe(2,4,4027));var c=Gt([i],[o]);return r.request(0,Me(c,t)).U((function(i){if(!(i=qi.Sd(i.data,e.tagName)))return ge(new pe(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(s=0;s<i.attributes.length;s++){var l=i.attributes[s].nodeName,u=i.getAttribute(l);e.setAttribute(l,u)}return ar(e,t,n,c[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(o=o.U(void 0,(function(){return ar(e,t,n,i,r,a)}))),o}o=[];for(var s=0;s<e.childNodes.length;s++){var l=e.childNodes[s];l instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==qi.getAttributeNS(l,"http://www.w3.org/1999/xlink","href")?(e.removeChild(l),--s):"SegmentTimeline"!=l.tagName&&o.push(ar(l,t,n,i,r,a)))}return Ee(o).U((function(){return e}))}function or(e,t,n){this.c=e,this.b=t,this.a=n}function sr(e,t,n,i,r,a){this.position=e,this.startTime=t,this.endTime=n,this.c=i,this.b=r,this.a=a}function lr(e,t,n,i){var r,a=(new Vi).fa("sidx",(function(e){r=function(e,t,n,i){var r=[];i.reader.L(4);var a=i.reader.F();if(0==a)throw new pe(2,3,3005);if(0==i.version)var o=i.reader.F(),s=i.reader.F();else o=i.reader.yb(),s=i.reader.yb();i.reader.L(2);var l=i.reader.Mb();for(e=e+i.size+s,s=0;s<l;s++){var u=i.reader.F(),c=(2147483648&u)>>>31;u&=2147483647;var d=i.reader.F();if(i.reader.L(4),1==c)throw new pe(2,3,3006);r.push(new sr(r.length,o/a-t,(o+d)/a-t,(function(){return n}),e,e+u-1)),o+=d,e+=u}return i.parser.stop(),r}(t,i,n,e)}));if(e&&a.parse(e),r)return r;throw new pe(2,3,3004)}function ur(e){this.a=e}function cr(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&0>=e.a[0].endTime;)e.a.shift();if(0!=e.a.length){var n=e.a[e.a.length-1];e.a[e.a.length-1]=new sr(n.position,n.startTime,t,n.c,n.b,n.a)}}function dr(e){this.b=e,this.a=new Fi(e,0),Zi||(Zi=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function hr(e){var t=pr(e);if(7<t.length)throw new pe(2,3,3002);for(var n=0,i=0;i<t.length;i++)n=256*n+t[i];t=n,n=pr(e);e:{for(i=0;i<Zi.length;i++)if(gt(n,Zi[i])){i=!0;break e}i=!1}if(i)n=e.b.byteLength-e.a.ba();else{if(8==n.length&&224&n[1])throw new pe(2,3,3001);i=n[0]&(1<<8-n.length)-1;for(var r=1;r<n.length;r++)i=256*i+n[r];n=i}return n=e.a.ba()+n<=e.b.byteLength?n:e.b.byteLength-e.a.ba(),i=new DataView(e.b.buffer,e.b.byteOffset+e.a.ba(),n),e.a.L(n),new fr(t,i)}function pr(e){var t,n=e.a.ka();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new pe(2,3,3002);var i=new Uint8Array(t);for(i[0]=n,n=1;n<t;n++)i[n]=e.a.ka();return i}function fr(e,t){this.id=e,this.a=t}function yr(e){if(8<e.a.byteLength)throw new pe(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new pe(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++)t=256*t+e.a.getUint8(n);return t}function gr(){}function vr(e){var t=new dr(e.a);if(179!=(e=hr(t)).id)throw new pe(2,3,3013);if(e=yr(e),183!=(t=hr(t)).id)throw new pe(2,3,3012);t=new dr(t.a);for(var n=0;t.sa();){var i=hr(t);if(241==i.id){n=yr(i);break}}return{fg:e,Df:n}}function mr(e,t){var n=rr(e,t,"Initialization");if(!n)return null;var i=e.B.oa,r=n.getAttribute("sourceURL");r&&(i=Gt(e.B.oa,[r])),r=0;var a=null;return(n=qi.J(n,"range",qi.oc))&&(r=n.start,a=n.end),new or((function(){return i}),r,a)}function br(e,t,n,i,r,a,o,s){var l=e.presentationTimeline,u=!e.kb||!e.S.Qc,c=e.S.start,d=e.S.duration,h=t,p=null;return{createSegmentIndex:function(){var e=[h(i,r,a),"webm"==o?h(n.c(),n.b,n.a):null];return h=null,Promise.all(e).then((function(e){var t=e[0];e=e[1]||null,t="mp4"==o?lr(t,r,i,s):(new gr).parse(t,e,i,s),l.sb(t,c),p=new ur(t),u&&cr(p,d)}))},findSegmentPosition:function(e){return p.find(e)},getSegmentReference:function(e){return p.get(e)}}}function Er(e){return e.Ob}function kr(e,t){var n=mr(e,Ar),i=function(e){return[e.B.Ja,e.ca.Ja,e.ja.Ja].filter(zt.Ga).map((function(e){return qi.R(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Fd&&(e.Fd=!0),{cf:t.getAttribute("media"),start:(t=qi.J(t,"mediaRange",qi.oc,{start:0,end:null})).start,end:t.end}}))}(e),r=nr(e,Ar),a=r.Za;0==a&&(a=1);var o=0;if(r.Z?o=r.Z*(a-1):r.N&&0<r.N.length&&(o=r.N[0].start),!(i={Z:r.Z,startTime:o,Za:a,la:r.la,N:r.N,qb:i}).Z&&!i.N&&1<i.qb.length)throw new pe(2,4,4002);if(!i.Z&&!e.S.duration&&!i.N&&1==i.qb.length)throw new pe(2,4,4002);if(i.N&&0==i.N.length)throw new pe(2,4,4002);return a=r=null,e.ja.id&&e.B.id&&(r=t[a=e.ja.id+","+e.B.id]),o=function(e,t,n,i){var r=i.qb.length;i.N&&i.N.length!=i.qb.length&&(r=Math.min(i.N.length,i.qb.length));for(var a=[],o=i.startTime,s=0;s<r;s++){var l=i.qb[s],u=Gt(n,[l.cf]),c=void 0;c=null!=i.Z?o+i.Z:i.N?i.N[s].end:o+e,a.push(new sr(s+t,o,c,function(e){return e}.bind(null,u),l.start,l.end)),o=c}return a}(e.S.duration,i.Za,e.B.oa,i),r?(r.Tc(o),a=e.presentationTimeline.Hb(),r.Dc(a-e.S.start)):(e.presentationTimeline.sb(o,e.S.start),r=new ur(o),a&&e.kb&&(t[a]=r)),e.kb&&e.S.Qc||cr(r,e.S.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n,la:i.la}}function Ar(e){return e.Ja}function _r(e,t,n,i){var r=function(e){var t=ir(e,Tr,"initialization");if(!t)return null;var n=e.B.id,i=e.bandwidth||null,r=e.B.oa;return new or((function(){var e=tr(t,n,null,i,null);return Gt(r,[e])}),0,null)}(e),a=nr(e,Tr),o=ir(e,Tr,"media"),s=ir(e,Tr,"index");if(o=(a={Z:a.Z,timescale:a.timescale,Za:a.Za,la:a.la,sd:a.sd,N:a.N,Sc:o,Jb:s}).Jb?1:0,o+=a.N?1:0,0==(o+=a.Z?1:0))throw new pe(2,4,4002);if(1!=o&&(a.Jb&&(a.N=null),a.Z=null),!a.Jb&&!a.Sc)throw new pe(2,4,4002);if(a.Jb){if("mp4"!=(n=e.B.mimeType.split("/")[1])&&"webm"!=n)throw new pe(2,4,4006);if("webm"==n&&!r)throw new pe(2,4,4005);i=tr(a.Jb,e.B.id,null,e.bandwidth||null,null),e=br(e,t,r,i=Gt(e.B.oa,[i]),0,null,n,a.la)}else a.Z?(i||(e.presentationTimeline.Vc(a.Z),e.presentationTimeline.Wc(e.S.start)),e=function(e,t){var n=e.S.duration,i=t.Z,r=t.Za,a=t.timescale,o=t.Sc,s=e.bandwidth||null,l=e.B.id,u=e.B.oa;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/i)},getSegmentReference:function(e){var t=e*i,c=t+i;return n&&(c=Math.min(c,n)),0>c||n&&t>=n?null:new sr(e,t,c,(function(){var n=tr(o,l,e+r,s,t*a);return Gt(u,[n])}),0,null)}}}(e,a)):(o=t=null,e.ja.id&&e.B.id&&(t=n[o=e.ja.id+","+e.B.id]),s=function(e,t){for(var n=[],i=0;i<t.N.length;i++){var r=i+t.Za;n.push(new sr(r,t.N[i].start,t.N[i].end,function(e,t,n,i,r,a){return Gt(i,[e=tr(e,t,r,n,a)]).map((function(e){return e.toString()}))}.bind(null,t.Sc,e.B.id,e.bandwidth||null,e.B.oa,r,t.N[i].eg+t.sd),0,null))}return n}(e,a),i=!e.kb||!e.S.Qc,t?(i&&cr(new ur(s),e.S.duration),t.Tc(s),n=e.presentationTimeline.Hb(),t.Dc(n-e.S.start)):(e.presentationTimeline.sb(s,e.S.start),t=new ur(s),o&&e.kb&&(n[o]=t)),i&&cr(t,e.S.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:r,la:a.la}}function Tr(e){return e.Qb}j("shaka.media.InitSegmentReference",or),or.prototype.Ac=function(){return this.c()},or.prototype.createUris=or.prototype.Ac,or.prototype.Lc=function(){return this.b},or.prototype.getStartByte=or.prototype.Lc,or.prototype.Kc=function(){return this.a},or.prototype.getEndByte=or.prototype.Kc,j("shaka.media.SegmentReference",sr),sr.prototype.ba=function(){return this.position},sr.prototype.getPosition=sr.prototype.ba,sr.prototype.Mc=function(){return this.startTime},sr.prototype.getStartTime=sr.prototype.Mc,sr.prototype.Ge=function(){return this.endTime},sr.prototype.getEndTime=sr.prototype.Ge,sr.prototype.Ac=function(){return this.c()},sr.prototype.createUris=sr.prototype.Ac,sr.prototype.Lc=function(){return this.b},sr.prototype.getStartByte=sr.prototype.Lc,sr.prototype.Kc=function(){return this.a},sr.prototype.getEndByte=sr.prototype.Kc,j("shaka.media.SegmentIndex",ur),ur.prototype.destroy=function(){return this.a=null,Promise.resolve()},ur.prototype.destroy=ur.prototype.destroy,ur.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},ur.prototype.find=ur.prototype.find,ur.prototype.get=function(e){return 0==this.a.length||0>(e-=this.a[0].position)||e>=this.a.length?null:this.a[e]},ur.prototype.get=ur.prototype.get,ur.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},ur.prototype.offset=ur.prototype.offset,ur.prototype.Tc=function(e){for(var t=[],n=0,i=0;n<this.a.length&&i<e.length;){var r=this.a[n],a=e[i];r.startTime<a.startTime?(t.push(r),n++):(r.startTime>a.startTime?0==n&&t.push(a):(.1<Math.abs(r.endTime-a.endTime)?t.push(new sr(r.position,a.startTime,a.endTime,a.c,a.b,a.a)):t.push(r),n++),i++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;i<e.length;)r=new sr(n++,(r=e[i++]).startTime,r.endTime,r.c,r.b,r.a),t.push(r);else t=e;this.a=t},ur.prototype.merge=ur.prototype.Tc,ur.prototype.Dc=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},ur.prototype.evict=ur.prototype.Dc,dr.prototype.sa=function(){return this.a.sa()},gr.prototype.parse=function(e,t,n,i){var r;if(440786851!=hr(t=new dr(new DataView(t))).id)throw new pe(2,3,3008);var a=hr(t);if(408125543!=a.id)throw new pe(2,3,3009);for(t=a.a.byteOffset,a=new dr(a.a),r=null;a.sa();){var o=hr(a);if(357149030==o.id){r=o;break}}if(!r)throw new pe(2,3,3010);for(a=new dr(r.a),r=1e6,o=null;a.sa();){var s=hr(a);if(2807729==s.id)r=yr(s);else if(17545==s.id)if(4==(o=s).a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new pe(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new pe(2,3,3011);if(r=o*(a=r/1e9),475249515!=(e=hr(new dr(new DataView(e)))).id)throw new pe(2,3,3007);return function(e,t,n,i,r,a){function o(){return r}var s=[];e=new dr(e.a);for(var l=null,u=null;e.sa();){var c=hr(e);if(187==c.id){var d=vr(c);d&&(c=n*d.fg,d=t+d.Df,null!=l&&s.push(new sr(s.length,l-a,c-a,o,u,d-1)),l=c,u=d)}}return null!=l&&s.push(new sr(s.length,l-a,i-a,o,u,null)),s}(e,t,a,r,n,i)};var wr={wb:{},Lb:{},ed:function(e,t){wr.Lb[e]=t}};function Sr(e,t,n){this.f=e,this.pc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.l=0,this.m=!0,this.i=0,this.s=void 0===n||n}function Cr(e,t,n,i){return e=Me(e,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Rr(){var e=this;this.a=this.b=null,this.f=[],this.c=null,this.l=[],this.h=1,this.m={},this.s=0,this.v=new V(5),this.i=new ce((function(){!function(e){p((function t(){var n,i;return L(t,(function(t){switch(t.j){case 1:return n=0,T(t,2),A(t,Ir(e),4);case 4:n=t.o,S(t,3);break;case 2:i=C(t),e.a&&(i.severity=1,e.a.onError(i));case 3:if(!e.a)return t.return();xr(e,n),_(t)}}))}))}(e)})),this.g=new Ie}function Ir(e){var t=Date.now(),n=e.a.networkingEngine.request(0,Me(e.f,e.b.retryParameters));return De(e.g,n),n.promise.then((function(t){if(e.a)return t.uri&&!e.f.includes(t.uri)&&e.f.unshift(t.uri),function(e,t,n){if(!(t=qi.Sd(t,"MPD")))throw new pe(2,4,4001,n);return t=ar(t,e.b.retryParameters,e.b.dash.xlinkFailGracefully,n,e.a.networkingEngine),De(e.g,t),t.promise.then((function(t){return function(e,t,n){return p((function i(){var r,a,o,s,l,u,c,d,h,p,f,y,g,v,m,b,E,k,T,w,S,C,R;return L(i,(function(i){switch(i.j){case 1:s=zt,u=[n],0<(c=(l=qi).R(t,"Location").map(l.cc).filter(s.Ga)).length&&(d=Gt(u,c),u=e.f=d),h=l.R(t,"BaseURL").map(l.cc),p=Gt(u,h),f=e.b.dash.ignoreMinBufferTime,y=0,f||(y=l.J(t,"minBufferTime",l.Ba)),e.s=l.J(t,"minimumUpdatePeriod",l.Ba,-1),g=l.J(t,"availabilityStartTime",l.vf),v=l.J(t,"timeShiftBufferDepth",l.Ba),m=l.J(t,"suggestedPresentationDelay",l.Ba),b=l.J(t,"maxSegmentDuration",l.Ba),E=t.getAttribute("type")||"static",e.c?k=e.c.presentationTimeline:(T=Math.max(e.b.dash.defaultPresentationDelay,1.5*y),k=new Sr(g,null!=m?m:T,e.b.dash.autoCorrectDrift));for(var I={kb:"static"!=E,presentationTimeline:k,ja:null,S:null,ca:null,B:null,bandwidth:0,Fd:!1},D=p,O=qi.J(t,"mediaPresentationDuration",qi.Ba),P=[],x=0,L=qi.R(t,"Period"),M=0;M<L.length;M++){var N=L[M];x=qi.J(N,"start",qi.Ba,x);var U=qi.J(N,"duration",qi.Ba),B=null;if(M!=L.length-1){var F=qi.J(L[M+1],"start",qi.Ba);null!=F&&(B=F-x)}else null!=O&&(B=O-x);if(null==B&&(B=U),N=Dr(e,I,D,{start:x,duration:B,node:N,Qc:null==B||M==L.length-1}),P.push(N),U=I.ja.id,e.l.includes(U)||(e.l.push(U),e.c&&(e.a.filterNewPeriod(N),e.c.periods.push(N))),null==B){x=null;break}x+=B}if(null==e.c&&e.a.filterAllPeriods(P),null!=O?(r=P,a=O,o=!1):(r=P,a=x,o=!0),w=a,S=r,k.Rb("static"==E),"static"!=E&&o||k.wa(w||1/0),k.V()&&!isNaN(e.b.availabilityWindowOverride)&&(v=e.b.availabilityWindowOverride),null==v&&(v=1/0),k.md(v),k.Vc(b||1),e.c){i.A(0);break}if(e.c={presentationTimeline:k,periods:S,offlineSessionIds:[],minBufferTime:y||0},!k.he()){i.A(0);break}return C=l.R(t,"UTCTiming"),A(i,function(e,t,n){n=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}));var i=e.b.dash.clockSyncUri;return!n.length&&i&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),zt.ye(n,function(e){var n=e.scheme;switch(e=e.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Mr(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Mr(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(e),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return Y("NTP UTCTiming scheme is not supported"),Promise.reject();default:return Y("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(e)).catch((function(){return Y("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}(e,p,C),4);case 4:if(R=i.o,!e.a)return i.return();k.ce(R),_(i)}}))}))}(e,t,n)}))}(e,t.data,t.uri)})).then((function(){var n=(Date.now()-t)/1e3;return K(e.v,1,n),n}))}function Dr(e,t,n,i){if(t.ja=Lr(i.node,null,n),t.S=i,t.ja.id||(t.ja.id="__shaka_period_"+i.start),qi.R(i.node,"EventStream").forEach(e.wf.bind(e,i.start,i.duration)),n=qi.R(i.node,"AdaptationSet").map(e.uf.bind(e,t)).filter(zt.Ga),t.kb){t=[];for(var r=d(n),a=r.next();!a.done;a=r.next())for(var o=(a=d(a.value.Gf)).next();!o.done;o=a.next())t.push(o.value);if(t.length!=new Set(t).size)throw new pe(2,4,4018)}var s=n.filter((function(e){return!e.qd}));if(n.filter((function(e){return e.qd})).forEach((function(e){var t=e.streams[0],n=e.qd;s.forEach((function(e){e.id==n&&e.streams.forEach((function(e){e.trickModeVideo=t}))}))})),t=Or(s,"video"),r=Or(s,"audio"),!t.length&&!r.length)throw new pe(2,4,4004);for(r.length||(r=[null]),t.length||(t=[null]),n=[],a=0;a<r.length;a++)for(o=0;o<t.length;o++)Pr(e,r[a],t[o],n);for(e=Or(s,"text"),t=[],r=0;r<e.length;r++)t.push.apply(t,e[r].streams);return{startTime:i.start,textStreams:t,variants:n}}function Or(e,t){return e.filter((function(e){return e.contentType==t}))}function Pr(e,t,n,i){if(t||n)if(t&&n){var r=t.drmInfos,a=n.drmInfos;if(!r.length||!a.length||0<Pt(r,a).length){a=Pt(t.drmInfos,n.drmInfos);for(var o=0;o<t.streams.length;o++)for(var s=0;s<n.streams.length;s++)r=(n.streams[s].bandwidth||0)+(t.streams[o].bandwidth||0),r={id:e.h++,language:t.language,primary:t.Rc||n.Rc,audio:t.streams[o],video:n.streams[s],bandwidth:r,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}}else for(a=t||n,o=0;o<a.streams.length;o++)r=a.streams[o].bandwidth||0,r={id:e.h++,language:a.language||"und",primary:a.Rc,audio:t?a.streams[o]:null,video:n?a.streams[o]:null,bandwidth:r,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}function xr(e,t){0>e.s||e.i.O(Math.max(3,e.s-t,z(e.v)))}function Lr(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Xc:null},n=n||t.oa;var i=qi.vb,r=qi.Ae,a=qi.R(e,"BaseURL").map(qi.cc),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,l=e.getAttribute("codecs")||t.codecs;r=qi.J(e,"frameRate",r)||t.frameRate;for(var u=qi.R(e,"InbandEventStream"),c=t.emsgSchemeIdUris.slice(),h=(u=d(u)).next();!h.done;h=u.next())h=h.value.getAttribute("schemeIdUri"),c.includes(h)||c.push(h);return u=function(e){for(var t=0;t<e.length;++t){var n=e[t],i=n.getAttribute("schemeIdUri");if(i&&(n=n.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(i=parseInt(n,10)))continue;return i;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(i=parseInt(n,16)){for(e=0;i;)1&i&&++e,i>>=1;return e}}}return null}(u=qi.R(e,"AudioChannelConfiguration"))||t.Xc,o||(o=Nr(s,l)),{oa:Gt(n,a),Ob:qi.ac(e,"SegmentBase")||t.Ob,Ja:qi.ac(e,"SegmentList")||t.Ja,Qb:qi.ac(e,"SegmentTemplate")||t.Qb,width:qi.J(e,"width",i)||t.width,height:qi.J(e,"height",i)||t.height,contentType:o,mimeType:s,codecs:l,frameRate:r,emsgSchemeIdUris:c,id:e.getAttribute("id"),Xc:u}}function Mr(e,t,n,i){return(t=Me(t=Gt(t,[n]),e.b.retryParameters)).method=i,t=e.a.networkingEngine.request(4,t),De(e.g,t),t.promise.then((function(e){if("HEAD"==i){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=at(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()}))}function Nr(e,t){return vn(Qe(e,t))?"text":e.split("/")[0]}function Ur(e,t,n,i){this.b=e,this.type=t,this.a=n,this.segments=i||null}function Br(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=void 0===i?null:i}function Fr(e,t){this.name=e,this.value=t}function jr(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Hr(e,t){this.b=t,this.a=e}j("shaka.media.ManifestParser.registerParserByExtension",wr.ed),wr.Nb=function(e,t){wr.wb[e]=t},j("shaka.media.ManifestParser.registerParserByMime",wr.Nb),wr.Af=function(){var e={};if(et()){for(var t in wr.wb)e[t]=!0;for(var n in wr.Lb)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var i=(n=d(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!i.done;i=n.next())e[i=i.value]=et()?!!wr.wb[i]:tt(i);for(var r in t)e[r]=et()?!!wr.Lb[r]:tt(t[r]);return e},wr.create=function(e,t,n,i){return p((function r(){var a,o;return L(r,(function(r){switch(r.j){case 1:return T(r,2),A(r,wr.He(e,t,n,i),4);case 4:return a=r.o,r.return(new a);case 2:throw(o=C(r)).severity=2,o}}))}))},wr.He=function(e,t,n,i){return p((function r(){var a,o,s,l,u;return L(r,(function(r){switch(r.j){case 1:if(a=wr,i&&(o=a.wb[i.toLowerCase()]))return r.return(o);if((s=a.getExtension(e))&&(l=a.Lb[s]))return r.return(l);if(i){r.A(2);break}return A(r,a.Oe(e,t,n),3);case 3:if((i=r.o)&&(u=wr.wb[i]))return r.return(u);case 2:throw new pe(2,4,4e3,e)}}))}))},wr.Oe=function(e,t,n){return p((function i(){var r,a,o;return L(i,(function(i){switch(i.j){case 1:return(r=Me([e],n)).method="HEAD",A(i,t.request(0,r).promise,2);case 2:return a=i.o,o=a.headers["content-type"],i.return(o?o.toLowerCase():"")}}))}))},wr.getExtension=function(e){return 1==(e=new X(e).ia.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},wr.isSupported=function(e,t){return!!et()&&(t in wr.wb||wr.getExtension(e)in wr.Lb)},j("shaka.media.PresentationTimeline",Sr),Sr.prototype.Y=function(){return this.g},Sr.prototype.getDuration=Sr.prototype.Y,Sr.prototype.wa=function(e){this.g=e},Sr.prototype.setDuration=Sr.prototype.wa,Sr.prototype.Te=function(){return this.f},Sr.prototype.getPresentationStartTime=Sr.prototype.Te,Sr.prototype.ce=function(e){this.l=e},Sr.prototype.setClockOffset=Sr.prototype.ce,Sr.prototype.Rb=function(e){this.m=e},Sr.prototype.setStatic=Sr.prototype.Rb,Sr.prototype.md=function(e){this.h=e},Sr.prototype.setSegmentAvailabilityDuration=Sr.prototype.md,Sr.prototype.Qf=function(e){this.pc=e},Sr.prototype.setDelay=Sr.prototype.Qf,Sr.prototype.Fe=function(){return this.pc},Sr.prototype.getDelay=Sr.prototype.Fe,Sr.prototype.sb=function(e,t){if(0!=e.length){var n=e[e.length-1].endTime+t;this.Wc(e[0].startTime+t),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,n),null!=this.f&&this.s&&(this.f=(Date.now()+this.l)/1e3-this.b-this.a)}},Sr.prototype.notifySegments=Sr.prototype.sb,Sr.prototype.Wc=function(e){this.c=null==this.c?e:Math.min(this.c,e)},Sr.prototype.notifyMinSegmentStartTime=Sr.prototype.Wc,Sr.prototype.Vc=function(e){this.a=Math.max(this.a,e)},Sr.prototype.notifyMaxSegmentDuration=Sr.prototype.Vc,Sr.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},Sr.prototype.offset=Sr.prototype.offset,Sr.prototype.V=function(){return 1/0==this.g&&!this.m},Sr.prototype.isLive=Sr.prototype.V,Sr.prototype.Va=function(){return 1/0!=this.g&&!this.m},Sr.prototype.isInProgress=Sr.prototype.Va,Sr.prototype.Hb=function(){if(1/0==this.h)return this.i;var e=this.nb()-this.h;return Math.max(this.i,e)},Sr.prototype.getSegmentAvailabilityStart=Sr.prototype.Hb,Sr.prototype.de=function(e){this.i=e},Sr.prototype.setUserSeekStart=Sr.prototype.de,Sr.prototype.nb=function(){return this.V()||this.Va()?Math.min(Math.max(0,(Date.now()+this.l)/1e3-this.a-this.f),this.g):this.g},Sr.prototype.getSegmentAvailabilityEnd=Sr.prototype.nb,Sr.prototype.Gb=function(e){var t=Math.max(this.c,this.i);if(1/0==this.h)return t;var n=this.nb()-this.h;return e=Math.min(n+e,this.za()),Math.max(t,e)},Sr.prototype.getSafeSeekRangeStart=Sr.prototype.Gb,Sr.prototype.mb=function(){return this.Gb(0)},Sr.prototype.getSeekRangeStart=Sr.prototype.mb,Sr.prototype.za=function(){var e=this.V()||this.Va()?this.pc:0;return Math.max(0,this.nb()-e)},Sr.prototype.getSeekRangeEnd=Sr.prototype.za,Sr.prototype.he=function(){return null!=this.f&&null==this.b},Sr.prototype.usingPresentationStartTime=Sr.prototype.he,j("shaka.dash.DashParser",Rr),(n=Rr.prototype).configure=function(e){this.b=e},n.start=function(e,t){var n=this;return p((function i(){var r;return L(i,(function(i){switch(i.j){case 1:return n.f=[e],n.a=t,A(i,Ir(n),2);case 2:if(r=i.o,n.a&&xr(n,r),!n.a)throw new pe(2,7,7001);return i.return(n.c)}}))}))},n.stop=function(){return this.b=this.a=null,this.f=[],this.c=null,this.l=[],this.m={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},n.update=function(){Ir(this).catch(function(e){this.a&&this.a.onError(e)}.bind(this))},n.onExpirationUpdated=function(){},n.uf=function(e,t){e.ca=Lr(t,e.ja,null);var n=!1,i=qi.R(t,"Role"),r=i.map((function(e){return e.getAttribute("value")})).filter(zt.Ga),a=void 0,o="text"==e.ca.contentType;o&&(a="subtitle");for(var s=0;s<i.length;s++){var l=i[s].getAttribute("schemeIdUri");if(null==l||"urn:mpeg:dash:role:2011"==l)switch(l=i[s].getAttribute("value"),l){case"main":n=!0;break;case"caption":case"subtitle":a=l}}var u=null,c=!1;qi.R(t,"EssentialProperty").forEach((function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?u=e.getAttribute("value"):c=!0})),s=qi.R(t,"Accessibility");var h=new Map;for(i={},l=(s=d(s)).next();!l.done;i={Db:i.Db},l=s.next()){var p=l.value;l=p.getAttribute("schemeIdUri"),p=p.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==l||"urn:scte:dash:cc:cea-708:2015"==l?(i.Db=1,null!=p?p.split(";").forEach(function(e){return function(t){if(t.includes("=")){var n=(t=t.split("="))[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else n="CC"+e.Db,e.Db+=2;h.set(n,Mn(t))}}(i)):h.set("CC1","und")):"urn:mpeg:dash:role:2011"==l&&null!=p&&(r.push(p),"captions"==p&&(a="caption"))}if(c)return null;var f=Qi(i=qi.R(t,"ContentProtection"),this.b.dash.customScheme,this.b.dash.ignoreDrmInfo);if(i=Mn(t.getAttribute("lang")||"und"),l=t.getAttribute("label"),0==(r=(s=qi.R(t,"Representation")).map(this.xf.bind(this,e,f,a,i,l,n,r,h)).filter((function(e){return!!e}))).length){if(o)return null;throw new pe(2,4,4003)}return e.ca.contentType&&"application"!=e.ca.contentType||(e.ca.contentType=Nr(r[0].mimeType,r[0].codecs),r.forEach((function(t){t.type=e.ca.contentType}))),r.forEach((function(e){f.drmInfos.forEach((function(t){e.keyId&&t.keyIds.push(e.keyId)}))})),o=s.map((function(e){return e.getAttribute("id")})).filter(zt.Ga),{id:e.ca.id||"__fake__"+this.h++,contentType:e.ca.contentType,language:i,Rc:n,streams:r,drmInfos:f.drmInfos,qd:u,Gf:o}},n.xf=function(e,t,n,i,r,a,o,s,l){if(e.B=Lr(l,e.ca,null),!function(e){var t=e.Ob?1:0;return t+=e.Ja?1:0,0==(t+=e.Qb?1:0)?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Ob&&(e.Ja=null),e.Qb=null),!0)}(e.B))return null;e.bandwidth=qi.J(l,"bandwidth",qi.nc)||0;var u=e.B.contentType;u="text"==u||"application"==u;try{var c=this.Hf.bind(this);if(e.B.Ob)var d=function(e,t){var n=Number(ir(e,Er,"presentationTimeOffset"))||0,i=ir(e,Er,"timescale"),r=1;i&&(r=qi.nc(i)||1),n=n/r||0,i=mr(e,Er);var a=e.B.contentType;if(r=e.B.mimeType.split("/")[1],"text"!=a&&"mp4"!=r&&"webm"!=r)throw new pe(2,4,4006);if("webm"==r&&!i)throw new pe(2,4,4005);a=rr(e,Er,"RepresentationIndex");var o=ir(e,Er,"indexRange"),s=e.B.oa;if(o=qi.oc(o||""),a){var l=a.getAttribute("sourceURL");l&&(s=Gt(e.B.oa,[l])),o=qi.J(a,"range",qi.oc,o)}if(!o)throw new pe(2,4,4002);return{createSegmentIndex:(r=br(e,t,i,s,o.start,o.end,r,n)).createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:i,la:n}}(e,c);else if(e.B.Ja)d=kr(e,this.m);else if(e.B.Qb)d=_r(e,c,this.m,!!this.c);else{var h=e.B.oa,p=e.S.duration||0;d={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<p?1:null},getSegmentReference:function(e){return 1!=e?null:new sr(1,0,p,(function(){return h}),0,null)},initSegmentReference:null,la:0}}}catch(e){if(u&&4002==e.code)return null;throw e}return l=function(e,t,n,i){var r=Qi(e,t,i);if(n.Ad)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==r.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=r.drmInfos),n.Ad=!1;else if(0<r.drmInfos.length&&(n.drmInfos=n.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==n.drmInfos.length))throw new pe(2,4,4008);return r.wd||n.wd}(l=qi.R(l,"ContentProtection"),this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.h++,originalId:e.B.id,createSegmentIndex:d.createSegmentIndex,findSegmentPosition:d.findSegmentPosition,getSegmentReference:d.getSegmentReference,initSegmentReference:d.initSegmentReference,presentationTimeOffset:d.la,mimeType:e.B.mimeType,codecs:e.B.codecs,frameRate:e.B.frameRate,bandwidth:e.bandwidth,width:e.B.width,height:e.B.height,kind:n,encrypted:0<t.drmInfos.length,keyId:l,language:i,label:r,type:e.ca.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.B.emsgSchemeIdUris,roles:o,channelsCount:e.B.Xc,closedCaptions:s}},n.wf=function(e,t,n){var i=qi.vb,r=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",o=qi.J(n,"timescale",i)||1;qi.R(n,"Event").forEach(function(n){var s=qi.J(n,"presentationTime",i)||0,l=qi.J(n,"duration",i)||0;l=(s=s/o+e)+l/o,null!=t&&(s=Math.min(s,e+t),l=Math.min(l,e+t)),n={schemeIdUri:r,value:a,startTime:s,endTime:l,id:n.getAttribute("id")||"",eventElement:n},this.a.onTimelineRegionAdded(n)}.bind(this))},n.Hf=function(e,t,n){return e=Cr(e,t,n,this.b.retryParameters),e=this.a.networkingEngine.request(1,e),De(this.g,e),e.promise.then((function(e){return e.data}))},wr.ed("mpd",Rr),wr.Nb("application/dash+xml",Rr),Br.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Br.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Vr={lb:function(e,t){return e.filter((function(e){return e.name==t}))},Ra:function(e,t){var n=Vr.lb(e,t);return n.length?n[0]:null},Hc:function(e,t,n){return e.filter((function(e){var i=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),i.value==t&&e.value==n}))},zc:function(e,t){return Gt([e],[t])[0]},Pc:function(e){return/^#(?!EXT)/m.test(e)}};function Kr(e){this.b=e,this.a=0}function zr(e){Gr(e,/[ \t]+/gm)}function Gr(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,Jf:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.Jf)}function Wr(e){return e.a==e.b.length?null:(e=Gr(e,/[^ \t\n]*/gm))?e[0]:null}function Yr(){this.a=0}function $r(e,t,n){var i=(t=(t=at(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new pe(2,4,4015);t=0;for(var r=1;r<i.length;r++)if(!Vr.Pc(i[r])){var a=Xr(e,i[r]);if(--e.a,Qr.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(r+=1)}for(r=[],a=1;a<i.length;)if(Vr.Pc(i[a]))a+=1;else{var o=Xr(e,i[a]);if(Zr.includes(o.name)){if(1!=t)throw new pe(2,4,4017);return new Ur(n,t,r,e=qr(e,n,i=i.splice(a,i.length-a),r))}r.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new Fr("URI",i[a])),a+=1)}return new Ur(n,t,r)}function qr(e,t,n,i){var r=[],a=[];return n.forEach((function(n){if(/^(#EXT)/.test(n))n=Xr(e,n),Qr.includes(n.name)?i.push(n):a.push(n);else{if(Vr.Pc(n))return[];n=Vr.zc(t,n.trim()),r.push(new Hr(n,a)),a=[]}})),r}function Xr(e,t){var n=e.a++,i=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!i)throw new pe(2,4,4016,t);var r,a=i[1],o=i[2];if(i=[],o){var s;(s=Gr(o=new Kr(o),/^([^,=]+)(?:,|$)/g))&&(r=s[1]);for(var l=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=Gr(o,l);)i.push(new Fr(s[1],s[2]||s[3]))}return new Br(n,a,i,r)}var Qr="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Zr="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Jr(e){try{var t=Jr.parse(e);return me({uri:e,ad:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return ge(e)}}function ea(){var e=this;this.c=this.g=null,this.$=1,this.D=new Map,this.T=new Set,this.a=new Map,this.b=null,this.v="",this.s=new Yr,this.P=0,this.h=new ce((function(){!function(e){p((function t(){var n,i;return L(t,(function(t){switch(t.j){case 1:return e.g?(T(t,2),A(t,e.update(),4)):t.return();case 4:n=e.P,e.h.O(n),S(t,0);break;case 2:(i=C(t)).severity=1,e.g.onError(i),e.h.O(.1),_(t)}}))}))}(e)})),this.f=Ea,this.m=null,this.C=0,this.G=1/0,this.i=new Ie,this.M=[],this.l=new Map,this.W=!1}function ta(e,t){return p((function n(){var i,r,a,o,s,l,u,c,d,h;return L(n,(function(n){switch(n.j){case 1:return i=Vr,r=ka,a=t.pe,A(n,fa(e,a),2);case 2:if(o=n.o,1!=(s=$r(e.s,o.data,o.uri)).type)throw new pe(2,4,4017);return u=(l=i.Ra(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(l.value):0,c=t.stream,A(n,ua(e,t.tc,s,u,c.mimeType,c.codecs),3);case 3:d=n.o,t.Pb.a=d,h=d[d.length-1],i.Ra(s.a,"EXT-X-ENDLIST")&&(va(e,r.Oa),e.b.wa(h.endTime)),_(n)}}))}))}function na(e){e.forEach((function(e){var t=e.stream.codecs.split(",");t=t.filter((function(e){return"mp4a.40.34"!=e})),e.stream.codecs=t.join(",")}))}function ia(e,t,n,i,r){return{id:e.$++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:i,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}function ra(e,t,n){return p((function i(){var r,a,o,s,l,u,c,d,h;return L(i,(function(i){switch(i.j){case 1:if(r=ha(t,"URI"),e.a.has(r))return i.return(e.a.get(r));if(a=ha(t,"TYPE").toLowerCase(),o=Yt,"subtitles"==a&&(a=o.qa),s=Mn(jr(t,"LANGUAGE","und")),l=jr(t,"NAME"),u=t.getAttribute("DEFAULT"),c=t.getAttribute("AUTOSELECT"),d=jr(t,"CHANNELS"),"audio"==a)if(d){var p=d.split("/")[0];p=parseInt(p,10)}else p=null;else p=null;return A(i,aa(e,r,n,a,s,!!u||!!c,l,p,null),2);case 2:return null==(h=i.o)?i.return(null):e.a.has(r)?i.return(e.a.get(r)):(e.D.set(t.id,h),e.a.set(r,h),i.return(h))}}))}))}function aa(e,t,n,i,r,a,o,s,l){return p((function u(){var c,h,f,y,g,v,m,b,E,k,_,T,w,S,C,R,I,D,O,P,x,M,N,U,B;return L(u,(function(u){switch(u.j){case 1:return h=(c=Vr).zc(e.v,t),y="",A(u,fa(e,h),2);case 2:if(v=u.o,h=v.uri,1!=(f=$r(e.s,v.data,h)).type)throw new pe(2,4,4017);m=[],f.segments.forEach((function(e){e=c.lb(e.b,"EXT-X-KEY"),m.push.apply(m,e)})),b=!1,E=[],k=null;for(var F=d(m),j=F.next();!j.done;j=F.next())if(_=j.value,"NONE"!=(T=ha(_,"METHOD"))){if(b=!0,"AES-128"==T)return e.W=!0,u.return(null);w=ha(_,"KEYFORMAT"),(C=(S=ba[w])?S(_):null)&&(C.keyIds.length&&(k=C.keyIds[0]),E.push(C))}if(b&&!E.length)throw new pe(2,4,4026);return function(e,t){var n=ka,i=Vr.Ra(t.a,"EXT-X-PLAYLIST-TYPE"),r=Vr.Ra(t.a,"EXT-X-ENDLIST");r=i&&"VOD"==i.value||r,i=i&&"EVENT"==i.value&&!r,i=!r&&!i,r?va(e,n.Oa):(va(e,i?n.td:n.ke),n=pa(t.a,"EXT-X-TARGETDURATION"),n=Number(n.value),e.C=Math.max(n,e.C),e.G=Math.min(n,e.G))}(e,f),y=function(e,t){if(1==t.length)return t[0];var n=da(e,t);if(null!=n)return n;throw new pe(2,4,4025,t)}(i,n),A(u,function(e,t,n,i){return p((function r(){var a,o,s,l,u,c,d,h,p,f;return L(r,(function(r){switch(r.j){case 1:return a=Yt,o=Pe,s=i.segments[0].a,l=new X(s),u=l.ia.split(".").pop(),c=ga[t],(d=c[u])?r.return(d):t==a.qa?n&&"vtt"!=n?r.return("application/mp4"):r.return("text/vtt"):((h=Me([s],e.c.retryParameters)).method="HEAD",A(r,ma(e,h,o.ud),2));case 2:if(p=r.o,!(f=p.headers["content-type"]))throw new pe(2,4,4021,u);return r.return(f.split(";")[0])}}))}))}(e,i,y,f),3);case 3:return g=u.o,I=(R=c.Ra(f.a,"EXT-X-MEDIA-SEQUENCE"))?Number(R.value):0,A(u,ua(e,t,f,I,g,y),4);case 4:return D=u.o,O=D[0].startTime,P=D[D.length-1].endTime,x=P-O,M=new ur(D),N=oa(f),U=void 0,"text"==i&&(U="subtitle"),B={id:e.$++,originalId:o,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:M.find.bind(M),getSegmentReference:M.get.bind(M),initSegmentReference:N,presentationTimeOffset:0,mimeType:g,codecs:y,kind:U,encrypted:b,keyId:k,language:r,label:o,type:i,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:s,closedCaptions:l},u.return({stream:B,Pb:M,drmInfos:E,tc:t,pe:h,Uc:O,qg:P,duration:x})}}))}))}function oa(e){var t=Vr.lb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new pe(2,4,4020);var n=ha(t=t[0],"URI"),i=Vr.zc(e.b,n);return e=0,n=null,(t=jr(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new or((function(){return[i]}),e,n)}function sa(e,t,n,i){var r=t.b,a=t.a;t=pa(r,"EXTINF").value.split(","),t=i+Number(t[0]);var o=0,s=null;return(r=Vr.Ra(r,"EXT-X-BYTERANGE"))&&(o=r.value.split("@"),r=Number(o[0]),s=(o=o[1]?Number(o[1]):e.a+1)+r-1),new sr(n,i,t,(function(){return[a]}),o,s)}function la(e){e.b&&(e.M.forEach((function(t){e.b.sb(t,0)})),e.M=[])}function ua(e,t,n,i,r,a){return p((function o(){var s,l,u,c,d,h,f,y,g,v;return L(o,(function(o){switch(o.j){case 1:return s=n.segments,l=[],u=s[0].a,c=sa(null,s[0],i,0),d=oa(n),A(o,function(e,t,n,i,r,a){return p((function o(){var s,l,u,c,d,h,p,f,y;return L(o,(function(o){switch(o.j){case 1:if(e.m&&(s=e.a.get(t),l=s.Pb,u=l.get(i.position)))return o.return(u.startTime);if("audio/mpeg"==r)return o.return(0);if("video/mp4"!=r&&"audio/mp4"!=r){o.A(2);break}return c=[ca(e,i)],n&&c.push(ca(e,n)),A(o,Promise.all(c),3);case 3:return d=o.o,h=d[0],p=d[1]||d[0],o.return(function(e,t){var n=0;if((new Vi).H("moov",Ki).H("trak",Ki).H("mdia",Ki).fa("mdhd",(function(e){e.reader.L(0==e.version?8:16),n=e.reader.F(),e.parser.stop()})).parse(t,!0),!n)throw new pe(2,4,4030);var i=0,r=!1;if((new Vi).H("moof",Ki).H("traf",Ki).fa("tfdt",(function(e){i=(0==e.version?e.reader.F():e.reader.yb())/n,r=!0,e.parser.stop()})).parse(e,!0),!r)throw new pe(2,4,4030);return i}(h.data,p.data));case 2:if("video/mp2t"!=r){o.A(4);break}return A(o,ca(e,i),5);case 5:return f=o.o,o.return(function(e){function t(){throw new pe(2,4,4030)}e=new Fi(new DataView(e),0);for(var n=0,i=0;;){if(n=e.ba(),71!=(i=e.ka())&&t(),16384&e.Mb()||t(),0!=(i=(48&e.ka())>>4)&&2!=i||t(),3==i&&(i=e.ka(),e.L(i)),1==e.F()>>8)return e.L(3),0!=(n=e.ka()>>6)&&1!=n||t(),0==e.ka()&&t(),(1073741824*((14&(n=e.ka()))>>1)+((65534&(i=e.Mb()))<<14|(65534&(e=e.Mb()))>>1))/9e4;e.seek(n+188),71!=(i=e.ka())&&(e.seek(n+192),i=e.ka()),71!=i&&(e.seek(n+204),i=e.ka()),71!=i&&t(),e.$d(1)}}(f.data));case 4:if("application/mp4"!=r&&!r.startsWith("text/")){o.A(6);break}return A(o,ca(e,i),7);case 7:return y=o.o,o.return(function(e,t,n){return vn(e=Qe(e,t))?(mn(t=new yn(null),e),t.Mc(n)):0}(r,a,y.data));case 6:if("video/webm"==r)return o.return(null);throw new pe(2,4,4030)}}))}))}(e,t,d,c,r,a),2);case 2:h=o.o,u.split("/").pop();for(var m=0;m<s.length;++m)f=s[m],y=l[l.length-1],g=0==m?h:y.endTime,v=sa(y,f,i+m,g),l.push(v);return e.M.push(l),la(e),o.return(l)}}))}))}function ca(e,t){return p((function n(){var i,r,a,o,s,l;return L(n,(function(n){switch(n.j){case 1:return i=Pe,r=Cr(t.c(),t.b,t.b+2048-1,e.c.retryParameters),a=Cr(t.c(),t.b,t.a,e.c.retryParameters),T(n,2),A(n,ma(e,r,i.ud),4);case 4:return o=n.o,n.return(o);case 2:if(7001==(s=C(n)).code)throw s;return Y("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),A(n,ma(e,a,i.ud),5);case 5:return l=n.o,n.return(l)}}))}))}function da(e,t){for(var n=ya[e],i=0;i<n.length;i++)for(var r=0;r<t.length;r++)if(n[i].test(t[r].trim()))return t[r].trim();return"text"==e?"":null}function ha(e,t){var n=e.getAttribute(t);if(!n)throw new pe(2,4,4023,t);return n.value}function pa(e,t){var n=Vr.Ra(e,t);if(!n)throw new pe(2,4,4024,t);return n}function fa(e,t){return ma(e,Me([t],e.c.retryParameters),Pe.ng)}j("shaka.net.DataUriPlugin",Jr),Jr.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new pe(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new pe(2,1,1004,t);var i=n[0];n=e.decodeURIComponent(n.slice(1).join(","));var r=null;if(1<(i=i.split(";")).length&&(r=i[1]),"base64"==r)t=pt(n).buffer;else{if(r)throw new pe(2,1,1005,t);t=lt(n)}return{data:t,contentType:i[0]}},Le("data",Jr),j("shaka.hls.HlsParser",ea),(n=ea.prototype).configure=function(e){this.c=e},n.start=function(e,t){var n=this;return p((function i(){var r,a;return L(i,(function(i){switch(i.j){case 1:return n.g=t,A(i,fa(n,e),2);case 2:return r=i.o,n.v=r.uri,A(i,function(e,t){return p((function n(){var i,r,a,o,s,l,u,c,h,f,y;return L(n,(function(n){switch(n.j){case 1:if(0!=(i=$r(e.s,t,e.v)).type)throw new pe(2,4,4022);return A(n,function(e,t){return p((function n(){var i,r,a,o,s,l,u,c,h,f,y,g;return L(n,(function(n){switch(n.j){case 1:return i=Vr,r=zt,a=t.a,o=i.lb(t.a,"EXT-X-MEDIA"),s=o.filter(function(e){return"SUBTITLES"==ha(e,"TYPE")}.bind(e)),l=s.map(function(e){var t=this;return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return T(n,2),A(n,function(e,t){return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return ha(t,"TYPE"),A(n,ra(e,t,[]),2);case 2:return i=n.o,n.return(i.stream)}}))}))}(t,e),4);case 4:return n.return(n.o);case 2:if(i=C(n),t.c.hls.ignoreTextStreamFailures)return n.return(null);throw i}}))}))}.bind(e)),u=o.filter((function(e){return"CLOSED-CAPTIONS"==ha(e,"TYPE")})),function(e,t){for(var n=d(t),i=n.next();!i.done;i=n.next()){ha(i=i.value,"TYPE");var r=jr(i,"LANGUAGE")||"und";r=Mn(r);var a=ha(i,"GROUP-ID");i=ha(i,"INSTREAM-ID"),e.l.get(a)||e.l.set(a,new Map),e.l.get(a).set(i,r)}}(e,u),A(n,Promise.all(l),2);case 2:return c=n.o,h=i.lb(a,"EXT-X-STREAM-INF"),f=h.map(function(e){return function(e,t,n){return p((function i(){var r,a,o,s,l,u,c,h,f,y,g,v,m,b,E,k,_,T,w,S,C,R,I,D,O,P,x;return L(i,(function(i){switch(i.j){case 1:return r=Yt,a=Vr,o=jr(t,"CODECS","avc1.42E01E,mp4a.40.2"),s=function(e){for(var t=new Set,n=[],i=(e=d(e)).next();!i.done;i=e.next()){var r=Ze(i=i.value)[0];t.has(r)||(n.push(i),t.add(r))}return n}(o.split(/\s*,\s*/)),l=t.getAttribute("RESOLUTION"),c=u=null,h=jr(t,"FRAME-RATE"),f=Number(ha(t,"BANDWIDTH")),l&&(y=l.value.split("x"),u=y[0],c=y[1]),g=(g=(g=a.lb(n.a,"EXT-X-MEDIA")).filter((function(e){return"CLOSED-CAPTIONS"!=ha(e,"TYPE")}))).filter((function(e){var t=jr(e,"URI")||"";return"SUBTITLES"==(jr(e,"TYPE")||"")||""!=t})),v=jr(t,"AUDIO"),m=jr(t,"VIDEO"),v?g=a.Hc(g,"AUDIO",v):m&&(g=a.Hc(g,"VIDEO",m)),(b=da(r.qa,s))&&((E=jr(t,"SUBTITLES"))&&(k=a.Hc(g,"SUBTITLES",E)).length&&(_=e.D.get(k[0].id))&&(_.stream.codecs=b),Ce(s,b)),T=g.map(function(e){return ra(this,e,s)}.bind(e)),w=[],S=[],A(i,Promise.all(T),2);case 2:if(R=(R=i.o).filter((function(e){return null!=e})),v?w=R:m&&(S=R),D=!1,w.length||S.length?w.length?(P=ha(t,"URI"),x=w[0].tc,P==x?(I=r.Ab,D=!0):I=r.Na):I=r.Ab:1==s.length?(O=da(r.Na,s),I=l||h||O?r.Na:r.Ab):(I=r.Na,s=[s.join(",")]),D){i.A(3);break}return A(i,function(e,t,n,i){return p((function r(){var a,o,s,l,u;return L(r,(function(r){switch(r.j){case 1:return a=Yt,o=ha(t,"URI"),e.a.has(o)?r.return(e.a.get(o)):(s=jr(t,"CLOSED-CAPTIONS"),l=null,i==a.Na&&s&&"NONE"!=s&&(l=e.l.get(s)),A(r,aa(e,o,n,i,"und",!1,null,null,l),2));case 2:return null==(u=r.o)?r.return(null):e.a.has(o)?r.return(e.a.get(o)):(e.a.set(o,u),r.return(u))}}))}))}(e,t,s,I),4);case 4:C=i.o;case 3:if(C)C.stream.type==r.Ab?w=[C]:S=[C];else if(null===C)return i.return([]);return S&&na(S),w&&na(w),i.return(function(e,t,n,i,r,a,o){n.forEach(function(e){(e=e.stream)&&(e.width=Number(r)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e)),t.length||(t=[null]),n.length||(n=[null]);for(var s=[],l=(t=d(t)).next();!l.done;l=t.next()){l=l.value;for(var u=d(n),c=u.next();!c.done;c=u.next()){var h=c.value;c=l?l.stream:null;var p=h?h.stream:null,f=l?l.drmInfos:null,y=h?h.drmInfos:null;h=(h?h.tc:"")+" - "+(l?l.tc:"");var g=void 0;if(c&&p){if(f.length&&y.length&&!(0<Pt(f,y).length))continue;g=Pt(f,y)}else c?g=f:p&&(g=y);e.T.has(h)||(c=ia(e,c,p,i,g),s.push(c),e.T.add(h))}}return s}(e,w,S,f,u,c,h))}}))}))}(this,e,t)}.bind(e)),A(n,Promise.all(f),3);case 3:return y=n.o,g=(g=y.reduce(r.yc,[])).filter((function(e){return null!=e})),n.return({startTime:0,variants:g,textStreams:c.filter((function(e){return null!=e}))})}}))}))}(e,i),2);case 2:if(r=n.o,!e.g)throw new pe(2,7,7001);if(e.W&&0==r.variants.length)throw new pe(2,4,4034);e.g.filterAllPeriods([r]),a=1/0,o=0,s=1/0;for(var g=d(e.a.values()),v=g.next();!v.done;v=g.next())l=v.value,a=Math.min(a,l.Uc),o=Math.max(o,l.Uc),"text"!=l.stream.type&&(s=Math.min(s,l.duration));if(e.f!=ka.Oa?(e.b=new Sr(0,3*e.C),e.b.Rb(!1)):(e.b=new Sr(null,0),e.b.Rb(!0)),la(e),e.f!=ka.Oa){for(e.P=e.G,u=ka,e.f==u.td&&(c=e.b.pc,isNaN(e.c.availabilityWindowOverride)||(c=e.c.availabilityWindowOverride),e.b.md(c)),h=0;95443.7176888889<=o;)h+=95443.7176888889,o-=95443.7176888889;if(h)for(v=(g=d(e.a.values())).next();!v.done;v=g.next())95443.7176888889>(f=v.value).Uc&&(f.stream.presentationTimeOffset=-h,f.Pb.offset(h))}else for(e.b.wa(s),e.b.offset(-a),v=(g=d(e.a.values())).next();!v.done;v=g.next())(y=v.value).stream.presentationTimeOffset=a,y.Pb.offset(-a),cr(y.Pb,s);e.m={presentationTimeline:e.b,periods:[r],offlineSessionIds:[],minBufferTime:0},_(n)}}))}))}(n,r.data),3);case 3:return 0<(a=n.P)&&n.h.O(a),i.return(n.m)}}))}))},n.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.i&&(e.push(this.i.destroy()),this.i=null),this.c=this.g=null,this.D.clear(),this.T.clear(),this.a.clear(),this.m=null,Promise.all(e)},n.update=function(){if(this.f!=ka.Oa){for(var e=[],t=d(this.a.values()),n=t.next();!n.done;n=t.next())e.push(ta(this,n.value));return Promise.all(e)}},n.onExpirationUpdated=function(){};var ya={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},ga={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function va(e,t){e.f=t,e.b&&e.b.Rb(e.f==ka.Oa),e.f!=ka.Oa||e.h.stop()}function ma(e,t,n){if(!e.i)throw new pe(2,7,7001);return t=e.g.networkingEngine.request(n,t),De(e.i,t),t.promise}var ba={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ha(e,"METHOD");return ni("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227"),["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].includes(t)?(t=ha(e,"URI"),t=Jr.parse(t),t=Wt("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=jr(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):null}},Ea="VOD",ka={Oa:Ea,ke:"EVENT",td:"LIVE"};function Aa(){this.a=new Map}function _a(e,t,n){Ta(e,t).text=n}function Ta(e,t){return e.a.has(t)||e.a.set(t,new wa),e.a.get(t)}function wa(){this.text=this.variant=null}function Sa(e,t){this.a=e,this.b=new Set([e]);for(var n=d(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function Ca(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!(n.channelsCount==i.channelsCount&&Ra(n,i)&&Ia(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Ra(n=e.video,i=t.video)&&Ia(n.roles,i.roles))),!n}function Ra(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return Ze(e)[0]})),i=t.codecs.split(",").map((function(e){return Ze(e)[0]}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}function Ia(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;for(var r=(n=d(n)).next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Da(e){this.a=e,this.b=new Oa(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0)}function Oa(e,t,n){this.c=e,this.b=t,this.a=n}function Pa(e,t){this.a=La,this.b=(new Map).set(La,t).set(xa,e)}wr.ed("m3u8",ea),wr.Nb("application/x-mpegurl",ea),wr.Nb("application/vnd.apple.mpegurl",ea),Sa.prototype.add=function(e){return!!Ca(this.a,e)&&(this.b.add(e),!0)},Sa.prototype.values=function(){return this.b.values()},Da.prototype.create=function(e){var t=this,n=e.filter((function(e){return Ca(t.a,e)}));return n.length?new Sa(n[0],n):this.b.create(e)},Oa.prototype.create=function(e){var t=[];t=function(e,t){var n=Un(Mn(t),e.map((function(e){return Nn(e)})));return n?e.filter((function(e){return n==Nn(e)})):[]}(e,this.c);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,this.b&&(e=function(e,t){return e.filter((function(e){var n=e.audio;return e=e.video,n&&0<=n.roles.indexOf(t)||e&&0<=e.roles.indexOf(t)}))}(t,this.b)).length&&(t=e),this.a&&(e=qn(t,this.a)).length&&(t=e),e=new Sa(t[0]),n=(t=d(t)).next();!n.done;n=t.next())n=n.value,Ca(e.a,n)&&e.add(n);return e};var xa=0,La=1;function Ma(e,t){this.f=e,this.g=Ua(e),this.b=e.a.currentTime,this.c=Date.now()/1e3,this.h=t,this.a=function(){}}function Na(e){this.a=e}function Ua(e){if(e.a.paused||0==e.a.playbackRate||null==e.a.buffered)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(!(e<i||e>r-.5)){t=!0;break e}}t=!1}return t}function Ba(e,t,n,i,r){var a=this;this.a=e,this.v=t,this.s=n,this.l=r,this.f=new Ke,this.i=!1,this.m=e.readyState,this.c=!1,this.b=i,this.h=!1,this.f.w(e,"waiting",(function(){return Fa(a)})),this.g=new ce((function(){Fa(a)})).La(.25)}function Fa(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.i)return}else e.i=!1;if(!e.a.paused){e.a.readyState!=e.m&&(e.c=!1,e.m=e.a.readyState);var t=e.s.smallGapLimit,n=e.a.currentTime,i=e.a.buffered;e:{if(i&&i.length&&!(1==i.length&&1e-6>i.end(0)-i.start(0)))for(var r=nt("Edge/")||nt("Trident/")||nt("Tizen")||nt("CrKey")?.5:.1,a=0;a<i.length;a++)if(i.start(a)>n&&(0==a||i.end(a-1)-n<=r)){r=a;break e}r=null}if(null==r)e.b&&(i=Ua(n=(e=e.b).f),n=n.a.currentTime,r=Date.now()/1e3,e.b==n&&e.g==i||(e.c=r,e.b=n,e.g=i),(n=r-e.c)>=e.h&&i&&e.a(e.b,n));else if(0!=r||e.h){a=i.start(r);var o=e.v.za();if(!(a>=o)){t=(o=a-n)<=t;var s=!1;.001>o||(t||e.c||(e.c=!0,(n=new Ae("largegap",{currentTime:n,gapSize:o})).cancelable=!0,e.l(n),e.s.jumpLargeGaps&&!n.defaultPrevented&&(s=!0)),!t&&!s)||(0!=r&&i.end(r-1),e.a.currentTime=a)}}}}}function ja(e){var t=this;this.c=e,this.a=new Set,this.b=new ce((function(){Ha(t,!1)})).La(.25)}function Ha(e,t){for(var n=d(e.a),i=n.next();!i.done;i=n.next())i.value.g(e.c.currentTime,t)}function Va(e){for(var t=[],n=(e=d(e)).next();!n.done;n=e.next())for(var i=(n=d(n.value.variants)).next();!i.done;i=n.next())t.push(i.value);return t}function Ka(e,t){for(var n=null,i=d(e),r=i.next();!r.done;r=i.next())t>=(r=r.value).startTime&&(n=r);return n}function za(e){this.c=e,this.a=null,this.b=function(){}}function Ga(e){var t=this;this.a=e,this.f=!1,this.c=this.a.ec(),this.b=new ce((function(){t.a.Id(.25*t.c)}))}function Wa(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.ec()!=t&&e.a.ld(t))}catch(e){}e.b.La(.25),0!=e.a.ec()&&e.a.ld(0)}function Ya(e,t,n){this.a=e,this.f=t,this.g=n,this.h=!1,this.b=new Ke,this.c=new Za(e),0<e.readyState?Xa(this,n):qa(this,n)}function $a(e){return e.h?e.a.currentTime:e.g}function qa(e,t){e.g=t,e.b.ea(e.a,"loadedmetadata"),e.b.da(e.a,"loadedmetadata",(function(){Xa(e,t)}))}function Xa(e,t){.001>Math.abs(e.a.currentTime-t)?Qa(e):(e.b.da(e.a,"seeking",(function(){Qa(e)})),Ja(e.c,0==e.a.currentTime?t:e.a.currentTime))}function Qa(e){e.h=!0,e.b.w(e.a,"seeking",(function(){return e.f()}))}function Za(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new ce((function(){0>=t.c||t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)}))}function Ja(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.La(.1)}function eo(e){function t(){null==n.c?n.f=!0:(n.b.da(n.a,"seeking",(function(){n.f=!0})),n.a.currentTime=n.c)}var n=this;this.a=e,this.f=!1,this.c=null,this.b=new Ke,0==this.a.readyState?this.b.da(this.a,"loadedmetadata",t):t()}function to(e,t,n,i,r,a){var o=this;this.b=e,this.a=t.presentationTimeline,this.C=t.minBufferTime||0,this.g=n,this.v=r,this.l=null,this.f=new Ba(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,i=new Ma(new Na(e),t.stallThreshold);return function(e,t){e.a=t}(i,(function(){e.currentTime+=n})),i}(e,n),a),this.c=new Ya(e,(function(){var e=o.f;e.i=!0,e.h=!1,e.c=!1;var t=$a(o.c);return e=io(o,t),.001<Math.abs(e-t)&&(t=(new Date).getTime()/1e3,!o.l||o.l<t-1)?(o.l=t,0<(t=o.c).a.readyState?Ja(t.c,e):qa(t,e),e=void 0):(o.v(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.a.Y()?e.a.mb():e.a.za():0>t&&(t=e.a.za()+t),no(e,ro(e,t))}(this,i)),this.i=new ce((function(){if(0!=o.b.readyState&&!o.b.paused){var e=o.b.currentTime,t=o.a.mb(),n=o.a.za();3>n-t&&(t=n-3),e<t&&(e=io(o,e),o.b.currentTime=e)}})).La(.25)}function no(e,t){var n=e.a.Y();return t>=n?n-e.g.durationBackoff:t}function io(e,t){var n=Ht.bind(null,e.b.buffered),i=Math.max(e.C,e.g.rebufferingGoal),r=e.g.safeSeekOffset,a=e.a.mb(),o=e.a.za(),s=e.a.Y();3>o-a&&(a=o-3);var l=e.a.Gb(i),u=e.a.Gb(r);return i=e.a.Gb(i+r),t>=s?no(e,t):t>o?o:t<a?n(u)?u:i:t>=l||n(t)?t:i}function ro(e,t){var n=e.a.mb();return t<n||t>(n=e.a.za())?n:t}function ao(){this.b=function(){},this.a=new Set}function oo(e){var t=this;this.h=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.i=[{bb:null,ab:lo,Ua:function(e,n){return t.a(e,n)}},{bb:so,ab:lo,Ua:function(e,n){return t.a(e,n)}},{bb:uo,ab:lo,Ua:function(e,n){return t.a(e,n)}},{bb:lo,ab:so,Ua:function(e,n){return t.b(e,n)}},{bb:lo,ab:uo,Ua:function(e,n){return t.b(e,n)}},{bb:so,ab:uo,Ua:function(e,n){return t.c(e,n)}},{bb:uo,ab:so,Ua:function(e,n){return t.c(e,n)}}]}Ma.prototype.release=function(){this.f=null,this.a=function(){}},Ba.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.v=this.l=null},Ba.prototype.Zc=function(){this.h=!0,Fa(this)},ja.prototype.release=function(){this.b.stop();for(var e=d(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},za.prototype.release=function(){this.a=this.c=null,this.b=function(){}},za.prototype.g=function(e){var t=this.a,n=this.c.periods;t!=(e=Ka(n,e)||n[0])&&this.b(e),this.a=e},Ga.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},Ga.prototype.set=function(e){this.c=e,Wa(this)},Ya.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.f=function(){},this.a=null},Za.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},eo.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},eo.prototype.m=function(e){this.c=this.f?this.c:e},eo.prototype.h=function(){return(this.f?this.a.currentTime:this.c)||0},eo.prototype.s=function(){},to.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.i&&(this.i.stop(),this.i=null),this.b=this.c=this.a=this.g=null,this.v=function(){}},to.prototype.m=function(e){var t=this.c;0<t.a.readyState?Ja(t.c,e):qa(t,e)},to.prototype.h=function(){var e=$a(this.c);return 0<this.b.readyState&&!this.b.paused?ro(this,e):e},to.prototype.s=function(){this.f.Zc()},ao.prototype.release=function(){this.b=function(){},this.a.clear()},oo.prototype.release=function(){this.h=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},oo.prototype.g=function(e,t){for(var n=d(this.h.a),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.f.get(i),a=e<i.startTime?so:e>i.endTime?uo:lo;this.f.set(i,a);for(var o=d(this.i),s=o.next();!s.done;s=o.next())(s=s.value).bb==r&&s.ab==a&&s.Ua(i,t)}};var so=1,lo=2,uo=3;function co(e,t){this.a=t,this.c=e,this.g=null,this.l=1,this.v=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.s=!1,this.G=null,this.D=this.f=this.m=!1,this.C=0}function ho(e){return fo(e,"audio")}function po(e){return fo(e,"video")}function fo(e,t){var n=e.b.get(t);return n?n.Ia||n.stream:null}function yo(e,t){return p((function n(){var i,r,a,o,s,l,u,c,d;return L(n,(function(n){switch(n.j){case 1:return i=Yt,A(n,In(e.a.I,i.qa),2);case 2:return e.C++,e.D=!1,r=e.C,a=e.a.I,o=new Map,s=new Set,o.set(i.qa,t),s.add(t),A(n,a.init(o,!1),3);case 3:return e.f?n.return():A(n,_o(e,s),4);case 4:if(e.f)return n.return();l=e.a.I.g.isTextVisible()||e.g.alwaysStreamText,e.C!=r||e.b.has(i.qa)||e.D||!l||(u=e.a.Sa(),c=Do(e,u),d=ko(t,c,0),e.b.set(i.qa,d),Lo(e,d,0)),_(n)}}))}))}function go(e,t){var n=e.b.get("video");if(n){var i=n.stream;if(i)if(t){var r=i.trickModeVideo;r&&!n.Ia&&(mo(e,r,!1,0,!1),n.Ia=i)}else(i=n.Ia)&&(n.Ia=null,mo(e,i,!0,0,!1))}}function vo(e,t,n,i){t.video&&mo(e,t.video,n,i,!1),t.audio&&mo(e,t.audio,n,i,!1)}function mo(e,t,n,i,r){var a=e.b.get(t.type);if(!a&&"text"==t.type&&e.g.ignoreTextStreamFailures)yo(e,t);else if(a){var o=Oo(e,t),s=Array.from(e.b.values()).every((function(e){return e.pa==a.pa}));n&&o!=a.pa&&s?e.b.forEach((function(t){bo(e,t)})):(a.Ia&&(t.trickModeVideo?(a.Ia=t,t=t.trickModeVideo):a.Ia=null),(s=e.h[o])&&s.zb&&(s=e.i.get(t.id))&&s.zb&&(a.stream!=t||r)&&("text"==t.type&&_n(e.a.I,Qe(t.mimeType,t.codecs)),a.stream=t,a.hc=!0,function(e,t,n){if(!t.Kb)return!1;var i=e.a.Sa(),r=Sn(e.a.I,t.type);if(null==(n=(n=So(e,t,i,r,n))&&n.a?n.a-n.b:null))return!1;var a=t.stream.initSegmentReference;return a&&(n+=(a.a?a.a-a.b:null)||0),a=e.a.getBandwidthEstimate(),8*n/a<r-i-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.Kb.b.a>n}(e,a,o)&&a.Kb.abort(),n&&(a.Pa?a.uc=!0:a.Ha?(a.Ma=!0,a.Zb=i,a.uc=!0):(Mo(a),xo(e,a,!0,i).catch((function(t){e.a&&e.a.onError(t)}))))))}}function bo(e,t){t.Pa||t.Ma||(t.Ha?(t.Ma=!0,t.Zb=0):null==wn(e.a.I,t.type)?null==t.Da&&Lo(e,t,0):(Mo(t),xo(e,t,!1,0).catch((function(t){e.a&&e.a.onError(t)}))))}function Eo(e,t,n,i,r){return p((function a(){var o,s,l,u,c,d,h;return L(a,(function(a){switch(a.j){case 1:return o=e.a.Sa(),s=Do(e,o),l=Yt,u=new Map,c=new Set,t&&(u.set(l.Ab,t),c.add(t)),n&&(u.set(l.Na,n),c.add(n)),i&&(u.set(l.qa,i),c.add(i)),d=e.a.I,h=e.g.forceTransmuxTS,A(a,d.init(u,h),2);case 2:return e.f?a.return():(function(e){var t=e.c.presentationTimeline.Y();1/0>t?e.a.I.wa(t):e.a.I.wa(Math.pow(2,32))}(e),A(a,_o(e,c),3));case 3:if(e.f)return a.return();u.forEach((function(t,n){if(!e.b.has(n)){var i=ko(t,s,r);e.b.set(n,i),Lo(e,i,0)}})),_(a)}}))}))}function ko(e,t,n){return{stream:e,type:e.type,pb:null,Aa:null,Ia:null,hc:!0,pa:t,endOfStream:!1,Ha:!1,Da:null,Ma:!1,Zb:0,uc:!1,Pa:!1,dd:!1,Ib:!1,Zd:n||0,Kb:null}}function Ao(e,t){var n=e.h[t];if(n)return n.promise;n={promise:new fe,zb:!1},e.h[t]=n;for(var i=new Set,r=d(e.c.periods[t].variants),a=r.next();!a.done;a=r.next())(a=a.value).video&&i.add(a.video),a.video&&a.video.trickModeVideo&&i.add(a.video.trickModeVideo),a.audio&&i.add(a.audio);for(a=(r=d(e.c.periods[t].textStreams)).next();!a.done;a=r.next())i.add(a.value);return e.v=e.v.then(function(){if(!this.f)return _o(this,i)}.bind(e)).then(function(){this.f||(this.h[t].promise.resolve(),this.h[t].zb=!0)}.bind(e)).catch(function(e){this.f||(this.h[t].promise.catch((function(){})),this.h[t].promise.reject(),delete this.h[t],this.a.onError(e))}.bind(e)),n.promise}function _o(e,t){return p((function n(){var i,r,a,o,s,l,u;return L(n,(function(n){switch(n.j){case 1:i=[];for(var c=d(t),h=c.next();!h.done;h=c.next())r=h.value,(a=e.i.get(r.id))?i.push(a.promise):(e.i.set(r.id,{promise:new fe,zb:!1}),i.push(r.createSegmentIndex()));return T(n,2),A(n,Promise.all(i),4);case 4:if(e.f)return n.return();S(n,3);break;case 2:if(o=C(n),e.f)return n.return();for(h=(n=d(t)).next();!h.done;h=n.next())s=h.value,e.i.get(s.id).promise.catch((function(){})),e.i.get(s.id).promise.reject(),e.i.delete(s.id);throw o;case 3:for(h=(c=d(t)).next();!h.done;h=c.next())l=h.value,(u=e.i.get(l.id)).zb||(u.promise.resolve(),u.zb=!0);_(n)}}))}))}function To(e,t){if(!e.f&&!t.Ha&&null!=t.Da&&!t.Pa)if(t.Da=null,t.Ma)xo(e,t,t.uc,t.Zb);else{try{var n=function(e,t){if(Ro(t))return e.a.I.rc(t.stream.originalId||""),null;var n=e.a.Sa(),i=wo(e,t,n),r=Oo(e,t.stream),a=Do(e,i),o=function(e,t,n){return"text"==t?null==(e=e.a).b||e.b<n?0:e.b-Math.max(n,e.a):Vt(e=Cn(e,t),n)}(e.a.I,t.type,n),s=Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal,e.g.bufferingGoal)*e.l;if(i>=e.c.presentationTimeline.Y())return t.endOfStream=!0,"video"==t.type&&(i=e.b.get("text"))&&"application/cea-608"==i.stream.mimeType&&(i.endOfStream=!0),null;if(t.endOfStream=!1,t.pa=a,a!=r)return null;if(o>=s)return.5;if(a=Sn(e.a.I,t.type),!(a=So(e,t,n,a,r)))return 1;var l=1/0;return Array.from(e.b.values()).forEach((function(t){Ro(t)||(t=wo(e,t,n),l=Math.min(l,t))})),i>=l+e.c.presentationTimeline.a?1:(t.Zd=0,function(e,t,n,i,r){var a=e.c.periods[i],o=t.stream,s=e.c.presentationTimeline.Y(),l=e.c.periods[i+1];i=function(e,t,n,i,r){return t.hc?(n=function(e,t,n,i,r){return"text"==t?(e.a.m=n,(e=e.a).f=i,e.h=r,Promise.resolve()):Promise.all([Dn(e,t,e.oe.bind(e,t)),Dn(e,t,e.Sf.bind(e,t,n)),Dn(e,t,e.Pf.bind(e,t,i,r))])}(e.a.I,t.type,e.c.periods[n].startTime-t.stream.presentationTimeOffset,i,r),t.stream.initSegmentReference?(e=Po(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return Rn(this.a.I,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch((function(e){return t.hc=!0,Promise.reject(e)})),Promise.all([n,e])):n):Promise.resolve()}(e,t,i,Math.max(0,a.startTime-.1),l?l.startTime+.01:s),t.Ha=!0,t.hc=!1,s=Po(e,t,r),Promise.all([i,s]).then(function(e){if(!this.f&&!this.m)return function(e,t,n,i,r,a,o){var s=r.closedCaptions&&0<r.closedCaptions.size;return null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length&&(new Vi).fa("emsg",e.M.bind(e,i,a,r.emsgSchemeIdUris)).parse(o),function(e,t,n){var i=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),r=wn(e.a.I,t.type);return null==r||0>=(n=n-r-i)?Promise.resolve():e.a.I.remove(t.type,r,r+n).then(function(){}.bind(e))}(e,t,n).then(function(){if(!this.f)return Rn(this.a.I,t.type,o,a.startTime+i.startTime,a.endTime+i.startTime,s)}.bind(e)).then(function(){if(!this.f)return t.pb=r,t.Aa=a,Promise.resolve()}.bind(e))}(this,t,n,a,o,r,e[1])}.bind(e)).then(function(){this.f||this.m||(t.Ha=!1,t.dd=!1,t.Ma||this.a.Zc(),Lo(this,t,0),function(e,t){if(!e.s){var n=Array.from(e.b.values());if(1==n.length&&"text"==n[0].type||(e.s=n.every((function(e){return"text"==e.type||!e.Ma&&!e.Pa&&e.Aa}))),e.s){for(n=Oo(e,t),e.h[n]||Ao(e,n).then(function(){this.f||this.a.Kd()}.bind(e)).catch(zt.ic),n=0;n<e.c.periods.length;++n)Ao(e,n).catch(zt.ic);e.a.sf&&e.a.sf()}}}(this,o))}.bind(e)).catch(function(e){this.f||this.m||(t.Ha=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?this.b.delete("text"):7001==e.code?(t.Ha=!1,t.Da=null,Lo(this,t,0)):3017==e.code?function(e,t,n){if(!Array.from(e.b.values()).some((function(e){return e!=t&&e.dd}))){var i=Math.round(100*e.l);if(20<i)e.l-=.2;else{if(!(4<i))return t.Ib=!0,e.m=!0,void e.a.onError(n);e.l-=.04}t.dd=!0}Lo(e,t,4)}(this,t,e):(t.Ib=!0,e.severity=2,No(this,e)))}.bind(e))}(e,t,n,r,a),null)}(e,t);null!=n&&(Lo(e,t,n),t.Ib=!1)}catch(t){return void No(e,t)}n=Array.from(e.b.values()),function(e,t){var n=Oo(e,t.stream);if(t.pa!=n){var i=t.pa,r=Array.from(e.b.values());r.every((function(e){return e.pa==i||Ro(e)}))&&r.every(Io)&&Ao(e,i).then(function(){if(!this.f&&r.every(function(e){var t=Io(e),n=Oo(this,e.stream);return!!Ro(e)||t&&e.pa==i&&n!=i}.bind(this))){var e=this.c.periods[i],t=this.a.Ld(e),n=new Map;t.variant&&t.variant.video&&n.set("video",t.variant.video),t.variant&&t.variant.audio&&n.set("audio",t.variant.audio),t.text&&n.set("text",t.text);var a=d(this.b.keys());for(t=a.next();!t.done;t=a.next())if(t=t.value,!n.has(t)&&"text"!=t)return void this.a.onError(new pe(2,5,5005));for(t=(a=d(Array.from(n.keys()))).next();!t.done;t=a.next())if(t=t.value,!this.b.has(t)){if("text"!=t)return void this.a.onError(new pe(2,5,5005));Eo(this,null,null,n.get("text"),e.startTime),n.delete(t)}for(t=(e=d(Array.from(this.b.keys()))).next();!t.done;t=e.next())t=t.value,(a=n.get(t))?(mo(this,a,!1,0,!1),Lo(this,this.b.get(t),0)):this.b.delete(t);this.a.Kd()}}.bind(e)).catch(zt.ic)}}(e,t),e.s&&n.every((function(e){return e.endOfStream}))&&e.a.I.endOfStream().then(function(){if(!this.f){var e=this.a.I.Y();0!=e&&e<this.c.presentationTimeline.Y()&&this.c.presentationTimeline.wa(e)}}.bind(e))}}function wo(e,t,n){return t.pb&&t.Aa?(n=Oo(e,t.pb),e.c.periods[n].startTime+t.Aa.endTime):Math.max(n,t.Zd)}function So(e,t,n,i,r){if(t.Aa&&t.stream==t.pb)return Co(e,t,r,t.Aa.position+1);if(t.Aa?(n=Oo(e,t.pb),n=t.stream.findSegmentPosition(Math.max(0,e.c.periods[n].startTime+t.Aa.endTime-e.c.periods[r].startTime))):n=t.stream.findSegmentPosition(Math.max(0,(i||n)-e.c.periods[r].startTime)),null==n)return null;var a=null;return null==i&&(a=Co(e,t,r,Math.max(0,n-1))),a||Co(e,t,r,n)}function Co(e,t,n,i){return n=e.c.periods[n],(t=t.stream.getSegmentReference(i))?(e=(i=e.c.presentationTimeline).Hb(),i=i.nb(),n.startTime+t.endTime<e||n.startTime+t.startTime>i?null:t):null}function Ro(e){return"text"==e.type&&"application/cea-608"==e.stream.mimeType}function Io(e){return!e.Ha&&null==e.Da&&!e.Ma&&!e.Pa}function Do(e,t){var n=Ka(e.c.periods,t+.06666666666666667);return n?e.c.periods.indexOf(n):0}function Oo(e,t){for(var n=e.c.periods,i=0;i<n.length;i++){for(var r=n[i],a=new Set,o=d(r.variants),s=o.next();!s.done;s=o.next())(s=s.value).audio&&a.add(s.audio),s.video&&a.add(s.video),s.video&&s.video.trickModeVideo&&a.add(s.video.trickModeVideo);for(o=(r=d(r.textStreams)).next();!o.done;o=r.next())a.add(o.value);if(a.has(t))return i}return-1}function Po(e,t,n){return n=Cr(n.c(),n.b,n.a,e.g.retryParameters),e=e.a.rb.request(1,n),t.Kb=e,e.promise.then((function(e){return t.Kb=null,e.data}))}function xo(e,t,n,i){return p((function r(){var a,o,s;return L(r,(function(r){switch(r.j){case 1:return t.Ma=!1,t.uc=!1,t.Zb=0,t.Pa=!0,i?(o=e.a.Sa(),s=e.a.I.Y(),a=e.a.I.remove(t.type,o+i,s)):a=In(e.a.I,t.type).then(function(){if(!this.f&&n)return this.a.I.flush(t.type)}.bind(e)),A(r,a,2);case 2:if(e.f)return r.return();t.pb=null,t.Aa=null,t.Pa=!1,t.endOfStream=!1,Lo(e,t,0),_(r)}}))}))}function Lo(e,t,n){t.Da=new ue((function(){return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return T(n,2),A(n,To(e,t),4);case 4:S(n,0);break;case 2:i=C(n),e.a&&e.a.onError(i),_(n)}}))}))})).O(n)}function Mo(e){null!=e.Da&&(e.Da.stop(),e.Da=null)}function No(e,t){he(e.G).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function Uo(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,ad:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=st(t)}catch(e){}throw new pe(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function Bo(e,t,n,i){var r=new Bo.b;qe(t.headers).forEach((function(e,t){r.append(t,e)}));var a=new Bo.a,o={vd:!1,ge:!1};if(e=new ye(e=Bo.l(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,i),(function(){return o.vd=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new ce((function(){o.ge=!0,a.abort()}));s.O(t/1e3),e.finally((function(){s.stop()}))}return e}function Fo(e,t,n,i){var r=new Fo.f,a=Date.now(),o=0;return new ye(new Promise((function(s,l){for(var u in r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){l(new pe(1,1,7001,e,n))},r.onload=function(t){for(var i=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),r={},a=(i=d(i)).next();!a.done;a=i.next())r[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var o=Uo(r,t.response,t.status,e,t.responseURL,n);s(o)}catch(e){l(e)}},r.onerror=function(t){l(new pe(1,1,1002,e,t,n))},r.ontimeout=function(){l(new pe(1,1,1003,e,n))},r.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(i(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)r.setRequestHeader(u.toLowerCase(),t.headers[u]);r.send(t.body)})),(function(){return r.abort(),Promise.resolve()}))}function jo(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Ho(e,t){this.g=e,this.b=new Map,this.c=!1,this.f=t,this.a=new jo}function Vo(e,t,n,i,r){var a=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.a,i);i=e.b.get(t)||Promise.resolve(),e.b.set(t,i.then((function(){return p((function t(){var i;return L(t,(function(t){switch(t.j){case 1:return A(t,function(e,t){return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return A(n,e.g.request(1,t).promise,2);case 2:return i=n.o,n.return(i.data)}}))}))}(e,n),2);case 2:if(i=t.o,e.c)throw new pe(2,9,7001);e.a.close(a,i.byteLength);var o=e.a;return e.f(0==o.b?0:o.f/o.b,e.a.a),t.return(r(i))}}))}))})))}function Ko(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new fe,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function zo(e,t){return new Promise((function(n,i){var r=e.b.openCursor();r.onerror=i,r.onsuccess=function(e){if(!(e=e.target.result))return n();t(e.key,e.value,e),e.continue()}}))}function Go(e){this.b=e,this.a=[]}function Wo(e,t){return $o(e,t,"readonly")}function Yo(e,t){return $o(e,t,"readwrite")}function $o(e,t,n){var i=new Ko(n=e.b.transaction([t],n),t);return e.a.push(i),i.promise().then((function(){Ce(e.a,i)}),(function(){Ce(e.a,i)})),i}function qo(e){this.a=new Go(e)}function Xo(){this.a=new Map}function Qo(e,t,n){if(!(e=e.a.get(t)))throw new pe(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new pe(2,9,9013,"Could not find cell with name "+n);return t}function Zo(e,t){Jo.set(e,t)}co.prototype.destroy=function(){for(var e=d(this.b.values()),t=e.next();!t.done;t=e.next())Mo(t.value);return this.b.clear(),this.i.clear(),this.g=this.h=this.v=this.c=this.a=null,this.f=!0,Promise.resolve()},co.prototype.configure=function(e){this.g=e,this.G=new de({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},co.prototype.start=function(){var e=this;return p((function t(){var n,i,r;return L(t,(function(t){switch(t.j){case 1:return n=e.a.Sa(),i=Do(e,n),(r=e.a.Ld(e.c.periods[i])).variant||r.text?A(t,Eo(e,r.variant?r.variant.audio:null,r.variant?r.variant.video:null,r.text,n),2):t.return(new pe(2,5,5005));case 2:if(e.f)return t.return();e.a&&e.a.gf&&e.a.gf(),_(t)}}))}))},co.prototype.M=function(e,t,n,i){var r=i.reader.bd(),a=i.reader.bd(),o=i.reader.F(),s=i.reader.F(),l=i.reader.F(),u=i.reader.F();i=i.reader.Xa(i.reader.K.byteLength-i.reader.ba()),e=e.startTime+t.startTime+s/o,n.includes(r)&&("urn:mpeg:dash:event:2012"==r?this.a.hf():this.a.onEvent(new Ae("emsg",{detail:{startTime:e,endTime:e+l/o,schemeIdUri:r,value:a,timescale:o,presentationTimeDelta:s,eventDuration:l,id:u,messageData:i}})))},j("shaka.net.HttpFetchPlugin",Bo),Bo.l=function(e,t,n,i,r){return p((function a(){var o,s,l,u,c,d,h,f,y,g,v,m;return L(a,(function(a){switch(a.j){case 1:return o=Bo.g,s=Bo.c,d=c=0,h=Date.now(),T(a,2),A(a,o(e,n),4);case 4:return l=a.o,f=l.clone().body.getReader(),g=(y=l.headers.get("Content-Length"))?parseInt(y,10):0,new s({start:function(e){!function t(){return p((function n(){var i,a;return L(n,(function(n){switch(n.j){case 1:return T(n,2),A(n,f.read(),4);case 4:i=n.o,S(n,3);break;case 2:return C(n),n.return();case 3:i.done||(c+=i.value.byteLength),(100<(a=Date.now())-h||i.done)&&(r(a-h,c-d,g-c),d=c,h=a),i.done?e.close():(e.enqueue(i.value),t()),_(n)}}))}))}()}}),A(a,l.arrayBuffer(),5);case 5:u=a.o,S(a,3);break;case 2:if(v=C(a),i.vd)throw new pe(1,1,7001,e,t);if(i.ge)throw new pe(1,1,1003,e,t);throw new pe(1,1,1002,e,v,t);case 3:return m={},l.headers.forEach((function(e,t){m[t.trim()]=e})),a.return(Uo(m,u,l.status,e,l.url,t))}}))}))},Bo.isSupported=function(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)},Bo.isSupported=Bo.isSupported,Bo.g=e.fetch,Bo.a=e.AbortController,Bo.c=e.ReadableStream,Bo.b=e.Headers,Bo.isSupported()&&(Le("http",Bo,2),Le("https",Bo,2)),j("shaka.net.HttpXHRPlugin",Fo),Fo.f=e.XMLHttpRequest,Le("http",Fo,1),Le("https",Fo,1),jo.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},Ho.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then((function(){}),(function(){}))},Ko.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch((function(){}))},Ko.prototype.store=function(){return this.b},Ko.prototype.promise=function(){return this.a},Go.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},qo.prototype.destroy=function(){return this.a.destroy()},qo.prototype.getAll=function(){var e=this;return p((function t(){var n,i;return L(t,(function(t){switch(t.j){case 1:return n=Wo(e.a,"session-ids"),i=[],A(t,zo(n,(function(e,t){i.push(t)})),2);case 2:return A(t,n.promise(),3);case 3:return t.return(i)}}))}))},qo.prototype.add=function(e){for(var t=Yo(this.a,"session-ids"),n=t.store(),i=(e=d(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},qo.prototype.remove=function(e){var t=this;return p((function n(){var i;return L(n,(function(n){switch(n.j){case 1:return A(n,zo(i=Yo(t.a,"session-ids"),(function(t,n,i){0<=e.indexOf(n.sessionId)&&i.delete()})),2);case 2:return A(n,i.promise(),0)}}))}))},Xo.prototype.destroy=function(){for(var e=[],t=d(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Xo.prototype.init=function(){var e=this;Jo.forEach((function(t,n){var i=t();i&&e.a.set(n,i)}));for(var t=[],n=d(this.a.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},Xo.prototype.erase=function(){var e=this;return p((function t(){var n,i;return L(t,(function(t){switch(t.j){case 1:return n=Array.from(e.a.values()),(i=0<n.length)||Jo.forEach((function(e){(e=e())&&n.push(e)})),A(t,Promise.all(n.map((function(e){return e.erase()}))),2);case 2:if(!i)return A(t,Promise.all(n.map((function(e){return e.destroy()}))),0);t.A(0)}}))}))},j("shaka.offline.StorageMuxer.register",Zo),j("shaka.offline.StorageMuxer.unregister",(function(e){Jo.delete(e)}));var Jo=new Map;function es(e){this.a=new Go(e)}function ts(e){return Promise.reject(new pe(2,9,9011,"Cannot add new value to "+e))}function ns(e,t,n,i){var r=(e=Yo(e.a,t)).store();return n.forEach((function(e){r.delete(e).onsuccess=function(){return i(e)}})),e.promise()}function is(e,t,n){var i=(e=Wo(e.a,t)).store(),r={},a=[];return n.forEach((function(e){i.get(e).onsuccess=function(t){null==(t=t.target.result)&&a.push(e),r[e]=t}})),e.promise().then((function(){return a.length?Promise.reject(new pe(2,9,9012,"Could not find values for "+a)):n.map((function(e){return r[e]}))}))}function rs(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(as),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}}function as(e){return function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType})),n=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!n.every((function(e){return e.variantIds}))){t.forEach((function(e){e.variantIds=[]})),n.forEach((function(e){e.variantIds=[]}));var i=0;if(n.length&&!t.length){var r=i++;n.forEach((function(e){e.variantIds.push(r)}))}if(!n.length&&t.length){var a=i++;t.forEach((function(e){e.variantIds.push(a)}))}n.length&&t.length&&t.forEach((function(e){n.forEach((function(t){var n=i++;e.variantIds.push(n),t.variantIds.push(n)}))}))}}(e),e.streams.forEach((function(){})),{startTime:e.startTime,streams:e.streams.map(os)}}function os(e){var t=e.$e?us(e.$e):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(ss),variantIds:e.variantIds}}function ss(e){var t=us(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function ls(e){return{data:e.data}}function us(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new pe(2,9,9004,"Could not parse uri "+e)}function cs(e,t,n,i){this.a=new Go(e),this.c=t,this.b=n,this.f=i}function ds(e,t,n){if(e.f)return Promise.reject(new pe(1,9,9011,"Cannot add new value to "+t));var i=(e=Yo(e.a,t)).store(),r=[];return n.forEach((function(e){i.add(e).onsuccess=function(e){r.push(e.target.result)}})),e.promise().then((function(){return r}))}function hs(e,t,n,i){var r=(e=Yo(e.a,t)).store();return n.forEach((function(e){r.delete(e).onsuccess=function(){return i(e)}})),e.promise()}function ps(e,t,n){var i=(e=Wo(e.a,t)).store(),r={},a=[];return n.forEach((function(e){var t=i.get(e);t.onsuccess=function(){null==t.result&&a.push(e),r[e]=t.result}})),e.promise().then((function(){return a.length?Promise.reject(new pe(1,9,9012,"Could not find values for "+a)):n.map((function(e){return r[e]}))}))}function fs(){this.g=this.c=this.b=this.a=this.f=null}function ys(e,t,n,i){this.a=e,this.g=t,this.f=n,this.c=i,this.b=["offline:",e,"/",t,"/",n,"/",i].join("")}function gs(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new ys(t,n,i,Number(e[4])):null}function vs(e,t){this.b=e,this.a=t}function ms(e,t,n){var i=t.streams.filter((function(e){return"audio"==e.contentType})),r=t.streams.filter((function(e){return"video"==e.contentType}));return i=function(e,t,n){for(var i=new Set,r=d(t),a=r.next();!a.done;a=r.next()){var o=d(a.value.variantIds);for(a=o.next();!a.done;a=o.next())i.add(a.value)}for(r=d(n),a=r.next();!a.done;a=r.next())for(o=d(a.value.variantIds),a=o.next();!a.done;a=o.next())i.add(a.value);for(r=new Map,i=d(i),a=i.next();!a.done;a=i.next())a=a.value,r.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=d(t),i=t.next();!i.done;i=t.next())for(i=i.value,a=bs(e,i),o=d(i.variantIds),i=o.next();!i.done;i=o.next())(i=r.get(i.value)).language=a.language,i.primary=i.primary||a.primary,i.audio=a;for(n=d(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=bs(e,i),a=d(i.variantIds),i=a.next();!i.done;i=a.next())(i=r.get(i.value)).primary=i.primary||t.primary,i.video=t;return r}(e,i,r),r=t.streams.filter((function(e){return"text"==e.contentType})).map((function(t){return bs(e,t)})),t.streams.forEach((function(i){i=i.segments.map((function(t,n){return Es(e,n,t)})),n.sb(i,t.startTime)})),{startTime:t.startTime,variants:Array.from(i.values()),textStreams:r}}function bs(e,t){var n=t.segments.map((function(t,n){return Es(e,n,t)})),i=new ur(n);return n={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return i.find(e)},getSegmentReference:function(e){return i.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},null!=t.initSegmentKey&&(n.initSegmentReference=function(e,t){var n=new ys("segment",e.b,e.a,t);return new or((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey)),n}function Es(e,t,n){var i=new ys("segment",e.b,e.a,n.dataKey);return new sr(t,n.startTime,n.endTime,(function(){return[i.toString()]}),0,null)}function ks(){this.a=null}function As(e){var t=gs(e);return t&&"manifest"==t.a?As.h(e):t&&"segment"==t.a?As.i(t.key(),t):ge(new pe(2,1,9004,e))}function _s(e,t,n){return p((function i(){var r,a,o,s,l,u;return L(i,(function(i){switch(i.j){case 1:r=[];for(var c=[],h=d(n),f=h.next();!f.done;f=h.next()){f=f.value;for(var y=!1,g=d(c),v=g.next();!v.done;v=g.next())if(Ts((v=v.value).info,f)){v.sessionIds.push(f.sessionId),y=!0;break}y||c.push({info:f,sessionIds:[f.sessionId]})}a=d(c),o=a.next();case 2:if(o.done){i.A(4);break}return s=o.value,l=function(e,t,n){return p((function i(){var r,a;return L(i,(function(i){switch(i.j){case 1:return r=new mt({rb:t,onError:function(){},kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),T(i,2),r.configure(e),A(i,function(e,t,n,i,r,a){var o=new Map;return o.set(t,{audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,initData:null,keyIds:null}]}),St(e,o)}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:S(i,3);break;case 2:return C(i),A(i,r.destroy(),5);case 5:return i.return([]);case 3:return T(i,6),A(i,kt(r),8);case 8:S(i,7);break;case 6:return C(i),A(i,r.destroy(),9);case 9:return i.return([]);case 7:return a=[],A(i,Promise.all(n.sessionIds.map((function(e){return p((function t(){return L(t,(function(t){switch(t.j){case 1:return T(t,2),A(t,function(e,t){return p((function n(){var i,r,a;return L(n,(function(n){switch(n.j){case 1:return A(n,Ct(e,t),2);case 2:return(i=n.o)?(r=[],(a=e.b.get(i))&&(a.xa=new fe,r.push(a.xa)),r.push(i.remove()),A(n,Promise.all(r),0)):n.return()}}))}))}(r,e),4);case 4:a.push(e),S(t,0);break;case 2:C(t),_(t)}}))}))}))),10);case 10:return A(i,r.destroy(),11);case 11:return i.return(a)}}))}))}(e,t,s),A(i,l,5);case 5:u=i.o,r=r.concat(u),o=a.next(),i.A(2);break;case 4:return i.return(r)}}))}))}function Ts(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Re(e.audioCapabilities,t.audioCapabilities,n)&&Re(e.videoCapabilities,t.videoCapabilities,n)}function ws(e,t){var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},i=this;this.g=t,this.c=e,this.i=n,this.h=null,this.f=[],this.b=this.a=null,this.l=!0,this.m=Promise.resolve().then((function(){return function(e){return p((function t(){return L(t,(function(t){switch(t.j){case 1:if(e.l){if(0==e.f.length||e.a&&!e.a.Ta)var n=!1;else{e.a&&(e.a.ta.Wa(),e.a=null);var i=(n=e.f.shift()).create(e.i);i?(n.ta.tb(),e.a={node:i.node,payload:i.payload,Ta:i.Ta,ta:n.ta}):n.ta.lc(),n=!0}return n?n=Promise.resolve():e.a?n=function(e){return p((function t(){var n,i;return L(t,(function(t){switch(t.j){case 1:return e.c=e.g.Pe(e.c,e.i,e.a.node,e.a.payload),T(t,2),e.b=e.g.ze(e.c,e.i,e.a.payload),A(t,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.ta.jc(),e.a=null),S(t,0);break;case 2:return 7001==(n=C(t)).code?e.a.ta.Wa():e.a.ta.onError(n),e.a=null,e.b=null,i=e,A(t,e.g.handleError(e.i,n),5);case 5:i.c=t.o,_(t)}}))}))}(e):(e.g.ff(e.c),e.h=new fe,n=e.h),A(t,n,1)}t.A(0)}}))}))}(i)}))}function Ss(e,t){var n={tb:function(){},jc:function(){},Wa:function(){},onError:function(){},lc:function(){},sg:function(){}};return e.f.push({create:t,ta:n}),e.b&&e.b.abort(),Cs(e),n}function Cs(e){e.h&&(e.h.resolve(),e.h=null)}function Rs(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function Is(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,t.size=e.size;try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function Ds(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=e.cues,r=i.length-1;0<=r;r--){var a=i[r];a&&t(a)&&e.removeCue(a)}e.mode=n}function Os(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var l=r+"."+a,u=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===u||o?delete e[a]:e[a]=we(u):u.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=we(u)),l=Os(e[a],t[a],u,i,l),s=s&&l):typeof t[a]!=typeof u||null==t[a]||t[a].constructor!=u.constructor?s=!1:e[a]=t[a]:s=!1}return s}function Ps(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function xs(){}function Ls(){var e=5e5,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e){return e},fairPlayTransform:!0},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0},hls:{ignoreTextStreamFailures:!1}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1};nt("Web0S")&&(r.stallEnabled=!1);var a={trackSelectionCallback:function(e){return e},progressCallback:function(){},usePersistentLicense:!0},o={drm:n,manifest:i,streaming:r,offline:a,abrFactory:Jn,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=Un(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return Mn(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),n=[],i.length){var o=Math.floor(i.length/2);i.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(i[o])}for(i=d(e),o=i.next();!o.done;o=i.next())"text"==(o=o.value).type&&n.push(o);return n}(e,o.preferredAudioLanguage)},o}function Ms(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Os(e,t,n||Ls(),i,"")}function Ns(){this.a=null,this.b=[]}function Us(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function Bs(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var i=d(e.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function Fs(){this.b=this.c=null,this.a=[]}function js(){this.f=this.l=this.b=this.h=this.i=this.g=this.m=NaN,this.a=new Ns,this.c=new Fs}function Hs(t,n){var i=this;Te.call(this),this.h=Tl,this.a=null,this.eb=!1,this.i=new Ke,this.vc=this.l=this.Bb=this.c=this.m=this.f=this.Sb=this.P=this.Tb=this.W=this.gb=this.s=this.D=this.g=this.G=null,this.Hd=1e9,this.Wb=new Set,this.ib=!0,this.Ea=null,this.Dd=!1,this.Bd=0,this.na=null,this.$=new Aa,this.b=Xs(this),this.Xb={width:1/0,height:1/0},this.v=null,this.Ub=new Oa(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.ma=this.b.preferredTextLanguage,this.cb=this.b.preferredTextRole,n&&n(this),this.G=function(e){return new Oe((function(t,n){e.l&&e.l.segmentDownloaded(t,n)}))}(this),this.i.w(e,"online",(function(){i.gd()})),this.C={name:"detach"},this.M={name:"attach"},this.Fa={name:"unload"},this.Ec={name:"manifest-parser"},this.Cc={name:"manifest"},this.fb={name:"media-source"},this.wc={name:"drm-engine"},this.T={name:"load"},this.Ic={name:"src-equals-drm-engine"},this.hb={name:"src-equals"};var r=new Map;r.set(this.M,(function(e,t){return be(function(e,t,n){return null==t.u&&(t.u=n.u,e.i.w(t.u,"error",(function(){var t=dl(e);t&&e.Ka(t)}))),e.a=t.u,Promise.resolve()}(i,e,t))})),r.set(this.C,(function(e){return e.u&&(i.i.ea(e.u,"error"),e.u=null),i.a=null,be(e=Promise.resolve())})),r.set(this.Fa,(function(e){return be(Gs(i,e))})),r.set(this.fb,(function(t){return be(t=function(t,n){return p((function i(){var r,a,o,s;return L(i,(function(i){switch(i.j){case 1:return r=e.muxjs?new Bt:new Ft,a=t.b.textDisplayFactory,o=new a,t.xc=a,A(i,(s=new En(n.u,r,o)).s,2);case 2:t.D=s,_(i)}}))}))}(i,t))})),r.set(this.Ec,(function(e,t){return be(function(e,t,n){return p((function i(){var r,a,o;return L(i,(function(i){switch(i.j){case 1:if(t.ya=n.ya,t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,a=e.G,e.Bb=r,t.ya){e.m=t.ya(),i.A(2);break}return o=e,A(i,wr.create(r,a,e.b.manifest.retryParameters,t.mimeType),3);case 3:o.m=i.o;case 2:e.m.configure(e.b.manifest),_(i)}}))}))}(i,e,t))})),r.set(this.Cc,(function(e){return function(e,t){var n=t.uri,i=e.G;e.Sb=new ao,function(e,t){e.b=t}(e.Sb,(function(t){cl(e,"timelineregionadded",t)}));var r={networkingEngine:i,filterNewPeriod:function(t){return e.Fc(t)},filterAllPeriods:function(t){return Qs(e,t)},onTimelineRegionAdded:function(t){var n=e.Sb;e:{for(var i=d(n.a),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.Ka(t)}};return new ye(Promise.resolve().then((function(){return p((function t(){var i;return L(t,(function(t){switch(t.j){case 1:return i=e,A(t,e.m.start(n,r),2);case 2:if(i.c=t.o,e.dispatchEvent(new Ae("manifestparsed")),0==e.c.periods.length)throw new pe(2,4,4014);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some((function(e){return e.variants.some(t)}))&&e.forEach((function(e){e.variants=e.variants.filter(t)}))}(e.c.periods),_(t)}}))}))})),(function(){return e.m.stop()}))}(i,e)})),r.set(this.wc,(function(){return be(function(e){return p((function t(){return L(t,(function(t){switch(t.j){case 1:return e.g=new mt({rb:e.G,onError:function(t){e.Ka(t)},kc:function(t){hl(e,t)},onExpirationUpdated:function(t,n){pl(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.g.configure(e.b.drm),A(t,bt(e.g,Va(e.c.periods),e.c.offlineSessionIds),2);case 2:Qs(e,e.c.periods),_(t)}}))}))}(i))})),r.set(this.T,(function(e,t){return be(function(e,t,n){return p((function i(){var r,a,o,s,l,u,c,h,p;return L(i,(function(i){switch(i.j){case 1:return t.startTime=n.startTime,r=t.u,a=t.uri,e.Bb=a,e.v=new js,o=function(){return tl(e)},s=function(){var t=e.a.playbackRate;0!=t&&e.W.set(t)},e.i.w(r,"playing",o),e.i.w(r,"pause",o),e.i.w(r,"ended",o),e.i.w(r,"ratechange",s),l=e.b.abrFactory,e.l&&e.vc==l||(e.vc=l,e.l=new l,e.l.configure(e.b.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var i=t[n],r=new Map,a=d(i.variants),o=a.next();!o.done;o=a.next())if((o=o.value).video&&o.video.closedCaptions)for(var s=d((o=o.video).closedCaptions.keys()),l=s.next();!l.done;l=s.next())if(l=l.value,!r.has(l)){var u={id:e.Hd++,originalId:l,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:o.closedCaptions.get(l),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,channelsCount:null,closedCaptions:null};r.set(l,u)}for(a=(r=d(r.values())).next();!a.done;a=r.next())i.textStreams.push(a.value)}}(e,e.c.periods),e.Ub=new Oa(e.b.preferredAudioLanguage,e.b.preferredVariantRole,e.b.preferredAudioChannelCount),e.ma=e.b.preferredTextLanguage,function(e,t,n){0<t&&(e.V()||e.de(t)),n<e.Y()&&(e.V()||e.wa(n))}(e.c.presentationTimeline,e.b.playRangeStart,e.b.playRangeEnd),A(i,e.g.Cb(r),2);case 2:return e.l.init((function(t,n,i){n=void 0!==n&&n,i=void 0===i?0:i;e:{for(var r=d(e.c.periods),a=r.next();!a.done;a=r.next())if((a=a.value).variants.includes(t)){r=a;break e}r=null}$s(e,r,t,!0),e.f&&(vo(e.f,t,n,i),rl(e))})),e.s=function(e,t){return new to(e.a,e.c,e.b.streaming,t,(function(){e.gb&&Ha(e.gb,!0),e.f&&function(e){function t(t){var r=e.a.I;return t="text"==t?null!=(t=r.a).a&&null!=t.b&&n>=t.a&&n<t.b:Ht(t=Cn(r,t),n,i)}var n=e.a.Sa(),i=e.g.smallGapLimit,r=Do(e,n);if($e(e.b.values(),(function(e){return e.pa==r})))for(var a=d(e.b.keys()),o=a.next();!o.done;o=a.next())t(o=o.value)||bo(e,e.b.get(o));else $e(e.b.keys(),t)||e.b.forEach((function(t){bo(e,t)}))}(e.f)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.gb=function(e){var t=new za(e.c);!function(e,t){e.b=t}(t,(function(){al(e)}));var n=new oo(e.Sb);!function(e,t,n,i){e.a=t,e.b=n,e.c=i}(n,(function(t){cl(e,"timelineregionenter",t)}),(function(t){cl(e,"timelineregionexit",t)}),(function(t,n){n||(cl(e,"timelineregionenter",t),cl(e,"timelineregionexit",t))}));var i=new ja(e.a);return i.a.add(t),i.a.add(n),i}(e),e.W=new Ga({ec:function(){return t.u.playbackRate},ld:function(e){t.u.playbackRate=e},Id:function(e){t.u.currentTime+=e}}),u=Math.max(e.c.minBufferTime,e.b.streaming.rebufferingGoal),Ws(e,u),e.f=function(e){return new co(e.c,{Sa:function(){return e.s.h()},getBandwidthEstimate:function(){return e.l.getBandwidthEstimate()},I:e.D,rb:e.G,Ld:e.df.bind(e),Kd:e.te.bind(e),onError:e.Ka.bind(e),onEvent:function(t){return e.dispatchEvent(t)},hf:e.jf.bind(e),Zc:e.qf.bind(e)})}(e),e.f.configure(e.b.streaming),function(e){function t(e){var t="";e.video&&(t=Ze(e.video.codecs)[0]);var n="";return e.audio&&(n=Ze(e.audio.codecs)[0]),t+"-"+n}var n=e.c.periods.reduce((function(e,t){return e.concat(t.variants)}),[]);n=qn(n,e.b.preferredAudioChannelCount);var i=new _e;n.forEach((function(e){var n=t(e);i.push(n,e)}));var r=null,a=1/0;i.forEach((function(e,t){var n=0,i=0;t.forEach((function(e){n+=e.bandwidth||0,++i}));var o=n/i;o<a&&(r=e,a=o)})),e.c.periods.forEach((function(e){e.variants=e.variants.filter((function(e){return t(e)==r}))}))}(e),e.h=wl,e.dispatchEvent(new Ae("streaming")),A(i,e.f.start(),3);case 3:e.b.streaming.startAtSegmentBoundary&&(c=e.s.h(),h=function(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-a.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+a.startTime:null}var i=ho(e.f),r=po(e.f),a=ml(e);return i=n(i,t),null!=(r=n(r,t))&&null!=i?Math.max(r,i):null!=r?r:null!=i?i:t}(e,c),e.s.m(h)),e.c.periods.forEach(e.Fc.bind(e)),al(e),rl(e),(p=ml(e)||e.c.periods[0]).variants.some((function(e){return e.primary})),nl(e,p.variants),e.i.da(r,"loadeddata",(function(){e.v.b=Date.now()/1e3-n.od})),_(i)}}))}))}(i,e,t))})),r.set(this.Ic,(function(e){return be(e=function(e,t){return p((function n(){var i,r;return L(n,(function(n){switch(n.j){case 1:return i=Yt,e.g=new mt({rb:e.G,onError:function(t){e.Ka(t)},kc:function(t){hl(e,t)},onExpirationUpdated:function(t,n){pl(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.g.configure(e.b.drm),r={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:i.Na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},A(n,bt(e.g,[r],[]),2);case 2:return A(n,e.g.Cb(t.u),0)}}))}))}(i,e))})),r.set(this.hb,(function(e,t){return function(e,t,n){function i(){return tl(e)}if(t.uri=n.uri,t.startTime=n.startTime,e.Bb=t.uri,e.v=new js,e.s=new eo(t.u),null!=t.startTime&&e.s.m(t.startTime),e.W=new Ga({ec:function(){return t.u.playbackRate},ld:function(e){t.u.playbackRate=e},Id:function(e){t.u.currentTime+=e}}),Ws(e,e.b.streaming.rebufferingGoal),e.i.w(t.u,"playing",i),e.i.w(t.u,"pause",i),e.i.w(t.u,"ended",i),e.i.da(t.u,"loadeddata",(function(){e.v.b=Date.now()/1e3-n.od})),e.a.audioTracks&&(e.i.w(e.a.audioTracks,"addtrack",(function(){return al(e)})),e.i.w(e.a.audioTracks,"removetrack",(function(){return al(e)}))),e.a.textTracks){var r=e.a.textTracks;e.i.w(r,"addtrack",(function(){return al(e)})),e.i.w(r,"removetrack",(function(){return al(e)}))}t.u.src=t.uri,e.h=Sl,e.dispatchEvent(new Ae("streaming"));var a=new fe;return e.a.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?a.resolve():e.a.error?a.reject(dl(e)):(e.i.da(e.a,"loadeddata",(function(){a.resolve()})),e.i.da(e.a,"error",(function(){a.reject(dl(e))}))),new ye(a,(function(){return a.reject(new pe(2,7,7001)),Promise.resolve()}))}(i,e,t)})),this.jb=new ws(this.C,{Pe:function(e,t,n,r){var a=null;return e==i.C&&(a=n==i.C?i.C:i.M),e==i.M&&(a=n==i.C||t.u!=r.u?i.C:n==i.M?i.M:n==i.fb||n==i.T?i.fb:n==i.hb?i.Ic:null),e==i.fb&&(a=n==i.T&&t.u==r.u?i.Ec:i.Fa),e==i.Ec&&(a=kl(i.T,i.Cc,i.Fa,n,t,r)),e==i.Cc&&(a=kl(i.T,i.wc,i.Fa,n,t,r)),e==i.wc&&(a=kl(i.T,i.T,i.Fa,n,t,r)),e==i.Ic&&(a=n==i.hb&&t.u==r.u?i.hb:i.Fa),e!=i.T&&e!=i.hb||(a=i.Fa),e==i.Fa&&(a=r.u&&t.u==r.u?i.M:i.C),a},ze:function(e,t,n){return i.dispatchEvent(new Ae("onstatechange",{state:e.name})),r.get(e)(t,n)},handleError:function(e){return p((function t(){return L(t,(function(t){switch(t.j){case 1:return A(t,Gs(i,e),2);case 2:return t.return(e.u?i.M:i.C)}}))}))},ff:function(e){i.dispatchEvent(new Ae("onstateidle",{state:e.name}))}}),t&&this.Cb(t,!0)}(n=es.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return ts("segment")},n.removeSegments=function(e,t){return ns(this,"segment",e,t)},n.getSegments=function(e){return is(this,"segment",e).then((function(e){return e.map(ls)}))},n.addManifests=function(){return ts("manifest")},n.updateManifestExpiration=function(e,t){var n=Yo(this.a,"manifest"),i=n.store(),r=new fe;return i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new pe(2,9,9012,"Could not find values for "+e))},n.promise().then((function(){return r}))},n.removeManifests=function(e,t){return ns(this,"manifest",e,t)},n.getManifests=function(e){return is(this,"manifest",e).then((function(e){return e.map(rs)}))},n.getAllManifests=function(){var e=this;return p((function t(){var n,i;return L(t,(function(t){switch(t.j){case 1:return n=Wo(e.a,"manifest"),i=new Map,A(t,zo(n,(function(e,t){i.set(e,rs(t))})),2);case 2:return A(t,n.promise(),3);case 3:return t.return(i)}}))}))},(n=cs.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return this.f},n.addSegments=function(e){return ds(this,this.c,e)},n.removeSegments=function(e,t){return hs(this,this.c,e,t)},n.getSegments=function(e){return ps(this,this.c,e)},n.addManifests=function(e){return ds(this,this.b,e)},n.updateManifestExpiration=function(e,t){var n=Yo(this.a,this.b),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},n.removeManifests=function(e,t){return hs(this,this.b,e,t)},n.getManifests=function(e){return ps(this,this.b,e)},n.getAllManifests=function(){var e=this;return p((function t(){var n,i;return L(t,(function(t){switch(t.j){case 1:return n=Wo(e.a,e.b),i=new Map,A(t,zo(n,(function(e,t){i.set(e,t)})),2);case 2:return A(t,n.promise(),3);case 3:return t.return(i)}}))}))},(n=fs.prototype).init=function(){var t=this,n=new fe,i=e.indexedDB.open("shaka_offline_db",4);return i.onsuccess=function(e){e=e.target.result,t.f=e;var i=e.objectStoreNames;i=i.contains("manifest")&&i.contains("segment")?new es(e):null,t.a=i,i=(i=e.objectStoreNames).contains("manifest-v2")&&i.contains("segment-v2")?new cs(e,"segment-v2","manifest-v2",!0):null,t.b=i,i=(i=e.objectStoreNames).contains("manifest-v3")&&i.contains("segment-v3")?new cs(e,"segment-v3","manifest-v3",!1):null,t.c=i,e=e.objectStoreNames.contains("session-ids")?new qo(e):null,t.g=e,n.resolve()},i.onupgradeneeded=function(e){e=e.target.result;for(var t=d(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new pe(2,9,9001,i.error)),e.preventDefault()},n},n.destroy=function(){var e=this;return p((function t(){return L(t,(function(t){switch(t.j){case 1:if(!e.a){t.A(2);break}return A(t,e.a.destroy(),2);case 2:if(!e.b){t.A(4);break}return A(t,e.b.destroy(),4);case 4:if(!e.c){t.A(6);break}return A(t,e.c.destroy(),6);case 6:if(!e.g){t.A(8);break}return A(t,e.g.destroy(),8);case 8:e.f&&e.f.close(),_(t)}}))}))},n.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},n.getEmeSessionCell=function(){return this.g},n.erase=function(){var t=this;return p((function n(){return L(n,(function(n){switch(n.j){case 1:if(!t.a){n.A(2);break}return A(n,t.a.destroy(),2);case 2:if(!t.b){n.A(4);break}return A(n,t.b.destroy(),4);case 4:if(!t.c){n.A(6);break}return A(n,t.c.destroy(),6);case 6:return t.f&&t.f.close(),A(n,function(){var t=new fe,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new pe(2,9,9001,n.error)),e.preventDefault()},t}(),8);case 8:return t.f=null,t.a=null,t.b=null,t.c=null,A(n,t.init(),0)}}))}))},Zo("idb",(function(){return e.indexedDB?new fs:null})),ys.prototype.ua=function(){return this.g},ys.prototype.aa=function(){return this.f},ys.prototype.key=function(){return this.c},ys.prototype.toString=function(){return this.b},(n=ks.prototype).configure=function(){},n.start=function(e){var t=this;return p((function n(){var i,r,a,o,s;return L(n,(function(n){switch(n.j){case 1:return i=gs(e),t.a=i,null==i||"manifest"!=i.a?n.return(Promise.reject(new pe(2,1,9004,i))):(r=new Xo,w(n,2),A(n,r.init(),4));case 4:return A(n,Qo(r,i.ua(),i.aa()),5);case 5:return A(n,n.o.getManifests([i.key()]),6);case 6:return a=n.o,o=a[0],s=new vs(i.ua(),i.aa()),n.return(function(e,t){var n=new Sr(null,0);n.wa(t.duration);var i=t.periods.map((function(t){return ms(e,t,n)})),r=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&i.forEach((function(e){e.variants.forEach((function(e){e.drmInfos=r}))})),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:i}}(s,o));case 2:return R(n),A(n,r.destroy(),7);case 7:I(n,0)}}))}))},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(e,t){var n=this;return p((function i(){var r,a,o,s,l,u,c;return L(i,(function(i){switch(i.j){case 1:return r=n.a,a=new Xo,T(i,2,3),A(i,a.init(),5);case 5:return A(i,Qo(a,r.ua(),r.aa()),6);case 6:return A(i,(o=i.o).getManifests([r.key()]),7);case 7:if(s=i.o,l=s[0],u=l.sessionIds.includes(e),c=null==l.expiration||l.expiration>t,!u||!c){i.A(3);break}return A(i,o.updateManifestExpiration(r.key(),t),3);case 3:return R(i),A(i,a.destroy(),10);case 10:I(i,0);break;case 2:C(i),i.A(3)}}))}))},wr.Nb("application/x-offline-manifest",ks),j("shaka.offline.OfflineScheme",As),As.h=function(e){return me(e={uri:e,ad:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},As.i=function(e,t){var n=new Xo;return me(void 0).U((function(){return n.init()})).U((function(){return Qo(n,t.ua(),t.aa())})).U((function(e){return e.getSegments([t.key()])})).U((function(e){return{uri:t,ad:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))},Le("offline",As),ws.prototype.destroy=function(){var e=this;return p((function t(){return L(t,(function(t){switch(t.j){case 1:return e.l=!1,e.b&&e.b.abort(),Cs(e),A(t,e.m,2);case 2:e.a&&e.a.ta.Wa();for(var n=d(e.f),i=n.next();!i.done;i=n.next())i.value.ta.Wa();e.a=null,e.f=[],e.g=null,_(t)}}))}))},j("shaka.text.SimpleTextDisplayer",Rs),Rs.prototype.remove=function(e,t){return!!this.a&&(Ds(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},Rs.prototype.remove=Rs.prototype.remove,Rs.prototype.append=function(e){for(var t=Is,n=[],i=0;i<e.length;i++){var r=t(e[i]);r&&n.push(r)}n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:n.indexOf(t)-n.indexOf(e)})).forEach(function(e){this.a.addCue(e)}.bind(this))},Rs.prototype.append=Rs.prototype.append,Rs.prototype.destroy=function(){return this.a&&Ds(this.a,(function(){return!0})),this.a=null,Promise.resolve()},Rs.prototype.destroy=Rs.prototype.destroy,Rs.prototype.isTextVisible=function(){return"showing"==this.a.mode},Rs.prototype.isTextVisible=Rs.prototype.isTextVisible,Rs.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},Rs.prototype.setTextVisibility=Rs.prototype.setTextVisibility,j("shaka.util.ConfigUtils.mergeConfigObjects",Os),j("shaka.util.ConfigUtils.convertToConfigObject",Ps),j("shaka.util.PlayerConfiguration",xs),xs.mergeConfigObjects=Ms,H(Hs,Te),j("shaka.Player",Hs),Hs.prototype.destroy=function(){var e=this;return p((function t(){var n;return L(t,(function(t){switch(t.j){case 1:return e.h==_l?t.return():(e.h=_l,n=Ss(e.jb,(function(){return{node:e.C,payload:{ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},Ta:!1}})),A(t,new Promise((function(e){n.tb=function(){},n.jc=function(){e()},n.Wa=function(){e()},n.onError=function(){e()},n.lc=function(){e()}})),2));case 2:return A(t,e.jb.destroy(),3);case 3:if(e.i&&(e.i.release(),e.i=null),e.vc=null,e.l=null,e.b=null,!e.G){t.A(0);break}return A(t,e.G.destroy(),5);case 5:e.G=null,_(t)}}))}))},Hs.prototype.destroy=Hs.prototype.destroy,Hs.version="v2.5.5";var Vs=["2","5"];ai=new function(e){this.a=e,this.c=ii,this.b=ri}(new ti(Number(Vs[0]),Number(Vs[1])));var Ks=["output-restricted","internal-error"],zs={};function Gs(e,t){return p((function n(){return L(n,(function(n){switch(n.j){case 1:if(e.h!=_l&&(e.h=Tl),e.dispatchEvent(new Ae("unloading")),t.ya=null,t.mimeType=null,t.startTime=null,t.uri=null,t.u&&(e.i.ea(t.u,"loadeddata"),e.i.ea(t.u,"playing"),e.i.ea(t.u,"pause"),e.i.ea(t.u,"ended"),e.i.ea(t.u,"ratechange")),e.gb&&(e.gb.release(),e.gb=null),e.Tb&&(e.Tb.stop(),e.Tb=null),!e.m){n.A(2);break}return A(n,e.m.stop(),3);case 3:e.m=null;case 2:if(!e.l){n.A(4);break}return A(n,e.l.stop(),4);case 4:if(!e.f){n.A(6);break}return A(n,e.f.destroy(),7);case 7:e.f=null;case 6:if(e.s&&(e.s.release(),e.s=null),!e.D){n.A(8);break}return A(n,e.D.destroy(),9);case 9:e.D=null;case 8:if(t.u&&t.u.src&&(t.u.removeAttribute("src"),t.u.load()),!e.g){n.A(10);break}return A(n,e.g.destroy(),11);case 11:e.g=null;case 10:e.$.a.clear(),e.Bb=null,e.P=null,e.Wb.clear(),e.c=null,e.v=null,e.xc=null,e.ib=!0,el(e),_(n)}}))}))}function Ws(e,t){e.P=new Pa(t,Math.min(.5,t/2)),e.P.a=xa,el(e),e.Tb=new ce((function(){switch(e.h){case Sl:var t=!!e.a.ended||jt(e.a.buffered)>=e.a.duration-.1;break;case wl:e:if(e.a.ended||Tn(e.D))t=!0;else{if(e.c.presentationTimeline.V()){var n=e.c.presentationTimeline.nb();if(jt(e.a.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var i=Vt(e.a.buffered,e.a.currentTime),r=t,a=(n=e.P).b.get(n.a);t=n.a,i=r||i>=a?La:xa,n.a=i,t!=i&&el(e)})).La(.25)}function Ys(e){if(e.m&&e.m.configure(e.b.manifest),e.g&&e.g.configure(e.b.drm),e.f){e.f.configure(e.b.streaming);try{e.c.periods.forEach(e.Fc.bind(e))}catch(t){e.Ka(t)}var t=ho(e.f),n=po(e.f),i=ml(e);t=Zn(t,n,i.variants),e.l&&t&&t.allowedByApplication&&t.allowedByKeySystem?nl(e,i.variants):il(e,i)}if(e.D&&(i=e.b.textDisplayFactory,e.xc!=i)){t=new i;var r=(n=e.D).g;n.g=t,r&&(t.setTextVisibility(r.isTextVisible()),r.destroy()),n.a&&(n.a.c=t),e.xc=i,e.f&&(t=(i=e.f).b.get("text"))&&mo(i,t.stream,!0,0,!0)}e.l&&(e.l.configure(e.b.abr),e.b.abr.enabled&&!e.ib?e.l.enable():e.l.disable(),ul(e))}function $s(e,t,n,i){Ta(e.$,t).variant=n,(e=e.v.c).c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:i,bandwidth:n.bandwidth}))}function qs(e,t,n,i){_a(e.$,t,n),(e=e.v.c).b!=n&&(e.b=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:i,bandwidth:null}))}function Xs(e){var t=Ls();return t.streaming.failureCallback=function(t){e.V()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.gd())},t.textDisplayFactory=function(){return new Rs(e.a)},t}function Qs(e,t){var n=e.f?ho(e.f):null,i=e.f?po(e.f):null;if(t.forEach(Hn.bind(null,e.g,n,i)),0==(n=function(e,t){var n=0;return e.forEach((function(e){n+=t(e)?1:0})),n}(t,(function(e){return e.variants.some($n)}))))throw new pe(2,4,4032);if(n<t.length)throw new pe(2,4,4011);t.forEach(function(e){jn(e.variants,this.b.restrictions,this.Xb)&&this.f&&ml(this)==e&&al(this),fl(this,e.variants)}.bind(e))}function Zs(e,t,n,i){n=void 0!==n&&n,i=void 0===i?0:i,e.ib?(e.Ea=t,e.Dd=n,e.Bd=i):(vo(e.f,t,n,i),ol(e))}function Js(e,t){e.ib?e.na=t:(mo(e.f,t,!0,0,!1),sl(e))}function el(e){var t=e.Oc();if(e.v&&e.P&&e.s){var n=e.W;n.f=t,Wa(n),tl(e)}e.dispatchEvent(new Ae("buffering",{buffering:t}))}function tl(e){if(e.v&&e.P){var t=e.v.a;e.P.a==xa?Us(t,"buffering"):e.a.paused?Us(t,"paused"):e.a.ended?Us(t,"ended"):Us(t,"playing")}}function nl(e,t){try{fl(e,t)}catch(t){return e.Ka(t),null}var n=t.filter((function(e){return $n(e)}));return n=e.Ub.create(n),e.l.setVariants(Array.from(n.values())),e.l.chooseVariant()}function il(e,t){var n=nl(e,t.variants);n&&($s(e,t,n,!0),Zs(e,n,!0)),(n=Xn(t.textStreams,e.ma,e.cb)[0]||null)&&(e.b.streaming.alwaysStreamText||e.gc())&&(qs(e,t,n,!0),Js(e,n)),rl(e)}function rl(e){yl(e,new Ae("adaptation"))}function al(e){yl(e,new Ae("trackschanged"))}function ol(e){yl(e,new Ae("variantchanged"))}function sl(e){yl(e,new Ae("textchanged"))}function ll(e){yl(e,new Ae("texttrackvisibility"))}function ul(e){yl(e,new Ae("abrstatuschanged",{rg:e.b.abr.enabled}))}function cl(e,t,n){e.dispatchEvent(new Ae(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function dl(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new pe(2,3,3016,t,n,e.a.error.message)}function hl(e,t){if(e.f){var n=ml(e),i=!1,r=Object.keys(t),a=1==r.length&&"00"==r[0];r.length&&n.variants.forEach((function(e){(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t})(e).forEach((function(n){var r=e.allowedByKeySystem;n.keyId&&(n=t[a?"00":n.keyId],e.allowedByKeySystem=!!n&&!Ks.includes(n)),r!=e.allowedByKeySystem&&(i=!0)}))})),(r=Zn(r=ho(e.f),po(e.f),n.variants))&&!r.allowedByKeySystem&&il(e,n),i&&(al(e),nl(e,n.variants))}}function pl(e,t,n){e.m&&e.m.onExpirationUpdated&&e.m.onExpirationUpdated(t,n),e.dispatchEvent(new Ae("expirationupdated"))}function fl(e,t){var n=e.g?Xe(e.g.T):{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,a=!1,o=[],s=[],l=d(t),u=l.next();!u.done;u=l.next()){var c=[];(u=u.value).audio&&c.push(u.audio),u.video&&c.push(u.video);for(var h=(c=d(c)).next();!h.done;h=c.next())if((h=h.value).keyId){var p=n[i?"00":h.keyId];p?Ks.includes(p)&&(s.includes(p)||s.push(p)):o.includes(h.keyId)||o.push(h.keyId)}u.allowedByApplication?u.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new pe(2,4,4012,{hasAppRestrictions:a,missingKeys:o,restrictedKeyStatuses:s})}function yl(e,t){p((function n(){return L(n,(function(n){switch(n.j){case 1:return A(n,Promise.resolve(),2);case 2:e.h!=_l&&e.dispatchEvent(t),_(n)}}))}))}function gl(e){for(var t=new Set,n=(e=d(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Mn(n.language)):t.add("und");return t}function vl(e){for(var t=new Map,n=(e=d(e)).next();!n.done;n=e.next()){var i=n.value;n="und";var r=[];for(i.language&&(n=Mn(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),t.has(n)||t.set(n,new Set),r=(i=d(r)).next();!r.done;r=i.next())r=r.value,t.get(n).add(r)}var a=[];return t.forEach((function(e,t){for(var n=d(e),i=n.next();!i.done;i=n.next())a.push({language:t,role:i.value})})),a}function ml(e){for(var t=e.s.h(),n=null,i=(e=d(e.c.periods)).next();!i.done;i=e.next())(i=i.value).startTime<=t&&(n=i);return n}function bl(e){var t=ml(e);return Ta(e.$,t).variant}function El(){return new pe(2,7,7e3)}function kl(e,t,n,i,r,a){return i==e&&r.u==a.u&&r.uri==a.uri&&r.mimeType==a.mimeType&&r.ya==a.ya?t:n}function Al(e){return new Promise((function(t,n){e.Wa=function(){return n(El())},e.jc=function(){return t()},e.onError=function(e){return n(e)},e.lc=function(){return n(El())}}))}Hs.registerSupportPlugin=function(e,t){zs[e]=t},Hs.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)&&(!!et()||tt("application/x-mpegurl"))},Hs.probeSupport=function(){return Dt().then((function(e){for(var t=wr.Af(),n={},i=d('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),r=i.next();!r.done;r=i.next()){n[r=r.value]=et()?!!vn(r)||MediaSource.isTypeSupported(r)||qt(r):tt(r);var a=r.split(";")[0];n[a]=n[a]||n[r]}for(var o in e={manifest:t,media:n,drm:e},zs)e[o]=zs[o]();return e}))},Hs.prototype.Cb=function(e,t){if(t=void 0===t||t,this.h==_l)return Promise.reject(El());var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null};n.u=e,et()||(t=!1);var i=t?this.fb:this.M,r=Ss(this.jb,(function(){return{node:i,payload:n,Ta:!1}}));return r.tb=function(){},Al(r)},Hs.prototype.attach=Hs.prototype.Cb,Hs.prototype.detach=function(){var e=this;if(this.h==_l)return Promise.reject(El());var t=Ss(this.jb,(function(){return{node:e.C,payload:{ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},Ta:!1}}));return t.tb=function(){},Al(t)},Hs.prototype.detach=Hs.prototype.detach,Hs.prototype.rd=function(e){var t=this;if(e=void 0===e||e,this.h==_l)return Promise.reject(El());et()||(e=!1);var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},i=Ss(this.jb,(function(i){var r=i.u&&e?t.fb:i.u?t.M:t.C;return n.u=i.u,{node:r,payload:n,Ta:!1}}));return i.tb=function(){},Al(i)},Hs.prototype.unload=Hs.prototype.rd,Hs.prototype.load=function(e,t,n){if(this.h==_l)return Promise.reject(El());this.dispatchEvent(new Ae("loading"));var i={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null};i.uri=e,i.od=Date.now()/1e3,n&&"string"!=typeof n&&(ni("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),i.ya=function(){return new n}),n&&"string"==typeof n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var r=function(e){if(e.ya)return!1;if(!et())return!0;var t=e.mimeType;return e=e.uri||"",t||(t={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",ts:"video/mp2t",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac"}[wr.getExtension(e)]),!!t&&!!tt(t)&&(!wr.isSupported(e,t)||!!navigator.vendor&&navigator.vendor.includes("Apple"))}(i)?this.hb:this.T,a=Ss(this.jb,(function(e){return null==e.u?null:(i.u=e.u,{node:r,payload:i,Ta:!0})}));return a.tb=function(){},new Promise((function(e,t){a.lc=function(){return t(new pe(2,7,7002))},a.jc=function(){return e()},a.Wa=function(){return t(El())},a.onError=function(e){return t(e)}}))},Hs.prototype.load=Hs.prototype.load,Hs.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ps(e,t));var n=Ms(this.b,e,Xs(this));return Ys(this),n},Hs.prototype.configure=Hs.prototype.configure,Hs.prototype.getConfiguration=function(){var e=Xs(this);return Ms(e,this.b,Xs(this)),e},Hs.prototype.getConfiguration=Hs.prototype.getConfiguration,Hs.prototype.If=function(){for(var e in this.b)delete this.b[e];Ms(this.b,Xs(this),Xs(this)),Ys(this)},Hs.prototype.resetConfiguration=Hs.prototype.If,Hs.prototype.Je=function(){return this.h},Hs.prototype.getLoadMode=Hs.prototype.Je,Hs.prototype.Ne=function(){return this.a},Hs.prototype.getMediaElement=Hs.prototype.Ne,Hs.prototype.Fb=function(){return this.G},Hs.prototype.getNetworkingEngine=Hs.prototype.Fb,Hs.prototype.bc=function(){return this.Bb},Hs.prototype.getAssetUri=Hs.prototype.bc,Hs.prototype.Me=function(){return ni("getManifestUri",'Please use "getAssetUri" instead.'),this.bc()},Hs.prototype.getManifestUri=Hs.prototype.Me,Hs.prototype.V=function(){return this.c?this.c.presentationTimeline.V():!(!this.a||!this.a.src)&&1/0==this.a.duration},Hs.prototype.isLive=Hs.prototype.V,Hs.prototype.Va=function(){return!!this.c&&this.c.presentationTimeline.Va()},Hs.prototype.isInProgress=Hs.prototype.Va,Hs.prototype.af=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Hs.prototype.isAudioOnly=Hs.prototype.af,Hs.prototype.Kf=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.mb(),end:e.za()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},Hs.prototype.seekRange=Hs.prototype.Kf,Hs.prototype.keySystem=function(){return this.g?this.g.keySystem():""},Hs.prototype.keySystem=Hs.prototype.keySystem,Hs.prototype.drmInfo=function(){return this.g?this.g.a:null},Hs.prototype.drmInfo=Hs.prototype.drmInfo,Hs.prototype.dc=function(){return this.g?this.g.dc():1/0},Hs.prototype.getExpiration=Hs.prototype.dc,Hs.prototype.Oc=function(){return!!this.P&&this.P.a==xa},Hs.prototype.isBuffering=Hs.prototype.Oc,Hs.prototype.Qe=function(){if(this.W){var e=this.W;e=e.f?0:e.c}else e=0;return e},Hs.prototype.getPlaybackRate=Hs.prototype.Qe,Hs.prototype.bg=function(e){0==e?Y("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.W.set(e),this.h==wl&&go(this.f,1<Math.abs(e)))},Hs.prototype.trickPlay=Hs.prototype.bg,Hs.prototype.ue=function(){this.h==Sl&&this.W.set(1),this.h==wl&&(this.W.set(1),go(this.f,!1))},Hs.prototype.cancelTrickPlay=Hs.prototype.ue,Hs.prototype.Nc=function(){if(this.c&&this.s){for(var e=bl(this),t=[],n=d(function(e){return null==(e=ml(e))?[]:e.variants.filter((function(e){return $n(e)}))}(this)),i=n.next();!i.done;i=n.next()){var r=Kn(i=i.value);r.active=i==e,t.push(r)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){var t=Yn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind?(t.primary=!0,t.roles=["main"],t.audioRoles=["main"]):t.audioRoles=[],t})):[]},Hs.prototype.getVariantTracks=Hs.prototype.Nc,Hs.prototype.ob=function(){if(this.c&&this.s){for(var e=function(e){var t=ml(e);if(null==t)return null;if(!Ta(e.$,t).text){var n=Xn(t.textStreams,e.ma,e.cb);n.length&&_a(e.$,t,n[0])}return Ta(e.$,t).text}(this),t=[],n=d(function(e){var t=ml(e);return null==t?[]:t.textStreams.filter((function(t){return!e.Wb.has(t)}))}(this)),i=n.next();!i.done;i=n.next()){var r=zn(i=i.value);r.active=i==e,t.push(r)}return t}return this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).map((function(e){var t=Yn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),t})):[]},Hs.prototype.getTextTracks=Hs.prototype.ob,Hs.prototype.hd=function(e){if(this.c&&this.f){var t=ml(this),n=t.textStreams.find((function(t){return t.id==e.id}));n&&(qs(this,t,n,!1),Js(this,n),this.ma=n.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(t=d(t=Array.from(this.a.textTracks))).next();!n.done;n=t.next())Gn(n=n.value)==e.id?n.mode=this.eb?"showing":"hidden":n.mode="disabled";sl(this)}},Hs.prototype.selectTextTrack=Hs.prototype.hd,Hs.prototype.Mf=function(){ni("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.ob().filter((function(e){return"application/cea-608"==e.mimeType}));0<e.length&&this.hd(e[0])},Hs.prototype.selectEmbeddedTextTrack=Hs.prototype.Mf,Hs.prototype.gg=function(){ni("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.ob().filter((function(e){return e.active}))[0];return!!e&&"application/cea-608"==e.mimeType},Hs.prototype.usingEmbeddedTextTrack=Hs.prototype.gg,Hs.prototype.Of=function(e,t,n){if(n=void 0===n?0:n,this.c&&this.f){var i=ml(this);this.b.abr.enabled&&Y("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=i.variants.find((function(t){return t.id==e.id}));r&&$n(r)&&($s(this,i,r,!1),Zs(this,r,t,n),this.Ub=new Da(r),nl(this,i.variants))}else if(this.a&&this.a.audioTracks){for(n=(t=d(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())Gn(n=n.value)==e.id&&(n.enabled=!0);ol(this)}},Hs.prototype.selectVariantTrack=Hs.prototype.Of,Hs.prototype.Ee=function(){return vl(this.Nc())},Hs.prototype.getAudioLanguagesAndRoles=Hs.prototype.Ee,Hs.prototype.Xe=function(){return vl(this.ob())},Hs.prototype.getTextLanguagesAndRoles=Hs.prototype.Xe,Hs.prototype.De=function(){return Array.from(gl(this.Nc()))},Hs.prototype.getAudioLanguages=Hs.prototype.De,Hs.prototype.We=function(){return Array.from(gl(this.ob()))},Hs.prototype.getTextLanguages=Hs.prototype.We,Hs.prototype.Lf=function(e,t){if(this.c&&this.s){var n=ml(this);this.Ub=new Oa(e,t||"",0),il(this,n)}else if(this.a&&this.a.audioTracks){for(var i=(n=d(n=Array.from(this.a.audioTracks))).next();!i.done;i=n.next())(i=i.value).language==e&&(i.enabled=!0);ol(this)}},Hs.prototype.selectAudioLanguage=Hs.prototype.Lf,Hs.prototype.Nf=function(e,t){if(this.c&&this.s){var n=ml(this);this.ma=e,this.cb=t||"";var i=Xn(n.textStreams,this.ma,this.cb)[0]||null;i&&(qs(this,n,i,!1),(this.b.streaming.alwaysStreamText||this.gc())&&Js(this,i))}else(n=this.ob().filter((function(t){return t.language==e}))[0])&&this.hd(n)},Hs.prototype.selectTextLanguage=Hs.prototype.Nf,Hs.prototype.gc=function(){var e=this.eb;return this.c?this.D.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).some((function(e){return"showing"==e.mode})):e},Hs.prototype.isTextTrackVisible=Hs.prototype.gc,Hs.prototype.Rf=function(e){var t=this;return p((function n(){var i,r,a,o;return L(n,(function(n){switch(n.j){case 1:if(t.eb==(i=e))return n.return();if(t.eb=i,t.h!=wl){if(t.a&&t.a.src&&t.a.textTracks)for(var s=d(Array.from(t.a.textTracks)),l=s.next();!l.done;l=s.next())"disabled"!=(r=l.value).mode&&(r.mode=e?"showing":"hidden");n.A(2);break}if(t.D.g.setTextVisibility(e),t.b.streaming.alwaysStreamText){n.A(2);break}if(!e){(s=t.f).D=!0,(l=s.b.get("text"))&&(Mo(l),s.b.delete("text")),n.A(2);break}if(a=ml(t),!(0<(o=Xn(a.textStreams,t.ma,t.cb)).length)){n.A(2);break}return A(n,yo(t.f,o[0]),2);case 2:ll(t),_(n)}}))}))},Hs.prototype.setTextTrackVisibility=Hs.prototype.Rf,Hs.prototype.Se=function(){if(!this.V())return null;if(this.c)return new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime));if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:new Date(e.getTime()+1e3*this.a.currentTime)}return null},Hs.prototype.getPlayheadTimeAsDate=Hs.prototype.Se,Hs.prototype.Ue=function(){if(!this.V())return null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},Hs.prototype.getPresentationStartTimeAsDate=Hs.prototype.Ue,Hs.prototype.Jc=function(){var e={total:[],audio:[],video:[],text:[]};return this.h==Sl&&(e.total=Kt(this.a.buffered)),this.h==wl&&this.D.Jc(e),e},Hs.prototype.getBufferedInfo=Hs.prototype.Jc,Hs.prototype.getStats=function(){if(this.h!=wl&&this.h!=Sl)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,switchHistory:[],stateHistory:[]};tl(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.v,n=Number(e.totalVideoFrames);t.i=Number(e.droppedVideoFrames),t.h=n}this.h==wl&&((e=bl(this))&&(this.v.l=e.bandwidth),e&&e.video&&(t=this.v,n=e.video.height||NaN,t.m=e.video.width||NaN,t.g=n),e=this.l.getBandwidthEstimate(),this.v.f=e);var i=this.v;e=i.m,t=i.g,n=i.l;for(var r=i.h,a=i.i,o=i.f,s=i.b,l=Bs(i.a,"playing"),u=Bs(i.a,"paused"),c=Bs(i.a,"buffering"),h=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=d(e.b),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.a&&n.push(t(e.a)),n}(i.a),p=[],f=(i=d(i.c.a)).next();!f.done;f=i.next())f=f.value,p.push({timestamp:f.timestamp,id:f.id,type:f.type,fromAdaptation:f.fromAdaptation,bandwidth:f.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:r,droppedFrames:a,estimatedBandwidth:o,loadLatency:s,playTime:l,pauseTime:u,bufferingTime:c,stateHistory:h,switchHistory:p}},Hs.prototype.getStats=Hs.prototype.getStats,Hs.prototype.addTextTrack=function(e,t,n,i,r,a){var o=this;return p((function s(){var l,u,c,d,h,p,f,y,g;return L(s,(function(s){switch(s.j){case 1:if(o.h==Sl)throw Error("State error!");if(o.h!=wl)throw Error("State error!");if(l=ml(o),u=Yt,c=o.c.periods.indexOf(l),h=(d=c+1)>=o.c.periods.length?o.c.presentationTimeline.Y():o.c.periods[d].startTime,1/0==(p=h-l.startTime))throw new pe(1,4,4033);return f=new sr(1,0,p,(function(){return[e]}),0,null),y={id:o.Hd++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?f:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:i,codecs:r||"",kind:n,encrypted:!1,keyId:null,language:t,label:a||null,type:u.qa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},o.Wb.add(y),l.textStreams.push(y),A(s,yo(o.f,y),2);case 2:return(g=fo(o.f,"text"))&&_a(o.$,l,g),o.Wb.delete(y),il(o,l),al(o),s.return(zn(y))}}))}))},Hs.prototype.addTextTrack=Hs.prototype.addTextTrack,Hs.prototype.kd=function(e,t){this.Xb.width=e,this.Xb.height=t},Hs.prototype.setMaxHardwareResolution=Hs.prototype.kd,Hs.prototype.gd=function(){if(this.h==wl){var e=this.f;if(e.f)e=!1;else if(e.m)e=!1;else{for(var t=d(e.b.values()),n=t.next();!n.done;n=t.next())(n=n.value).Ib&&(n.Ib=!1,Lo(e,n,.1));e=!0}}else e=!1;return e},Hs.prototype.retryStreaming=Hs.prototype.gd,Hs.prototype.Ke=function(){return this.c},Hs.prototype.getManifest=Hs.prototype.Ke,Hs.prototype.Le=function(){return this.m?this.m.constructor:null},Hs.prototype.getManifestParserFactory=Hs.prototype.Le,(n=Hs.prototype).Fc=function(e){var t=this.f?ho(this.f):null,n=this.f?po(this.f):null;if(Hn(this.g,t,n,e),!(t=e.variants).some($n))throw new pe(2,4,4011);if(fl(this,e.variants),jn(t,this.b.restrictions,this.Xb)&&this.f&&ml(this)==e&&al(this),e=this.g?this.g.a:null)for(n=(t=d(t)).next();!n.done;n=t.next())for(var i=(n=d(n.value.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==e.keySystem)for(var r=(i=d(i.initData||[])).next();!r.done;r=i.next())r=r.value,_t(this.g,r.initDataType,r.initData)},n.df=function(e){try{this.ib=!0,this.l.disable(),ul(this);var t=nl(this,e.variants),n=Xn(e.textStreams,this.ma,this.cb)[0]||null;this.Ea&&(e.variants.includes(this.Ea)&&(t=this.Ea),this.Ea=null),this.na&&(e.textStreams.includes(this.na)&&(n=this.na),this.na=null),t&&$s(this,e,t,!0),n&&qs(this,e,n,!0);var i=this.f,r=i.b.get("video");if(r)var a=i.c.periods[r.pa];else{var o=i.b.get("audio");a=o?i.c.periods[o.pa]:null}var s=t?t.audio:null;if(!a&&n){var l;if(l=s){e=n;var u=Mn(this.b.preferredTextLanguage),c=Mn(s.language),d=Mn(e.language);l=xn(d,u)&&!xn(c,d)}l&&(this.eb=!0),this.eb&&this.D.g.setTextVisibility(!0),ll(this)}return this.b.streaming.alwaysStreamText||this.gc()?{variant:t,text:n}:{variant:t,text:null}}catch(e){return this.Ka(e),{variant:null,text:null}}},n.te=function(){this.ib=!1,this.b.abr.enabled&&(this.l.enable(),ul(this)),this.Ea&&(vo(this.f,this.Ea,this.Dd,this.Bd),ol(this),this.Ea=null),this.na&&(mo(this.f,this.na,!0,0,!1),sl(this),this.na=null)},n.jf=function(){this.m&&this.m.update&&this.m.update()},n.qf=function(){this.s&&this.s.s()},n.Ka=function(e){if(this.h!=_l){var t=new Ae("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var _l=0,Tl=1,wl=2,Sl=3;function Cl(e,t){var n=ms(new vs(e.ua(),e.aa()),t.periods[0],new Sr(null,0)),i=t.appMetadata||{};return n=Rl(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function Rl(e){for(var t=[],n=function(e){return e.filter((function(e){return $n(e)}))}(e.variants),i=(n=d(n)).next();!i.done;i=n.next())t.push(Kn(i.value));for(n=(e=d(e.textStreams)).next();!n.done;n=e.next())t.push(zn(n.value));return t}function Il(){this.a={}}function Dl(e,t){var n=e.a[t];return null==n&&(n=0),n}function Ol(e){this.a=!1,this.b=new fe,this.c=e}function Pl(e){var t=new Ll;e.periods.forEach((function(e,n){var i=Nl(e.variants);if(0==n)for(var r=(i=d(i.a)).next();!r.done;r=i.next())t.add(r.value);else!function(e,t){e.a=e.a.filter((function(e){return Ml(t,e)}))}(t,i)}));for(var n=(e=d(e.periods)).next();!n.done;n=e.next())(n=n.value).variants=n.variants.filter((function(e){return Ml(t,new xl(e))}))}function xl(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function Ll(){this.a=[]}function Ml(e,t){return e.a.some((function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c}))}function Nl(e){for(var t=new Ll,n=(e=d(e)).next();!n.done;n=e.next())t.add(new xl(n.value));return t}function Ul(e){var t=this;if(e&&e.constructor!=Hs)throw new pe(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.Fb()):(this.a=Ls(),this.b=new Oe),this.f=!1,this.c=[],this.g=[];var n=!e;this.h=new Ol((function(){return p((function e(){var i;return L(e,(function(e){switch(e.j){case 1:return i=function(){},A(e,Promise.all(t.g.map((function(e){return e.then(i,i)}))),2);case 2:if(!n){e.A(3);break}return A(e,t.b.destroy(),3);case 3:t.a=null,t.b=null,_(e)}}))}))}))}function Bl(){if(et())e:{for(var e=d(Jo.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Fl(e,t){for(var n=[],i=d(e.periods),r=i.next();!r.done;r=i.next())for(var a=(r=d(r.value.streams)).next();!a.done;a=r.next())a=a.value,t&&"video"==a.contentType?n.push({contentType:Qe(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||n.push({contentType:Qe(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function jl(e,t,n){return p((function i(){return L(i,(function(i){switch(i.j){case 1:return A(i,function(e,t,n,i){return p((function r(){var a,o,s;return L(r,(function(r){switch(r.j){case 1:return i.drmInfo?(a=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new pe(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),o=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:Fl(i,!1),videoCapabilities:Fl(i,!0)}})),A(r,_s(t,e,o),2)):r.return();case 2:return s=r.o,A(r,a.remove(s),3);case 3:return A(r,a.add(o.filter((function(e){return-1==s.indexOf(e.sessionId)}))),0)}}))}))}(e.b,e.a.drm,n,t),0)}}))}))}function Hl(e,t,n,i){function r(){s+=1,e.a.offline.progressCallback(l,s/o)}var a=function(e){var t=[];return e.periods.forEach((function(e){e.streams.forEach((function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach((function(e){t.push(e.dataKey)}))}))})),t}(i),o=a.length+1,s=0,l=Cl(n,i);return Promise.all([t.removeSegments(a,r),t.removeManifests([n.key()],r)])}function Vl(e,t,n,i,r,a){var o={id:a.id,originalId:a.originalId,primary:a.primary,presentationTimeOffset:a.presentationTimeOffset||0,contentType:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,initSegmentKey:null,encrypted:a.encrypted,keyId:a.keyId,segments:[],variantIds:[]};r=r.presentationTimeline.Hb();var s=a.id;return function(e,t,n){for(var i=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);i;)n(i),i=e.getSegmentReference(++t)}(a,r,(function(r){var l=Cr(r.c(),r.b,r.a,e.a.streaming.retryParameters);Vo(t,s,l,function(e,t,n){return n=n.endTime-n.startTime,Dl(e,t)*n}(i,a.id,r),(function(t){return n.addSegments([{data:t}]).then((function(t){e.c.push(t[0]),o.segments.push({startTime:r.startTime,endTime:r.endTime,dataKey:t[0]})}))}))})),(r=a.initSegmentReference)&&(r=Cr(r.c(),r.b,r.a,e.a.streaming.retryParameters),Vo(t,s,r,.5*Dl(i,a.id),(function(t){return n.addSegments([{data:t}]).then((function(t){e.c.push(t[0]),o.initSegmentKey=t[0]}))}))),o}function Kl(e){if(e.h.a)throw new pe(2,9,7001)}function zl(){if(!Bl())throw new pe(2,9,9e3)}function Gl(e,t){return p((function n(){return L(n,(function(n){switch(n.j){case 1:return e.g.push(t),w(n,2),A(n,t,4);case 4:return n.return(n.o);case 2:R(n),Ce(e.g,t),I(n,0)}}))}))}function Wl(e){for(var t=new Set,n=(e=d(e.periods)).next();!n.done;n=e.next()){for(var i=d((n=n.value).textStreams),r=i.next();!r.done;r=i.next())t.add(r.value);for(i=(n=d(n.variants)).next();!i.done;i=n.next())(i=i.value).audio&&t.add(i.audio),i.video&&t.add(i.video)}return t}function Yl(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=d(t),i=n.next();!i.done;i=n.next())for(var r=(i=d(t)).next();!r.done;r=i.next());for(n=(t=d(e)).next();!n.done;n=t.next())for(i=(n=d(e)).next();!i.done;i=n.next());}Hs.LoadMode={DESTROYED:_l,NOT_LOADED:Tl,MEDIA_SOURCE:wl,SRC_EQUALS:Sl},Ol.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},Ll.prototype.add=function(e){Ml(this,e)||this.a.push(e)},j("shaka.offline.Storage",Ul),Ul.support=Bl,Ul.prototype.destroy=function(){return this.h.destroy()},Ul.prototype.destroy=Ul.prototype.destroy,Ul.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ps(e,t));var n=e,i=!1;return null!=n.trackSelectionCallback&&(i=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(i=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(i=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),i&&ni("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Ms(this.a,e)},Ul.prototype.configure=Ul.prototype.configure,Ul.prototype.getConfiguration=function(){var e=Ls();return Ms(e,this.a,Ls()),e},Ul.prototype.getConfiguration=Ul.prototype.getConfiguration,Ul.prototype.Fb=function(){return this.b},Ul.prototype.getNetworkingEngine=Ul.prototype.Fb,Ul.prototype.store=function(e,t,n){var i=this;return Gl(this,function(e,t,n,i){return p((function r(){var a,o,s,l,u,c,h,f,y;return L(r,(function(r){switch(r.j){case 1:return zl(),e.f?r.return(Promise.reject(new pe(2,9,9006))):(e.f=!0,A(r,function(e,t,n){return p((function i(){var r,a,o,s,l,u;return L(i,(function(i){switch(i.j){case 1:return r=null,a=e.b,o={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e}},A(i,n(),2);case 2:return(s=i.o).configure(e.a.manifest),Kl(e),w(i,3),A(i,s.start(t,o),5);case 5:return l=i.o,Kl(e),u=Wl(l),A(i,Promise.all(Array.from(u).map((function(e){return e.createSegmentIndex()}))),6);case 6:if(Kl(e),r)throw r;return i.return(l);case 3:return R(i),A(i,s.stop(),7);case 7:I(i,0)}}))}))}(e,t,i),2));case 2:if(a=r.o,Kl(e),a.presentationTimeline.V()||a.presentationTimeline.Va())throw new pe(2,9,9005,t);return o=null,s=new Xo,u=l=null,T(r,3,4),A(r,function(e,t,n){return p((function i(){var r,a,o;return L(i,(function(i){switch(i.j){case 1:return r=new mt({rb:e.b,onError:n,kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=Va(t.periods),o=e.a,r.configure(o.drm),A(i,function(e,t,n){return e.s=[],e.D=n,Et(e,t)}(r,a,o.offline.usePersistentLicense),2);case 2:return A(i,kt(r),3);case 3:return A(i,At(r),4);case 4:return i.return(r)}}))}))}(e,a,(function(e){u=u||e})),6);case 6:if(o=r.o,Kl(e),u)throw u;return function(e,t,n){(function(e,t){for(var n={width:1/0,height:1/0},i=d(e.periods),r=i.next();!r.done;r=i.next())(r=r.value).variants=r.variants.filter((function(e){return Fn(e,t,n)}))})(t,e.a.restrictions),function(e){for(var t=(e=d(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&An(e.audio)),e.video&&(t=t&&An(e.video)),t}))}(t),function(e,t){for(var n=d(e.periods),i=n.next();!i.done;i=n.next())(i=i.value).variants=i.variants.filter((function(e){return Ot(t,e)}))}(t,n),Pl(t),function(e,t){var n=new Ll;e.periods.forEach((function(e,i){0<i&&(e.variants=e.variants.filter((function(e){return Ml(n,new xl(e))}))),t(e),n=Nl(e.variants)}))}(t,(function(t){for(var n=[],i=d(t.variants),r=i.next();!r.done;r=i.next())n.push(Kn(r.value));for(r=(i=d(t.textStreams)).next();!r.done;r=i.next())n.push(zn(r.value));n=e.a.offline.trackSelectionCallback(n);var a=new Set,o=new Set;for(i=(n=d(n)).next();!i.done;i=n.next())"variant"==(i=i.value).type&&a.add(i.id),"text"==i.type&&o.add(i.id);t.variants=t.variants.filter((function(e){return a.has(e.id)})),t.textStreams=t.textStreams.filter((function(e){return o.has(e.id)}))})),function(e){if(0==e.periods.length)throw new pe(2,4,4014);for(var t=(e=d(e.periods)).next();!t.done;t=e.next())Yl(t.value)}(t)}(e,a,o),A(r,s.init(),7);case 7:return Kl(e),A(r,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{ua:n,aa:i},aa:e})}))})),t)return t;throw new pe(2,9,9013,"Could not find a cell that supports add-operations")}(s),8);case 8:return l=r.o,Kl(e),A(r,function(e,t,n,i,r,a){return p((function o(){var s,l,u,c;return L(o,(function(o){switch(o.j){case 1:return s=function(e,t,n){var i=null==t.expiration?1/0:t.expiration;return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.Y(),size:0,expiration:i,tracks:t=Rl(t.periods[0]),appMetadata:n}}(r,i,a),l=new Ho(e.b,(function(t,n){s.size=n,e.a.offline.progressCallback(s,t)})),w(o,2),c=u=function(e,t,n,i,r,a,o){var s=new Il,l=r.periods.map((function(i){return function(e,t,n,i,r,a){r.periods.forEach((function(e){e.variants.forEach((function(e){var t=e.audio,n=e.video;if(t&&!n&&(i.a[t.id]=t.bandwidth||e.bandwidth),!t&&n&&(i.a[n.id]=n.bandwidth||e.bandwidth),t&&n){var r=t.bandwidth||393216,a=n.bandwidth||e.bandwidth-r;0>=a&&(a=e.bandwidth),i.a[t.id]=r,i.a[n.id]=a}})),e.textStreams.forEach((function(e){i.a[e.id]=52}))}));for(var o=Wl(r),s=new Map,l=(o=d(o)).next();!l.done;l=o.next()){l=l.value;var u=Vl(e,t,n,i,r,l);s.set(l.id,u)}return a.variants.forEach((function(e){e.audio&&s.get(e.audio.id).variantIds.push(e.id),e.video&&s.get(e.video.id).variantIds.push(e.id)})),{startTime:a.startTime,streams:Array.from(s.values())}}(e,t,n,s,r,i)})),u=i.a,c=wt(i);if(u&&e.a.offline.usePersistentLicense){if(!c.length)throw new pe(2,9,9007,a);u.initData=[]}return{originalManifestUri:a,duration:r.presentationTimeline.Y(),size:0,expiration:i.dc(),periods:l,sessionIds:e.a.offline.usePersistentLicense?c:[],drmInfo:u,appMetadata:o}}(e,l,t,n,i,r,a),A(o,function(e){return p((function t(){return L(t,(function(t){switch(t.j){case 1:return A(t,Promise.all(e.b.values()),2);case 2:return t.return(e.a.a)}}))}))}(l),4);case 4:return c.size=o.o,o.return(u);case 2:return R(o),A(o,l.destroy(),5);case 5:I(o,0)}}))}))}(e,l.aa,o,a,t,n),9);case 9:if(c=r.o,Kl(e),u)throw u;return A(r,l.aa.addManifests([c]),10);case 10:return h=r.o,Kl(e),f=new ys("manifest",l.path.ua,l.path.aa,h[0]),r.return(Cl(f,c));case 4:return R(r),e.f=!1,e.c=[],A(r,s.destroy(),11);case 11:if(!o){r.A(12);break}return A(r,o.destroy(),12);case 12:I(r,0);break;case 3:if(y=C(r),!l){r.A(14);break}return A(r,l.aa.removeSegments(e.c,(function(){})),14);case 14:throw u||y}}))}))}(this,e,t||{},(function(){return p((function t(){var r,a;return L(t,(function(t){switch(t.j){case 1:return n&&"string"!=typeof n?(ni("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),r=n,t.return(new r)):A(t,wr.create(e,i.b,i.a.manifest.retryParameters,n),2);case 2:return a=t.o,t.return(a)}}))}))})))},Ul.prototype.store=Ul.prototype.store,Ul.prototype.Ve=function(){return this.f},Ul.prototype.getStoreInProgress=Ul.prototype.Ve,Ul.prototype.remove=function(e){return Gl(this,function(e,t){return p((function n(){var i,r,a,o,s,l;return L(n,(function(n){switch(n.j){case 1:return zl(),null==(i=gs(t))||"manifest"!=i.a?n.return(Promise.reject(new pe(2,9,9004,t))):(r=i,a=new Xo,w(n,2),A(n,a.init(),4));case 4:return A(n,Qo(a,r.ua(),r.aa()),5);case 5:return A(n,(o=n.o).getManifests([r.key()]),6);case 6:return s=n.o,l=s[0],A(n,Promise.all([jl(e,l,a),Hl(e,o,r,l)]),2);case 2:return R(n),A(n,a.destroy(),8);case 8:I(n,0)}}))}))}(this,e))},Ul.prototype.remove=Ul.prototype.remove,Ul.prototype.Ff=function(){return Gl(this,function(e){return p((function t(){var n,i,r,a,o,s,l,u,c;return L(t,(function(t){switch(t.j){case 1:return zl(),n=e.b,i=e.a.drm,r=new Xo,a=!1,w(t,2),A(t,r.init(),4);case 4:for(o=[],function(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}(r,(function(e){return o.push(e)})),s=Promise.resolve(),l={},u=d(o),c=u.next();!c.done;l={qc:l.qc},c=u.next())l.qc=c.value,s=s.then(function(e){return function(){return p((function t(){var r,o;return L(t,(function(t){switch(t.j){case 1:return A(t,e.qc.getAll(),2);case 2:return r=t.o,A(t,_s(i,n,r),3);case 3:return o=t.o,A(t,e.qc.remove(o),4);case 4:o.length!=r.length&&(a=!0),_(t)}}))}))}}(l));return A(t,s,2);case 2:return R(t),A(t,r.destroy(),6);case 6:I(t,3);break;case 3:return t.return(!a)}}))}))}(this))},Ul.prototype.removeEmeSessions=Ul.prototype.Ff,Ul.prototype.list=function(){return Gl(this,p((function e(){var t,n,i;return L(e,(function(e){switch(e.j){case 1:return zl(),t=[],n=new Xo,w(e,2),A(e,n.init(),4);case 4:return i=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){t({ua:n,aa:i},e)}))}))}(n,(function(e,n){i=i.then((function(){return p((function i(){return L(i,(function(i){switch(i.j){case 1:return A(i,n.getAllManifests(),2);case 2:i.o.forEach((function(n,i){var r=Cl(new ys("manifest",e.ua,e.aa,i),n);t.push(r)})),_(i)}}))}))}))})),A(e,i,2);case 2:return R(e),A(e,n.destroy(),6);case 6:I(e,3);break;case 3:return e.return(t)}}))})))},Ul.prototype.list=Ul.prototype.list,Ul.deleteAll=function(){return p((function e(){var t;return L(e,(function(e){switch(e.j){case 1:return t=new Xo,w(e,2),A(e,t.erase(),2);case 2:return R(e),A(e,t.destroy(),5);case 5:I(e,0)}}))}))},zs.offline=Bl,j("shaka.polyfill.installAll",(function(){for(var e=0;e<Xl.length;++e)Xl[e].re()}));var $l,ql,Xl=[];function Ql(e,t){for(var n={priority:t=t||0,re:e},i=0;i<Xl.length;i++)if(Xl[i].priority<t)return void Xl.splice(i,0,n);Xl.push(n)}function Zl(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function Jl(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function eu(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return(n=e.apply(this,n)).abort=function(){},n}}function tu(e){var t=e.target,n=t.mediaSource_;if(n.Ed){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.xd=!0,e=0;e<n.sourceBuffers.length;++e)if(0==n.sourceBuffers[e].xd)return;n.Ed=!1}}function nu(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",tu,!1);e.removeEventListener("sourceclose",nu,!1)}function iu(e,t){try{var n=new ru(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function ru(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=d(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var a=!1,o=!1;if(r.audioCapabilities)for(var s=d(r.audioCapabilities),l=s.next();!l.done;l=s.next())if((l=l.value).contentType){a=!0;var u=l.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(i.audioCapabilities.push(l),o=!0)}if(r.videoCapabilities)for(l=(r=d(r.videoCapabilities)).next();!l.done;l=r.next())(s=l.value).contentType&&(a=!0,l=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,l)&&(i.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=o?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function au(e){var t=this.mediaKeys;return t&&t!=e&&su(t,null),delete this.mediaKeys,(this.mediaKeys=e)?su(e,this):Promise.resolve()}function ou(e){this.b=new WebKitMediaKeys(e),this.a=new Ke}function su(e,t){if(e.a.Ya(),!t)return Promise.resolve();e.a.w(t,"webkitneedkey",uu);try{return 1<=t.readyState?t.webkitSetMediaKeys(e.b):e.a.da(t,"loadedmetadata",(function(){t.webkitSetMediaKeys(e.b)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function lu(e){Te.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new Ke,this.sessionId="",this.expiration=NaN,this.closed=new fe,this.keyStatuses=new du}function uu(e){var t=new Event("encrypted");t.initDataType="cenc",t.initData=e.initData,this.dispatchEvent(t)}function cu(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Ae("keystatuseschange"))}function du(){this.size=0,this.a=void 0}function hu(e,t){try{var n=new pu(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function pu(e,t){this.keySystem=e;for(var n=!1,i=0;i<t.length;++i){var r=t[i],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=0;s<r.audioCapabilities.length;++s){var l=r.audioCapabilities[s];if(l.contentType){o=!0;var u=l.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.audioCapabilities.push(l),n=!0)}}if(r.videoCapabilities)for(s=0;s<r.videoCapabilities.length;++s)(l=r.videoCapabilities[s]).contentType&&(o=!0,u=l.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.videoCapabilities.push(l),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function fu(e){var t=this.mediaKeys;return t&&t!=e&&gu(t,null),delete this.mediaKeys,(this.mediaKeys=e)?gu(e,this):Promise.resolve()}function yu(e){this.a=new MSMediaKeys(e),this.b=new Ke}function gu(e,t){if(e.b.Ya(),!t)return Promise.resolve();e.b.w(t,"msneedkey",mu);var n=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",(function e(){t.msSetMediaKeys(n.a),t.removeEventListener("loadedmetadata",e)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function vu(e){Te.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new Ke,this.sessionId="",this.expiration=NaN,this.closed=new fe,this.keyStatuses=new Eu}function mu(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new $i(e);if(1>=t.a.length)return e;for(var n=[],i=0;i<t.a.length;i++)n.push(e.subarray(t.a[i].start,t.a[i].end+1));for(e=[],t={},i=d(n),n=i.next();!n.done;t={fc:t.fc},n=i.next())t.fc=n.value,e.some(function(e){return function(t){return gt(t,e.fc)}}(t))||e.push(t.fc);for(t=0,i=d(e),n=i.next();!n.done;n=i.next())t+=n.value.length;for(t=new Uint8Array(t),i=0,e=d(e),n=e.next();!n.done;n=e.next())n=n.value,t.set(n,i),i+=n.length;return t}(e.initData),this.dispatchEvent(t)}}function bu(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Ae("keystatuseschange"))}function Eu(){this.size=0,this.a=void 0}function ku(){return Promise.reject(Error("The key system specified is not supported."))}function Au(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function _u(){throw new TypeError("Illegal constructor.")}function Tu(){throw new TypeError("Illegal constructor.")}j("shaka.polyfill.register",Ql),Ql((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Zl),document.addEventListener("webkitfullscreenerror",Zl),document.addEventListener("mozfullscreenchange",Zl),document.addEventListener("mozfullscreenerror",Zl),document.addEventListener("MSFullscreenChange",Zl),document.addEventListener("MSFullscreenError",Zl)}})),Ql((function(){nt("CrKey")&&delete e.indexedDB})),Ql((function(){nt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Jl)})),Ql((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Ql((function(){})),Ql((function(){if(e.MediaSource)if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType)!function(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var i=n.split(/ *; */),r=i[0],a={},o=1;o<i.length;++o){var s=i[o].split("="),l=s[0];s=s[1].replace(/"(.*)"/,"$1"),a[l]=s}if(!(i=a.codecs))return e(n);var u=!1,c=!1;for(var d in n=i.split(",").filter((function(e){return t.test(e)&&(c=!0),/^(hev|hvc)1\.2/.test(e)&&(u=!0),!0})),c&&(u=!1),a.codecs=n.join(","),u&&(a.eotf="smpte2084"),a)r+="; "+d+'="'+a[d]+'"';return cast.__platform__.canDisplayType(r)}}();else if(navigator.vendor&&navigator.vendor.includes("Apple")){var t=navigator.appVersion;!function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),t.includes("Version/8")?e.MediaSource=null:t.includes("Version/9")?eu():t.includes("Version/10")?(eu(),function(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];for(var r=i=0;r<this.sourceBuffers.length;++r){var a=this.sourceBuffers[r];a=a.buffered.end(a.buffered.length-1),i=Math.max(i,a)}if(!isNaN(this.duration)&&i<this.duration)for(this.Ed=!0,i=0;i<this.sourceBuffers.length;++i)this.sourceBuffers[i].xd=!1;return e.apply(this,n)};var t=!1,n=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var i=[],r=0;r<arguments.length;++r)i[r]=arguments[r];return(i=n.apply(this,i)).mediaSource_=this,i.addEventListener("updateend",tu,!1),t||(this.addEventListener("sourceclose",nu,!1),t=!0),i}}()):(t.includes("Version/11")||t.includes("Version/12"))&&(eu(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}())}else nt("Tizen")&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Ze(t)[0]&&e(t)}}()})),ru.prototype.createMediaKeys=function(){var e=new ou(this.keySystem);return Promise.resolve(e)},ru.prototype.getConfiguration=function(){return this.a},ou.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new lu(this.b,e)},ou.prototype.setServerCertificate=function(e){return Promise.resolve(!0)},H(lu,Te),(n=lu.prototype).generateRequest=function(e,t){this.a=new fe;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.w(this.b,"webkitkeymessage",this.Wf.bind(this)),this.f.w(this.b,"webkitkeyadded",this.Uf.bind(this)),this.f.w(this.b,"webkitkeyerror",this.Vf.bind(this)),cu(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.c=new fe;try{this.b.update(new Uint8Array(e))}catch(e){this.c.reject(e)}return this.c},n.close=function(){try{this.b.close(),this.closed.resolve(),this.f.Ya()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.Wf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Ae("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.Uf=function(){this.c&&(cu(this,"usable"),this.c.resolve(),this.c=null)},n.Vf=function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:cu(this,"output-not-allowed");break;default:cu(this,"internal-error")}},(n=du.prototype).forEach=function(e){this.a&&e(this.a,$l)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=$l;return!(!this.a||!gt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Ql((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&($l=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=au,e.MediaKeys=ou,e.MediaKeySystemAccess=ru,navigator.requestMediaKeySystemAccess=iu)})),pu.prototype.createMediaKeys=function(){var e=new yu(this.keySystem);return Promise.resolve(e)},pu.prototype.getConfiguration=function(){return this.a},yu.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new vu(this.a,e)},yu.prototype.setServerCertificate=function(){return Promise.resolve(!1)},H(vu,Te),(n=vu.prototype).generateRequest=function(e,t){this.a=new fe;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.w(this.c,"mskeymessage",this.nf.bind(this)),this.f.w(this.c,"mskeyadded",this.lf.bind(this)),this.f.w(this.c,"mskeyerror",this.mf.bind(this)),bu(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.b=new fe;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},n.close=function(){try{this.c.close(),this.closed.resolve(),this.f.Ya()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.nf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Ae("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.lf=function(){this.a?(bu(this,"usable"),this.a.resolve(),this.a=null):this.b&&(bu(this,"usable"),this.b.resolve(),this.b=null)},n.mf=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:bu(this,"output-not-allowed");break;default:bu(this,"internal-error")}},(n=Eu.prototype).forEach=function(e){this.a&&e(this.a,ql)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=ql;return!(!this.a||!gt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Ql((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(ql=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=fu,e.MediaKeys=yu,e.MediaKeySystemAccess=pu,navigator.requestMediaKeySystemAccess=hu)})),_u.prototype.createSession=function(){},_u.prototype.setServerCertificate=function(){},Tu.prototype.getConfiguration=function(){},Tu.prototype.createMediaKeys=function(){},Ql((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=ku,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Au,e.MediaKeys=_u,e.MediaKeySystemAccess=Tu)}),-10);var wu,Su="";function Cu(e){return Su?Su+e.charAt(0).toUpperCase()+e.slice(1):e}function Ru(e,t){try{var n=new Du(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Iu(e){var t=this.mediaKeys;return t&&t!=e&&Pu(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Pu(e,this),Promise.resolve()}function Du(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=0;a<t.length;++a){var o=t[a],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},l=!1;if(o.audioCapabilities)for(var u=0;u<o.audioCapabilities.length;++u){var c=o.audioCapabilities[u];if(c.contentType){l=!0;var d=c.contentType.split(";")[0];r.canPlayType(d,this.a)&&(s.audioCapabilities.push(c),i=!0)}}if(o.videoCapabilities)for(u=0;u<o.videoCapabilities.length;++u)(c=o.videoCapabilities[u]).contentType&&(l=!0,r.canPlayType(c.contentType,this.a)&&(s.videoCapabilities.push(c),i=!0));if(l||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Ou(e){this.g=e,this.b=null,this.a=new Ke,this.c=[],this.f={}}function Pu(e,t){e.b=t,e.a.Ya();var n=Su;t&&(e.a.w(t,n+"needkey",e.tf.bind(e)),e.a.w(t,n+"keymessage",e.Zf.bind(e)),e.a.w(t,n+"keyadded",e.Xf.bind(e)),e.a.w(t,n+"keyerror",e.Yf.bind(e)))}function xu(e,t){var n=e.f[t];return n||((n=e.c.shift())?(n.sessionId=t,e.f[t]=n):null)}function Lu(e,t,n){Te.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new fe,this.keyStatuses=new Uu}function Mu(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var i=new Uint8Array(lt("LOAD_SESSION|"+n));else{var r=lt("PERSISTENT|"),a=new Uint8Array(r.byteLength+t.byteLength);a.set(new Uint8Array(r),0),a.set(new Uint8Array(t),r.byteLength),i=a}else i=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new fe;var o=Cu("generateKeyRequest");try{e.f[o](e.c,i)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new ce((function(){try{e.f[o](e.c,i)}catch(t){e.b.reject(t),e.b=null}})).O(.01)}return e.b}function Nu(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Ae("keystatuseschange"))}function Uu(){this.size=0,this.a=void 0}function Bu(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Fu(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function ju(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Hu(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Vu(t,n,i){return new e.TextTrackCue(t,n,i)}function Ku(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function zu(){}Du.prototype.createMediaKeys=function(){var e=new Ou(this.a);return Promise.resolve(e)},Du.prototype.getConfiguration=function(){return this.b},(n=Ou.prototype).createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new Lu(t,this.g,e),this.c.push(e),e},n.setServerCertificate=function(){return Promise.resolve(!1)},n.tf=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},n.Zf=function(e){var t=xu(this,e.sessionId);t&&(e=new Ae("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},n.Xf=function(e){(e=xu(this,e.sessionId))&&(Nu(e,"usable"),e.a&&e.a.resolve(),e.a=null)},n.Yf=function(e){var t=xu(this,e.sessionId);t&&t.handleError(e)},H(Lu,Te),(n=Lu.prototype).handleError=function(e){var t=Error("EME v0.1b key error");t.errorCode=e.errorCode,t.errorCode.systemCode=e.systemCode,!e.sessionId&&this.b?(t.method="generateRequest",45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(t.method="update",this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Nu(this,"output-restricted"):Nu(this,1==t?"expired":"internal-error"))},n.nd=function(e,t){if(this.a)this.a.then(this.nd.bind(this,e,t)).catch(this.nd.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=at(t),i=JSON.parse(n);"oct"!=i.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=pt(i.keys[0].k),i=pt(i.keys[0].kid)}else n=new Uint8Array(t),i=null;var r=Cu("addKey");try{this.f[r](this.c,n,i,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},n.generateRequest=function(e,t){return Mu(this,t,null)},n.load=function(e){return"persistent-license"==this.g?Mu(this,null,e):Promise.reject(Error("Not a persistent session."))},n.update=function(e){var t=new fe;return this.nd(t,e),t},n.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Cu("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},n.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(n=Uu.prototype).forEach=function(e){this.a&&e(this.a,wu)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=wu;return!(!this.a||!gt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Ql((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Su="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;wu=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Ru,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Iu,e.MediaKeys=Ou,e.MediaKeySystemAccess=Du}})),Ql((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Fu,document.exitPictureInPicture=ju,document.addEventListener("webkitpresentationmodechanged",Bu,!0))}})),Ql((function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),Ql((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Hu)}})),Ql((function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=Vu;else if(6==t)e.VTTCue=Ku;else{try{var n=!!Vu(1,2,"")}catch(e){n=!1}n&&(e.VTTCue=Vu)}}})),zu.prototype.parseInit=function(){},zu.prototype.parseMedia=function(e,t){var n=at(e),i=[],r=new DOMParser,a=null;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new pe(2,2,2005)}if(a){if(!(a=a.getElementsByTagName("tt")[0]))throw new pe(2,2,2005);var o=qi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=qi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),l=qi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),u=qi.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","tickRate");if(n=a.getAttribute("xml:space")||"default",r=a.getAttribute("tts:extent"),"default"!=n&&"preserve"!=n)throw new pe(2,2,2005);n="default"==n,o=new hc(o,s,l,u),s=nc(a.getElementsByTagName("metadata")[0]),l=nc(a.getElementsByTagName("styling")[0]),u=nc(a.getElementsByTagName("layout")[0]);for(var c=[],d=0;d<u.length;d++){var h,p,f=u[d],y=l,g=r,v=new hn,m=f.getAttribute("xml:id");m?(v.id=m,m=null,g&&(m=Gu.exec(g)||Yu.exec(g)),g=m?Number(m[1]):null,m=m?Number(m[2]):null,(h=sc(f,y,"extent"))&&null!=(h=(p=Gu.exec(h))||Yu.exec(h))&&(v.width=null!=g?100*Number(h[1])/g:Number(h[1]),v.height=null!=m?100*Number(h[2])/m:Number(h[2]),v.widthUnits=p||null!=g?pn:0,v.heightUnits=p||null!=m?pn:0),(f=sc(f,y,"origin"))&&null!=(h=(p=Gu.exec(f))||Yu.exec(f))&&(v.viewportAnchorX=null!=m?100*Number(h[1])/m:Number(h[1]),v.viewportAnchorY=null!=g?100*Number(h[2])/g:Number(h[2]),v.viewportAnchorUnits=p||null!=g?pn:0)):v=null,v&&c.push(v)}for(r=nc(a.getElementsByTagName("body")[0]),a=0;a<r.length;a++)(d=rc(r[a],t.periodStart,o,s,l,u,c,n))&&i.push(d)}return i};var Gu=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Wu=/^(\d+px|\d+em)$/,Yu=/^(\d+)px (\d+)px$/,$u=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,qu=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Xu=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Qu=/^(\d*(?:\.\d*)?)f$/,Zu=/^(\d*(?:\.\d*)?)t$/,Ju=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,ec={left:sn,center:"center",right:"end",start:sn,end:"end"},tc={left:"line-left",center:"center",right:"line-right"};function nc(e){var t=[];if(!e)return t;for(var n=e.childNodes,i=0;i<n.length;i++){var r="span"==n[i].nodeName&&"p"==e.nodeName;n[i].nodeType!=Node.ELEMENT_NODE||"br"==n[i].nodeName||r||(r=nc(n[i]),t=t.concat(r))}return t.length||t.push(e),t}function ic(e,t){for(var n=e.childNodes,i=0;i<n.length;i++)if("br"==n[i].nodeName&&0<i)n[i-1].textContent+="\n";else if(0<n[i].childNodes.length)ic(n[i],t);else if(t){var r=n[i].textContent.trim();r=r.replace(/\s+/g," "),n[i].textContent=r}}function rc(e,t,n,i,r,a,o,s){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent))return null;ic(e,s),s=cc(e.getAttribute("begin"),n);var l=cc(e.getAttribute("end"),n);n=cc(e.getAttribute("dur"),n);var u=e.textContent;if(null==l&&null!=n&&(l=s+n),null==s||null==l)throw new pe(2,2,2001);if(t=new Qt(s+t,l+t,u),(a=uc(e,"region",a,""))&&a.getAttribute("xml:id")){var c=a.getAttribute("xml:id");o=o.filter((function(e){return e.id==c})),t.region=o[0]}return function(e,t,n,i,r){"rtl"==oc(t,n,r,"direction")&&(e.direction="rtl");var a=oc(t,n,r,"writingMode");if("tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=rn),(a=oc(t,n,r,"textAlign"))&&(e.positionAlign=tc[a],e.lineAlign=ec[a],e.textAlign=en[a.toUpperCase()]),(a=oc(t,n,r,"displayAlign"))&&(e.displayAlign=nn[a.toUpperCase()]),(a=oc(t,n,r,"color"))&&(e.color=a),(a=oc(t,n,r,"backgroundColor"))&&(e.backgroundColor=a),(a=oc(t,n,r,"fontFamily"))&&(e.fontFamily=a),(a=oc(t,n,r,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=oc(t,n,r,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=oc(t,n,r,"lineHeight"))&&a.match(Wu)&&(e.lineHeight=a),(a=oc(t,n,r,"fontSize"))&&a.match(Wu)&&(e.fontSize=a),(a=oc(t,n,r,"fontStyle"))&&(e.fontStyle=dn[a.toUpperCase()]),i){a=i.getAttribute("imagetype");var o=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==a&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(n=sc(n,r,"textDecoration"))&&ac(e,n),(t=lc(t,r,"textDecoration"))&&ac(e,t)}(t,e,a,i=uc(e,"smpte:backgroundImage",i,"#"),r),t}function ac(e,t){for(var n=t.split(" "),i=0;i<n.length;i++)switch(n[i]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ce(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ce(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ce(e.textDecoration,"overline")}}function oc(e,t,n,i){return(e=lc(e,n,i))?e:sc(t,n,i)}function sc(e,t,n){for(var i=nc(e),r=0;r<i.length;r++){var a=qi.getAttributeNS(i[r],"http://www.w3.org/ns/ttml#styling",n);if(a)return a}return(e=uc(e,"style",t,""))?qi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function lc(e,t,n){return(e=uc(e,"style",t,""))?qi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function uc(e,t,n,i){if(!e||1>n.length)return null;var r=null,a=e;for(e=null;a&&!(e=a.getAttribute(t))&&(a=a.parentNode)instanceof Element;);if(t=e)for(e=0;e<n.length;e++)if(i+n[e].getAttribute("xml:id")==t){r=n[e];break}return r}function cc(e,t){var n=null;if($u.test(e)){n=$u.exec(e);var i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.b)/t.frameRate)+60*r+3600*i}else qu.test(e)?n=dc(qu,e):Xu.test(e)?n=dc(Xu,e):Qu.test(e)?(n=Qu.exec(e),n=Number(n[1])/t.frameRate):Zu.test(e)?(n=Zu.exec(e),n=Number(n[1])/t.a):Ju.test(e)&&(n=dc(Ju,e));return n}function dc(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function hc(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function pc(){this.a=new zu}function fc(){}function yc(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?Jt:en[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=ln[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=on,e.line=Number(n[1]),n[2]&&(e.lineAlign=ln[n[2].toUpperCase()]))}function gc(e){if(null==(e=Gr(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function vc(){this.a=null}function mc(e,t,n){var i,r,a;return(new Vi).H("payl",Gi((function(e){i=at(e)}))).H("iden",Gi((function(e){r=at(e)}))).H("sttg",Gi((function(e){a=at(e)}))).parse(e),i?function(e,t,n,i,r){if(e=new Qt(i,r,e),t&&(e.id=t),n)for(t=new Kr(n),n=Wr(t);n;)yc(e,n,[]),zr(t),n=Wr(t);return e}(i,r,a,t,n):null}gn["application/ttml+xml"]=zu,pc.prototype.parseInit=function(e){var t=!1;if((new Vi).H("moov",Ki).H("trak",Ki).H("mdia",Ki).H("minf",Ki).H("stbl",Ki).fa("stsd",zi).H("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new pe(2,2,2007)},pc.prototype.parseMedia=function(e,t){var n=!1,i=[];if((new Vi).H("mdat",Gi(function(e){n=!0,i=i.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new pe(2,2,2007);return i},gn['application/mp4; codecs="stpp"']=pc,gn['application/mp4; codecs="stpp.TTML.im1t"']=pc,fc.prototype.parseInit=function(){},fc.prototype.parseMedia=function(e,t){var n=at(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new pe(2,2,2e3);var i=t.segmentStart;if(null==i&&(i=0,n[0].includes("X-TIMESTAMP-MAP"))){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(i=gc(new Kr(r[1]))))throw new pe(2,2,2e3);i=t.periodStart+(Number(a[1])/9e4-i)}}a=[];var o=n[0].split("\n");for(r=1;r<o.length;r++)if(/^Region:/.test(o[r])){var s=new Kr(o[r]),l=new hn;Wr(s),zr(s);for(var u=Wr(s);u;){var c=l,d=u;(u=/^id=(.*)$/.exec(d))?c.id=u[1]:(u=/^width=(\d{1,2}|100)%$/.exec(d))?c.width=Number(u[1]):(u=/^lines=(\d+)$/.exec(d))?(c.height=Number(u[1]),c.heightUnits=2):(u=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.regionAnchorX=Number(u[1]),c.regionAnchorY=Number(u[2])):(u=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.viewportAnchorX=Number(u[1]),c.viewportAnchorY=Number(u[2])):/^scroll=up$/.exec(d)&&(c.scroll="up"),zr(s),u=Wr(s)}a.push(l)}for(r=[],s=1;s<n.length;s++){if(u=o=n[s].split("\n"),d=i,o=a,1==u.length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0])o=null;else{l=null,u[0].includes("--\x3e")||(l=u[0],u.splice(0,1));var h=gc(c=new Kr(u[0])),p=Gr(c,/[ \t]+--\x3e[ \t]+/g),f=gc(c);if(null==h||null==p||null==f)throw new pe(2,2,2001);for(u=new Qt(h+d,f+d,u.slice(1).join("\n").trim()),zr(c),d=Wr(c);d;)yc(u,d,o),zr(c),d=Wr(c);null!=l&&(u.id=l),o=u}o&&r.push(o)}return r},gn["text/vtt"]=fc,gn['text/vtt; codecs="vtt"']=fc,vc.prototype.parseInit=function(e){var t=!1;if((new Vi).H("moov",Ki).H("trak",Ki).H("mdia",Ki).fa("mdhd",function(e){0==e.version?(e.reader.L(4),e.reader.L(4),this.a=e.reader.F(),e.reader.L(4)):(e.reader.L(8),e.reader.L(8),this.a=e.reader.F(),e.reader.L(8)),e.reader.L(4)}.bind(this)).H("minf",Ki).H("stbl",Ki).fa("stsd",zi).H("wvtt",(function(){t=!0})).parse(e),!this.a)throw new pe(2,2,2008);if(!t)throw new pe(2,2,2008)},vc.prototype.parseMedia=function(e,t){var n=this;if(!this.a)throw new pe(2,2,2008);var i,r=0,a=[],o=[],s=!1,l=!1,u=!1,c=null;if((new Vi).H("moof",Ki).H("traf",Ki).fa("tfdt",(function(e){s=!0,r=0==e.version?e.reader.F():e.reader.yb()})).fa("tfhd",(function(e){var t=e.flags;(e=e.reader).L(4),1&t&&e.L(8),2&t&&e.L(4),c=8&t?e.F():null})).fa("trun",(function(e){l=!0;var t=e.version,n=e.flags,i=(e=e.reader).F();1&n&&e.L(4),4&n&&e.L(4);for(var r=[],o=0;o<i;o++){var s={duration:null,sampleSize:null,pd:null};256&n&&(s.duration=e.F()),512&n&&(s.sampleSize=e.F()),1024&n&&e.L(4),2048&n&&(s.pd=0==t?e.F():e.Xd()),r.push(s)}a=r})).H("mdat",Gi((function(e){u=!0,i=e}))).parse(e),!u&&!s&&!l)throw new pe(2,2,2008);var d=r,h=new Fi(new DataView(i.buffer,i.byteOffset,i.byteLength),0);return a.forEach((function(e){var i=e.duration||c,a=e.pd?r+e.pd:d;d=a+(i||0);var s=0;do{var l=h.F();s+=l;var u=null;"vttc"==Yi(h.F())?8<l&&(u=h.Xa(l-8)):h.L(l-8),i&&u&&o.push(mc(u,t.periodStart+a/n.a,t.periodStart+d/n.a))}while(e.sampleSize&&s<e.sampleSize)})),o.filter(zt.Ga)},gn['application/mp4; codecs="wvtt"']=vc,j("shaka.util.Dom.createHTMLElement",(function(e){return document.createElement(e)})),j("shaka.util.Dom.createVideoElement",(function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e})),j("shaka.util.Dom.asHTMLElement",(function(e){return e})),j("shaka.util.Dom.asHTMLMediaElement",(function(e){return e})),j("shaka.util.Dom.removeAllChildren",(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}.call(i,n,n),i.shaka)t[r]=i.shaka[r]}()}).call(this,n(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
    !*** (webpack)/buildin/global.js ***!
    \***********************************/
/*! no static exports found */function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./src/clappr-dash-shaka-playback.js":
/*!*******************************************!*\
    !*** ./src/clappr-dash-shaka-playback.js ***!
    \*******************************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(/*! clappr */"clappr"),s=n(/*! shaka-player */"./node_modules/shaka-player/dist/shaka-player.compiled.js"),l=(i=s)&&i.__esModule?i:{default:i};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e;u(this,t);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return a._levels=[],a._pendingAdaptationEvent=!1,a._isShakaReadyState=!1,a._minDvrSize=void 0===a.options.shakaMinimumDvrSize?60:a.options.shakaMinimumDvrSize,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return this.shakaPlayerInstance.getMediaElement().currentTime-this.seekRange.start}},{key:"name",get:function(){return"dash_shaka_playback"}},{key:"shakaVersion",get:function(){return l.default.player.Player.version}},{key:"shakaPlayerInstance",get:function(){return this._player}},{key:"levels",get:function(){return this._levels}},{key:"seekRange",get:function(){return this.shakaPlayerInstance.seekRange()}},{key:"currentLevel",set:function(e){var t=this;this._currentLevelId=e;var n=-1===this._currentLevelId;this.trigger(o.Events.PLAYBACK_LEVEL_SWITCH_START),n?(this._player.configure({abr:{enabled:!0}}),this.trigger(o.Events.PLAYBACK_LEVEL_SWITCH_END)):(this._player.configure({abr:{enabled:!1}}),this._pendingAdaptationEvent=!0,this.selectTrack(this.videoTracks.filter((function(e){return e.id===t._currentLevelId}))[0]))},get:function(){return this._currentLevelId||-1}},{key:"dvrEnabled",get:function(){return this._duration>=this._minDvrSize&&"live"===this.getPlaybackType()}},{key:"_duration",get:function(){return this.shakaPlayerInstance?this.seekRange.end-this.seekRange.start:0}},{key:"_startTime",get:function(){return this.seekRange.start}},{key:"presentationTimeline",get:function(){return this.shakaPlayerInstance.getManifest().presentationTimeline}},{key:"bandwidthEstimate",get:function(){if(this.shakaPlayerInstance)return this.shakaPlayerInstance.getStats().estimatedBandwidth}}],[{key:"canPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";l.default.polyfill.installAll();var n=l.default.Player.isBrowserSupported(),i=e.split("?")[0].match(/.*\.(.*)$/)||[];return n&&("mpd"===i[1]||t.indexOf("application/dash+xml")>-1)}},{key:"Events",get:function(){return{SHAKA_READY:"shaka:ready"}}},{key:"shakaPlayer",get:function(){return l.default}}]),a(t,[{key:"getProgramDateTime",value:function(){return new Date(1e3*(this.presentationTimeline.getPresentationStartTime()+this.seekRange.start))}},{key:"_updateDvr",value:function(e){this.trigger(o.Events.PLAYBACK_DVR,e),this.trigger(o.Events.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(o.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this._duration),this.dvrEnabled&&this._updateDvr(e<this._duration-3),e+=this._startTime,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"seek",this).call(this,e)}},{key:"pause",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this),this.dvrEnabled&&this._updateDvr(!0)}},{key:"play",value:function(){this._player||this._setup(),this.isReady?(this._stopped=!1,this._src=this.el.src,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this),this._startTimeUpdateTimer()):this.once(t.Events.SHAKA_READY,this.play)}},{key:"_onPlaying",value:function(){if(!this._isBuffering)return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onPlaying",this).call(this)}},{key:"_onSeeking",value:function(){return this._isSeeking=!0,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onSeeking",this).call(this)}},{key:"_onSeeked",value:function(){if(!this._isBuffering)return this._isSeeking=!1,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onSeeked",this).call(this)}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._stopTimeUpdateTimer(),this._timeUpdateTimer=setInterval((function(){e._onTimeUpdate()}),100)}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&clearInterval(this._timeUpdateTimer)}},{key:"_setupSrc",value:function(){}},{key:"_ready",value:function(){}},{key:"_onShakaReady",value:function(){this._isShakaReadyState=!0,this.trigger(t.Events.SHAKA_READY),this.trigger(o.Events.PLAYBACK_READY,this.name)}},{key:"error",value:function(e){o.Log.error("an error was raised by the video tag",e,this.el.error)}},{key:"isHighDefinitionInUse",value:function(){return!!this.highDefinition}},{key:"stop",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._stopped=!0,this._player?(this._sendStats(),this._player.unload().then((function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",e).call(e),e._player=null,e._isShakaReadyState=!1})).catch((function(){o.Log.error("shaka could not be unloaded")}))):r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this)}},{key:"getPlaybackType",value:function(){return(this.isReady&&this._player.isLive()?"live":"vod")||""}},{key:"selectTrack",value:function(e){if("text"===e.type)this._player.selectTextTrack(e);else{if("variant"!==e.type)throw new Error("Unhandled track type:",e.type);this._player.selectVariantTrack(e),e.mimeType.startsWith("video/")&&this._onAdaptation()}}},{key:"_enableShakaTextTrack",value:function(e){this.el.textTracks&&(this._shakaTTVisible=e,Array.from(this.el.textTracks).filter((function(e){return"subtitles"===e.kind})).forEach((function(t){return t.mode=!0===e?"showing":"hidden"})))}},{key:"_checkForClosedCaptions",value:function(){if(!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(o.Events.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e}this._ccIsSetup=!0}}},{key:"destroy",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._player?this._player.destroy().then((function(){return e._destroy()})).catch((function(){e._destroy(),o.Log.error("shaka could not be destroyed")})):this._destroy(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"_setup",value:function(){var e=this;this._isShakaReadyState=!1,this._ccIsSetup=!1,this._player=this._createPlayer(),this._options.shakaConfiguration&&this._player.configure(this._options.shakaConfiguration),this._options.shakaOnBeforeLoad&&this._options.shakaOnBeforeLoad(this._player),this._player.load(this._options.src).then((function(){return e._loaded()})).catch((function(t){return e._setupError(t)}))}},{key:"_createPlayer",value:function(){var e=new l.default.Player(this.el);return e.addEventListener("error",this._onError.bind(this)),e.addEventListener("adaptation",this._onAdaptation.bind(this)),e.addEventListener("buffering",this._handleShakaBufferingEvents.bind(this)),e}},{key:"_onTimeUpdate",value:function(){if(this.shakaPlayerInstance){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=e,this.trigger(o.Events.PLAYBACK_TIMEUPDATE,e,this.name))}}},{key:"_handleBufferingEvents",value:function(){}},{key:"_handleShakaBufferingEvents",value:function(e){this._stopped||(this._isBuffering=e.buffering,this._isBuffering?this._onBuffering():this._onBufferfull())}},{key:"_onBuffering",value:function(){this.trigger(o.Events.PLAYBACK_BUFFERING)}},{key:"_onBufferfull",value:function(){this.trigger(o.Events.PLAYBACK_BUFFERFULL),this._isSeeking&&this._onSeeked(),this.isPlaying()&&this._onPlaying()}},{key:"_loaded",value:function(){this._onShakaReady(),this._startToSendStats(),this._fillLevels(),this._checkForClosedCaptions()}},{key:"_fillLevels",value:function(){0===this._levels.length&&(this._levels=this.videoTracks.map((function(e){return{id:e.id,label:e.height+"p"}})).reverse(),this.trigger(o.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels))}},{key:"_startToSendStats",value:function(){var e=this,t=this._options.shakaSendStatsInterval||3e4;this.sendStatsId=setInterval((function(){return e._sendStats()}),t)}},{key:"_sendStats",value:function(){this.trigger(o.Events.PLAYBACK_STATS_ADD,this._player.getStats())}},{key:"_setupError",value:function(e){this._onError(e)}},{key:"_onError",value:function(e){var n={shakaError:e,videoError:this.el.error},i=n.shakaError.detail||n.shakaError,a=i.category,s=i.code,u=i.severity;if(n.videoError||!s&&!a)return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onError",this).call(this);var c={code:a+"_"+s,description:"Category: "+a+", code: "+s+", severity: "+u,level:u===l.default.util.Error.Severity.CRITICAL?o.PlayerError.Levels.FATAL:o.PlayerError.Levels.WARN,raw:e},d=this.createError(c);o.Log.error("Shaka error event:",d),this.trigger(o.Events.PLAYBACK_ERROR,d)}},{key:"_onAdaptation",value:function(){var e=this.videoTracks.filter((function(e){return!0===e.active}))[0];this._fillLevels(),this._sendStats(),this._pendingAdaptationEvent&&(this.trigger(o.Events.PLAYBACK_LEVEL_SWITCH_END),this._pendingAdaptationEvent=!1),o.Log.debug("an adaptation has happened:",e),this.highDefinition=e.height>=720,this.trigger(o.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(o.Events.PLAYBACK_BITRATE,{bandwidth:e.bandwidth,width:e.width,height:e.height,level:e.id,bitrate:e.videoBandwidth})}},{key:"_updateSettings",value:function(){"vod"===this.getPlaybackType()?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(o.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_destroy",value:function(){this._isShakaReadyState=!1,o.Log.debug("shaka was destroyed")}},{key:"isReady",get:function(){return this._isShakaReadyState}},{key:"textTracks",get:function(){return this.isReady&&this._player.getTextTracks()}},{key:"audioTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("audio/")}))}},{key:"videoTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("video/")}))}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.textTracks||[]).filter((function(e){return"subtitle"===e.kind})).map((function(t){return{id:e++,name:t.label||t.language,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"closedCaptionsTrackId",this)},set:function(e){if(this._player){var t=this.closedCaptionsTracks,n=void 0;if(-1!==e){if(!(n=t.find((function(t){return t.id===e}))))return void o.Log.warn('Track id "'+e+'" not found');if(this._shakaTTVisible&&!0===n.track.active)return void o.Log.info('Track id "'+e+'" already showing')}n?(this._player.selectTextTrack(n.track),this._player.setTextTrackVisibility(!0),this._enableShakaTextTrack(!0)):(this._player.setTextTrackVisibility(!1),this._enableShakaTextTrack(!1)),this._ccTrackId=e,this.trigger(o.Events.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}}]),t}(o.HTML5Video);t.default=d,e.exports=t.default},clappr:
/*!******************************************************************************************!*\
    !*** external {"amd":"clappr","commonjs":"clappr","commonjs2":"clappr","root":"Clappr"} ***!
    \******************************************************************************************/
/*! no static exports found */function(t,n){t.exports=e}})},e.exports=n(st)}))),jc='@font-face {\n  font-family: "opensans-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "opensans-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "proximanova-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "proximanova-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "proximanova-xbold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n.clappr-player#wp3-player-0 {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "lucida grande", tahoma, verdana, arial, sans-serif;\n  text-shadow: none;\n  box-sizing: border-box;\n  display: block;\n  max-width: none;\n  box-sizing: inherit;\n  float: none;\n  -webkit-tap-highlight-color: transparent; }\n  .clappr-player#wp3-player-0 div, .clappr-player#wp3-player-0 span, .clappr-player#wp3-player-0 applet, .clappr-player#wp3-player-0 object, .clappr-player#wp3-player-0 iframe,\n  .clappr-player#wp3-player-0 h1, .clappr-player#wp3-player-0 h2, .clappr-player#wp3-player-0 h3, .clappr-player#wp3-player-0 h4, .clappr-player#wp3-player-0 h5, .clappr-player#wp3-player-0 h6, .clappr-player#wp3-player-0 p, .clappr-player#wp3-player-0 blockquote, .clappr-player#wp3-player-0 pre,\n  .clappr-player#wp3-player-0 a, .clappr-player#wp3-player-0 abbr, .clappr-player#wp3-player-0 acronym, .clappr-player#wp3-player-0 address, .clappr-player#wp3-player-0 big, .clappr-player#wp3-player-0 cite, .clappr-player#wp3-player-0 code,\n  .clappr-player#wp3-player-0 del, .clappr-player#wp3-player-0 dfn, .clappr-player#wp3-player-0 em, .clappr-player#wp3-player-0 img, .clappr-player#wp3-player-0 ins, .clappr-player#wp3-player-0 kbd, .clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 s, .clappr-player#wp3-player-0 samp,\n  .clappr-player#wp3-player-0 small, .clappr-player#wp3-player-0 strike, .clappr-player#wp3-player-0 strong, .clappr-player#wp3-player-0 sub, .clappr-player#wp3-player-0 sup, .clappr-player#wp3-player-0 tt, .clappr-player#wp3-player-0 var,\n  .clappr-player#wp3-player-0 b, .clappr-player#wp3-player-0 u, .clappr-player#wp3-player-0 i, .clappr-player#wp3-player-0 center,\n  .clappr-player#wp3-player-0 dl, .clappr-player#wp3-player-0 dt, .clappr-player#wp3-player-0 dd, .clappr-player#wp3-player-0 ol, .clappr-player#wp3-player-0 ul, .clappr-player#wp3-player-0 li,\n  .clappr-player#wp3-player-0 fieldset, .clappr-player#wp3-player-0 form, .clappr-player#wp3-player-0 label, .clappr-player#wp3-player-0 legend,\n  .clappr-player#wp3-player-0 table, .clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 tbody, .clappr-player#wp3-player-0 tfoot, .clappr-player#wp3-player-0 thead, .clappr-player#wp3-player-0 tr, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td,\n  .clappr-player#wp3-player-0 article, .clappr-player#wp3-player-0 aside, .clappr-player#wp3-player-0 canvas, .clappr-player#wp3-player-0 details, .clappr-player#wp3-player-0 embed,\n  .clappr-player#wp3-player-0 figure, .clappr-player#wp3-player-0 figcaption, .clappr-player#wp3-player-0 footer, .clappr-player#wp3-player-0 header, .clappr-player#wp3-player-0 hgroup,\n  .clappr-player#wp3-player-0 menu, .clappr-player#wp3-player-0 nav, .clappr-player#wp3-player-0 output, .clappr-player#wp3-player-0 ruby, .clappr-player#wp3-player-0 section, .clappr-player#wp3-player-0 summary,\n  .clappr-player#wp3-player-0 time, .clappr-player#wp3-player-0 mark, .clappr-player#wp3-player-0 audio, .clappr-player#wp3-player-0 video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font: inherit;\n    font-size: 100%;\n    vertical-align: baseline; }\n  .clappr-player#wp3-player-0 table {\n    border-collapse: collapse;\n    border-spacing: 0; }\n  .clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td {\n    text-align: left;\n    font-weight: normal;\n    vertical-align: middle; }\n  .clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 blockquote {\n    quotes: none; }\n    .clappr-player#wp3-player-0 q:before, .clappr-player#wp3-player-0 q:after, .clappr-player#wp3-player-0 blockquote:before, .clappr-player#wp3-player-0 blockquote:after {\n      content: "";\n      content: none; }\n  .clappr-player#wp3-player-0 a img {\n    border: none; }\n  .clappr-player#wp3-player-0:focus {\n    outline: 0; }\n  .clappr-player#wp3-player-0.fullscreen {\n    width: 100% !important;\n    height: 100% !important; }\n  .clappr-player#wp3-player-0.nocursor {\n    cursor: none; }\n';ur(jc);var Hc=Mi(Mi(Mi(Mi({DFP:Xr,GloboMediaControl:va},{PlayButton:ma,TimeIndicator:_a,LiveIndicator:Oo,LiveButton:ro,Volume:uo,Seekbar:ho,FullscreenButton:ka,Settings:ds,BackButton:Ea,VideoInfo:ys,Share:wo,SkipRecap:Ra,SkipIntro:Ia,StartOver:to,QuickSeek:vo,QuickSeekHint:bo,ChromecastSenderIndicator:ws,MediaControlPlaceHolder:Ks}),{},{Pip:xo,TapToUnmute:Io,ErrorScreen:Ms,Chromecast:_s,ThumbPreview:ps,SeekTime:ca},xc),{},{Subtitle:El,Poster:nl,Spinner:rl,StreamSense:ll,Comscore:$s,WebmediaAPIHit:hl,Horizon:Dl,WaitingRoom:Yl,PlayerStats:zs,GloboYouBora:uu,GoogleAnalytics:Gl,BitrateCapping:Bu,Cuepoints:Gs,EPG:Js,ClickToPause:ra},Lc),{},{Overlay:Us}),Vc=[Fc,Bc,Uc],Kc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["play_button","time_indicator","live_indicator","live_button","volume","seekbar","seekbar_info","fullscreen_button","settings","back_button","video_info","share","skip_recap","skip_intro","start_over","quick_seek","quick_seek_hint","chromecast_sender_indicator","media_control_placeholder"],n=e.filter((function(e){return e&&-1===t.indexOf(e)}));return t.concat(n)},zc=kn.LocalStorage,Gc=kn.getHostname,Wc=kn.getHostAndPathName,Yc=window.WM&&window.WM.Settings||{},$c={limited:N.isFirefox&&N.isAndroid,preferredLevel:zc.load("selectedlevel",parseInt),changeFavicon:!1,mediacontrol:{plugins:Kc()},chromecast:{appId:function(){if(Yc.CastSenders){var e=Object.keys(Yc.CastSenders).find((function(e){return e===Gc()||e===Wc()}));return e&&Yc.CastSenders[e]}}()},preload:"none",hlsMinimumDvrSize:120,useDvrControls:!1,useBackgroundButton:!1,useHardwareVideoDecoder:!1,playback:{controls:!1,preload:"none",playInline:!0,recycleVideo:N.isMobile},gaAccount:null,gaTrackerName:null,allowLocation:!1,disableVideoTagContextMenu:!0,stretched:!1,maxQualityLevel:"max",playerExperiments:Yc.PlayerExperiments||{},allowRestrictedContent:Yc.allowRestrictedContent,videoInfo:{inlineEnabled:!1,fullscreenEnabled:!0},customStyle:jc,customErrors:Os};Object.values(Hc).forEach((function(e){return Le.registerPlugin(e)})),Vc.forEach((function(e){return Le.registerPlayback(e)}));var qc=kn.DOM.hasPlayerElement,Xc=kn.session,Qc=kn.getExperimentAlternative,Zc=window.WM&&window.WM.Settings||{},Jc=Zc&&Zc.Domains||[],ed=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(r,e);var n=c(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,r);var a=r.hasSourceMapped(i.source);a&&(i.source=a);var s=o(o({},$c),i);s.clapprStats={runEach:1e3,onReport:function(t){return e.onMetricsReceived(t)}},s.mediacontrol.plugins=Kc(s.mediaControl&&s.mediaControl.plugins),s.bitrateCappingDisabled=Zc.bitrateCapping&&Zc.bitrateCapping.disabled,s.stretched&&(s.width=s.stretchWidth||s.width,s.height=s.stretchHeight||s.height),r.overrideOptions(s),s.plugins&&(s.plugins.loadExternalPluginsFirst=!1),e=n.call(this,s);var l=Qc(e.options,"player-isolated-experiment-01");N.isAndroid&&"android_dvr"===l&&(N.preventUsingCookies=!0,e.options.overrides={getPlayerType:function(){return l}}),N.isiOS&&"ios_dvr"===l&&(N.preventUsingCookies=!0,e.options.overrides={getPlayerType:function(){return l}});var u=/hlsjs-live-sync-duration-count-(\d+)/,c=l.match(u)&&l.match(u)[1];return c&&(e.options.HLSJSConfiguration={liveSyncDurationCount:c}),e}return i(r,[{key:"eventsMapping",get:function(){return Object.assign(d(s(r.prototype),"eventsMapping",this),{onPipAdded:_n.PLAYER_PIP_ADDED,onPipDiscarded:_n.PLAYER_PIP_DISCARDED,onMasterAdded:_n.PLAYER_MASTER_ADDED,onMasterChanged:_n.PLAYER_MASTER_CHANGED,onPipToMaster:_n.PLAYER_PIPTOMASTER,onMediaControlShow:_n.PLAYER_MEDIACONTROL_SHOW,onMediaControlHide:_n.PLAYER_MEDIACONTROL_HIDE,onCanPlay:_n.PLAYER_CAN_PLAY,onBackButtonClicked:_n.BACK_BUTTON_CLICKED,onDrawerShow:_n.DID_SHOW_DRAWER,onDrawerHide:_n.DID_HIDE_DRAWER,onDrawerShowHint:_n.DID_SHOW_DRAWER_HINT,onDrawerHideHint:_n.DID_HIDE_DRAWER_HINT,onSubtitleChanged:_n.WM_SUBTITLE_CHANGED,onAudioChanged:_n.WM_AUDIO_CHANGED,onDidLoadCuepoints:_n.DID_LOAD_CUEPOINTS,onDidReachCuepoint:_n.DID_REACH_CUEPOINT})}},{key:"defaultOptions",get:function(){return $c}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}}],[{key:"version",get:function(){return"7.2.0"}},{key:"allVersions",get:function(){return{Player:"7.2.0",Clappr:ot,ShakaPlayer:ht.Player.version,HLSjs:dt.version}}}]),i(r,[{key:"onMetricsReceived",value:function(e){this.container.trigger(_n.WM_STATS_REPORTED,e)}},{key:"normalizeSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sources||(void 0===e.source?[]:["".concat(e.source)]);return 0===(t=t.map((function(e){return"".concat(e||"")}))).length?["no.op"]:t}},{key:"isUnsupportedBrowser",value:function(){return N.version<{chrome:41,firefox:38,ie:12,msie:12,safari:8}[N.name.toLowerCase()]}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.core.createError(e)}},{key:"_onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.level===Ee.Levels.FATAL){var t=o(o({},e),{},{videoSessionId:Xc.getVideoSessionId(this.options.playerId)});d(s(r.prototype),"_onError",this).call(this,t),this.options.onError&&this.options.onError(t),this.container&&(this.container.disableMediaControl(),this.container.stop(),this.container.destroy())}}},{key:"attachTo",value:function(e){d(s(r.prototype),"attachTo",this).call(this,e),this.validatePlayerEnvironment()}},{key:"validatePlayerEnvironment",value:function(){var e=this.playback&&"function"==typeof this.playback.onError,t=!r.isAllowedDomain(window.location.hostname)&&!r.isDevMode()&&e,n=this.isUnsupportedBrowser()&&e;t&&this.playback.onError(Error.NOT_ALLOWED_DOMAIN,{useCodePrefix:!1}),n&&this.playback.onError(Error.UNSUPPORTED_BROWSER,{useCodePrefix:!1})}},{key:"load",value:function(e){if(qc(this.element)){var t=r.hasSourceMapped(e)||e;d(s(r.prototype),"load",this).call(this,t),this.validatePlayerEnvironment()}}},{key:"configure",value:function(e){var t=r.hasSourceMapped(e.source);t&&(e.source=t),this.options.stretched&&(e.width||e.height)&&(e.width=this.options.stretchWidth||e.width,e.height=this.options.stretchHeight||e.height),this.hasSourceChanged(e)||(delete e.sources,delete e.source),e.env=Ot.get(e.env,e.httpOnly),r.overrideOptions(e,this.options),e.plugins&&(e.plugins.loadExternalPluginsFirst=!1),d(s(r.prototype),"configure",this).call(this,e),this.validatePlayerEnvironment()}},{key:"hasSourceChanged",value:function(e){var t=this.normalizeSources(this.options),n=this.normalizeSources(e);return t[0]!==n[0]}},{key:"_addEventListeners",value:function(){var e=this;d(s(r.prototype),"_addEventListeners",this).call(this),this.listenTo(this.core,_n.WM_PIP_ADDED,this.onPipAdded),this.listenTo(this.core,_n.WM_PIP_DISCARDED,this.onPipDiscarded),this.listenTo(this.core,_n.WM_MASTER_ADDED,this.onMasterAdded),this.listenTo(this.core,_n.WM_MASTER_CHANGED,this.onMasterChanged),this.listenTo(this.core,_n.BACK_BUTTON_CLICKED,this.onBackButtonClicked),this.listenTo(this.core.mediaControl,ye.MEDIACONTROL_SHOW,(function(){return e.trigger(_n.PLAYER_MEDIACONTROL_SHOW)})),this.listenTo(this.core.mediaControl,ye.MEDIACONTROL_HIDE,(function(){return e.trigger(_n.PLAYER_MEDIACONTROL_HIDE)})),this.listenTo(this.core,_n.DID_SHOW_DRAWER,this.onDrawerShow),this.listenTo(this.core,_n.DID_HIDE_DRAWER,this.onDrawerHide),this.listenTo(this.core,_n.DID_SHOW_DRAWER_HINT,this.onDrawerShowHint),this.listenTo(this.core,_n.DID_HIDE_DRAWER_HINT,this.onDrawerHideHint)}},{key:"_addContainerEventListeners",value:function(){d(s(r.prototype),"_addContainerEventListeners",this).call(this),this.listenTo(this.container,_n.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,_n.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,_n.DID_LOAD_CUEPOINTS,this.onDidLoadCuepoints),this.listenTo(this.container,_n.DID_REACH_CUEPOINT,this.onDidReachCuepoint),this.listenTo(this.container,_n.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.playback,_n.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.playback,_n.WM_PLAYBACK_CAN_PLAY,this.onCanPlay)}},{key:"onDrawerHide",value:function(){this.trigger(_n.DID_HIDE_DRAWER)}},{key:"onDrawerShow",value:function(){this.trigger(_n.DID_SHOW_DRAWER)}},{key:"onDrawerHideHint",value:function(){this.trigger(_n.DID_HIDE_DRAWER_HINT)}},{key:"onDrawerShowHint",value:function(){this.trigger(_n.DID_SHOW_DRAWER_HINT)}},{key:"onDidLoadCuepoints",value:function(e){this.trigger(_n.DID_LOAD_CUEPOINTS,e)}},{key:"onDidReachCuepoint",value:function(e){this.trigger(_n.DID_REACH_CUEPOINT,e)}},{key:"onSubtitleChanged",value:function(e){this.trigger(_n.WM_SUBTITLE_CHANGED,e)}},{key:"onAudioChanged",value:function(e){this.trigger(_n.WM_AUDIO_CHANGED,e)}},{key:"onBackButtonClicked",value:function(){this.trigger(_n.BACK_BUTTON_CLICKED)}},{key:"onCanPlay",value:function(){this.trigger(_n.PLAYER_CAN_PLAY)}},{key:"onPipAdded",value:function(){this.trigger(_n.PLAYER_PIP_ADDED)}},{key:"onPipDiscarded",value:function(){this.trigger(_n.PLAYER_PIP_DISCARDED)}},{key:"onMasterAdded",value:function(){this.trigger(_n.PLAYER_MASTER_ADDED)}},{key:"onMasterChanged",value:function(){this.trigger(_n.PLAYER_MASTER_CHANGED)}},{key:"onPipToMaster",value:function(){this.trigger(_n.PLAYER_PIPTOMASTER)}},{key:"onResourceReady",value:function(e){if(this.options.onAuthorized){var t=e&&e.selectedResource&&e.selectedResource.hashData;t&&this.options.onAuthorized(t)}}},{key:"version",value:function(){return r.version}},{key:"allVersions",value:function(){return r.allVersions}}],[{key:"overrideOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===e.chromeless&&t.chromeless&&(e.chromeless=t.chromeless),e.videoInfo&&(e.videoInfo=o(o({},$c.videoInfo),e.videoInfo));var n=e.chromecast||{},i=n.appId||$c.chromecast.appId;e.chromecast={enabled:n.enabled&&!N.isChromecast&&!!i,appId:i,enableBingeWatch:n.enableBingeWatch}}},{key:"hasSourceMapped",value:function(e){return N.isChrome&&Zc.sourceMapping&&Zc.sourceMapping[e]}}]),r}(xn);return N.supportsFakeLocation=/puffin/i.test(navigator.userAgent),N.supportsTouchEvents="ontouchstart"in window||navigator.maxTouchPoints>0,N.isHybridDevice=N.supportsTouchEvents&&!N.isMobile,ed.isDevMode=function(){return"development"===process.env.NODE_ENV},ed.isAllowedDomain=function(e){return!Zc.Domains||Jc.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||Clappr,window.$=window.$||$,e.DrawerBottom=Hs,e.Environment=Ot,e.Errors=Os,e.Events=_n,e.MediaControlPlugin=yr,e.Playbacks=Vc,e.Player=ed,e.Plugins=Hc,e.Styler=An,e.mergeMediaControlPlugins=Kc,e.playerStyle=jc,e}({});
//# sourceMappingURL=player.min.js.map
